System.register(["proxy-compare"],function(z){"use strict";var A,T;return{setters:[function(j){A=j.markToTrack,T=j.getUntracked}],execute:function(){z({getVersion:_,proxy:U,ref:B,snapshot:V,subscribe:q});const j=c=>typeof c=="object"&&c!==null,b=new WeakMap,k=new WeakSet,D=(c=Object.is,i=(r,s)=>new Proxy(r,s),v=r=>j(r)&&!k.has(r)&&(Array.isArray(r)||!(Symbol.iterator in r))&&!(r instanceof WeakMap)&&!(r instanceof WeakSet)&&!(r instanceof Error)&&!(r instanceof Number)&&!(r instanceof Date)&&!(r instanceof String)&&!(r instanceof RegExp)&&!(r instanceof ArrayBuffer),O=r=>{switch(r.status){case"fulfilled":return r.value;case"rejected":throw r.reason;default:throw r}},l=new WeakMap,p=(r,s,E=O)=>{const d=l.get(r);if((d==null?void 0:d[0])===s)return d[1];const a=Array.isArray(r)?[]:Object.create(Object.getPrototypeOf(r));return A(a,!0),l.set(r,[s,a]),Reflect.ownKeys(r).forEach(g=>{if(Object.getOwnPropertyDescriptor(a,g))return;const f=Reflect.get(r,g),P={value:f,enumerable:!0};k.has(f)?A(f,!1):f instanceof Promise?(delete P.value,P.get=()=>E(f)):b.has(f)&&(P.value=V(f,E)),Object.defineProperty(a,g,P)}),a},w=new WeakMap,u=[1,1],x=function r(s){if(!j(s))throw new Error("object required");const E=w.get(s);if(E)return E;let d=u[0];const a=new Set,g=(n,t=++u[0])=>{d!==t&&(d=t,a.forEach(e=>e(n,t)))};let f=u[1];const P=(n=++u[1])=>(f!==n&&!a.size&&(f=n,y.forEach(([t])=>{const e=t[1](n);e>d&&(d=e)})),d),F=n=>(t,e)=>{const o=[...t];o[1]=[n,...o[1]],g(o,e)},y=new Map,L=(n,t)=>{if(a.size){const e=t[3](F(n));y.set(n,[t,e])}else y.set(n,[t])},K=n=>{var t;const e=y.get(n);e&&(y.delete(n),(t=e[1])==null||t.call(e))},C=n=>(a.add(n),a.size===1&&y.forEach(([t,e],o)=>{const M=t[3](F(o));y.set(o,[t,M])}),()=>{a.delete(n),a.size===0&&y.forEach(([t,e],o)=>{e&&(e(),y.set(o,[t]))})}),W=Array.isArray(s)?[]:Object.create(Object.getPrototypeOf(s)),R=i(W,{deleteProperty(n,t){const e=Reflect.get(n,t);K(t);const o=Reflect.deleteProperty(n,t);return o&&g(["delete",[t],e]),o},set(n,t,e,o){const M=Reflect.has(n,t),S=Reflect.get(n,t,o);if(M&&(c(S,e)||w.has(e)&&c(S,w.get(e))))return!0;K(t),j(e)&&(e=T(e)||e);let m=e;if(e instanceof Promise)e.then(h=>{e.status="fulfilled",e.value=h,g(["resolve",[t],h])}).catch(h=>{e.status="rejected",e.reason=h,g(["reject",[t],h])});else{!b.has(e)&&v(e)&&(m=r(e));const h=!k.has(m)&&b.get(m);h&&L(t,h)}return Reflect.set(n,t,m,o),g(["set",[t],e,S]),!0}});w.set(s,R);const G=[W,P,p,C];return b.set(R,G),Reflect.ownKeys(s).forEach(n=>{const t=Object.getOwnPropertyDescriptor(s,n),e="value"in t;delete t.value,Object.defineProperty(W,n,t),e&&(R[n]=s[n])}),R})=>[x,b,k,c,i,v,O,l,p,w,u],[N]=D();function U(c={}){return N(c)}function _(c){const i=b.get(c);return i==null?void 0:i[1]()}function q(c,i,v){const O=b.get(c);let l;const p=[],w=O[3];let u=!1;const x=w(r=>{if(p.push(r),v){i(p.splice(0));return}l||(l=Promise.resolve().then(()=>{l=void 0,u&&i(p.splice(0))}))});return u=!0,()=>{u=!1,x()}}function V(c,i){const v=b.get(c),[O,l,p]=v;return p(O,l(),i)}function B(c){return k.add(c),c}const H=z("unstable_buildProxyFunction",D)}}});
