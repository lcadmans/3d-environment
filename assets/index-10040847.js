var bO=Object.defineProperty;var AO=(t,e,n)=>e in t?bO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var st=(t,e,n)=>(AO(t,typeof e!="symbol"?e+"":e,n),n);function MO(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ev(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ge={},EO={get exports(){return ge},set exports(t){ge=t}},Cv={},R={},CO={get exports(){return R},set exports(t){R=t}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cp=Symbol.for("react.element"),TO=Symbol.for("react.portal"),RO=Symbol.for("react.fragment"),PO=Symbol.for("react.strict_mode"),BO=Symbol.for("react.profiler"),IO=Symbol.for("react.provider"),DO=Symbol.for("react.context"),LO=Symbol.for("react.forward_ref"),kO=Symbol.for("react.suspense"),FO=Symbol.for("react.memo"),OO=Symbol.for("react.lazy"),B2=Symbol.iterator;function UO(t){return t===null||typeof t!="object"?null:(t=B2&&t[B2]||t["@@iterator"],typeof t=="function"?t:null)}var GR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HR=Object.assign,VR={};function Bf(t,e,n){this.props=t,this.context=e,this.refs=VR,this.updater=n||GR}Bf.prototype.isReactComponent={};Bf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function WR(){}WR.prototype=Bf.prototype;function DS(t,e,n){this.props=t,this.context=e,this.refs=VR,this.updater=n||GR}var LS=DS.prototype=new WR;LS.constructor=DS;HR(LS,Bf.prototype);LS.isPureReactComponent=!0;var I2=Array.isArray,jR=Object.prototype.hasOwnProperty,kS={current:null},$R={key:!0,ref:!0,__self:!0,__source:!0};function JR(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)jR.call(e,r)&&!$R.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:cp,type:t,key:s,ref:o,props:i,_owner:kS.current}}function NO(t,e){return{$$typeof:cp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function FS(t){return typeof t=="object"&&t!==null&&t.$$typeof===cp}function zO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var D2=/\/+/g;function m1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zO(""+t.key):e.toString(36)}function i0(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cp:case TO:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+m1(o,0):r,I2(i)?(n="",t!=null&&(n=t.replace(D2,"$&/")+"/"),i0(i,e,n,"",function(u){return u})):i!=null&&(FS(i)&&(i=NO(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(D2,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",I2(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+m1(s,a);o+=i0(s,e,n,l,i)}else if(l=UO(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+m1(s,a++),o+=i0(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Um(t,e,n){if(t==null)return t;var r=[],i=0;return i0(t,r,"","",function(s){return e.call(n,s,i++)}),r}function GO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ci={current:null},s0={transition:null},HO={ReactCurrentDispatcher:ci,ReactCurrentBatchConfig:s0,ReactCurrentOwner:kS};Nt.Children={map:Um,forEach:function(t,e,n){Um(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Um(t,function(){e++}),e},toArray:function(t){return Um(t,function(e){return e})||[]},only:function(t){if(!FS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Nt.Component=Bf;Nt.Fragment=RO;Nt.Profiler=BO;Nt.PureComponent=DS;Nt.StrictMode=PO;Nt.Suspense=kO;Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HO;Nt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=HR({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=kS.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)jR.call(e,l)&&!$R.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:cp,type:t.type,key:i,ref:s,props:r,_owner:o}};Nt.createContext=function(t){return t={$$typeof:DO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:IO,_context:t},t.Consumer=t};Nt.createElement=JR;Nt.createFactory=function(t){var e=JR.bind(null,t);return e.type=t,e};Nt.createRef=function(){return{current:null}};Nt.forwardRef=function(t){return{$$typeof:LO,render:t}};Nt.isValidElement=FS;Nt.lazy=function(t){return{$$typeof:OO,_payload:{_status:-1,_result:t},_init:GO}};Nt.memo=function(t,e){return{$$typeof:FO,type:t,compare:e===void 0?null:e}};Nt.startTransition=function(t){var e=s0.transition;s0.transition={};try{t()}finally{s0.transition=e}};Nt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Nt.useCallback=function(t,e){return ci.current.useCallback(t,e)};Nt.useContext=function(t){return ci.current.useContext(t)};Nt.useDebugValue=function(){};Nt.useDeferredValue=function(t){return ci.current.useDeferredValue(t)};Nt.useEffect=function(t,e){return ci.current.useEffect(t,e)};Nt.useId=function(){return ci.current.useId()};Nt.useImperativeHandle=function(t,e,n){return ci.current.useImperativeHandle(t,e,n)};Nt.useInsertionEffect=function(t,e){return ci.current.useInsertionEffect(t,e)};Nt.useLayoutEffect=function(t,e){return ci.current.useLayoutEffect(t,e)};Nt.useMemo=function(t,e){return ci.current.useMemo(t,e)};Nt.useReducer=function(t,e,n){return ci.current.useReducer(t,e,n)};Nt.useRef=function(t){return ci.current.useRef(t)};Nt.useState=function(t){return ci.current.useState(t)};Nt.useSyncExternalStore=function(t,e,n){return ci.current.useSyncExternalStore(t,e,n)};Nt.useTransition=function(){return ci.current.useTransition()};Nt.version="18.2.0";(function(t){t.exports=Nt})(CO);const ee=Ev(R),VO=MO({__proto__:null,default:ee},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WO=R,jO=Symbol.for("react.element"),$O=Symbol.for("react.fragment"),JO=Object.prototype.hasOwnProperty,XO=WO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KO={key:!0,ref:!0,__self:!0,__source:!0};function XR(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)JO.call(e,r)&&!KO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:jO,type:t,key:s,ref:o,props:i,_owner:XO.current}}Cv.Fragment=$O;Cv.jsx=XR;Cv.jsxs=XR;(function(t){t.exports=Cv})(EO);var a_={},P0={},YO={get exports(){return P0},set exports(t){P0=t}},Wi={},l_={},QO={get exports(){return l_},set exports(t){l_=t}},KR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,z){var j=F.length;F.push(z);e:for(;0<j;){var H=j-1>>>1,G=F[H];if(0<i(G,z))F[H]=z,F[j]=G,j=H;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var z=F[0],j=F.pop();if(j!==z){F[0]=j;e:for(var H=0,G=F.length,Z=G>>>1;H<Z;){var re=2*(H+1)-1,se=F[re],Y=re+1,ae=F[Y];if(0>i(se,j))Y<G&&0>i(ae,se)?(F[H]=ae,F[Y]=j,H=Y):(F[H]=se,F[re]=j,H=re);else if(Y<G&&0>i(ae,j))F[H]=ae,F[Y]=j,H=Y;else break e}}return z}function i(F,z){var j=F.sortIndex-z.sortIndex;return j!==0?j:F.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,h=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=F)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(u)}}function b(F){if(v=!1,w(F),!g)if(n(l)!==null)g=!0,Q(E);else{var z=n(u);z!==null&&ie(b,z.startTime-F)}}function E(F,z){g=!1,v&&(v=!1,_(M),M=-1),m=!0;var j=h;try{for(w(z),f=n(l);f!==null&&(!(f.expirationTime>z)||F&&!k());){var H=f.callback;if(typeof H=="function"){f.callback=null,h=f.priorityLevel;var G=H(f.expirationTime<=z);z=t.unstable_now(),typeof G=="function"?f.callback=G:f===n(l)&&r(l),w(z)}else r(l);f=n(l)}if(f!==null)var Z=!0;else{var re=n(u);re!==null&&ie(b,re.startTime-z),Z=!1}return Z}finally{f=null,h=j,m=!1}}var C=!1,P=null,M=-1,B=5,D=-1;function k(){return!(t.unstable_now()-D<B)}function O(){if(P!==null){var F=t.unstable_now();D=F;var z=!0;try{z=P(!0,F)}finally{z?U():(C=!1,P=null)}}else C=!1}var U;if(typeof x=="function")U=function(){x(O)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,$=N.port2;N.port1.onmessage=O,U=function(){$.postMessage(null)}}else U=function(){y(O,0)};function Q(F){P=F,C||(C=!0,U())}function ie(F,z){M=y(function(){F(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,Q(E))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var j=h;h=z;try{return F()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,z){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var j=h;h=F;try{return z()}finally{h=j}},t.unstable_scheduleCallback=function(F,z,j){var H=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?H+j:H):j=H,F){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=j+G,F={id:c++,callback:z,priorityLevel:F,startTime:j,expirationTime:G,sortIndex:-1},j>H?(F.sortIndex=j,e(u,F),n(l)===null&&F===n(u)&&(v?(_(M),M=-1):v=!0,ie(b,j-H))):(F.sortIndex=G,e(l,F),g||m||(g=!0,Q(E))),F},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(F){var z=h;return function(){var j=h;h=z;try{return F.apply(this,arguments)}finally{h=j}}}})(KR);(function(t){t.exports=KR})(QO);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YR=R,Hi=l_;function He(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QR=new Set,Eh={};function Iu(t,e){ff(t,e),ff(t+"Capture",e)}function ff(t,e){for(Eh[t]=e,t=0;t<e.length;t++)QR.add(e[t])}var Qo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u_=Object.prototype.hasOwnProperty,qO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,L2={},k2={};function ZO(t){return u_.call(k2,t)?!0:u_.call(L2,t)?!1:qO.test(t)?k2[t]=!0:(L2[t]=!0,!1)}function e4(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function t4(t,e,n,r){if(e===null||typeof e>"u"||e4(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fi(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mr[t]=new fi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mr[e]=new fi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mr[t]=new fi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mr[t]=new fi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mr[t]=new fi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mr[t]=new fi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mr[t]=new fi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mr[t]=new fi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mr[t]=new fi(t,5,!1,t.toLowerCase(),null,!1,!1)});var OS=/[\-:]([a-z])/g;function US(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(OS,US);Mr[e]=new fi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(OS,US);Mr[e]=new fi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(OS,US);Mr[e]=new fi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mr[t]=new fi(t,1,!1,t.toLowerCase(),null,!1,!1)});Mr.xlinkHref=new fi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mr[t]=new fi(t,1,!1,t.toLowerCase(),null,!0,!0)});function NS(t,e,n,r){var i=Mr.hasOwnProperty(e)?Mr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(t4(e,n,i,r)&&(n=null),r||i===null?ZO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sa=YR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nm=Symbol.for("react.element"),Lc=Symbol.for("react.portal"),kc=Symbol.for("react.fragment"),zS=Symbol.for("react.strict_mode"),c_=Symbol.for("react.profiler"),qR=Symbol.for("react.provider"),ZR=Symbol.for("react.context"),GS=Symbol.for("react.forward_ref"),f_=Symbol.for("react.suspense"),d_=Symbol.for("react.suspense_list"),HS=Symbol.for("react.memo"),Ia=Symbol.for("react.lazy"),eP=Symbol.for("react.offscreen"),F2=Symbol.iterator;function xd(t){return t===null||typeof t!="object"?null:(t=F2&&t[F2]||t["@@iterator"],typeof t=="function"?t:null)}var kn=Object.assign,g1;function Qd(t){if(g1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);g1=e&&e[1]||""}return`
`+g1+t}var v1=!1;function y1(t,e){if(!t||v1)return"";v1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{v1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qd(t):""}function n4(t){switch(t.tag){case 5:return Qd(t.type);case 16:return Qd("Lazy");case 13:return Qd("Suspense");case 19:return Qd("SuspenseList");case 0:case 2:case 15:return t=y1(t.type,!1),t;case 11:return t=y1(t.type.render,!1),t;case 1:return t=y1(t.type,!0),t;default:return""}}function h_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kc:return"Fragment";case Lc:return"Portal";case c_:return"Profiler";case zS:return"StrictMode";case f_:return"Suspense";case d_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ZR:return(t.displayName||"Context")+".Consumer";case qR:return(t._context.displayName||"Context")+".Provider";case GS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case HS:return e=t.displayName||null,e!==null?e:h_(t.type)||"Memo";case Ia:e=t._payload,t=t._init;try{return h_(t(e))}catch{}}return null}function r4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return h_(e);case 8:return e===zS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function el(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function i4(t){var e=tP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zm(t){t._valueTracker||(t._valueTracker=i4(t))}function nP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function B0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function p_(t,e){var n=e.checked;return kn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function O2(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=el(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rP(t,e){e=e.checked,e!=null&&NS(t,"checked",e,!1)}function m_(t,e){rP(t,e);var n=el(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?g_(t,e.type,n):e.hasOwnProperty("defaultValue")&&g_(t,e.type,el(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function U2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function g_(t,e,n){(e!=="number"||B0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qd=Array.isArray;function qc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+el(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function v_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(He(91));return kn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function N2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(He(92));if(qd(n)){if(1<n.length)throw Error(He(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:el(n)}}function iP(t,e){var n=el(e.value),r=el(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function z2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function y_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gm,oP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gm=Gm||document.createElement("div"),Gm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ch(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var sh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},s4=["Webkit","ms","Moz","O"];Object.keys(sh).forEach(function(t){s4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sh[e]=sh[t]})});function aP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||sh.hasOwnProperty(t)&&sh[t]?(""+e).trim():e+"px"}function lP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=aP(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var o4=kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function x_(t,e){if(e){if(o4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(He(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(He(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(He(61))}if(e.style!=null&&typeof e.style!="object")throw Error(He(62))}}function __(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w_=null;function VS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var S_=null,Zc=null,ef=null;function G2(t){if(t=hp(t)){if(typeof S_!="function")throw Error(He(280));var e=t.stateNode;e&&(e=Iv(e),S_(t.stateNode,t.type,e))}}function uP(t){Zc?ef?ef.push(t):ef=[t]:Zc=t}function cP(){if(Zc){var t=Zc,e=ef;if(ef=Zc=null,G2(t),e)for(t=0;t<e.length;t++)G2(e[t])}}function fP(t,e){return t(e)}function dP(){}var x1=!1;function hP(t,e,n){if(x1)return t(e,n);x1=!0;try{return fP(t,e,n)}finally{x1=!1,(Zc!==null||ef!==null)&&(dP(),cP())}}function Th(t,e){var n=t.stateNode;if(n===null)return null;var r=Iv(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(He(231,e,typeof n));return n}var b_=!1;if(Qo)try{var _d={};Object.defineProperty(_d,"passive",{get:function(){b_=!0}}),window.addEventListener("test",_d,_d),window.removeEventListener("test",_d,_d)}catch{b_=!1}function a4(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var oh=!1,I0=null,D0=!1,A_=null,l4={onError:function(t){oh=!0,I0=t}};function u4(t,e,n,r,i,s,o,a,l){oh=!1,I0=null,a4.apply(l4,arguments)}function c4(t,e,n,r,i,s,o,a,l){if(u4.apply(this,arguments),oh){if(oh){var u=I0;oh=!1,I0=null}else throw Error(He(198));D0||(D0=!0,A_=u)}}function Du(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function H2(t){if(Du(t)!==t)throw Error(He(188))}function f4(t){var e=t.alternate;if(!e){if(e=Du(t),e===null)throw Error(He(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return H2(i),t;if(s===r)return H2(i),e;s=s.sibling}throw Error(He(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(He(189))}}if(n.alternate!==r)throw Error(He(190))}if(n.tag!==3)throw Error(He(188));return n.stateNode.current===n?t:e}function mP(t){return t=f4(t),t!==null?gP(t):null}function gP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gP(t);if(e!==null)return e;t=t.sibling}return null}var vP=Hi.unstable_scheduleCallback,V2=Hi.unstable_cancelCallback,d4=Hi.unstable_shouldYield,h4=Hi.unstable_requestPaint,$n=Hi.unstable_now,p4=Hi.unstable_getCurrentPriorityLevel,WS=Hi.unstable_ImmediatePriority,yP=Hi.unstable_UserBlockingPriority,L0=Hi.unstable_NormalPriority,m4=Hi.unstable_LowPriority,xP=Hi.unstable_IdlePriority,Tv=null,co=null;function g4(t){if(co&&typeof co.onCommitFiberRoot=="function")try{co.onCommitFiberRoot(Tv,t,void 0,(t.current.flags&128)===128)}catch{}}var Fs=Math.clz32?Math.clz32:x4,v4=Math.log,y4=Math.LN2;function x4(t){return t>>>=0,t===0?32:31-(v4(t)/y4|0)|0}var Hm=64,Vm=4194304;function Zd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function k0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Zd(a):(s&=o,s!==0&&(r=Zd(s)))}else o=n&~i,o!==0?r=Zd(o):s!==0&&(r=Zd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fs(e),i=1<<n,r|=t[n],e&=~i;return r}function _4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Fs(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=_4(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function M_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _P(){var t=Hm;return Hm<<=1,!(Hm&4194240)&&(Hm=64),t}function _1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fs(e),t[e]=n}function S4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Fs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function jS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var nn=0;function wP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var SP,$S,bP,AP,MP,E_=!1,Wm=[],Wa=null,ja=null,$a=null,Rh=new Map,Ph=new Map,Fa=[],b4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function W2(t,e){switch(t){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":$a=null;break;case"pointerover":case"pointerout":Rh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ph.delete(e.pointerId)}}function wd(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=hp(e),e!==null&&$S(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function A4(t,e,n,r,i){switch(e){case"focusin":return Wa=wd(Wa,t,e,n,r,i),!0;case"dragenter":return ja=wd(ja,t,e,n,r,i),!0;case"mouseover":return $a=wd($a,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rh.set(s,wd(Rh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ph.set(s,wd(Ph.get(s)||null,t,e,n,r,i)),!0}return!1}function EP(t){var e=Xl(t.target);if(e!==null){var n=Du(e);if(n!==null){if(e=n.tag,e===13){if(e=pP(n),e!==null){t.blockedOn=e,MP(t.priority,function(){bP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function o0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=C_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);w_=r,n.target.dispatchEvent(r),w_=null}else return e=hp(n),e!==null&&$S(e),t.blockedOn=n,!1;e.shift()}return!0}function j2(t,e,n){o0(t)&&n.delete(e)}function M4(){E_=!1,Wa!==null&&o0(Wa)&&(Wa=null),ja!==null&&o0(ja)&&(ja=null),$a!==null&&o0($a)&&($a=null),Rh.forEach(j2),Ph.forEach(j2)}function Sd(t,e){t.blockedOn===e&&(t.blockedOn=null,E_||(E_=!0,Hi.unstable_scheduleCallback(Hi.unstable_NormalPriority,M4)))}function Bh(t){function e(i){return Sd(i,t)}if(0<Wm.length){Sd(Wm[0],t);for(var n=1;n<Wm.length;n++){var r=Wm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wa!==null&&Sd(Wa,t),ja!==null&&Sd(ja,t),$a!==null&&Sd($a,t),Rh.forEach(e),Ph.forEach(e),n=0;n<Fa.length;n++)r=Fa[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fa.length&&(n=Fa[0],n.blockedOn===null);)EP(n),n.blockedOn===null&&Fa.shift()}var tf=sa.ReactCurrentBatchConfig,F0=!0;function E4(t,e,n,r){var i=nn,s=tf.transition;tf.transition=null;try{nn=1,JS(t,e,n,r)}finally{nn=i,tf.transition=s}}function C4(t,e,n,r){var i=nn,s=tf.transition;tf.transition=null;try{nn=4,JS(t,e,n,r)}finally{nn=i,tf.transition=s}}function JS(t,e,n,r){if(F0){var i=C_(t,e,n,r);if(i===null)P1(t,e,r,O0,n),W2(t,r);else if(A4(i,t,e,n,r))r.stopPropagation();else if(W2(t,r),e&4&&-1<b4.indexOf(t)){for(;i!==null;){var s=hp(i);if(s!==null&&SP(s),s=C_(t,e,n,r),s===null&&P1(t,e,r,O0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else P1(t,e,r,null,n)}}var O0=null;function C_(t,e,n,r){if(O0=null,t=VS(r),t=Xl(t),t!==null)if(e=Du(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return O0=t,null}function CP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p4()){case WS:return 1;case yP:return 4;case L0:case m4:return 16;case xP:return 536870912;default:return 16}default:return 16}}var Ua=null,XS=null,a0=null;function TP(){if(a0)return a0;var t,e=XS,n=e.length,r,i="value"in Ua?Ua.value:Ua.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return a0=i.slice(t,1<r?1-r:void 0)}function l0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jm(){return!0}function $2(){return!1}function ji(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jm:$2,this.isPropagationStopped=$2,this}return kn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jm)},persist:function(){},isPersistent:jm}),e}var If={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},KS=ji(If),dp=kn({},If,{view:0,detail:0}),T4=ji(dp),w1,S1,bd,Rv=kn({},dp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:YS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bd&&(bd&&t.type==="mousemove"?(w1=t.screenX-bd.screenX,S1=t.screenY-bd.screenY):S1=w1=0,bd=t),w1)},movementY:function(t){return"movementY"in t?t.movementY:S1}}),J2=ji(Rv),R4=kn({},Rv,{dataTransfer:0}),P4=ji(R4),B4=kn({},dp,{relatedTarget:0}),b1=ji(B4),I4=kn({},If,{animationName:0,elapsedTime:0,pseudoElement:0}),D4=ji(I4),L4=kn({},If,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),k4=ji(L4),F4=kn({},If,{data:0}),X2=ji(F4),O4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=N4[t])?!!e[t]:!1}function YS(){return z4}var G4=kn({},dp,{key:function(t){if(t.key){var e=O4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=l0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?U4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:YS,charCode:function(t){return t.type==="keypress"?l0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?l0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),H4=ji(G4),V4=kn({},Rv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K2=ji(V4),W4=kn({},dp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:YS}),j4=ji(W4),$4=kn({},If,{propertyName:0,elapsedTime:0,pseudoElement:0}),J4=ji($4),X4=kn({},Rv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K4=ji(X4),Y4=[9,13,27,32],QS=Qo&&"CompositionEvent"in window,ah=null;Qo&&"documentMode"in document&&(ah=document.documentMode);var Q4=Qo&&"TextEvent"in window&&!ah,RP=Qo&&(!QS||ah&&8<ah&&11>=ah),Y2=String.fromCharCode(32),Q2=!1;function PP(t,e){switch(t){case"keyup":return Y4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fc=!1;function q4(t,e){switch(t){case"compositionend":return BP(e);case"keypress":return e.which!==32?null:(Q2=!0,Y2);case"textInput":return t=e.data,t===Y2&&Q2?null:t;default:return null}}function Z4(t,e){if(Fc)return t==="compositionend"||!QS&&PP(t,e)?(t=TP(),a0=XS=Ua=null,Fc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return RP&&e.locale!=="ko"?null:e.data;default:return null}}var eU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eU[t.type]:e==="textarea"}function IP(t,e,n,r){uP(r),e=U0(e,"onChange"),0<e.length&&(n=new KS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var lh=null,Ih=null;function tU(t){VP(t,0)}function Pv(t){var e=Nc(t);if(nP(e))return t}function nU(t,e){if(t==="change")return e}var DP=!1;if(Qo){var A1;if(Qo){var M1="oninput"in document;if(!M1){var Z2=document.createElement("div");Z2.setAttribute("oninput","return;"),M1=typeof Z2.oninput=="function"}A1=M1}else A1=!1;DP=A1&&(!document.documentMode||9<document.documentMode)}function eE(){lh&&(lh.detachEvent("onpropertychange",LP),Ih=lh=null)}function LP(t){if(t.propertyName==="value"&&Pv(Ih)){var e=[];IP(e,Ih,t,VS(t)),hP(tU,e)}}function rU(t,e,n){t==="focusin"?(eE(),lh=e,Ih=n,lh.attachEvent("onpropertychange",LP)):t==="focusout"&&eE()}function iU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pv(Ih)}function sU(t,e){if(t==="click")return Pv(e)}function oU(t,e){if(t==="input"||t==="change")return Pv(e)}function aU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zs=typeof Object.is=="function"?Object.is:aU;function Dh(t,e){if(zs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!u_.call(e,i)||!zs(t[i],e[i]))return!1}return!0}function tE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nE(t,e){var n=tE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tE(n)}}function kP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FP(){for(var t=window,e=B0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=B0(t.document)}return e}function qS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lU(t){var e=FP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kP(n.ownerDocument.documentElement,n)){if(r!==null&&qS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=nE(n,s);var o=nE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uU=Qo&&"documentMode"in document&&11>=document.documentMode,Oc=null,T_=null,uh=null,R_=!1;function rE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;R_||Oc==null||Oc!==B0(r)||(r=Oc,"selectionStart"in r&&qS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uh&&Dh(uh,r)||(uh=r,r=U0(T_,"onSelect"),0<r.length&&(e=new KS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Oc)))}function $m(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Uc={animationend:$m("Animation","AnimationEnd"),animationiteration:$m("Animation","AnimationIteration"),animationstart:$m("Animation","AnimationStart"),transitionend:$m("Transition","TransitionEnd")},E1={},OP={};Qo&&(OP=document.createElement("div").style,"AnimationEvent"in window||(delete Uc.animationend.animation,delete Uc.animationiteration.animation,delete Uc.animationstart.animation),"TransitionEvent"in window||delete Uc.transitionend.transition);function Bv(t){if(E1[t])return E1[t];if(!Uc[t])return t;var e=Uc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in OP)return E1[t]=e[n];return t}var UP=Bv("animationend"),NP=Bv("animationiteration"),zP=Bv("animationstart"),GP=Bv("transitionend"),HP=new Map,iE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function al(t,e){HP.set(t,e),Iu(e,[t])}for(var C1=0;C1<iE.length;C1++){var T1=iE[C1],cU=T1.toLowerCase(),fU=T1[0].toUpperCase()+T1.slice(1);al(cU,"on"+fU)}al(UP,"onAnimationEnd");al(NP,"onAnimationIteration");al(zP,"onAnimationStart");al("dblclick","onDoubleClick");al("focusin","onFocus");al("focusout","onBlur");al(GP,"onTransitionEnd");ff("onMouseEnter",["mouseout","mouseover"]);ff("onMouseLeave",["mouseout","mouseover"]);ff("onPointerEnter",["pointerout","pointerover"]);ff("onPointerLeave",["pointerout","pointerover"]);Iu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Iu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Iu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Iu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dU=new Set("cancel close invalid load scroll toggle".split(" ").concat(eh));function sE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,c4(r,e,void 0,t),t.currentTarget=null}function VP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;sE(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;sE(i,a,u),s=l}}}if(D0)throw t=A_,D0=!1,A_=null,t}function gn(t,e){var n=e[L_];n===void 0&&(n=e[L_]=new Set);var r=t+"__bubble";n.has(r)||(WP(e,t,2,!1),n.add(r))}function R1(t,e,n){var r=0;e&&(r|=4),WP(n,t,r,e)}var Jm="_reactListening"+Math.random().toString(36).slice(2);function Lh(t){if(!t[Jm]){t[Jm]=!0,QR.forEach(function(n){n!=="selectionchange"&&(dU.has(n)||R1(n,!1,t),R1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jm]||(e[Jm]=!0,R1("selectionchange",!1,e))}}function WP(t,e,n,r){switch(CP(e)){case 1:var i=E4;break;case 4:i=C4;break;default:i=JS}n=i.bind(null,e,n,t),i=void 0,!b_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function P1(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Xl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}hP(function(){var u=s,c=VS(n),f=[];e:{var h=HP.get(t);if(h!==void 0){var m=KS,g=t;switch(t){case"keypress":if(l0(n)===0)break e;case"keydown":case"keyup":m=H4;break;case"focusin":g="focus",m=b1;break;case"focusout":g="blur",m=b1;break;case"beforeblur":case"afterblur":m=b1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=J2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=P4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=j4;break;case UP:case NP:case zP:m=D4;break;case GP:m=J4;break;case"scroll":m=T4;break;case"wheel":m=K4;break;case"copy":case"cut":case"paste":m=k4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=K2}var v=(e&4)!==0,y=!v&&t==="scroll",_=v?h!==null?h+"Capture":null:h;v=[];for(var x=u,w;x!==null;){w=x;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,_!==null&&(b=Th(x,_),b!=null&&v.push(kh(x,b,w)))),y)break;x=x.return}0<v.length&&(h=new m(h,g,null,n,c),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==w_&&(g=n.relatedTarget||n.fromElement)&&(Xl(g)||g[qo]))break e;if((m||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?Xl(g):null,g!==null&&(y=Du(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(v=J2,b="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=K2,b="onPointerLeave",_="onPointerEnter",x="pointer"),y=m==null?h:Nc(m),w=g==null?h:Nc(g),h=new v(b,x+"leave",m,n,c),h.target=y,h.relatedTarget=w,b=null,Xl(c)===u&&(v=new v(_,x+"enter",g,n,c),v.target=w,v.relatedTarget=y,b=v),y=b,m&&g)t:{for(v=m,_=g,x=0,w=v;w;w=sc(w))x++;for(w=0,b=_;b;b=sc(b))w++;for(;0<x-w;)v=sc(v),x--;for(;0<w-x;)_=sc(_),w--;for(;x--;){if(v===_||_!==null&&v===_.alternate)break t;v=sc(v),_=sc(_)}v=null}else v=null;m!==null&&oE(f,h,m,v,!1),g!==null&&y!==null&&oE(f,y,g,v,!0)}}e:{if(h=u?Nc(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var E=nU;else if(q2(h))if(DP)E=oU;else{E=iU;var C=rU}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=sU);if(E&&(E=E(t,u))){IP(f,E,n,c);break e}C&&C(t,h,u),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&g_(h,"number",h.value)}switch(C=u?Nc(u):window,t){case"focusin":(q2(C)||C.contentEditable==="true")&&(Oc=C,T_=u,uh=null);break;case"focusout":uh=T_=Oc=null;break;case"mousedown":R_=!0;break;case"contextmenu":case"mouseup":case"dragend":R_=!1,rE(f,n,c);break;case"selectionchange":if(uU)break;case"keydown":case"keyup":rE(f,n,c)}var P;if(QS)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Fc?PP(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(RP&&n.locale!=="ko"&&(Fc||M!=="onCompositionStart"?M==="onCompositionEnd"&&Fc&&(P=TP()):(Ua=c,XS="value"in Ua?Ua.value:Ua.textContent,Fc=!0)),C=U0(u,M),0<C.length&&(M=new X2(M,t,null,n,c),f.push({event:M,listeners:C}),P?M.data=P:(P=BP(n),P!==null&&(M.data=P)))),(P=Q4?q4(t,n):Z4(t,n))&&(u=U0(u,"onBeforeInput"),0<u.length&&(c=new X2("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=P))}VP(f,e)})}function kh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function U0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Th(t,n),s!=null&&r.unshift(kh(t,s,i)),s=Th(t,e),s!=null&&r.push(kh(t,s,i))),t=t.return}return r}function sc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Th(n,s),l!=null&&o.unshift(kh(n,l,a))):i||(l=Th(n,s),l!=null&&o.push(kh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var hU=/\r\n?/g,pU=/\u0000|\uFFFD/g;function aE(t){return(typeof t=="string"?t:""+t).replace(hU,`
`).replace(pU,"")}function Xm(t,e,n){if(e=aE(e),aE(t)!==e&&n)throw Error(He(425))}function N0(){}var P_=null,B_=null;function I_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var D_=typeof setTimeout=="function"?setTimeout:void 0,mU=typeof clearTimeout=="function"?clearTimeout:void 0,lE=typeof Promise=="function"?Promise:void 0,gU=typeof queueMicrotask=="function"?queueMicrotask:typeof lE<"u"?function(t){return lE.resolve(null).then(t).catch(vU)}:D_;function vU(t){setTimeout(function(){throw t})}function B1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Bh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Bh(e)}function Ja(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Df=Math.random().toString(36).slice(2),uo="__reactFiber$"+Df,Fh="__reactProps$"+Df,qo="__reactContainer$"+Df,L_="__reactEvents$"+Df,yU="__reactListeners$"+Df,xU="__reactHandles$"+Df;function Xl(t){var e=t[uo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qo]||n[uo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uE(t);t!==null;){if(n=t[uo])return n;t=uE(t)}return e}t=n,n=t.parentNode}return null}function hp(t){return t=t[uo]||t[qo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Nc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(He(33))}function Iv(t){return t[Fh]||null}var k_=[],zc=-1;function ll(t){return{current:t}}function yn(t){0>zc||(t.current=k_[zc],k_[zc]=null,zc--)}function pn(t,e){zc++,k_[zc]=t.current,t.current=e}var tl={},Vr=ll(tl),bi=ll(!1),gu=tl;function df(t,e){var n=t.type.contextTypes;if(!n)return tl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ai(t){return t=t.childContextTypes,t!=null}function z0(){yn(bi),yn(Vr)}function cE(t,e,n){if(Vr.current!==tl)throw Error(He(168));pn(Vr,e),pn(bi,n)}function jP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(He(108,r4(t)||"Unknown",i));return kn({},n,r)}function G0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tl,gu=Vr.current,pn(Vr,t),pn(bi,bi.current),!0}function fE(t,e,n){var r=t.stateNode;if(!r)throw Error(He(169));n?(t=jP(t,e,gu),r.__reactInternalMemoizedMergedChildContext=t,yn(bi),yn(Vr),pn(Vr,t)):yn(bi),pn(bi,n)}var Go=null,Dv=!1,I1=!1;function $P(t){Go===null?Go=[t]:Go.push(t)}function _U(t){Dv=!0,$P(t)}function ul(){if(!I1&&Go!==null){I1=!0;var t=0,e=nn;try{var n=Go;for(nn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Go=null,Dv=!1}catch(i){throw Go!==null&&(Go=Go.slice(t+1)),vP(WS,ul),i}finally{nn=e,I1=!1}}return null}var Gc=[],Hc=0,H0=null,V0=0,us=[],cs=0,vu=null,jo=1,$o="";function Ul(t,e){Gc[Hc++]=V0,Gc[Hc++]=H0,H0=t,V0=e}function JP(t,e,n){us[cs++]=jo,us[cs++]=$o,us[cs++]=vu,vu=t;var r=jo;t=$o;var i=32-Fs(r)-1;r&=~(1<<i),n+=1;var s=32-Fs(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,jo=1<<32-Fs(e)+i|n<<i|r,$o=s+t}else jo=1<<s|n<<i|r,$o=t}function ZS(t){t.return!==null&&(Ul(t,1),JP(t,1,0))}function eb(t){for(;t===H0;)H0=Gc[--Hc],Gc[Hc]=null,V0=Gc[--Hc],Gc[Hc]=null;for(;t===vu;)vu=us[--cs],us[cs]=null,$o=us[--cs],us[cs]=null,jo=us[--cs],us[cs]=null}var zi=null,Ui=null,bn=!1,Is=null;function XP(t,e){var n=ps(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zi=t,Ui=Ja(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zi=t,Ui=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vu!==null?{id:jo,overflow:$o}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ps(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zi=t,Ui=null,!0):!1;default:return!1}}function F_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function O_(t){if(bn){var e=Ui;if(e){var n=e;if(!dE(t,e)){if(F_(t))throw Error(He(418));e=Ja(n.nextSibling);var r=zi;e&&dE(t,e)?XP(r,n):(t.flags=t.flags&-4097|2,bn=!1,zi=t)}}else{if(F_(t))throw Error(He(418));t.flags=t.flags&-4097|2,bn=!1,zi=t}}}function hE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zi=t}function Km(t){if(t!==zi)return!1;if(!bn)return hE(t),bn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!I_(t.type,t.memoizedProps)),e&&(e=Ui)){if(F_(t))throw KP(),Error(He(418));for(;e;)XP(t,e),e=Ja(e.nextSibling)}if(hE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(He(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ui=Ja(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ui=null}}else Ui=zi?Ja(t.stateNode.nextSibling):null;return!0}function KP(){for(var t=Ui;t;)t=Ja(t.nextSibling)}function hf(){Ui=zi=null,bn=!1}function tb(t){Is===null?Is=[t]:Is.push(t)}var wU=sa.ReactCurrentBatchConfig;function Rs(t,e){if(t&&t.defaultProps){e=kn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var W0=ll(null),j0=null,Vc=null,nb=null;function rb(){nb=Vc=j0=null}function ib(t){var e=W0.current;yn(W0),t._currentValue=e}function U_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function nf(t,e){j0=t,nb=Vc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_i=!0),t.firstContext=null)}function xs(t){var e=t._currentValue;if(nb!==t)if(t={context:t,memoizedValue:e,next:null},Vc===null){if(j0===null)throw Error(He(308));Vc=t,j0.dependencies={lanes:0,firstContext:t}}else Vc=Vc.next=t;return e}var Kl=null;function sb(t){Kl===null?Kl=[t]:Kl.push(t)}function YP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,sb(e)):(n.next=i.next,i.next=n),e.interleaved=n,Zo(t,r)}function Zo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Da=!1;function ob(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ko(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xa(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Yt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Zo(t,n)}return i=r.interleaved,i===null?(e.next=e,sb(r)):(e.next=i.next,i.next=e),r.interleaved=e,Zo(t,n)}function u0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jS(t,n)}}function pE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $0(t,e,n,r){var i=t.updateQueue;Da=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,m=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,v=a;switch(h=e,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=kn({},f,h);break e;case 2:Da=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=f):c=c.next=m,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xu|=o,t.lanes=o,t.memoizedState=f}}function mE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(He(191,i));i.call(r)}}}var qP=new YR.Component().refs;function N_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:kn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Lv={isMounted:function(t){return(t=t._reactInternals)?Du(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=li(),i=Ya(t),s=Ko(r,i);s.payload=e,n!=null&&(s.callback=n),e=Xa(t,s,i),e!==null&&(Os(e,t,i,r),u0(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=li(),i=Ya(t),s=Ko(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Xa(t,s,i),e!==null&&(Os(e,t,i,r),u0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=li(),r=Ya(t),i=Ko(n,r);i.tag=2,e!=null&&(i.callback=e),e=Xa(t,i,r),e!==null&&(Os(e,t,r,n),u0(e,t,r))}};function gE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Dh(n,r)||!Dh(i,s):!0}function ZP(t,e,n){var r=!1,i=tl,s=e.contextType;return typeof s=="object"&&s!==null?s=xs(s):(i=Ai(e)?gu:Vr.current,r=e.contextTypes,s=(r=r!=null)?df(t,i):tl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function vE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Lv.enqueueReplaceState(e,e.state,null)}function z_(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=qP,ob(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=xs(s):(s=Ai(e)?gu:Vr.current,i.context=df(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(N_(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Lv.enqueueReplaceState(i,i.state,null),$0(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ad(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(He(309));var r=n.stateNode}if(!r)throw Error(He(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===qP&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(He(284));if(!n._owner)throw Error(He(290,t))}return t}function Ym(t,e){throw t=Object.prototype.toString.call(e),Error(He(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yE(t){var e=t._init;return e(t._payload)}function eB(t){function e(_,x){if(t){var w=_.deletions;w===null?(_.deletions=[x],_.flags|=16):w.push(x)}}function n(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function i(_,x){return _=Qa(_,x),_.index=0,_.sibling=null,_}function s(_,x,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<x?(_.flags|=2,x):w):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,x,w,b){return x===null||x.tag!==6?(x=N1(w,_.mode,b),x.return=_,x):(x=i(x,w),x.return=_,x)}function l(_,x,w,b){var E=w.type;return E===kc?c(_,x,w.props.children,b,w.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ia&&yE(E)===x.type)?(b=i(x,w.props),b.ref=Ad(_,x,w),b.return=_,b):(b=m0(w.type,w.key,w.props,null,_.mode,b),b.ref=Ad(_,x,w),b.return=_,b)}function u(_,x,w,b){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=z1(w,_.mode,b),x.return=_,x):(x=i(x,w.children||[]),x.return=_,x)}function c(_,x,w,b,E){return x===null||x.tag!==7?(x=ou(w,_.mode,b,E),x.return=_,x):(x=i(x,w),x.return=_,x)}function f(_,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=N1(""+x,_.mode,w),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Nm:return w=m0(x.type,x.key,x.props,null,_.mode,w),w.ref=Ad(_,null,x),w.return=_,w;case Lc:return x=z1(x,_.mode,w),x.return=_,x;case Ia:var b=x._init;return f(_,b(x._payload),w)}if(qd(x)||xd(x))return x=ou(x,_.mode,w,null),x.return=_,x;Ym(_,x)}return null}function h(_,x,w,b){var E=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return E!==null?null:a(_,x,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Nm:return w.key===E?l(_,x,w,b):null;case Lc:return w.key===E?u(_,x,w,b):null;case Ia:return E=w._init,h(_,x,E(w._payload),b)}if(qd(w)||xd(w))return E!==null?null:c(_,x,w,b,null);Ym(_,w)}return null}function m(_,x,w,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return _=_.get(w)||null,a(x,_,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Nm:return _=_.get(b.key===null?w:b.key)||null,l(x,_,b,E);case Lc:return _=_.get(b.key===null?w:b.key)||null,u(x,_,b,E);case Ia:var C=b._init;return m(_,x,w,C(b._payload),E)}if(qd(b)||xd(b))return _=_.get(w)||null,c(x,_,b,E,null);Ym(x,b)}return null}function g(_,x,w,b){for(var E=null,C=null,P=x,M=x=0,B=null;P!==null&&M<w.length;M++){P.index>M?(B=P,P=null):B=P.sibling;var D=h(_,P,w[M],b);if(D===null){P===null&&(P=B);break}t&&P&&D.alternate===null&&e(_,P),x=s(D,x,M),C===null?E=D:C.sibling=D,C=D,P=B}if(M===w.length)return n(_,P),bn&&Ul(_,M),E;if(P===null){for(;M<w.length;M++)P=f(_,w[M],b),P!==null&&(x=s(P,x,M),C===null?E=P:C.sibling=P,C=P);return bn&&Ul(_,M),E}for(P=r(_,P);M<w.length;M++)B=m(P,_,M,w[M],b),B!==null&&(t&&B.alternate!==null&&P.delete(B.key===null?M:B.key),x=s(B,x,M),C===null?E=B:C.sibling=B,C=B);return t&&P.forEach(function(k){return e(_,k)}),bn&&Ul(_,M),E}function v(_,x,w,b){var E=xd(w);if(typeof E!="function")throw Error(He(150));if(w=E.call(w),w==null)throw Error(He(151));for(var C=E=null,P=x,M=x=0,B=null,D=w.next();P!==null&&!D.done;M++,D=w.next()){P.index>M?(B=P,P=null):B=P.sibling;var k=h(_,P,D.value,b);if(k===null){P===null&&(P=B);break}t&&P&&k.alternate===null&&e(_,P),x=s(k,x,M),C===null?E=k:C.sibling=k,C=k,P=B}if(D.done)return n(_,P),bn&&Ul(_,M),E;if(P===null){for(;!D.done;M++,D=w.next())D=f(_,D.value,b),D!==null&&(x=s(D,x,M),C===null?E=D:C.sibling=D,C=D);return bn&&Ul(_,M),E}for(P=r(_,P);!D.done;M++,D=w.next())D=m(P,_,M,D.value,b),D!==null&&(t&&D.alternate!==null&&P.delete(D.key===null?M:D.key),x=s(D,x,M),C===null?E=D:C.sibling=D,C=D);return t&&P.forEach(function(O){return e(_,O)}),bn&&Ul(_,M),E}function y(_,x,w,b){if(typeof w=="object"&&w!==null&&w.type===kc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Nm:e:{for(var E=w.key,C=x;C!==null;){if(C.key===E){if(E=w.type,E===kc){if(C.tag===7){n(_,C.sibling),x=i(C,w.props.children),x.return=_,_=x;break e}}else if(C.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ia&&yE(E)===C.type){n(_,C.sibling),x=i(C,w.props),x.ref=Ad(_,C,w),x.return=_,_=x;break e}n(_,C);break}else e(_,C);C=C.sibling}w.type===kc?(x=ou(w.props.children,_.mode,b,w.key),x.return=_,_=x):(b=m0(w.type,w.key,w.props,null,_.mode,b),b.ref=Ad(_,x,w),b.return=_,_=b)}return o(_);case Lc:e:{for(C=w.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(_,x.sibling),x=i(x,w.children||[]),x.return=_,_=x;break e}else{n(_,x);break}else e(_,x);x=x.sibling}x=z1(w,_.mode,b),x.return=_,_=x}return o(_);case Ia:return C=w._init,y(_,x,C(w._payload),b)}if(qd(w))return g(_,x,w,b);if(xd(w))return v(_,x,w,b);Ym(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(_,x.sibling),x=i(x,w),x.return=_,_=x):(n(_,x),x=N1(w,_.mode,b),x.return=_,_=x),o(_)):n(_,x)}return y}var pf=eB(!0),tB=eB(!1),pp={},fo=ll(pp),Oh=ll(pp),Uh=ll(pp);function Yl(t){if(t===pp)throw Error(He(174));return t}function ab(t,e){switch(pn(Uh,e),pn(Oh,t),pn(fo,pp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:y_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=y_(e,t)}yn(fo),pn(fo,e)}function mf(){yn(fo),yn(Oh),yn(Uh)}function nB(t){Yl(Uh.current);var e=Yl(fo.current),n=y_(e,t.type);e!==n&&(pn(Oh,t),pn(fo,n))}function lb(t){Oh.current===t&&(yn(fo),yn(Oh))}var Bn=ll(0);function J0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var D1=[];function ub(){for(var t=0;t<D1.length;t++)D1[t]._workInProgressVersionPrimary=null;D1.length=0}var c0=sa.ReactCurrentDispatcher,L1=sa.ReactCurrentBatchConfig,yu=0,Ln=null,rr=null,hr=null,X0=!1,ch=!1,Nh=0,SU=0;function Dr(){throw Error(He(321))}function cb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zs(t[n],e[n]))return!1;return!0}function fb(t,e,n,r,i,s){if(yu=s,Ln=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,c0.current=t===null||t.memoizedState===null?EU:CU,t=n(r,i),ch){s=0;do{if(ch=!1,Nh=0,25<=s)throw Error(He(301));s+=1,hr=rr=null,e.updateQueue=null,c0.current=TU,t=n(r,i)}while(ch)}if(c0.current=K0,e=rr!==null&&rr.next!==null,yu=0,hr=rr=Ln=null,X0=!1,e)throw Error(He(300));return t}function db(){var t=Nh!==0;return Nh=0,t}function oo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hr===null?Ln.memoizedState=hr=t:hr=hr.next=t,hr}function _s(){if(rr===null){var t=Ln.alternate;t=t!==null?t.memoizedState:null}else t=rr.next;var e=hr===null?Ln.memoizedState:hr.next;if(e!==null)hr=e,rr=t;else{if(t===null)throw Error(He(310));rr=t,t={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},hr===null?Ln.memoizedState=hr=t:hr=hr.next=t}return hr}function zh(t,e){return typeof e=="function"?e(t):e}function k1(t){var e=_s(),n=e.queue;if(n===null)throw Error(He(311));n.lastRenderedReducer=t;var r=rr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((yu&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ln.lanes|=c,xu|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,zs(r,e.memoizedState)||(_i=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ln.lanes|=s,xu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function F1(t){var e=_s(),n=e.queue;if(n===null)throw Error(He(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);zs(s,e.memoizedState)||(_i=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function rB(){}function iB(t,e){var n=Ln,r=_s(),i=e(),s=!zs(r.memoizedState,i);if(s&&(r.memoizedState=i,_i=!0),r=r.queue,hb(aB.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||hr!==null&&hr.memoizedState.tag&1){if(n.flags|=2048,Gh(9,oB.bind(null,n,r,i,e),void 0,null),mr===null)throw Error(He(349));yu&30||sB(n,e,i)}return i}function sB(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ln.updateQueue,e===null?(e={lastEffect:null,stores:null},Ln.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function oB(t,e,n,r){e.value=n,e.getSnapshot=r,lB(e)&&uB(t)}function aB(t,e,n){return n(function(){lB(e)&&uB(t)})}function lB(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zs(t,n)}catch{return!0}}function uB(t){var e=Zo(t,1);e!==null&&Os(e,t,1,-1)}function xE(t){var e=oo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zh,lastRenderedState:t},e.queue=t,t=t.dispatch=MU.bind(null,Ln,t),[e.memoizedState,t]}function Gh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ln.updateQueue,e===null?(e={lastEffect:null,stores:null},Ln.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function cB(){return _s().memoizedState}function f0(t,e,n,r){var i=oo();Ln.flags|=t,i.memoizedState=Gh(1|e,n,void 0,r===void 0?null:r)}function kv(t,e,n,r){var i=_s();r=r===void 0?null:r;var s=void 0;if(rr!==null){var o=rr.memoizedState;if(s=o.destroy,r!==null&&cb(r,o.deps)){i.memoizedState=Gh(e,n,s,r);return}}Ln.flags|=t,i.memoizedState=Gh(1|e,n,s,r)}function _E(t,e){return f0(8390656,8,t,e)}function hb(t,e){return kv(2048,8,t,e)}function fB(t,e){return kv(4,2,t,e)}function dB(t,e){return kv(4,4,t,e)}function hB(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pB(t,e,n){return n=n!=null?n.concat([t]):null,kv(4,4,hB.bind(null,e,t),n)}function pb(){}function mB(t,e){var n=_s();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cb(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function gB(t,e){var n=_s();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cb(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vB(t,e,n){return yu&21?(zs(n,e)||(n=_P(),Ln.lanes|=n,xu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_i=!0),t.memoizedState=n)}function bU(t,e){var n=nn;nn=n!==0&&4>n?n:4,t(!0);var r=L1.transition;L1.transition={};try{t(!1),e()}finally{nn=n,L1.transition=r}}function yB(){return _s().memoizedState}function AU(t,e,n){var r=Ya(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xB(t))_B(e,n);else if(n=YP(t,e,n,r),n!==null){var i=li();Os(n,t,r,i),wB(n,e,r)}}function MU(t,e,n){var r=Ya(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xB(t))_B(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,zs(a,o)){var l=e.interleaved;l===null?(i.next=i,sb(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=YP(t,e,i,r),n!==null&&(i=li(),Os(n,t,r,i),wB(n,e,r))}}function xB(t){var e=t.alternate;return t===Ln||e!==null&&e===Ln}function _B(t,e){ch=X0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wB(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jS(t,n)}}var K0={readContext:xs,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useInsertionEffect:Dr,useLayoutEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useMutableSource:Dr,useSyncExternalStore:Dr,useId:Dr,unstable_isNewReconciler:!1},EU={readContext:xs,useCallback:function(t,e){return oo().memoizedState=[t,e===void 0?null:e],t},useContext:xs,useEffect:_E,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,f0(4194308,4,hB.bind(null,e,t),n)},useLayoutEffect:function(t,e){return f0(4194308,4,t,e)},useInsertionEffect:function(t,e){return f0(4,2,t,e)},useMemo:function(t,e){var n=oo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=oo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AU.bind(null,Ln,t),[r.memoizedState,t]},useRef:function(t){var e=oo();return t={current:t},e.memoizedState=t},useState:xE,useDebugValue:pb,useDeferredValue:function(t){return oo().memoizedState=t},useTransition:function(){var t=xE(!1),e=t[0];return t=bU.bind(null,t[1]),oo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ln,i=oo();if(bn){if(n===void 0)throw Error(He(407));n=n()}else{if(n=e(),mr===null)throw Error(He(349));yu&30||sB(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,_E(aB.bind(null,r,s,t),[t]),r.flags|=2048,Gh(9,oB.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=oo(),e=mr.identifierPrefix;if(bn){var n=$o,r=jo;n=(r&~(1<<32-Fs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SU++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CU={readContext:xs,useCallback:mB,useContext:xs,useEffect:hb,useImperativeHandle:pB,useInsertionEffect:fB,useLayoutEffect:dB,useMemo:gB,useReducer:k1,useRef:cB,useState:function(){return k1(zh)},useDebugValue:pb,useDeferredValue:function(t){var e=_s();return vB(e,rr.memoizedState,t)},useTransition:function(){var t=k1(zh)[0],e=_s().memoizedState;return[t,e]},useMutableSource:rB,useSyncExternalStore:iB,useId:yB,unstable_isNewReconciler:!1},TU={readContext:xs,useCallback:mB,useContext:xs,useEffect:hb,useImperativeHandle:pB,useInsertionEffect:fB,useLayoutEffect:dB,useMemo:gB,useReducer:F1,useRef:cB,useState:function(){return F1(zh)},useDebugValue:pb,useDeferredValue:function(t){var e=_s();return rr===null?e.memoizedState=t:vB(e,rr.memoizedState,t)},useTransition:function(){var t=F1(zh)[0],e=_s().memoizedState;return[t,e]},useMutableSource:rB,useSyncExternalStore:iB,useId:yB,unstable_isNewReconciler:!1};function gf(t,e){try{var n="",r=e;do n+=n4(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function O1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function G_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RU=typeof WeakMap=="function"?WeakMap:Map;function SB(t,e,n){n=Ko(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Q0||(Q0=!0,Q_=r),G_(t,e)},n}function bB(t,e,n){n=Ko(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){G_(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){G_(t,e),typeof r!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function wE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=VU.bind(null,t,e,n),e.then(t,t))}function SE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ko(-1,1),e.tag=2,Xa(n,e,1))),n.lanes|=1),t)}var PU=sa.ReactCurrentOwner,_i=!1;function ri(t,e,n,r){e.child=t===null?tB(e,null,n,r):pf(e,t.child,n,r)}function AE(t,e,n,r,i){n=n.render;var s=e.ref;return nf(e,i),r=fb(t,e,n,r,s,i),n=db(),t!==null&&!_i?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ea(t,e,i)):(bn&&n&&ZS(e),e.flags|=1,ri(t,e,r,i),e.child)}function ME(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Sb(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,AB(t,e,s,r,i)):(t=m0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Dh,n(o,r)&&t.ref===e.ref)return ea(t,e,i)}return e.flags|=1,t=Qa(s,r),t.ref=e.ref,t.return=e,e.child=t}function AB(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Dh(s,r)&&t.ref===e.ref)if(_i=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(_i=!0);else return e.lanes=t.lanes,ea(t,e,i)}return H_(t,e,n,r,i)}function MB(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(jc,Oi),Oi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pn(jc,Oi),Oi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,pn(jc,Oi),Oi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,pn(jc,Oi),Oi|=r;return ri(t,e,i,n),e.child}function EB(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function H_(t,e,n,r,i){var s=Ai(n)?gu:Vr.current;return s=df(e,s),nf(e,i),n=fb(t,e,n,r,s,i),r=db(),t!==null&&!_i?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ea(t,e,i)):(bn&&r&&ZS(e),e.flags|=1,ri(t,e,n,i),e.child)}function EE(t,e,n,r,i){if(Ai(n)){var s=!0;G0(e)}else s=!1;if(nf(e,i),e.stateNode===null)d0(t,e),ZP(e,n,r),z_(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=xs(u):(u=Ai(n)?gu:Vr.current,u=df(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&vE(e,o,r,u),Da=!1;var h=e.memoizedState;o.state=h,$0(e,r,o,i),l=e.memoizedState,a!==r||h!==l||bi.current||Da?(typeof c=="function"&&(N_(e,n,c,r),l=e.memoizedState),(a=Da||gE(e,n,a,r,h,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,QP(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Rs(e.type,a),o.props=u,f=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xs(l):(l=Ai(n)?gu:Vr.current,l=df(e,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&vE(e,o,r,l),Da=!1,h=e.memoizedState,o.state=h,$0(e,r,o,i);var g=e.memoizedState;a!==f||h!==g||bi.current||Da?(typeof m=="function"&&(N_(e,n,m,r),g=e.memoizedState),(u=Da||gE(e,n,u,r,h,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return V_(t,e,n,r,s,i)}function V_(t,e,n,r,i,s){EB(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&fE(e,n,!1),ea(t,e,s);r=e.stateNode,PU.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=pf(e,t.child,null,s),e.child=pf(e,null,a,s)):ri(t,e,a,s),e.memoizedState=r.state,i&&fE(e,n,!0),e.child}function CB(t){var e=t.stateNode;e.pendingContext?cE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cE(t,e.context,!1),ab(t,e.containerInfo)}function CE(t,e,n,r,i){return hf(),tb(i),e.flags|=256,ri(t,e,n,r),e.child}var W_={dehydrated:null,treeContext:null,retryLane:0};function j_(t){return{baseLanes:t,cachePool:null,transitions:null}}function TB(t,e,n){var r=e.pendingProps,i=Bn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),pn(Bn,i&1),t===null)return O_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Uv(o,r,0,null),t=ou(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=j_(n),e.memoizedState=W_,t):mb(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return BU(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Qa(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Qa(a,s):(s=ou(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?j_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=W_,r}return s=t.child,t=s.sibling,r=Qa(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mb(t,e){return e=Uv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qm(t,e,n,r){return r!==null&&tb(r),pf(e,t.child,null,n),t=mb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function BU(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=O1(Error(He(422))),Qm(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Uv({mode:"visible",children:r.children},i,0,null),s=ou(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&pf(e,t.child,null,o),e.child.memoizedState=j_(o),e.memoizedState=W_,s);if(!(e.mode&1))return Qm(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(He(419)),r=O1(s,r,void 0),Qm(t,e,o,r)}if(a=(o&t.childLanes)!==0,_i||a){if(r=mr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zo(t,i),Os(r,t,i,-1))}return wb(),r=O1(Error(He(421))),Qm(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=WU.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ui=Ja(i.nextSibling),zi=e,bn=!0,Is=null,t!==null&&(us[cs++]=jo,us[cs++]=$o,us[cs++]=vu,jo=t.id,$o=t.overflow,vu=e),e=mb(e,r.children),e.flags|=4096,e)}function TE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),U_(t.return,e,n)}function U1(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function RB(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ri(t,e,r.children,n),r=Bn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&TE(t,n,e);else if(t.tag===19)TE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pn(Bn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&J0(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),U1(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&J0(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}U1(e,!0,n,null,s);break;case"together":U1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function d0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ea(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(He(153));if(e.child!==null){for(t=e.child,n=Qa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function IU(t,e,n){switch(e.tag){case 3:CB(e),hf();break;case 5:nB(e);break;case 1:Ai(e.type)&&G0(e);break;case 4:ab(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;pn(W0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pn(Bn,Bn.current&1),e.flags|=128,null):n&e.child.childLanes?TB(t,e,n):(pn(Bn,Bn.current&1),t=ea(t,e,n),t!==null?t.sibling:null);pn(Bn,Bn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return RB(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pn(Bn,Bn.current),r)break;return null;case 22:case 23:return e.lanes=0,MB(t,e,n)}return ea(t,e,n)}var PB,$_,BB,IB;PB=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$_=function(){};BB=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Yl(fo.current);var s=null;switch(n){case"input":i=p_(t,i),r=p_(t,r),s=[];break;case"select":i=kn({},i,{value:void 0}),r=kn({},r,{value:void 0}),s=[];break;case"textarea":i=v_(t,i),r=v_(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=N0)}x_(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Eh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Eh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&gn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};IB=function(t,e,n,r){n!==r&&(e.flags|=4)};function Md(t,e){if(!bn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DU(t,e,n){var r=e.pendingProps;switch(eb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr(e),null;case 1:return Ai(e.type)&&z0(),Lr(e),null;case 3:return r=e.stateNode,mf(),yn(bi),yn(Vr),ub(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Km(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Is!==null&&(ew(Is),Is=null))),$_(t,e),Lr(e),null;case 5:lb(e);var i=Yl(Uh.current);if(n=e.type,t!==null&&e.stateNode!=null)BB(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(He(166));return Lr(e),null}if(t=Yl(fo.current),Km(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[uo]=e,r[Fh]=s,t=(e.mode&1)!==0,n){case"dialog":gn("cancel",r),gn("close",r);break;case"iframe":case"object":case"embed":gn("load",r);break;case"video":case"audio":for(i=0;i<eh.length;i++)gn(eh[i],r);break;case"source":gn("error",r);break;case"img":case"image":case"link":gn("error",r),gn("load",r);break;case"details":gn("toggle",r);break;case"input":O2(r,s),gn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},gn("invalid",r);break;case"textarea":N2(r,s),gn("invalid",r)}x_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Xm(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Xm(r.textContent,a,t),i=["children",""+a]):Eh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gn("scroll",r)}switch(n){case"input":zm(r),U2(r,s,!0);break;case"textarea":zm(r),z2(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=N0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[uo]=e,t[Fh]=r,PB(t,e,!1,!1),e.stateNode=t;e:{switch(o=__(n,r),n){case"dialog":gn("cancel",t),gn("close",t),i=r;break;case"iframe":case"object":case"embed":gn("load",t),i=r;break;case"video":case"audio":for(i=0;i<eh.length;i++)gn(eh[i],t);i=r;break;case"source":gn("error",t),i=r;break;case"img":case"image":case"link":gn("error",t),gn("load",t),i=r;break;case"details":gn("toggle",t),i=r;break;case"input":O2(t,r),i=p_(t,r),gn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=kn({},r,{value:void 0}),gn("invalid",t);break;case"textarea":N2(t,r),i=v_(t,r),gn("invalid",t);break;default:i=r}x_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?lP(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&oP(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ch(t,l):typeof l=="number"&&Ch(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Eh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&gn("scroll",t):l!=null&&NS(t,s,l,o))}switch(n){case"input":zm(t),U2(t,r,!1);break;case"textarea":zm(t),z2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+el(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?qc(t,!!r.multiple,s,!1):r.defaultValue!=null&&qc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=N0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lr(e),null;case 6:if(t&&e.stateNode!=null)IB(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(He(166));if(n=Yl(Uh.current),Yl(fo.current),Km(e)){if(r=e.stateNode,n=e.memoizedProps,r[uo]=e,(s=r.nodeValue!==n)&&(t=zi,t!==null))switch(t.tag){case 3:Xm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xm(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[uo]=e,e.stateNode=r}return Lr(e),null;case 13:if(yn(Bn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bn&&Ui!==null&&e.mode&1&&!(e.flags&128))KP(),hf(),e.flags|=98560,s=!1;else if(s=Km(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(He(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(He(317));s[uo]=e}else hf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lr(e),s=!1}else Is!==null&&(ew(Is),Is=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Bn.current&1?ir===0&&(ir=3):wb())),e.updateQueue!==null&&(e.flags|=4),Lr(e),null);case 4:return mf(),$_(t,e),t===null&&Lh(e.stateNode.containerInfo),Lr(e),null;case 10:return ib(e.type._context),Lr(e),null;case 17:return Ai(e.type)&&z0(),Lr(e),null;case 19:if(yn(Bn),s=e.memoizedState,s===null)return Lr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Md(s,!1);else{if(ir!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=J0(t),o!==null){for(e.flags|=128,Md(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pn(Bn,Bn.current&1|2),e.child}t=t.sibling}s.tail!==null&&$n()>vf&&(e.flags|=128,r=!0,Md(s,!1),e.lanes=4194304)}else{if(!r)if(t=J0(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Md(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!bn)return Lr(e),null}else 2*$n()-s.renderingStartTime>vf&&n!==1073741824&&(e.flags|=128,r=!0,Md(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$n(),e.sibling=null,n=Bn.current,pn(Bn,r?n&1|2:n&1),e):(Lr(e),null);case 22:case 23:return _b(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Oi&1073741824&&(Lr(e),e.subtreeFlags&6&&(e.flags|=8192)):Lr(e),null;case 24:return null;case 25:return null}throw Error(He(156,e.tag))}function LU(t,e){switch(eb(e),e.tag){case 1:return Ai(e.type)&&z0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mf(),yn(bi),yn(Vr),ub(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lb(e),null;case 13:if(yn(Bn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(He(340));hf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yn(Bn),null;case 4:return mf(),null;case 10:return ib(e.type._context),null;case 22:case 23:return _b(),null;case 24:return null;default:return null}}var qm=!1,Or=!1,kU=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Wc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Un(t,e,r)}else n.current=null}function J_(t,e,n){try{n()}catch(r){Un(t,e,r)}}var RE=!1;function FU(t,e){if(P_=F0,t=FP(),qS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=t,h=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++c===r&&(l=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(B_={focusedElem:t,selectionRange:n},F0=!1,tt=e;tt!==null;)if(e=tt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,tt=t;else for(;tt!==null;){e=tt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,_=e.stateNode,x=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:Rs(e.type,v),y);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(He(163))}}catch(b){Un(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,tt=t;break}tt=e.return}return g=RE,RE=!1,g}function fh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&J_(e,n,s)}i=i.next}while(i!==r)}}function Fv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function X_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function DB(t){var e=t.alternate;e!==null&&(t.alternate=null,DB(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[uo],delete e[Fh],delete e[L_],delete e[yU],delete e[xU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function LB(t){return t.tag===5||t.tag===3||t.tag===4}function PE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||LB(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function K_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=N0));else if(r!==4&&(t=t.child,t!==null))for(K_(t,e,n),t=t.sibling;t!==null;)K_(t,e,n),t=t.sibling}function Y_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Y_(t,e,n),t=t.sibling;t!==null;)Y_(t,e,n),t=t.sibling}var wr=null,Ps=!1;function wa(t,e,n){for(n=n.child;n!==null;)kB(t,e,n),n=n.sibling}function kB(t,e,n){if(co&&typeof co.onCommitFiberUnmount=="function")try{co.onCommitFiberUnmount(Tv,n)}catch{}switch(n.tag){case 5:Or||Wc(n,e);case 6:var r=wr,i=Ps;wr=null,wa(t,e,n),wr=r,Ps=i,wr!==null&&(Ps?(t=wr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wr.removeChild(n.stateNode));break;case 18:wr!==null&&(Ps?(t=wr,n=n.stateNode,t.nodeType===8?B1(t.parentNode,n):t.nodeType===1&&B1(t,n),Bh(t)):B1(wr,n.stateNode));break;case 4:r=wr,i=Ps,wr=n.stateNode.containerInfo,Ps=!0,wa(t,e,n),wr=r,Ps=i;break;case 0:case 11:case 14:case 15:if(!Or&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&J_(n,e,o),i=i.next}while(i!==r)}wa(t,e,n);break;case 1:if(!Or&&(Wc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Un(n,e,a)}wa(t,e,n);break;case 21:wa(t,e,n);break;case 22:n.mode&1?(Or=(r=Or)||n.memoizedState!==null,wa(t,e,n),Or=r):wa(t,e,n);break;default:wa(t,e,n)}}function BE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kU),e.forEach(function(r){var i=jU.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ms(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wr=a.stateNode,Ps=!1;break e;case 3:wr=a.stateNode.containerInfo,Ps=!0;break e;case 4:wr=a.stateNode.containerInfo,Ps=!0;break e}a=a.return}if(wr===null)throw Error(He(160));kB(s,o,i),wr=null,Ps=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Un(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)FB(e,t),e=e.sibling}function FB(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ms(e,t),io(t),r&4){try{fh(3,t,t.return),Fv(3,t)}catch(v){Un(t,t.return,v)}try{fh(5,t,t.return)}catch(v){Un(t,t.return,v)}}break;case 1:Ms(e,t),io(t),r&512&&n!==null&&Wc(n,n.return);break;case 5:if(Ms(e,t),io(t),r&512&&n!==null&&Wc(n,n.return),t.flags&32){var i=t.stateNode;try{Ch(i,"")}catch(v){Un(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&rP(i,s),__(a,o);var u=__(a,s);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?lP(i,f):c==="dangerouslySetInnerHTML"?oP(i,f):c==="children"?Ch(i,f):NS(i,c,f,u)}switch(a){case"input":m_(i,s);break;case"textarea":iP(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?qc(i,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?qc(i,!!s.multiple,s.defaultValue,!0):qc(i,!!s.multiple,s.multiple?[]:"",!1))}i[Fh]=s}catch(v){Un(t,t.return,v)}}break;case 6:if(Ms(e,t),io(t),r&4){if(t.stateNode===null)throw Error(He(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Un(t,t.return,v)}}break;case 3:if(Ms(e,t),io(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bh(e.containerInfo)}catch(v){Un(t,t.return,v)}break;case 4:Ms(e,t),io(t);break;case 13:Ms(e,t),io(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(yb=$n())),r&4&&BE(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Or=(u=Or)||c,Ms(e,t),Or=u):Ms(e,t),io(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(tt=t,c=t.child;c!==null;){for(f=tt=c;tt!==null;){switch(h=tt,m=h.child,h.tag){case 0:case 11:case 14:case 15:fh(4,h,h.return);break;case 1:Wc(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Un(r,n,v)}}break;case 5:Wc(h,h.return);break;case 22:if(h.memoizedState!==null){DE(f);continue}}m!==null?(m.return=h,tt=m):DE(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=aP("display",o))}catch(v){Un(t,t.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Un(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ms(e,t),io(t),r&4&&BE(t);break;case 21:break;default:Ms(e,t),io(t)}}function io(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(LB(n)){var r=n;break e}n=n.return}throw Error(He(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ch(i,""),r.flags&=-33);var s=PE(t);Y_(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=PE(t);K_(t,a,o);break;default:throw Error(He(161))}}catch(l){Un(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function OU(t,e,n){tt=t,OB(t)}function OB(t,e,n){for(var r=(t.mode&1)!==0;tt!==null;){var i=tt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||qm;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Or;a=qm;var u=Or;if(qm=o,(Or=l)&&!u)for(tt=i;tt!==null;)o=tt,l=o.child,o.tag===22&&o.memoizedState!==null?LE(i):l!==null?(l.return=o,tt=l):LE(i);for(;s!==null;)tt=s,OB(s),s=s.sibling;tt=i,qm=a,Or=u}IE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,tt=s):IE(t)}}function IE(t){for(;tt!==null;){var e=tt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Or||Fv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Or)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Rs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&mE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Bh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(He(163))}Or||e.flags&512&&X_(e)}catch(h){Un(e,e.return,h)}}if(e===t){tt=null;break}if(n=e.sibling,n!==null){n.return=e.return,tt=n;break}tt=e.return}}function DE(t){for(;tt!==null;){var e=tt;if(e===t){tt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,tt=n;break}tt=e.return}}function LE(t){for(;tt!==null;){var e=tt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fv(4,e)}catch(l){Un(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Un(e,i,l)}}var s=e.return;try{X_(e)}catch(l){Un(e,s,l)}break;case 5:var o=e.return;try{X_(e)}catch(l){Un(e,o,l)}}}catch(l){Un(e,e.return,l)}if(e===t){tt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,tt=a;break}tt=e.return}}var UU=Math.ceil,Y0=sa.ReactCurrentDispatcher,gb=sa.ReactCurrentOwner,vs=sa.ReactCurrentBatchConfig,Yt=0,mr=null,Zn=null,Ar=0,Oi=0,jc=ll(0),ir=0,Hh=null,xu=0,Ov=0,vb=0,dh=null,yi=null,yb=0,vf=1/0,No=null,Q0=!1,Q_=null,Ka=null,Zm=!1,Na=null,q0=0,hh=0,q_=null,h0=-1,p0=0;function li(){return Yt&6?$n():h0!==-1?h0:h0=$n()}function Ya(t){return t.mode&1?Yt&2&&Ar!==0?Ar&-Ar:wU.transition!==null?(p0===0&&(p0=_P()),p0):(t=nn,t!==0||(t=window.event,t=t===void 0?16:CP(t.type)),t):1}function Os(t,e,n,r){if(50<hh)throw hh=0,q_=null,Error(He(185));fp(t,n,r),(!(Yt&2)||t!==mr)&&(t===mr&&(!(Yt&2)&&(Ov|=n),ir===4&&Oa(t,Ar)),Mi(t,r),n===1&&Yt===0&&!(e.mode&1)&&(vf=$n()+500,Dv&&ul()))}function Mi(t,e){var n=t.callbackNode;w4(t,e);var r=k0(t,t===mr?Ar:0);if(r===0)n!==null&&V2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&V2(n),e===1)t.tag===0?_U(kE.bind(null,t)):$P(kE.bind(null,t)),gU(function(){!(Yt&6)&&ul()}),n=null;else{switch(wP(r)){case 1:n=WS;break;case 4:n=yP;break;case 16:n=L0;break;case 536870912:n=xP;break;default:n=L0}n=jB(n,UB.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function UB(t,e){if(h0=-1,p0=0,Yt&6)throw Error(He(327));var n=t.callbackNode;if(rf()&&t.callbackNode!==n)return null;var r=k0(t,t===mr?Ar:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Z0(t,r);else{e=r;var i=Yt;Yt|=2;var s=zB();(mr!==t||Ar!==e)&&(No=null,vf=$n()+500,su(t,e));do try{GU();break}catch(a){NB(t,a)}while(1);rb(),Y0.current=s,Yt=i,Zn!==null?e=0:(mr=null,Ar=0,e=ir)}if(e!==0){if(e===2&&(i=M_(t),i!==0&&(r=i,e=Z_(t,i))),e===1)throw n=Hh,su(t,0),Oa(t,r),Mi(t,$n()),n;if(e===6)Oa(t,r);else{if(i=t.current.alternate,!(r&30)&&!NU(i)&&(e=Z0(t,r),e===2&&(s=M_(t),s!==0&&(r=s,e=Z_(t,s))),e===1))throw n=Hh,su(t,0),Oa(t,r),Mi(t,$n()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(He(345));case 2:Nl(t,yi,No);break;case 3:if(Oa(t,r),(r&130023424)===r&&(e=yb+500-$n(),10<e)){if(k0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){li(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=D_(Nl.bind(null,t,yi,No),e);break}Nl(t,yi,No);break;case 4:if(Oa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Fs(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=$n()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*UU(r/1960))-r,10<r){t.timeoutHandle=D_(Nl.bind(null,t,yi,No),r);break}Nl(t,yi,No);break;case 5:Nl(t,yi,No);break;default:throw Error(He(329))}}}return Mi(t,$n()),t.callbackNode===n?UB.bind(null,t):null}function Z_(t,e){var n=dh;return t.current.memoizedState.isDehydrated&&(su(t,e).flags|=256),t=Z0(t,e),t!==2&&(e=yi,yi=n,e!==null&&ew(e)),t}function ew(t){yi===null?yi=t:yi.push.apply(yi,t)}function NU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!zs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oa(t,e){for(e&=~vb,e&=~Ov,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fs(e),r=1<<n;t[n]=-1,e&=~r}}function kE(t){if(Yt&6)throw Error(He(327));rf();var e=k0(t,0);if(!(e&1))return Mi(t,$n()),null;var n=Z0(t,e);if(t.tag!==0&&n===2){var r=M_(t);r!==0&&(e=r,n=Z_(t,r))}if(n===1)throw n=Hh,su(t,0),Oa(t,e),Mi(t,$n()),n;if(n===6)throw Error(He(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nl(t,yi,No),Mi(t,$n()),null}function xb(t,e){var n=Yt;Yt|=1;try{return t(e)}finally{Yt=n,Yt===0&&(vf=$n()+500,Dv&&ul())}}function _u(t){Na!==null&&Na.tag===0&&!(Yt&6)&&rf();var e=Yt;Yt|=1;var n=vs.transition,r=nn;try{if(vs.transition=null,nn=1,t)return t()}finally{nn=r,vs.transition=n,Yt=e,!(Yt&6)&&ul()}}function _b(){Oi=jc.current,yn(jc)}function su(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mU(n)),Zn!==null)for(n=Zn.return;n!==null;){var r=n;switch(eb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&z0();break;case 3:mf(),yn(bi),yn(Vr),ub();break;case 5:lb(r);break;case 4:mf();break;case 13:yn(Bn);break;case 19:yn(Bn);break;case 10:ib(r.type._context);break;case 22:case 23:_b()}n=n.return}if(mr=t,Zn=t=Qa(t.current,null),Ar=Oi=e,ir=0,Hh=null,vb=Ov=xu=0,yi=dh=null,Kl!==null){for(e=0;e<Kl.length;e++)if(n=Kl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Kl=null}return t}function NB(t,e){do{var n=Zn;try{if(rb(),c0.current=K0,X0){for(var r=Ln.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}X0=!1}if(yu=0,hr=rr=Ln=null,ch=!1,Nh=0,gb.current=null,n===null||n.return===null){ir=1,Hh=e,Zn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ar,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=SE(o);if(m!==null){m.flags&=-257,bE(m,o,a,s,e),m.mode&1&&wE(s,u,e),e=m,l=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){wE(s,u,e),wb();break e}l=Error(He(426))}}else if(bn&&a.mode&1){var y=SE(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),bE(y,o,a,s,e),tb(gf(l,a));break e}}s=l=gf(l,a),ir!==4&&(ir=2),dh===null?dh=[s]:dh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=SB(s,l,e);pE(s,_);break e;case 1:a=l;var x=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ka===null||!Ka.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=bB(s,a,e);pE(s,b);break e}}s=s.return}while(s!==null)}HB(n)}catch(E){e=E,Zn===n&&n!==null&&(Zn=n=n.return);continue}break}while(1)}function zB(){var t=Y0.current;return Y0.current=K0,t===null?K0:t}function wb(){(ir===0||ir===3||ir===2)&&(ir=4),mr===null||!(xu&268435455)&&!(Ov&268435455)||Oa(mr,Ar)}function Z0(t,e){var n=Yt;Yt|=2;var r=zB();(mr!==t||Ar!==e)&&(No=null,su(t,e));do try{zU();break}catch(i){NB(t,i)}while(1);if(rb(),Yt=n,Y0.current=r,Zn!==null)throw Error(He(261));return mr=null,Ar=0,ir}function zU(){for(;Zn!==null;)GB(Zn)}function GU(){for(;Zn!==null&&!d4();)GB(Zn)}function GB(t){var e=WB(t.alternate,t,Oi);t.memoizedProps=t.pendingProps,e===null?HB(t):Zn=e,gb.current=null}function HB(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LU(n,e),n!==null){n.flags&=32767,Zn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ir=6,Zn=null;return}}else if(n=DU(n,e,Oi),n!==null){Zn=n;return}if(e=e.sibling,e!==null){Zn=e;return}Zn=e=t}while(e!==null);ir===0&&(ir=5)}function Nl(t,e,n){var r=nn,i=vs.transition;try{vs.transition=null,nn=1,HU(t,e,n,r)}finally{vs.transition=i,nn=r}return null}function HU(t,e,n,r){do rf();while(Na!==null);if(Yt&6)throw Error(He(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(He(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(S4(t,s),t===mr&&(Zn=mr=null,Ar=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zm||(Zm=!0,jB(L0,function(){return rf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=vs.transition,vs.transition=null;var o=nn;nn=1;var a=Yt;Yt|=4,gb.current=null,FU(t,n),FB(n,t),lU(B_),F0=!!P_,B_=P_=null,t.current=n,OU(n),h4(),Yt=a,nn=o,vs.transition=s}else t.current=n;if(Zm&&(Zm=!1,Na=t,q0=i),s=t.pendingLanes,s===0&&(Ka=null),g4(n.stateNode),Mi(t,$n()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Q0)throw Q0=!1,t=Q_,Q_=null,t;return q0&1&&t.tag!==0&&rf(),s=t.pendingLanes,s&1?t===q_?hh++:(hh=0,q_=t):hh=0,ul(),null}function rf(){if(Na!==null){var t=wP(q0),e=vs.transition,n=nn;try{if(vs.transition=null,nn=16>t?16:t,Na===null)var r=!1;else{if(t=Na,Na=null,q0=0,Yt&6)throw Error(He(331));var i=Yt;for(Yt|=4,tt=t.current;tt!==null;){var s=tt,o=s.child;if(tt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(tt=u;tt!==null;){var c=tt;switch(c.tag){case 0:case 11:case 15:fh(8,c,s)}var f=c.child;if(f!==null)f.return=c,tt=f;else for(;tt!==null;){c=tt;var h=c.sibling,m=c.return;if(DB(c),c===u){tt=null;break}if(h!==null){h.return=m,tt=h;break}tt=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}tt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,tt=o;else e:for(;tt!==null;){if(s=tt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fh(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,tt=_;break e}tt=s.return}}var x=t.current;for(tt=x;tt!==null;){o=tt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,tt=w;else e:for(o=x;tt!==null;){if(a=tt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Fv(9,a)}}catch(E){Un(a,a.return,E)}if(a===o){tt=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,tt=b;break e}tt=a.return}}if(Yt=i,ul(),co&&typeof co.onPostCommitFiberRoot=="function")try{co.onPostCommitFiberRoot(Tv,t)}catch{}r=!0}return r}finally{nn=n,vs.transition=e}}return!1}function FE(t,e,n){e=gf(n,e),e=SB(t,e,1),t=Xa(t,e,1),e=li(),t!==null&&(fp(t,1,e),Mi(t,e))}function Un(t,e,n){if(t.tag===3)FE(t,t,n);else for(;e!==null;){if(e.tag===3){FE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ka===null||!Ka.has(r))){t=gf(n,t),t=bB(e,t,1),e=Xa(e,t,1),t=li(),e!==null&&(fp(e,1,t),Mi(e,t));break}}e=e.return}}function VU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=li(),t.pingedLanes|=t.suspendedLanes&n,mr===t&&(Ar&n)===n&&(ir===4||ir===3&&(Ar&130023424)===Ar&&500>$n()-yb?su(t,0):vb|=n),Mi(t,e)}function VB(t,e){e===0&&(t.mode&1?(e=Vm,Vm<<=1,!(Vm&130023424)&&(Vm=4194304)):e=1);var n=li();t=Zo(t,e),t!==null&&(fp(t,e,n),Mi(t,n))}function WU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),VB(t,n)}function jU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(He(314))}r!==null&&r.delete(e),VB(t,n)}var WB;WB=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bi.current)_i=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _i=!1,IU(t,e,n);_i=!!(t.flags&131072)}else _i=!1,bn&&e.flags&1048576&&JP(e,V0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;d0(t,e),t=e.pendingProps;var i=df(e,Vr.current);nf(e,n),i=fb(null,e,r,t,i,n);var s=db();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ai(r)?(s=!0,G0(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ob(e),i.updater=Lv,e.stateNode=i,i._reactInternals=e,z_(e,r,t,n),e=V_(null,e,r,!0,s,n)):(e.tag=0,bn&&s&&ZS(e),ri(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(d0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=JU(r),t=Rs(r,t),i){case 0:e=H_(null,e,r,t,n);break e;case 1:e=EE(null,e,r,t,n);break e;case 11:e=AE(null,e,r,t,n);break e;case 14:e=ME(null,e,r,Rs(r.type,t),n);break e}throw Error(He(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rs(r,i),H_(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rs(r,i),EE(t,e,r,i,n);case 3:e:{if(CB(e),t===null)throw Error(He(387));r=e.pendingProps,s=e.memoizedState,i=s.element,QP(t,e),$0(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=gf(Error(He(423)),e),e=CE(t,e,r,n,i);break e}else if(r!==i){i=gf(Error(He(424)),e),e=CE(t,e,r,n,i);break e}else for(Ui=Ja(e.stateNode.containerInfo.firstChild),zi=e,bn=!0,Is=null,n=tB(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hf(),r===i){e=ea(t,e,n);break e}ri(t,e,r,n)}e=e.child}return e;case 5:return nB(e),t===null&&O_(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,I_(r,i)?o=null:s!==null&&I_(r,s)&&(e.flags|=32),EB(t,e),ri(t,e,o,n),e.child;case 6:return t===null&&O_(e),null;case 13:return TB(t,e,n);case 4:return ab(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pf(e,null,r,n):ri(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rs(r,i),AE(t,e,r,i,n);case 7:return ri(t,e,e.pendingProps,n),e.child;case 8:return ri(t,e,e.pendingProps.children,n),e.child;case 12:return ri(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,pn(W0,r._currentValue),r._currentValue=o,s!==null)if(zs(s.value,o)){if(s.children===i.children&&!bi.current){e=ea(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ko(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),U_(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(He(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),U_(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ri(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,nf(e,n),i=xs(i),r=r(i),e.flags|=1,ri(t,e,r,n),e.child;case 14:return r=e.type,i=Rs(r,e.pendingProps),i=Rs(r.type,i),ME(t,e,r,i,n);case 15:return AB(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rs(r,i),d0(t,e),e.tag=1,Ai(r)?(t=!0,G0(e)):t=!1,nf(e,n),ZP(e,r,i),z_(e,r,i,n),V_(null,e,r,!0,t,n);case 19:return RB(t,e,n);case 22:return MB(t,e,n)}throw Error(He(156,e.tag))};function jB(t,e){return vP(t,e)}function $U(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(t,e,n,r){return new $U(t,e,n,r)}function Sb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JU(t){if(typeof t=="function")return Sb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===GS)return 11;if(t===HS)return 14}return 2}function Qa(t,e){var n=t.alternate;return n===null?(n=ps(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function m0(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Sb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case kc:return ou(n.children,i,s,e);case zS:o=8,i|=8;break;case c_:return t=ps(12,n,e,i|2),t.elementType=c_,t.lanes=s,t;case f_:return t=ps(13,n,e,i),t.elementType=f_,t.lanes=s,t;case d_:return t=ps(19,n,e,i),t.elementType=d_,t.lanes=s,t;case eP:return Uv(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qR:o=10;break e;case ZR:o=9;break e;case GS:o=11;break e;case HS:o=14;break e;case Ia:o=16,r=null;break e}throw Error(He(130,t==null?t:typeof t,""))}return e=ps(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ou(t,e,n,r){return t=ps(7,t,r,e),t.lanes=n,t}function Uv(t,e,n,r){return t=ps(22,t,r,e),t.elementType=eP,t.lanes=n,t.stateNode={isHidden:!1},t}function N1(t,e,n){return t=ps(6,t,null,e),t.lanes=n,t}function z1(t,e,n){return e=ps(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XU(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_1(0),this.expirationTimes=_1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bb(t,e,n,r,i,s,o,a,l){return t=new XU(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ps(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ob(s),t}function KU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $B(t){if(!t)return tl;t=t._reactInternals;e:{if(Du(t)!==t||t.tag!==1)throw Error(He(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ai(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(He(171))}if(t.tag===1){var n=t.type;if(Ai(n))return jP(t,n,e)}return e}function JB(t,e,n,r,i,s,o,a,l){return t=bb(n,r,!0,t,i,s,o,a,l),t.context=$B(null),n=t.current,r=li(),i=Ya(n),s=Ko(r,i),s.callback=e??null,Xa(n,s,i),t.current.lanes=i,fp(t,i,r),Mi(t,r),t}function Nv(t,e,n,r){var i=e.current,s=li(),o=Ya(i);return n=$B(n),e.context===null?e.context=n:e.pendingContext=n,e=Ko(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Xa(i,e,o),t!==null&&(Os(t,i,o,s),u0(t,i,o)),o}function ev(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function OE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ab(t,e){OE(t,e),(t=t.alternate)&&OE(t,e)}function YU(){return null}var XB=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mb(t){this._internalRoot=t}zv.prototype.render=Mb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(He(409));Nv(t,e,null,null)};zv.prototype.unmount=Mb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_u(function(){Nv(null,t,null,null)}),e[qo]=null}};function zv(t){this._internalRoot=t}zv.prototype.unstable_scheduleHydration=function(t){if(t){var e=AP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fa.length&&e!==0&&e<Fa[n].priority;n++);Fa.splice(n,0,t),n===0&&EP(t)}};function Eb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function UE(){}function QU(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ev(o);s.call(u)}}var o=JB(e,r,t,0,null,!1,!1,"",UE);return t._reactRootContainer=o,t[qo]=o.current,Lh(t.nodeType===8?t.parentNode:t),_u(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=ev(l);a.call(u)}}var l=bb(t,0,!1,null,null,!1,!1,"",UE);return t._reactRootContainer=l,t[qo]=l.current,Lh(t.nodeType===8?t.parentNode:t),_u(function(){Nv(e,l,n,r)}),l}function Hv(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ev(o);a.call(l)}}Nv(e,o,t,i)}else o=QU(n,e,t,i,r);return ev(o)}SP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zd(e.pendingLanes);n!==0&&(jS(e,n|1),Mi(e,$n()),!(Yt&6)&&(vf=$n()+500,ul()))}break;case 13:_u(function(){var r=Zo(t,1);if(r!==null){var i=li();Os(r,t,1,i)}}),Ab(t,1)}};$S=function(t){if(t.tag===13){var e=Zo(t,134217728);if(e!==null){var n=li();Os(e,t,134217728,n)}Ab(t,134217728)}};bP=function(t){if(t.tag===13){var e=Ya(t),n=Zo(t,e);if(n!==null){var r=li();Os(n,t,e,r)}Ab(t,e)}};AP=function(){return nn};MP=function(t,e){var n=nn;try{return nn=t,e()}finally{nn=n}};S_=function(t,e,n){switch(e){case"input":if(m_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Iv(r);if(!i)throw Error(He(90));nP(r),m_(r,i)}}}break;case"textarea":iP(t,n);break;case"select":e=n.value,e!=null&&qc(t,!!n.multiple,e,!1)}};fP=xb;dP=_u;var qU={usingClientEntryPoint:!1,Events:[hp,Nc,Iv,uP,cP,xb]},Ed={findFiberByHostInstance:Xl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ZU={bundleType:Ed.bundleType,version:Ed.version,rendererPackageName:Ed.rendererPackageName,rendererConfig:Ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mP(t),t===null?null:t.stateNode},findFiberByHostInstance:Ed.findFiberByHostInstance||YU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eg.isDisabled&&eg.supportsFiber)try{Tv=eg.inject(ZU),co=eg}catch{}}Wi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qU;Wi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eb(e))throw Error(He(200));return KU(t,e,null,n)};Wi.createRoot=function(t,e){if(!Eb(t))throw Error(He(299));var n=!1,r="",i=XB;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=bb(t,1,!1,null,null,n,!1,r,i),t[qo]=e.current,Lh(t.nodeType===8?t.parentNode:t),new Mb(e)};Wi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(He(188)):(t=Object.keys(t).join(","),Error(He(268,t)));return t=mP(e),t=t===null?null:t.stateNode,t};Wi.flushSync=function(t){return _u(t)};Wi.hydrate=function(t,e,n){if(!Gv(e))throw Error(He(200));return Hv(null,t,e,!0,n)};Wi.hydrateRoot=function(t,e,n){if(!Eb(t))throw Error(He(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=XB;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=JB(e,null,t,1,n??null,i,!1,s,o),t[qo]=e.current,Lh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new zv(e)};Wi.render=function(t,e,n){if(!Gv(e))throw Error(He(200));return Hv(null,t,e,!1,n)};Wi.unmountComponentAtNode=function(t){if(!Gv(t))throw Error(He(40));return t._reactRootContainer?(_u(function(){Hv(null,null,t,!1,function(){t._reactRootContainer=null,t[qo]=null})}),!0):!1};Wi.unstable_batchedUpdates=xb;Wi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Gv(n))throw Error(He(200));if(t==null||t._reactInternals===void 0)throw Error(He(38));return Hv(t,e,n,!1,r)};Wi.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=Wi})(YO);const Cb=Ev(P0);var KB,NE=P0;KB=a_.createRoot=NE.createRoot,a_.hydrateRoot=NE.hydrateRoot;function xi(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}function rn(){return rn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rn.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Lu="149",zl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Gl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},YB=0,tw=1,QB=2,eN=3,qB=0,Vv=1,ph=2,Ql=3,Gs=0,Hr=1,wi=2,tN=2,ui=0,au=1,Vh=2,nw=3,rw=4,ZB=5,jl=100,eI=101,tI=102,iw=103,sw=104,nI=200,rI=201,iI=202,sI=203,Tb=204,Rb=205,oI=206,aI=207,lI=208,uI=209,cI=210,fI=0,dI=1,hI=2,tv=3,pI=4,mI=5,gI=6,vI=7,mp=0,yI=1,xI=2,Us=0,_I=1,wI=2,SI=3,Pb=4,bI=5,Wv=300,ta=301,nl=302,yf=303,Wh=304,Lf=306,rl=1e3,Sr=1001,xf=1002,Sn=1003,jh=1004,nN=1004,sf=1005,rN=1005,Kt=1006,jv=1007,iN=1007,Hs=1008,sN=1008,Ei=1009,AI=1010,MI=1011,Bb=1012,EI=1013,za=1014,Ni=1015,Nr=1016,CI=1017,TI=1018,lu=1020,RI=1021,Ur=1023,PI=1024,BI=1025,qa=1026,wu=1027,II=1028,DI=1029,LI=1030,kI=1031,FI=1033,g0=33776,v0=33777,y0=33778,x0=33779,ow=35840,aw=35841,lw=35842,uw=35843,OI=36196,cw=37492,fw=37496,dw=37808,hw=37809,pw=37810,mw=37811,gw=37812,vw=37813,yw=37814,xw=37815,_w=37816,ww=37817,Sw=37818,bw=37819,Aw=37820,Mw=37821,_0=36492,UI=36283,Ew=36284,Cw=36285,Tw=36286,NI=2200,zI=2201,GI=2202,_f=2300,Su=2301,w0=2302,ql=2400,Zl=2401,$h=2402,$v=2500,Ib=2501,HI=0,Db=1,nv=2,mo=3e3,Lt=3001,Jv=3200,Lb=3201,cl=0,VI=1,oN="",Bs="srgb",wf="srgb-linear",aN=0,S0=7680,lN=7681,uN=7682,cN=7683,fN=34055,dN=34056,hN=5386,pN=512,mN=513,gN=514,vN=515,yN=516,xN=517,_N=518,WI=519,Jh=35044,wN=35048,SN=35040,bN=35045,AN=35049,MN=35041,EN=35046,CN=35050,TN=35042,RN="100",Rw="300 es",rv=1035;class $i{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const kr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let zE=1234567;const uu=Math.PI/180,Xh=180/Math.PI;function Gi(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(kr[t&255]+kr[t>>8&255]+kr[t>>16&255]+kr[t>>24&255]+"-"+kr[e&255]+kr[e>>8&255]+"-"+kr[e>>16&15|64]+kr[e>>24&255]+"-"+kr[n&63|128]+kr[n>>8&255]+"-"+kr[n>>16&255]+kr[n>>24&255]+kr[r&255]+kr[r>>8&255]+kr[r>>16&255]+kr[r>>24&255]).toLowerCase()}function Jn(t,e,n){return Math.max(e,Math.min(n,t))}function kb(t,e){return(t%e+e)%e}function PN(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function BN(t,e,n){return t!==e?(n-t)/(e-t):0}function mh(t,e,n){return(1-n)*t+n*e}function IN(t,e,n,r){return mh(t,e,1-Math.exp(-n*r))}function DN(t,e=1){return e-Math.abs(kb(t,e*2)-e)}function LN(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function kN(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function FN(t,e){return t+Math.floor(Math.random()*(e-t+1))}function ON(t,e){return t+Math.random()*(e-t)}function UN(t){return t*(.5-Math.random())}function NN(t){t!==void 0&&(zE=t);let e=zE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function zN(t){return t*uu}function GN(t){return t*Xh}function Pw(t){return(t&t-1)===0&&t!==0}function jI(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function iv(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function HN(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),u=s((e+r)/2),c=o((e+r)/2),f=s((e-r)/2),h=o((e-r)/2),m=s((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":t.set(a*c,l*f,l*h,a*u);break;case"YZY":t.set(l*h,a*c,l*f,a*u);break;case"ZXZ":t.set(l*f,l*h,a*c,a*u);break;case"XZX":t.set(a*c,l*g,l*m,a*u);break;case"YXY":t.set(l*m,a*c,l*g,a*u);break;case"ZYZ":t.set(l*g,l*m,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Jo(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function dn(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}var eu=Object.freeze({__proto__:null,DEG2RAD:uu,RAD2DEG:Xh,ceilPowerOfTwo:jI,clamp:Jn,damp:IN,degToRad:zN,denormalize:Jo,euclideanModulo:kb,floorPowerOfTwo:iv,generateUUID:Gi,inverseLerp:BN,isPowerOfTwo:Pw,lerp:mh,mapLinear:PN,normalize:dn,pingpong:DN,radToDeg:GN,randFloat:ON,randFloatSpread:UN,randInt:FN,seededRandom:NN,setQuaternionFromProperEuler:HN,smootherstep:kN,smoothstep:LN});class we{constructor(e=0,n=0){we.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class zr{constructor(){zr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,r,i,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=n,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],c=r[4],f=r[7],h=r[2],m=r[5],g=r[8],v=i[0],y=i[3],_=i[6],x=i[1],w=i[4],b=i[7],E=i[2],C=i[5],P=i[8];return s[0]=o*v+a*x+l*E,s[3]=o*y+a*w+l*C,s[6]=o*_+a*b+l*P,s[1]=u*v+c*x+f*E,s[4]=u*y+c*w+f*C,s[7]=u*_+c*b+f*P,s[2]=h*v+m*x+g*E,s[5]=h*y+m*w+g*C,s[8]=h*_+m*b+g*P,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return n*o*c-n*a*u-r*s*c+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=c*o-a*u,h=a*l-c*s,m=u*s-o*l,g=n*f+r*h+i*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=f*v,e[1]=(i*u-c*r)*v,e[2]=(a*r-i*o)*v,e[3]=h*v,e[4]=(c*n-i*l)*v,e[5]=(i*s-a*n)*v,e[6]=m*v,e[7]=(r*l-u*n)*v,e[8]=(o*n-r*s)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(G1.makeScale(e,n)),this}rotate(e){return this.premultiply(G1.makeRotation(-e)),this}translate(e,n){return this.premultiply(G1.makeTranslation(e,n)),this}makeTranslation(e,n){return this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const G1=new zr;function $I(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const VN={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function $c(t,e){return new VN[t](e)}function Kh(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function cu(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function b0(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const H1={[Bs]:{[wf]:cu},[wf]:{[Bs]:b0}},Fr={legacyMode:!0,get workingColorSpace(){return wf},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(H1[e]&&H1[e][n]!==void 0){const r=H1[e][n];return t.r=r(t.r),t.g=r(t.g),t.b=r(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},JI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},nr={r:0,g:0,b:0},Es={h:0,s:0,l:0},tg={h:0,s:0,l:0};function V1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function ng(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}let $e=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&r===void 0?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Bs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Fr.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Fr.workingColorSpace){return this.r=e,this.g=n,this.b=r,Fr.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Fr.workingColorSpace){if(e=kb(e,1),n=Jn(n,0,1),r=Jn(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=V1(o,s,e+1/3),this.g=V1(o,s,e),this.b=V1(o,s,e-1/3)}return Fr.toWorkingColorSpace(this,i),this}setStyle(e,n=Bs){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Fr.toWorkingColorSpace(this,n),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Fr.toWorkingColorSpace(this,n),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,u=parseFloat(s[2])/100,c=parseFloat(s[3])/100;return r(s[4]),this.setHSL(l,u,c,n)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Fr.toWorkingColorSpace(this,n),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Fr.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=Bs){const r=JI[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=cu(e.r),this.g=cu(e.g),this.b=cu(e.b),this}copyLinearToSRGB(e){return this.r=b0(e.r),this.g=b0(e.g),this.b=b0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Bs){return Fr.fromWorkingColorSpace(ng(this,nr),e),Jn(nr.r*255,0,255)<<16^Jn(nr.g*255,0,255)<<8^Jn(nr.b*255,0,255)<<0}getHexString(e=Bs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Fr.workingColorSpace){Fr.fromWorkingColorSpace(ng(this,nr),n);const r=nr.r,i=nr.g,s=nr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const f=o-a;switch(u=c<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,n=Fr.workingColorSpace){return Fr.fromWorkingColorSpace(ng(this,nr),n),e.r=nr.r,e.g=nr.g,e.b=nr.b,e}getStyle(e=Bs){return Fr.fromWorkingColorSpace(ng(this,nr),e),e!==Bs?`color(${e} ${nr.r} ${nr.g} ${nr.b})`:`rgb(${nr.r*255|0},${nr.g*255|0},${nr.b*255|0})`}offsetHSL(e,n,r){return this.getHSL(Es),Es.h+=e,Es.s+=n,Es.l+=r,this.setHSL(Es.h,Es.s,Es.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Es),e.getHSL(tg);const r=mh(Es.h,tg.h,n),i=mh(Es.s,tg.s,n),s=mh(Es.l,tg.l,n);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};$e.NAMES=JI;let oc;class Fb{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{oc===void 0&&(oc=Kh("canvas")),oc.width=e.width,oc.height=e.height;const r=oc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=oc}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Kh("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=cu(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(cu(n[r]/255)*255):n[r]=cu(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class tu{constructor(e=null){this.isSource=!0,this.uuid=Gi(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(W1(i[o].image)):s.push(W1(i[o]))}else s=W1(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function W1(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Fb.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let WN=0;class an extends $i{constructor(e=an.DEFAULT_IMAGE,n=an.DEFAULT_MAPPING,r=Sr,i=Sr,s=Kt,o=Hs,a=Ur,l=Ei,u=an.DEFAULT_ANISOTROPY,c=mo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:WN++}),this.uuid=Gi(),this.name="",this.source=new tu(e),this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new we(0,0),this.repeat=new we(1,1),this.center=new we(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new zr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Wv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case rl:e.x=e.x-Math.floor(e.x);break;case Sr:e.x=e.x<0?0:1;break;case xf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case rl:e.y=e.y-Math.floor(e.y);break;case Sr:e.y=e.y<0?0:1;break;case xf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}an.DEFAULT_IMAGE=null;an.DEFAULT_MAPPING=Wv;an.DEFAULT_ANISOTROPY=1;class $t{constructor(e=0,n=0,r=0,i=1){$t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,u=l[0],c=l[4],f=l[8],h=l[1],m=l[5],g=l[9],v=l[2],y=l[6],_=l[10];if(Math.abs(c-h)<.01&&Math.abs(f-v)<.01&&Math.abs(g-y)<.01){if(Math.abs(c+h)<.1&&Math.abs(f+v)<.1&&Math.abs(g+y)<.1&&Math.abs(u+m+_-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(u+1)/2,b=(m+1)/2,E=(_+1)/2,C=(c+h)/4,P=(f+v)/4,M=(g+y)/4;return w>b&&w>E?w<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(w),i=C/r,s=P/r):b>E?b<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(b),r=C/i,s=M/i):E<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(E),r=P/s,i=M/s),this.set(r,i,s,n),this}let x=Math.sqrt((y-g)*(y-g)+(f-v)*(f-v)+(h-c)*(h-c));return Math.abs(x)<.001&&(x=1),this.x=(y-g)/x,this.y=(f-v)/x,this.z=(h-c)/x,this.w=Math.acos((u+m+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class hn extends $i{constructor(e=1,n=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new $t(0,0,e,n),this.scissorTest=!1,this.viewport=new $t(0,0,e,n);const i={width:e,height:n,depth:1};this.texture=new an(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Kt,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new tu(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Xv extends an{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Sn,this.minFilter=Sn,this.wrapR=Sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class jN extends hn{constructor(e=1,n=1,r=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new Xv(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class Ob extends an{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Sn,this.minFilter=Sn,this.wrapR=Sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $N extends hn{constructor(e=1,n=1,r=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new Ob(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class JN extends hn{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class sr{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],u=r[i+1],c=r[i+2],f=r[i+3];const h=s[o+0],m=s[o+1],g=s[o+2],v=s[o+3];if(a===0){e[n+0]=l,e[n+1]=u,e[n+2]=c,e[n+3]=f;return}if(a===1){e[n+0]=h,e[n+1]=m,e[n+2]=g,e[n+3]=v;return}if(f!==v||l!==h||u!==m||c!==g){let y=1-a;const _=l*h+u*m+c*g+f*v,x=_>=0?1:-1,w=1-_*_;if(w>Number.EPSILON){const E=Math.sqrt(w),C=Math.atan2(E,_*x);y=Math.sin(y*C)/E,a=Math.sin(a*C)/E}const b=a*x;if(l=l*y+h*b,u=u*y+m*b,c=c*y+g*b,f=f*y+v*b,y===1-a){const E=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=E,u*=E,c*=E,f*=E}}e[n]=l,e[n+1]=u,e[n+2]=c,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],f=s[o],h=s[o+1],m=s[o+2],g=s[o+3];return e[n]=a*g+c*f+l*m-u*h,e[n+1]=l*g+c*h+u*f-a*m,e[n+2]=u*g+c*m+a*h-l*f,e[n+3]=c*g-a*f-l*h-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),f=a(s/2),h=l(r/2),m=l(i/2),g=l(s/2);switch(o){case"XYZ":this._x=h*c*f+u*m*g,this._y=u*m*f-h*c*g,this._z=u*c*g+h*m*f,this._w=u*c*f-h*m*g;break;case"YXZ":this._x=h*c*f+u*m*g,this._y=u*m*f-h*c*g,this._z=u*c*g-h*m*f,this._w=u*c*f+h*m*g;break;case"ZXY":this._x=h*c*f-u*m*g,this._y=u*m*f+h*c*g,this._z=u*c*g+h*m*f,this._w=u*c*f-h*m*g;break;case"ZYX":this._x=h*c*f-u*m*g,this._y=u*m*f+h*c*g,this._z=u*c*g-h*m*f,this._w=u*c*f+h*m*g;break;case"YZX":this._x=h*c*f+u*m*g,this._y=u*m*f+h*c*g,this._z=u*c*g-h*m*f,this._w=u*c*f-h*m*g;break;case"XZY":this._x=h*c*f-u*m*g,this._y=u*m*f-h*c*g,this._z=u*c*g+h*m*f,this._w=u*c*f+h*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],u=n[2],c=n[6],f=n[10],h=r+a+f;if(h>0){const m=.5/Math.sqrt(h+1);this._w=.25/m,this._x=(c-l)*m,this._y=(s-u)*m,this._z=(o-i)*m}else if(r>a&&r>f){const m=2*Math.sqrt(1+r-a-f);this._w=(c-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+u)/m}else if(a>f){const m=2*Math.sqrt(1+a-r-f);this._w=(s-u)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+c)/m}else{const m=2*Math.sqrt(1+f-r-a);this._w=(o-i)/m,this._x=(s+u)/m,this._y=(l+c)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Jn(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,u=n._z,c=n._w;return this._x=r*c+o*a+i*u-s*l,this._y=i*c+o*l+s*a-r*u,this._z=s*c+o*u+r*l-i*a,this._w=o*c-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-n;return this._w=m*o+n*this._w,this._x=m*r+n*this._x,this._y=m*i+n*this._y,this._z=m*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),f=Math.sin((1-n)*c)/u,h=Math.sin(n*c)/u;return this._w=o*f+this._w*h,this._x=r*f+this._x*h,this._y=i*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class V{constructor(e=0,n=0,r=0){V.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(GE.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(GE.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*n+o*i-a*r,c=l*r+a*n-s*i,f=l*i+s*r-o*n,h=-s*n-o*r-a*i;return this.x=u*l+h*-s+c*-a-f*-o,this.y=c*l+h*-o+f*-s-u*-a,this.z=f*l+h*-a+u*-o-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return j1.copy(this).projectOnVector(e),this.sub(j1)}reflect(e){return this.sub(j1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Jn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const j1=new V,GE=new sr;class vo{constructor(e=new V(1/0,1/0,1/0),n=new V(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,u=e.length;l<u;l+=3){const c=e[l],f=e[l+1],h=e[l+2];c<n&&(n=c),f<r&&(r=f),h<i&&(i=h),c>s&&(s=c),f>o&&(o=f),h>a&&(a=h)}return this.min.set(n,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let n=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,u=e.count;l<u;l++){const c=e.getX(l),f=e.getY(l),h=e.getZ(l);c<n&&(n=c),f<r&&(r=f),h<i&&(i=h),c>s&&(s=c),f>o&&(o=f),h>a&&(a=h)}return this.min.set(n,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Cl.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(n&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Cl.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Cl)}else r.boundingBox===null&&r.computeBoundingBox(),$1.copy(r.boundingBox),$1.applyMatrix4(e.matrixWorld),this.union($1);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Cl),Cl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Cd),rg.subVectors(this.max,Cd),ac.subVectors(e.a,Cd),lc.subVectors(e.b,Cd),uc.subVectors(e.c,Cd),Sa.subVectors(lc,ac),ba.subVectors(uc,lc),Tl.subVectors(ac,uc);let n=[0,-Sa.z,Sa.y,0,-ba.z,ba.y,0,-Tl.z,Tl.y,Sa.z,0,-Sa.x,ba.z,0,-ba.x,Tl.z,0,-Tl.x,-Sa.y,Sa.x,0,-ba.y,ba.x,0,-Tl.y,Tl.x,0];return!J1(n,ac,lc,uc,rg)||(n=[1,0,0,0,1,0,0,0,1],!J1(n,ac,lc,uc,rg))?!1:(ig.crossVectors(Sa,ba),n=[ig.x,ig.y,ig.z],J1(n,ac,lc,uc,rg))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Cl.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Cl).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Bo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Bo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Bo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Bo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Bo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Bo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Bo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Bo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Bo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Bo=[new V,new V,new V,new V,new V,new V,new V,new V],Cl=new V,$1=new vo,ac=new V,lc=new V,uc=new V,Sa=new V,ba=new V,Tl=new V,Cd=new V,rg=new V,ig=new V,Rl=new V;function J1(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){Rl.fromArray(t,s);const a=i.x*Math.abs(Rl.x)+i.y*Math.abs(Rl.y)+i.z*Math.abs(Rl.z),l=e.dot(Rl),u=n.dot(Rl),c=r.dot(Rl);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const XN=new vo,Td=new V,X1=new V;let oa=class{constructor(e=new V,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):XN.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Td.subVectors(e,this.center);const n=Td.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Td,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(X1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Td.copy(e.center).add(X1)),this.expandByPoint(Td.copy(e.center).sub(X1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Io=new V,K1=new V,sg=new V,Aa=new V,Y1=new V,og=new V,Q1=new V;class gp{constructor(e=new V,n=new V(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Io)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Io.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Io.copy(this.direction).multiplyScalar(n).add(this.origin),Io.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){K1.copy(e).add(n).multiplyScalar(.5),sg.copy(n).sub(e).normalize(),Aa.copy(this.origin).sub(K1);const s=e.distanceTo(n)*.5,o=-this.direction.dot(sg),a=Aa.dot(this.direction),l=-Aa.dot(sg),u=Aa.lengthSq(),c=Math.abs(1-o*o);let f,h,m,g;if(c>0)if(f=o*l-a,h=o*a-l,g=s*c,f>=0)if(h>=-g)if(h<=g){const v=1/c;f*=v,h*=v,m=f*(f+o*h+2*a)+h*(o*f+h+2*l)+u}else h=s,f=Math.max(0,-(o*h+a)),m=-f*f+h*(h+2*l)+u;else h=-s,f=Math.max(0,-(o*h+a)),m=-f*f+h*(h+2*l)+u;else h<=-g?(f=Math.max(0,-(-o*s+a)),h=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+h*(h+2*l)+u):h<=g?(f=0,h=Math.min(Math.max(-s,-l),s),m=h*(h+2*l)+u):(f=Math.max(0,-(o*s+a)),h=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+h*(h+2*l)+u);else h=o>0?-s:s,f=Math.max(0,-(o*h+a)),m=-f*f+h*(h+2*l)+u;return r&&r.copy(this.direction).multiplyScalar(f).add(this.origin),i&&i.copy(sg).multiplyScalar(h).add(K1),m}intersectSphere(e,n){Io.subVectors(e.center,this.origin);const r=Io.dot(this.direction),i=Io.dot(Io)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return a<0&&l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,h=this.origin;return u>=0?(r=(e.min.x-h.x)*u,i=(e.max.x-h.x)*u):(r=(e.max.x-h.x)*u,i=(e.min.x-h.x)*u),c>=0?(s=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(s=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(a=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Io)!==null}intersectTriangle(e,n,r,i,s){Y1.subVectors(n,e),og.subVectors(r,e),Q1.crossVectors(Y1,og);let o=this.direction.dot(Q1),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Aa.subVectors(this.origin,e);const l=a*this.direction.dot(og.crossVectors(Aa,og));if(l<0)return null;const u=a*this.direction.dot(Y1.cross(Aa));if(u<0||l+u>o)return null;const c=-a*Aa.dot(Q1);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class gt{constructor(){gt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,r,i,s,o,a,l,u,c,f,h,m,g,v,y){const _=this.elements;return _[0]=e,_[4]=n,_[8]=r,_[12]=i,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=u,_[6]=c,_[10]=f,_[14]=h,_[3]=m,_[7]=g,_[11]=v,_[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new gt().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/cc.setFromMatrixColumn(e,0).length(),s=1/cc.setFromMatrixColumn(e,1).length(),o=1/cc.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=o*c,m=o*f,g=a*c,v=a*f;n[0]=l*c,n[4]=-l*f,n[8]=u,n[1]=m+g*u,n[5]=h-v*u,n[9]=-a*l,n[2]=v-h*u,n[6]=g+m*u,n[10]=o*l}else if(e.order==="YXZ"){const h=l*c,m=l*f,g=u*c,v=u*f;n[0]=h+v*a,n[4]=g*a-m,n[8]=o*u,n[1]=o*f,n[5]=o*c,n[9]=-a,n[2]=m*a-g,n[6]=v+h*a,n[10]=o*l}else if(e.order==="ZXY"){const h=l*c,m=l*f,g=u*c,v=u*f;n[0]=h-v*a,n[4]=-o*f,n[8]=g+m*a,n[1]=m+g*a,n[5]=o*c,n[9]=v-h*a,n[2]=-o*u,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const h=o*c,m=o*f,g=a*c,v=a*f;n[0]=l*c,n[4]=g*u-m,n[8]=h*u+v,n[1]=l*f,n[5]=v*u+h,n[9]=m*u-g,n[2]=-u,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const h=o*l,m=o*u,g=a*l,v=a*u;n[0]=l*c,n[4]=v-h*f,n[8]=g*f+m,n[1]=f,n[5]=o*c,n[9]=-a*c,n[2]=-u*c,n[6]=m*f+g,n[10]=h-v*f}else if(e.order==="XZY"){const h=o*l,m=o*u,g=a*l,v=a*u;n[0]=l*c,n[4]=-f,n[8]=u*c,n[1]=h*f+v,n[5]=o*c,n[9]=m*f-g,n[2]=g*f-m,n[6]=a*c,n[10]=v*f+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(KN,e,YN)}lookAt(e,n,r){const i=this.elements;return ki.subVectors(e,n),ki.lengthSq()===0&&(ki.z=1),ki.normalize(),Ma.crossVectors(r,ki),Ma.lengthSq()===0&&(Math.abs(r.z)===1?ki.x+=1e-4:ki.z+=1e-4,ki.normalize(),Ma.crossVectors(r,ki)),Ma.normalize(),ag.crossVectors(ki,Ma),i[0]=Ma.x,i[4]=ag.x,i[8]=ki.x,i[1]=Ma.y,i[5]=ag.y,i[9]=ki.y,i[2]=Ma.z,i[6]=ag.z,i[10]=ki.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],c=r[1],f=r[5],h=r[9],m=r[13],g=r[2],v=r[6],y=r[10],_=r[14],x=r[3],w=r[7],b=r[11],E=r[15],C=i[0],P=i[4],M=i[8],B=i[12],D=i[1],k=i[5],O=i[9],U=i[13],N=i[2],$=i[6],Q=i[10],ie=i[14],F=i[3],z=i[7],j=i[11],H=i[15];return s[0]=o*C+a*D+l*N+u*F,s[4]=o*P+a*k+l*$+u*z,s[8]=o*M+a*O+l*Q+u*j,s[12]=o*B+a*U+l*ie+u*H,s[1]=c*C+f*D+h*N+m*F,s[5]=c*P+f*k+h*$+m*z,s[9]=c*M+f*O+h*Q+m*j,s[13]=c*B+f*U+h*ie+m*H,s[2]=g*C+v*D+y*N+_*F,s[6]=g*P+v*k+y*$+_*z,s[10]=g*M+v*O+y*Q+_*j,s[14]=g*B+v*U+y*ie+_*H,s[3]=x*C+w*D+b*N+E*F,s[7]=x*P+w*k+b*$+E*z,s[11]=x*M+w*O+b*Q+E*j,s[15]=x*B+w*U+b*ie+E*H,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],f=e[6],h=e[10],m=e[14],g=e[3],v=e[7],y=e[11],_=e[15];return g*(+s*l*f-i*u*f-s*a*h+r*u*h+i*a*m-r*l*m)+v*(+n*l*m-n*u*h+s*o*h-i*o*m+i*u*c-s*l*c)+y*(+n*u*f-n*a*m-s*o*f+r*o*m+s*a*c-r*u*c)+_*(-i*a*c-n*l*f+n*a*h+i*o*f-r*o*h+r*l*c)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],m=e[11],g=e[12],v=e[13],y=e[14],_=e[15],x=f*y*u-v*h*u+v*l*m-a*y*m-f*l*_+a*h*_,w=g*h*u-c*y*u-g*l*m+o*y*m+c*l*_-o*h*_,b=c*v*u-g*f*u+g*a*m-o*v*m-c*a*_+o*f*_,E=g*f*l-c*v*l-g*a*h+o*v*h+c*a*y-o*f*y,C=n*x+r*w+i*b+s*E;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/C;return e[0]=x*P,e[1]=(v*h*s-f*y*s-v*i*m+r*y*m+f*i*_-r*h*_)*P,e[2]=(a*y*s-v*l*s+v*i*u-r*y*u-a*i*_+r*l*_)*P,e[3]=(f*l*s-a*h*s-f*i*u+r*h*u+a*i*m-r*l*m)*P,e[4]=w*P,e[5]=(c*y*s-g*h*s+g*i*m-n*y*m-c*i*_+n*h*_)*P,e[6]=(g*l*s-o*y*s-g*i*u+n*y*u+o*i*_-n*l*_)*P,e[7]=(o*h*s-c*l*s+c*i*u-n*h*u-o*i*m+n*l*m)*P,e[8]=b*P,e[9]=(g*f*s-c*v*s-g*r*m+n*v*m+c*r*_-n*f*_)*P,e[10]=(o*v*s-g*a*s+g*r*u-n*v*u-o*r*_+n*a*_)*P,e[11]=(c*a*s-o*f*s-c*r*u+n*f*u+o*r*m-n*a*m)*P,e[12]=E*P,e[13]=(c*v*i-g*f*i+g*r*h-n*v*h-c*r*y+n*f*y)*P,e[14]=(g*a*i-o*v*i-g*r*l+n*v*l+o*r*y-n*a*y)*P,e[15]=(o*f*i-c*a*i+c*r*l-n*f*l-o*r*h+n*a*h)*P,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*o,0,u*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,u=s+s,c=o+o,f=a+a,h=s*u,m=s*c,g=s*f,v=o*c,y=o*f,_=a*f,x=l*u,w=l*c,b=l*f,E=r.x,C=r.y,P=r.z;return i[0]=(1-(v+_))*E,i[1]=(m+b)*E,i[2]=(g-w)*E,i[3]=0,i[4]=(m-b)*C,i[5]=(1-(h+_))*C,i[6]=(y+x)*C,i[7]=0,i[8]=(g+w)*P,i[9]=(y-x)*P,i[10]=(1-(h+v))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=cc.set(i[0],i[1],i[2]).length();const o=cc.set(i[4],i[5],i[6]).length(),a=cc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Cs.copy(this);const u=1/s,c=1/o,f=1/a;return Cs.elements[0]*=u,Cs.elements[1]*=u,Cs.elements[2]*=u,Cs.elements[4]*=c,Cs.elements[5]*=c,Cs.elements[6]*=c,Cs.elements[8]*=f,Cs.elements[9]*=f,Cs.elements[10]*=f,n.setFromRotationMatrix(Cs),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o){const a=this.elements,l=2*s/(n-e),u=2*s/(r-i),c=(n+e)/(n-e),f=(r+i)/(r-i),h=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,r,i,s,o){const a=this.elements,l=1/(n-e),u=1/(r-i),c=1/(o-s),f=(n+e)*l,h=(r+i)*u,m=(o+s)*c;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const cc=new V,Cs=new gt,KN=new V(0,0,0),YN=new V(1,1,1),Ma=new V,ag=new V,ki=new V,HE=new gt,VE=new sr;class kf{constructor(e=0,n=0,r=0,i=kf.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],c=i[9],f=i[2],h=i[6],m=i[10];switch(n){case"XYZ":this._y=Math.asin(Jn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Jn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Jn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Jn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Jn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Jn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return HE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(HE,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return VE.setFromEuler(this),this.setFromQuaternion(VE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}kf.DEFAULT_ORDER="XYZ";class fu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let QN=0;const WE=new V,fc=new sr,Do=new gt,lg=new V,Rd=new V,qN=new V,ZN=new sr,jE=new V(1,0,0),$E=new V(0,1,0),JE=new V(0,0,1),ez={type:"added"},XE={type:"removed"};class Gt extends $i{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:QN++}),this.uuid=Gi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gt.DEFAULT_UP.clone();const e=new V,n=new kf,r=new sr,i=new V(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new gt},normalMatrix:{value:new zr}}),this.matrix=new gt,this.matrixWorld=new gt,this.matrixAutoUpdate=Gt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Gt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new fu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return fc.setFromAxisAngle(e,n),this.quaternion.multiply(fc),this}rotateOnWorldAxis(e,n){return fc.setFromAxisAngle(e,n),this.quaternion.premultiply(fc),this}rotateX(e){return this.rotateOnAxis(jE,e)}rotateY(e){return this.rotateOnAxis($E,e)}rotateZ(e){return this.rotateOnAxis(JE,e)}translateOnAxis(e,n){return WE.copy(e).applyQuaternion(this.quaternion),this.position.add(WE.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(jE,e)}translateY(e){return this.translateOnAxis($E,e)}translateZ(e){return this.translateOnAxis(JE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Do.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?lg.copy(e):lg.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Rd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Do.lookAt(Rd,lg,this.up):Do.lookAt(lg,Rd,this.up),this.quaternion.setFromRotationMatrix(Do),i&&(Do.extractRotation(i.matrixWorld),fc.setFromRotationMatrix(Do),this.quaternion.premultiply(fc.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ez)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(XE)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(XE)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Do.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Do.multiply(e.parent.matrixWorld)),e.applyMatrix4(Do),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n){let r=[];this[e]===n&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,n);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rd,e,qN),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rd,ZN,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const f=l[u];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),f=o(e.shapes),h=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),f.length>0&&(r.shapes=f),h.length>0&&(r.skeletons=h),m.length>0&&(r.animations=m),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Gt.DEFAULT_UP=new V(0,1,0);Gt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Gt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ts=new V,Lo=new V,q1=new V,ko=new V,dc=new V,hc=new V,KE=new V,Z1=new V,ex=new V,tx=new V;class ds{constructor(e=new V,n=new V,r=new V){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Ts.subVectors(e,n),i.cross(Ts);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){Ts.subVectors(i,n),Lo.subVectors(r,n),q1.subVectors(e,n);const o=Ts.dot(Ts),a=Ts.dot(Lo),l=Ts.dot(q1),u=Lo.dot(Lo),c=Lo.dot(q1),f=o*u-a*a;if(f===0)return s.set(-2,-1,-1);const h=1/f,m=(u*l-a*c)*h,g=(o*c-a*l)*h;return s.set(1-m-g,g,m)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,ko),ko.x>=0&&ko.y>=0&&ko.x+ko.y<=1}static getUV(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,ko),l.set(0,0),l.addScaledVector(s,ko.x),l.addScaledVector(o,ko.y),l.addScaledVector(a,ko.z),l}static isFrontFacing(e,n,r,i){return Ts.subVectors(r,n),Lo.subVectors(e,n),Ts.cross(Lo).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ts.subVectors(this.c,this.b),Lo.subVectors(this.a,this.b),Ts.cross(Lo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ds.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return ds.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,s){return ds.getUV(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return ds.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ds.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;dc.subVectors(i,r),hc.subVectors(s,r),Z1.subVectors(e,r);const l=dc.dot(Z1),u=hc.dot(Z1);if(l<=0&&u<=0)return n.copy(r);ex.subVectors(e,i);const c=dc.dot(ex),f=hc.dot(ex);if(c>=0&&f<=c)return n.copy(i);const h=l*f-c*u;if(h<=0&&l>=0&&c<=0)return o=l/(l-c),n.copy(r).addScaledVector(dc,o);tx.subVectors(e,s);const m=dc.dot(tx),g=hc.dot(tx);if(g>=0&&m<=g)return n.copy(s);const v=m*u-l*g;if(v<=0&&u>=0&&g<=0)return a=u/(u-g),n.copy(r).addScaledVector(hc,a);const y=c*g-m*f;if(y<=0&&f-c>=0&&m-g>=0)return KE.subVectors(s,i),a=(f-c)/(f-c+(m-g)),n.copy(i).addScaledVector(KE,a);const _=1/(y+v+h);return o=v*_,a=h*_,n.copy(r).addScaledVector(dc,o).addScaledVector(hc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let tz=0;class zn extends $i{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:tz++}),this.uuid=Gi(),this.name="",this.type="Material",this.blending=au,this.side=Gs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Tb,this.blendDst=Rb,this.blendEquation=jl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=tv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=WI,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=S0,this.stencilZFail=S0,this.stencilZPass=S0,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}const i=this[n];if(i===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==au&&(r.blending=this.blending),this.side!==Gs&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class si extends zn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=mp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const qn=new V,ug=new we;class Ut{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=Jh,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)ug.fromBufferAttribute(this,n),ug.applyMatrix3(e),this.setXY(n,ug.x,ug.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)qn.fromBufferAttribute(this,n),qn.applyMatrix3(e),this.setXYZ(n,qn.x,qn.y,qn.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)qn.fromBufferAttribute(this,n),qn.applyMatrix4(e),this.setXYZ(n,qn.x,qn.y,qn.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)qn.fromBufferAttribute(this,n),qn.applyNormalMatrix(e),this.setXYZ(n,qn.x,qn.y,qn.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)qn.fromBufferAttribute(this,n),qn.transformDirection(e),this.setXYZ(n,qn.x,qn.y,qn.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Jo(n,this.array)),n}setX(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Jo(n,this.array)),n}setY(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Jo(n,this.array)),n}setZ(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Jo(n,this.array)),n}setW(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=dn(n,this.array),r=dn(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=dn(n,this.array),r=dn(r,this.array),i=dn(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=dn(n,this.array),r=dn(r,this.array),i=dn(i,this.array),s=dn(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Jh&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class nz extends Ut{constructor(e,n,r){super(new Int8Array(e),n,r)}}class rz extends Ut{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class iz extends Ut{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class sz extends Ut{constructor(e,n,r){super(new Int16Array(e),n,r)}}class Ub extends Ut{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class oz extends Ut{constructor(e,n,r){super(new Int32Array(e),n,r)}}class Nb extends Ut{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class az extends Ut{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}}class at extends Ut{constructor(e,n,r){super(new Float32Array(e),n,r)}}class lz extends Ut{constructor(e,n,r){super(new Float64Array(e),n,r)}}let uz=0;const is=new gt,nx=new Gt,pc=new V,Fi=new vo,Pd=new vo,dr=new V;class wt extends $i{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:uz++}),this.uuid=Gi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new($I(e)?Nb:Ub)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new zr().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return is.makeRotationFromQuaternion(e),this.applyMatrix4(is),this}rotateX(e){return is.makeRotationX(e),this.applyMatrix4(is),this}rotateY(e){return is.makeRotationY(e),this.applyMatrix4(is),this}rotateZ(e){return is.makeRotationZ(e),this.applyMatrix4(is),this}translate(e,n,r){return is.makeTranslation(e,n,r),this.applyMatrix4(is),this}scale(e,n,r){return is.makeScale(e,n,r),this.applyMatrix4(is),this}lookAt(e){return nx.lookAt(e),nx.updateMatrix(),this.applyMatrix4(nx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(pc).negate(),this.translate(pc.x,pc.y,pc.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new at(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vo);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];Fi.setFromBufferAttribute(s),this.morphTargetsRelative?(dr.addVectors(this.boundingBox.min,Fi.min),this.boundingBox.expandByPoint(dr),dr.addVectors(this.boundingBox.max,Fi.max),this.boundingBox.expandByPoint(dr)):(this.boundingBox.expandByPoint(Fi.min),this.boundingBox.expandByPoint(Fi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new oa);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new V,1/0);return}if(e){const r=this.boundingSphere.center;if(Fi.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Pd.setFromBufferAttribute(a),this.morphTargetsRelative?(dr.addVectors(Fi.min,Pd.min),Fi.expandByPoint(dr),dr.addVectors(Fi.max,Pd.max),Fi.expandByPoint(dr)):(Fi.expandByPoint(Pd.min),Fi.expandByPoint(Pd.max))}Fi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)dr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(dr));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)dr.fromBufferAttribute(a,u),l&&(pc.fromBufferAttribute(e,u),dr.add(pc)),i=Math.max(i,r.distanceToSquared(dr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,o=n.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ut(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let D=0;D<a;D++)u[D]=new V,c[D]=new V;const f=new V,h=new V,m=new V,g=new we,v=new we,y=new we,_=new V,x=new V;function w(D,k,O){f.fromArray(i,D*3),h.fromArray(i,k*3),m.fromArray(i,O*3),g.fromArray(o,D*2),v.fromArray(o,k*2),y.fromArray(o,O*2),h.sub(f),m.sub(f),v.sub(g),y.sub(g);const U=1/(v.x*y.y-y.x*v.y);isFinite(U)&&(_.copy(h).multiplyScalar(y.y).addScaledVector(m,-v.y).multiplyScalar(U),x.copy(m).multiplyScalar(v.x).addScaledVector(h,-y.x).multiplyScalar(U),u[D].add(_),u[k].add(_),u[O].add(_),c[D].add(x),c[k].add(x),c[O].add(x))}let b=this.groups;b.length===0&&(b=[{start:0,count:r.length}]);for(let D=0,k=b.length;D<k;++D){const O=b[D],U=O.start,N=O.count;for(let $=U,Q=U+N;$<Q;$+=3)w(r[$+0],r[$+1],r[$+2])}const E=new V,C=new V,P=new V,M=new V;function B(D){P.fromArray(s,D*3),M.copy(P);const k=u[D];E.copy(k),E.sub(P.multiplyScalar(P.dot(k))).normalize(),C.crossVectors(M,k);const U=C.dot(c[D])<0?-1:1;l[D*4]=E.x,l[D*4+1]=E.y,l[D*4+2]=E.z,l[D*4+3]=U}for(let D=0,k=b.length;D<k;++D){const O=b[D],U=O.start,N=O.count;for(let $=U,Q=U+N;$<Q;$+=3)B(r[$+0]),B(r[$+1]),B(r[$+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Ut(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let h=0,m=r.count;h<m;h++)r.setXYZ(h,0,0,0);const i=new V,s=new V,o=new V,a=new V,l=new V,u=new V,c=new V,f=new V;if(e)for(let h=0,m=e.count;h<m;h+=3){const g=e.getX(h+0),v=e.getX(h+1),y=e.getX(h+2);i.fromBufferAttribute(n,g),s.fromBufferAttribute(n,v),o.fromBufferAttribute(n,y),c.subVectors(o,s),f.subVectors(i,s),c.cross(f),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,v),u.fromBufferAttribute(r,y),a.add(c),l.add(c),u.add(c),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(y,u.x,u.y,u.z)}else for(let h=0,m=n.count;h<m;h+=3)i.fromBufferAttribute(n,h+0),s.fromBufferAttribute(n,h+1),o.fromBufferAttribute(n,h+2),c.subVectors(o,s),f.subVectors(i,s),c.cross(f),r.setXYZ(h+0,c.x,c.y,c.z),r.setXYZ(h+1,c.x,c.y,c.z),r.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)dr.fromBufferAttribute(e,n),dr.normalize(),e.setXYZ(n,dr.x,dr.y,dr.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,f=a.normalized,h=new u.constructor(l.length*c);let m=0,g=0;for(let v=0,y=l.length;v<y;v++){a.isInterleavedBufferAttribute?m=l[v]*a.data.stride+a.offset:m=l[v]*c;for(let _=0;_<c;_++)h[g++]=u[m++]}return new Ut(h,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new wt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);n.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,f=u.length;c<f;c++){const h=u[c],m=e(h,r);l.push(m)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let f=0,h=u.length;f<h;f++){const m=u[f];c.push(m.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(n))}const s=e.morphAttributes;for(const u in s){const c=[],f=s[u];for(let h=0,m=f.length;h<m;h++)c.push(f[h].clone(n));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const f=o[u];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const YE=new gt,mc=new gp,rx=new oa,Bd=new V,Id=new V,Dd=new V,ix=new V,cg=new V,fg=new we,dg=new we,hg=new we,sx=new V,pg=new V;class Mn extends Gt{constructor(e=new wt,n=new si){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){cg.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],f=s[l];c!==0&&(ix.fromBufferAttribute(f,e),o?cg.addScaledVector(ix,c):cg.addScaledVector(ix.sub(n),c))}n.add(cg)}return this.isSkinnedMesh&&this.boneTransform(e,n),n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),rx.copy(r.boundingSphere),rx.applyMatrix4(s),e.ray.intersectsSphere(rx)===!1)||(YE.copy(s).invert(),mc.copy(e.ray).applyMatrix4(YE),r.boundingBox!==null&&mc.intersectsBox(r.boundingBox)===!1))return;let o;const a=r.index,l=r.attributes.position,u=r.attributes.uv,c=r.attributes.uv2,f=r.groups,h=r.drawRange;if(a!==null)if(Array.isArray(i))for(let m=0,g=f.length;m<g;m++){const v=f[m],y=i[v.materialIndex],_=Math.max(v.start,h.start),x=Math.min(a.count,Math.min(v.start+v.count,h.start+h.count));for(let w=_,b=x;w<b;w+=3){const E=a.getX(w),C=a.getX(w+1),P=a.getX(w+2);o=mg(this,y,e,mc,u,c,E,C,P),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=v.materialIndex,n.push(o))}}else{const m=Math.max(0,h.start),g=Math.min(a.count,h.start+h.count);for(let v=m,y=g;v<y;v+=3){const _=a.getX(v),x=a.getX(v+1),w=a.getX(v+2);o=mg(this,i,e,mc,u,c,_,x,w),o&&(o.faceIndex=Math.floor(v/3),n.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let m=0,g=f.length;m<g;m++){const v=f[m],y=i[v.materialIndex],_=Math.max(v.start,h.start),x=Math.min(l.count,Math.min(v.start+v.count,h.start+h.count));for(let w=_,b=x;w<b;w+=3){const E=w,C=w+1,P=w+2;o=mg(this,y,e,mc,u,c,E,C,P),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=v.materialIndex,n.push(o))}}else{const m=Math.max(0,h.start),g=Math.min(l.count,h.start+h.count);for(let v=m,y=g;v<y;v+=3){const _=v,x=v+1,w=v+2;o=mg(this,i,e,mc,u,c,_,x,w),o&&(o.faceIndex=Math.floor(v/3),n.push(o))}}}}function cz(t,e,n,r,i,s,o,a){let l;if(e.side===Hr?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Gs,a),l===null)return null;pg.copy(a),pg.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(pg);return u<n.near||u>n.far?null:{distance:u,point:pg.clone(),object:t}}function mg(t,e,n,r,i,s,o,a,l){t.getVertexPosition(o,Bd),t.getVertexPosition(a,Id),t.getVertexPosition(l,Dd);const u=cz(t,e,n,r,Bd,Id,Dd,sx);if(u){i&&(fg.fromBufferAttribute(i,o),dg.fromBufferAttribute(i,a),hg.fromBufferAttribute(i,l),u.uv=ds.getUV(sx,Bd,Id,Dd,fg,dg,hg,new we)),s&&(fg.fromBufferAttribute(s,o),dg.fromBufferAttribute(s,a),hg.fromBufferAttribute(s,l),u.uv2=ds.getUV(sx,Bd,Id,Dd,fg,dg,hg,new we));const c={a:o,b:a,c:l,normal:new V,materialIndex:0};ds.getNormal(Bd,Id,Dd,c.normal),u.face=c}return u}class fl extends wt{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],f=[];let h=0,m=0;g("z","y","x",-1,-1,r,n,e,o,s,0),g("z","y","x",1,-1,r,n,-e,o,s,1),g("x","z","y",1,1,e,r,n,i,o,2),g("x","z","y",1,-1,e,r,-n,i,o,3),g("x","y","z",1,-1,e,n,r,i,s,4),g("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new at(u,3)),this.setAttribute("normal",new at(c,3)),this.setAttribute("uv",new at(f,2));function g(v,y,_,x,w,b,E,C,P,M,B){const D=b/P,k=E/M,O=b/2,U=E/2,N=C/2,$=P+1,Q=M+1;let ie=0,F=0;const z=new V;for(let j=0;j<Q;j++){const H=j*k-U;for(let G=0;G<$;G++){const Z=G*D-O;z[v]=Z*x,z[y]=H*w,z[_]=N,u.push(z.x,z.y,z.z),z[v]=0,z[y]=0,z[_]=C>0?1:-1,c.push(z.x,z.y,z.z),f.push(G/P),f.push(1-j/M),ie+=1}}for(let j=0;j<M;j++)for(let H=0;H<P;H++){const G=h+H+$*j,Z=h+H+$*(j+1),re=h+(H+1)+$*(j+1),se=h+(H+1)+$*j;l.push(G,Z,se),l.push(Z,re,se),F+=6}a.addGroup(m,F,B),m+=F,h+=ie}}static fromJSON(e){return new fl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Sf(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function ni(t){const e={};for(let n=0;n<t.length;n++){const r=Sf(t[n]);for(const i in r)e[i]=r[i]}return e}function fz(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function XI(t){return t.getRenderTarget()===null&&t.outputEncoding===Lt?Bs:wf}const bu={clone:Sf,merge:ni};var dz=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,hz=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class xn extends zn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=dz,this.fragmentShader=hz,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Sf(e.uniforms),this.uniformsGroups=fz(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Ff extends Gt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new gt,this.projectionMatrix=new gt,this.projectionMatrixInverse=new gt}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let An=class extends Ff{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Xh*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(uu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Xh*2*Math.atan(Math.tan(uu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(uu*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}};const gc=-90,vc=1;class KI extends Gt{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new An(gc,vc,e,n);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new An(gc,vc,e,n);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new An(gc,vc,e,n);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new An(gc,vc,e,n);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new An(gc,vc,e,n);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const u=new An(gc,vc,e,n);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(e,n){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,u]=this.children,c=e.getRenderTarget(),f=e.toneMapping,h=e.xr.enabled;e.toneMapping=Us,e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,i),e.setRenderTarget(r,1),e.render(n,s),e.setRenderTarget(r,2),e.render(n,o),e.setRenderTarget(r,3),e.render(n,a),e.setRenderTarget(r,4),e.render(n,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(n,u),e.setRenderTarget(c),e.toneMapping=f,e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}}class vp extends an{constructor(e,n,r,i,s,o,a,l,u,c){e=e!==void 0?e:[],n=n!==void 0?n:ta,super(e,n,r,i,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class zb extends hn{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new vp(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Kt}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new fl(5,5,5),s=new xn({name:"CubemapFromEquirect",uniforms:Sf(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Hr,blending:ui});s.uniforms.tEquirect.value=n;const o=new Mn(i,s),a=n.minFilter;return n.minFilter===Hs&&(n.minFilter=Kt),new KI(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}const ox=new V,pz=new V,mz=new zr;let La=class{constructor(e=new V(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=ox.subVectors(r,n).cross(pz.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){const r=e.delta(ox),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||mz.getNormalMatrix(e),i=this.coplanarPoint(ox).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const yc=new oa,gg=new V;class Kv{constructor(e=new La,n=new La,r=new La,i=new La,s=new La,o=new La){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const n=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],u=r[5],c=r[6],f=r[7],h=r[8],m=r[9],g=r[10],v=r[11],y=r[12],_=r[13],x=r[14],w=r[15];return n[0].setComponents(a-i,f-l,v-h,w-y).normalize(),n[1].setComponents(a+i,f+l,v+h,w+y).normalize(),n[2].setComponents(a+s,f+u,v+m,w+_).normalize(),n[3].setComponents(a-s,f-u,v-m,w-_).normalize(),n[4].setComponents(a-o,f-c,v-g,w-x).normalize(),n[5].setComponents(a+o,f+c,v+g,w+x).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),yc.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(yc)}intersectsSprite(e){return yc.center.set(0,0,0),yc.radius=.7071067811865476,yc.applyMatrix4(e.matrixWorld),this.intersectsSphere(yc)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(gg.x=i.normal.x>0?e.max.x:e.min.x,gg.y=i.normal.y>0?e.max.y:e.min.y,gg.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(gg)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function YI(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function gz(t,e){const n=e.isWebGL2,r=new WeakMap;function i(u,c){const f=u.array,h=u.usage,m=t.createBuffer();t.bindBuffer(c,m),t.bufferData(c,f,h),u.onUploadCallback();let g;if(f instanceof Float32Array)g=5126;else if(f instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(n)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(f instanceof Int16Array)g=5122;else if(f instanceof Uint32Array)g=5125;else if(f instanceof Int32Array)g=5124;else if(f instanceof Int8Array)g=5120;else if(f instanceof Uint8Array)g=5121;else if(f instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:m,type:g,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version}}function s(u,c,f){const h=c.array,m=c.updateRange;t.bindBuffer(f,u),m.count===-1?t.bufferSubData(f,0,h):(n?t.bufferSubData(f,m.offset*h.BYTES_PER_ELEMENT,h,m.offset,m.count):t.bufferSubData(f,m.offset*h.BYTES_PER_ELEMENT,h.subarray(m.offset,m.offset+m.count)),m.count=-1),c.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(t.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const h=r.get(u);(!h||h.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const f=r.get(u);f===void 0?r.set(u,i(u,c)):f.version<u.version&&(s(f.buffer,u,c),f.version=u.version)}return{get:o,remove:a,update:l}}class yo extends wt{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,f=e/a,h=n/l,m=[],g=[],v=[],y=[];for(let _=0;_<c;_++){const x=_*h-o;for(let w=0;w<u;w++){const b=w*f-s;g.push(b,-x,0),v.push(0,0,1),y.push(w/a),y.push(1-_/l)}}for(let _=0;_<l;_++)for(let x=0;x<a;x++){const w=x+u*_,b=x+u*(_+1),E=x+1+u*(_+1),C=x+1+u*_;m.push(w,b,C),m.push(b,E,C)}this.setIndex(m),this.setAttribute("position",new at(g,3)),this.setAttribute("normal",new at(v,3)),this.setAttribute("uv",new at(y,2))}static fromJSON(e){return new yo(e.width,e.height,e.widthSegments,e.heightSegments)}}var vz=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,yz=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,xz=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,_z=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,wz=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Sz=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,bz="vec3 transformed = vec3( position );",Az=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Mz=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Ez=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Cz=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Tz=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Rz=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Pz=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Bz=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Iz=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Dz=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Lz=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,kz=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Fz=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Oz=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Uz=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Nz=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,zz=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Gz=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Hz=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Vz="gl_FragColor = linearToOutputTexel( gl_FragColor );",Wz=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,jz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,$z=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Jz=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Xz=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Kz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Yz=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Qz=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,qz=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Zz=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,e5=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,t5=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,n5=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,r5=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,i5=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,s5=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,o5=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,a5=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,l5=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,u5=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,c5=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,f5=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,d5=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,h5=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,p5=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,m5=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,g5=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,v5=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,y5=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,x5=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,_5=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,w5=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,S5=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,b5=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,A5=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,M5=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,E5=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,C5=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,T5=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,R5=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,P5=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,B5=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,I5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,D5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,L5=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,k5=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,F5=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,O5=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,U5=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,N5=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,z5=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,G5=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,H5=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,V5=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,W5=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,j5=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,$5=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,J5=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,X5=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,K5=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Y5=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Q5=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,q5=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Z5=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,eG=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,tG=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,nG=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,rG=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,iG=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,sG=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,oG=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,aG=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,lG=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uG=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,cG=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,fG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,dG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,hG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,pG=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const mG=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,gG=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yG=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,xG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_G=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,wG=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,SG=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,bG=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,AG=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,MG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,EG=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,CG=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,TG=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,RG=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,PG=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BG=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IG=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DG=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,LG=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kG=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,FG=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,OG=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UG=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NG=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,zG=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GG=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HG=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VG=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,WG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,jG=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$G=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,JG=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,XG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Tt={alphamap_fragment:vz,alphamap_pars_fragment:yz,alphatest_fragment:xz,alphatest_pars_fragment:_z,aomap_fragment:wz,aomap_pars_fragment:Sz,begin_vertex:bz,beginnormal_vertex:Az,bsdfs:Mz,iridescence_fragment:Ez,bumpmap_pars_fragment:Cz,clipping_planes_fragment:Tz,clipping_planes_pars_fragment:Rz,clipping_planes_pars_vertex:Pz,clipping_planes_vertex:Bz,color_fragment:Iz,color_pars_fragment:Dz,color_pars_vertex:Lz,color_vertex:kz,common:Fz,cube_uv_reflection_fragment:Oz,defaultnormal_vertex:Uz,displacementmap_pars_vertex:Nz,displacementmap_vertex:zz,emissivemap_fragment:Gz,emissivemap_pars_fragment:Hz,encodings_fragment:Vz,encodings_pars_fragment:Wz,envmap_fragment:jz,envmap_common_pars_fragment:$z,envmap_pars_fragment:Jz,envmap_pars_vertex:Xz,envmap_physical_pars_fragment:o5,envmap_vertex:Kz,fog_vertex:Yz,fog_pars_vertex:Qz,fog_fragment:qz,fog_pars_fragment:Zz,gradientmap_pars_fragment:e5,lightmap_fragment:t5,lightmap_pars_fragment:n5,lights_lambert_fragment:r5,lights_lambert_pars_fragment:i5,lights_pars_begin:s5,lights_toon_fragment:a5,lights_toon_pars_fragment:l5,lights_phong_fragment:u5,lights_phong_pars_fragment:c5,lights_physical_fragment:f5,lights_physical_pars_fragment:d5,lights_fragment_begin:h5,lights_fragment_maps:p5,lights_fragment_end:m5,logdepthbuf_fragment:g5,logdepthbuf_pars_fragment:v5,logdepthbuf_pars_vertex:y5,logdepthbuf_vertex:x5,map_fragment:_5,map_pars_fragment:w5,map_particle_fragment:S5,map_particle_pars_fragment:b5,metalnessmap_fragment:A5,metalnessmap_pars_fragment:M5,morphcolor_vertex:E5,morphnormal_vertex:C5,morphtarget_pars_vertex:T5,morphtarget_vertex:R5,normal_fragment_begin:P5,normal_fragment_maps:B5,normal_pars_fragment:I5,normal_pars_vertex:D5,normal_vertex:L5,normalmap_pars_fragment:k5,clearcoat_normal_fragment_begin:F5,clearcoat_normal_fragment_maps:O5,clearcoat_pars_fragment:U5,iridescence_pars_fragment:N5,output_fragment:z5,packing:G5,premultiplied_alpha_fragment:H5,project_vertex:V5,dithering_fragment:W5,dithering_pars_fragment:j5,roughnessmap_fragment:$5,roughnessmap_pars_fragment:J5,shadowmap_pars_fragment:X5,shadowmap_pars_vertex:K5,shadowmap_vertex:Y5,shadowmask_pars_fragment:Q5,skinbase_vertex:q5,skinning_pars_vertex:Z5,skinning_vertex:eG,skinnormal_vertex:tG,specularmap_fragment:nG,specularmap_pars_fragment:rG,tonemapping_fragment:iG,tonemapping_pars_fragment:sG,transmission_fragment:oG,transmission_pars_fragment:aG,uv_pars_fragment:lG,uv_pars_vertex:uG,uv_vertex:cG,uv2_pars_fragment:fG,uv2_pars_vertex:dG,uv2_vertex:hG,worldpos_vertex:pG,background_vert:mG,background_frag:gG,backgroundCube_vert:vG,backgroundCube_frag:yG,cube_vert:xG,cube_frag:_G,depth_vert:wG,depth_frag:SG,distanceRGBA_vert:bG,distanceRGBA_frag:AG,equirect_vert:MG,equirect_frag:EG,linedashed_vert:CG,linedashed_frag:TG,meshbasic_vert:RG,meshbasic_frag:PG,meshlambert_vert:BG,meshlambert_frag:IG,meshmatcap_vert:DG,meshmatcap_frag:LG,meshnormal_vert:kG,meshnormal_frag:FG,meshphong_vert:OG,meshphong_frag:UG,meshphysical_vert:NG,meshphysical_frag:zG,meshtoon_vert:GG,meshtoon_frag:HG,points_vert:VG,points_frag:WG,shadow_vert:jG,shadow_frag:$G,sprite_vert:JG,sprite_frag:XG},Ye={common:{diffuse:{value:new $e(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new zr},uv2Transform:{value:new zr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new we(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $e(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $e(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new zr}},sprite:{diffuse:{value:new $e(16777215)},opacity:{value:1},center:{value:new we(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new zr}}},Ds={basic:{uniforms:ni([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.fog]),vertexShader:Tt.meshbasic_vert,fragmentShader:Tt.meshbasic_frag},lambert:{uniforms:ni([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,Ye.lights,{emissive:{value:new $e(0)}}]),vertexShader:Tt.meshlambert_vert,fragmentShader:Tt.meshlambert_frag},phong:{uniforms:ni([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,Ye.lights,{emissive:{value:new $e(0)},specular:{value:new $e(1118481)},shininess:{value:30}}]),vertexShader:Tt.meshphong_vert,fragmentShader:Tt.meshphong_frag},standard:{uniforms:ni([Ye.common,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.roughnessmap,Ye.metalnessmap,Ye.fog,Ye.lights,{emissive:{value:new $e(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag},toon:{uniforms:ni([Ye.common,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.gradientmap,Ye.fog,Ye.lights,{emissive:{value:new $e(0)}}]),vertexShader:Tt.meshtoon_vert,fragmentShader:Tt.meshtoon_frag},matcap:{uniforms:ni([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,{matcap:{value:null}}]),vertexShader:Tt.meshmatcap_vert,fragmentShader:Tt.meshmatcap_frag},points:{uniforms:ni([Ye.points,Ye.fog]),vertexShader:Tt.points_vert,fragmentShader:Tt.points_frag},dashed:{uniforms:ni([Ye.common,Ye.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tt.linedashed_vert,fragmentShader:Tt.linedashed_frag},depth:{uniforms:ni([Ye.common,Ye.displacementmap]),vertexShader:Tt.depth_vert,fragmentShader:Tt.depth_frag},normal:{uniforms:ni([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,{opacity:{value:1}}]),vertexShader:Tt.meshnormal_vert,fragmentShader:Tt.meshnormal_frag},sprite:{uniforms:ni([Ye.sprite,Ye.fog]),vertexShader:Tt.sprite_vert,fragmentShader:Tt.sprite_frag},background:{uniforms:{uvTransform:{value:new zr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Tt.background_vert,fragmentShader:Tt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Tt.backgroundCube_vert,fragmentShader:Tt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Tt.cube_vert,fragmentShader:Tt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tt.equirect_vert,fragmentShader:Tt.equirect_frag},distanceRGBA:{uniforms:ni([Ye.common,Ye.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tt.distanceRGBA_vert,fragmentShader:Tt.distanceRGBA_frag},shadow:{uniforms:ni([Ye.lights,Ye.fog,{color:{value:new $e(0)},opacity:{value:1}}]),vertexShader:Tt.shadow_vert,fragmentShader:Tt.shadow_frag}};Ds.physical={uniforms:ni([Ds.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new we(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new $e(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new we},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new $e(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new $e(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag};const vg={r:0,b:0,g:0};function KG(t,e,n,r,i,s,o){const a=new $e(0);let l=s===!0?0:1,u,c,f=null,h=0,m=null;function g(y,_){let x=!1,w=_.isScene===!0?_.background:null;w&&w.isTexture&&(w=(_.backgroundBlurriness>0?n:e).get(w));const b=t.xr,E=b.getSession&&b.getSession();E&&E.environmentBlendMode==="additive"&&(w=null),w===null?v(a,l):w&&w.isColor&&(v(w,1),x=!0),(t.autoClear||x)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),w&&(w.isCubeTexture||w.mapping===Lf)?(c===void 0&&(c=new Mn(new fl(1,1,1),new xn({name:"BackgroundCubeMaterial",uniforms:Sf(Ds.backgroundCube.uniforms),vertexShader:Ds.backgroundCube.vertexShader,fragmentShader:Ds.backgroundCube.fragmentShader,side:Hr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(C,P,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=w,c.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,c.material.toneMapped=w.encoding!==Lt,(f!==w||h!==w.version||m!==t.toneMapping)&&(c.material.needsUpdate=!0,f=w,h=w.version,m=t.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null)):w&&w.isTexture&&(u===void 0&&(u=new Mn(new yo(2,2),new xn({name:"BackgroundMaterial",uniforms:Sf(Ds.background.uniforms),vertexShader:Ds.background.vertexShader,fragmentShader:Ds.background.fragmentShader,side:Gs,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=w,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.toneMapped=w.encoding!==Lt,w.matrixAutoUpdate===!0&&w.updateMatrix(),u.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||h!==w.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,f=w,h=w.version,m=t.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null))}function v(y,_){y.getRGB(vg,XI(t)),r.buffers.color.setClear(vg.r,vg.g,vg.b,_,o)}return{getClearColor:function(){return a},setClearColor:function(y,_=1){a.set(y),l=_,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,v(a,l)},render:g}}function YG(t,e,n,r){const i=t.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=y(null);let u=l,c=!1;function f(N,$,Q,ie,F){let z=!1;if(o){const j=v(ie,Q,$);u!==j&&(u=j,m(u.object)),z=_(N,ie,Q,F),z&&x(N,ie,Q,F)}else{const j=$.wireframe===!0;(u.geometry!==ie.id||u.program!==Q.id||u.wireframe!==j)&&(u.geometry=ie.id,u.program=Q.id,u.wireframe=j,z=!0)}F!==null&&n.update(F,34963),(z||c)&&(c=!1,M(N,$,Q,ie),F!==null&&t.bindBuffer(34963,n.get(F).buffer))}function h(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function m(N){return r.isWebGL2?t.bindVertexArray(N):s.bindVertexArrayOES(N)}function g(N){return r.isWebGL2?t.deleteVertexArray(N):s.deleteVertexArrayOES(N)}function v(N,$,Q){const ie=Q.wireframe===!0;let F=a[N.id];F===void 0&&(F={},a[N.id]=F);let z=F[$.id];z===void 0&&(z={},F[$.id]=z);let j=z[ie];return j===void 0&&(j=y(h()),z[ie]=j),j}function y(N){const $=[],Q=[],ie=[];for(let F=0;F<i;F++)$[F]=0,Q[F]=0,ie[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:Q,attributeDivisors:ie,object:N,attributes:{},index:null}}function _(N,$,Q,ie){const F=u.attributes,z=$.attributes;let j=0;const H=Q.getAttributes();for(const G in H)if(H[G].location>=0){const re=F[G];let se=z[G];if(se===void 0&&(G==="instanceMatrix"&&N.instanceMatrix&&(se=N.instanceMatrix),G==="instanceColor"&&N.instanceColor&&(se=N.instanceColor)),re===void 0||re.attribute!==se||se&&re.data!==se.data)return!0;j++}return u.attributesNum!==j||u.index!==ie}function x(N,$,Q,ie){const F={},z=$.attributes;let j=0;const H=Q.getAttributes();for(const G in H)if(H[G].location>=0){let re=z[G];re===void 0&&(G==="instanceMatrix"&&N.instanceMatrix&&(re=N.instanceMatrix),G==="instanceColor"&&N.instanceColor&&(re=N.instanceColor));const se={};se.attribute=re,re&&re.data&&(se.data=re.data),F[G]=se,j++}u.attributes=F,u.attributesNum=j,u.index=ie}function w(){const N=u.newAttributes;for(let $=0,Q=N.length;$<Q;$++)N[$]=0}function b(N){E(N,0)}function E(N,$){const Q=u.newAttributes,ie=u.enabledAttributes,F=u.attributeDivisors;Q[N]=1,ie[N]===0&&(t.enableVertexAttribArray(N),ie[N]=1),F[N]!==$&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](N,$),F[N]=$)}function C(){const N=u.newAttributes,$=u.enabledAttributes;for(let Q=0,ie=$.length;Q<ie;Q++)$[Q]!==N[Q]&&(t.disableVertexAttribArray(Q),$[Q]=0)}function P(N,$,Q,ie,F,z){r.isWebGL2===!0&&(Q===5124||Q===5125)?t.vertexAttribIPointer(N,$,Q,F,z):t.vertexAttribPointer(N,$,Q,ie,F,z)}function M(N,$,Q,ie){if(r.isWebGL2===!1&&(N.isInstancedMesh||ie.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;w();const F=ie.attributes,z=Q.getAttributes(),j=$.defaultAttributeValues;for(const H in z){const G=z[H];if(G.location>=0){let Z=F[H];if(Z===void 0&&(H==="instanceMatrix"&&N.instanceMatrix&&(Z=N.instanceMatrix),H==="instanceColor"&&N.instanceColor&&(Z=N.instanceColor)),Z!==void 0){const re=Z.normalized,se=Z.itemSize,Y=n.get(Z);if(Y===void 0)continue;const ae=Y.buffer,he=Y.type,Ce=Y.bytesPerElement;if(Z.isInterleavedBufferAttribute){const ve=Z.data,xe=ve.stride,ne=Z.offset;if(ve.isInstancedInterleavedBuffer){for(let le=0;le<G.locationSize;le++)E(G.location+le,ve.meshPerAttribute);N.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let le=0;le<G.locationSize;le++)b(G.location+le);t.bindBuffer(34962,ae);for(let le=0;le<G.locationSize;le++)P(G.location+le,se/G.locationSize,he,re,xe*Ce,(ne+se/G.locationSize*le)*Ce)}else{if(Z.isInstancedBufferAttribute){for(let ve=0;ve<G.locationSize;ve++)E(G.location+ve,Z.meshPerAttribute);N.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let ve=0;ve<G.locationSize;ve++)b(G.location+ve);t.bindBuffer(34962,ae);for(let ve=0;ve<G.locationSize;ve++)P(G.location+ve,se/G.locationSize,he,re,se*Ce,se/G.locationSize*ve*Ce)}}else if(j!==void 0){const re=j[H];if(re!==void 0)switch(re.length){case 2:t.vertexAttrib2fv(G.location,re);break;case 3:t.vertexAttrib3fv(G.location,re);break;case 4:t.vertexAttrib4fv(G.location,re);break;default:t.vertexAttrib1fv(G.location,re)}}}}C()}function B(){O();for(const N in a){const $=a[N];for(const Q in $){const ie=$[Q];for(const F in ie)g(ie[F].object),delete ie[F];delete $[Q]}delete a[N]}}function D(N){if(a[N.id]===void 0)return;const $=a[N.id];for(const Q in $){const ie=$[Q];for(const F in ie)g(ie[F].object),delete ie[F];delete $[Q]}delete a[N.id]}function k(N){for(const $ in a){const Q=a[$];if(Q[N.id]===void 0)continue;const ie=Q[N.id];for(const F in ie)g(ie[F].object),delete ie[F];delete Q[N.id]}}function O(){U(),c=!0,u!==l&&(u=l,m(u.object))}function U(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:O,resetDefaultState:U,dispose:B,releaseStatesOfGeometry:D,releaseStatesOfProgram:k,initAttributes:w,enableAttribute:b,disableUnusedAttributes:C}}function QG(t,e,n,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,c){t.drawArrays(s,u,c),n.update(c,s,1)}function l(u,c,f){if(f===0)return;let h,m;if(i)h=t,m="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[m](s,u,c,f),n.update(c,s,f)}this.setMode=o,this.render=a,this.renderInstances=l}function qG(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(P){if(P==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";P="mediump"}return P==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),c=n.logarithmicDepthBuffer===!0,f=t.getParameter(34930),h=t.getParameter(35660),m=t.getParameter(3379),g=t.getParameter(34076),v=t.getParameter(34921),y=t.getParameter(36347),_=t.getParameter(36348),x=t.getParameter(36349),w=h>0,b=o||e.has("OES_texture_float"),E=w&&b,C=o?t.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:f,maxVertexTextures:h,maxTextureSize:m,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:y,maxVaryings:_,maxFragmentUniforms:x,vertexTextures:w,floatFragmentTextures:b,floatVertexTextures:E,maxSamples:C}}function ZG(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new La,a=new zr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const m=f.length!==0||h||r!==0||i;return i=h,r=f.length,m},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,h){n=c(f,h,0)},this.setState=function(f,h,m){const g=f.clippingPlanes,v=f.clipIntersection,y=f.clipShadows,_=t.get(f);if(!i||g===null||g.length===0||s&&!y)s?c(null):u();else{const x=s?0:r,w=x*4;let b=_.clippingState||null;l.value=b,b=c(g,h,w,m);for(let E=0;E!==w;++E)b[E]=n[E];_.clippingState=b,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=x}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(f,h,m,g){const v=f!==null?f.length:0;let y=null;if(v!==0){if(y=l.value,g!==!0||y===null){const _=m+v*4,x=h.matrixWorldInverse;a.getNormalMatrix(x),(y===null||y.length<_)&&(y=new Float32Array(_));for(let w=0,b=m;w!==v;++w,b+=4)o.copy(f[w]).applyMatrix4(x,a),o.normal.toArray(y,b),y[b+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,y}}function e6(t){let e=new WeakMap;function n(o,a){return a===yf?o.mapping=ta:a===Wh&&(o.mapping=nl),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===yf||a===Wh)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new zb(l.height/2);return u.fromEquirectangularTexture(t,o),e.set(o,u),o.addEventListener("dispose",i),n(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class ys extends Ff{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Jc=4,QE=[.125,.215,.35,.446,.526,.582],$l=20,ax=new ys,qE=new $e;let lx=null;const Hl=(1+Math.sqrt(5))/2,xc=1/Hl,ZE=[new V(1,1,1),new V(-1,1,1),new V(1,1,-1),new V(-1,1,-1),new V(0,Hl,xc),new V(0,Hl,-xc),new V(xc,0,Hl),new V(-xc,0,Hl),new V(Hl,xc,0),new V(-Hl,xc,0)];class Bw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){lx=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=nC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=tC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(lx),e.scissorTest=!1,yg(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ta||e.mapping===nl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),lx=this._renderer.getRenderTarget();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Kt,minFilter:Kt,generateMipmaps:!1,type:Nr,format:Ur,encoding:mo,depthBuffer:!1},i=eC(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=eC(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=t6(s)),this._blurMaterial=n6(s,e,n)}return i}_compileMaterial(e){const n=new Mn(this._lodPlanes[0],e);this._renderer.compile(n,ax)}_sceneToCubeUV(e,n,r,i){const a=new An(90,1,n,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,f=c.autoClear,h=c.toneMapping;c.getClearColor(qE),c.toneMapping=Us,c.autoClear=!1;const m=new si({name:"PMREM.Background",side:Hr,depthWrite:!1,depthTest:!1}),g=new Mn(new fl,m);let v=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,v=!0):(m.color.copy(qE),v=!0);for(let _=0;_<6;_++){const x=_%3;x===0?(a.up.set(0,l[_],0),a.lookAt(u[_],0,0)):x===1?(a.up.set(0,0,l[_]),a.lookAt(0,u[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,u[_]));const w=this._cubeSize;yg(i,x*w,_>2?w:0,w,w),c.setRenderTarget(i),v&&c.render(g,a),c.render(e,a)}g.geometry.dispose(),g.material.dispose(),c.toneMapping=h,c.autoClear=f,e.background=y}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===ta||e.mapping===nl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=nC()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=tC());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Mn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;yg(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,ax)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=ZE[(i-1)%ZE.length];this._blur(e,i-1,i,s,o)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,f=new Mn(this._lodPlanes[i],u),h=u.uniforms,m=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*$l-1),v=s/g,y=isFinite(s)?1+Math.floor(c*v):$l;y>$l&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${$l}`);const _=[];let x=0;for(let P=0;P<$l;++P){const M=P/v,B=Math.exp(-M*M/2);_.push(B),P===0?x+=B:P<y&&(x+=2*B)}for(let P=0;P<_.length;P++)_[P]=_[P]/x;h.envMap.value=e.texture,h.samples.value=y,h.weights.value=_,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:w}=this;h.dTheta.value=g,h.mipInt.value=w-r;const b=this._sizeLods[i],E=3*b*(i>w-Jc?i-w+Jc:0),C=4*(this._cubeSize-b);yg(n,E,C,3*b,2*b),l.setRenderTarget(n),l.render(f,ax)}}function t6(t){const e=[],n=[],r=[];let i=t;const s=t-Jc+1+QE.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-Jc?l=QE[o-t+Jc-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),c=-u,f=1+u,h=[c,c,f,c,f,f,c,c,f,f,c,f],m=6,g=6,v=3,y=2,_=1,x=new Float32Array(v*g*m),w=new Float32Array(y*g*m),b=new Float32Array(_*g*m);for(let C=0;C<m;C++){const P=C%3*2/3-1,M=C>2?0:-1,B=[P,M,0,P+2/3,M,0,P+2/3,M+1,0,P,M,0,P+2/3,M+1,0,P,M+1,0];x.set(B,v*g*C),w.set(h,y*g*C);const D=[C,C,C,C,C,C];b.set(D,_*g*C)}const E=new wt;E.setAttribute("position",new Ut(x,v)),E.setAttribute("uv",new Ut(w,y)),E.setAttribute("faceIndex",new Ut(b,_)),e.push(E),i>Jc&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function eC(t,e,n){const r=new hn(t,e,n);return r.texture.mapping=Lf,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function yg(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function n6(t,e,n){const r=new Float32Array($l),i=new V(0,1,0);return new xn({name:"SphericalGaussianBlur",defines:{n:$l,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Gb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ui,depthTest:!1,depthWrite:!1})}function tC(){return new xn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Gb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ui,depthTest:!1,depthWrite:!1})}function nC(){return new xn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Gb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ui,depthTest:!1,depthWrite:!1})}function Gb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function r6(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===yf||l===Wh,c=l===ta||l===nl;if(u||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return n===null&&(n=new Bw(t)),f=u?n.fromEquirectangular(a,f):n.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(u&&f&&f.height>0||c&&f&&i(f)){n===null&&(n=new Bw(t));const h=u?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function i6(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function s6(t,e,n,r){const i={},s=new WeakMap;function o(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const g in h.attributes)e.remove(h.attributes[g]);h.removeEventListener("dispose",o),delete i[h.id];const m=s.get(h);m&&(e.remove(m),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(f,h){return i[h.id]===!0||(h.addEventListener("dispose",o),i[h.id]=!0,n.memory.geometries++),h}function l(f){const h=f.attributes;for(const g in h)e.update(h[g],34962);const m=f.morphAttributes;for(const g in m){const v=m[g];for(let y=0,_=v.length;y<_;y++)e.update(v[y],34962)}}function u(f){const h=[],m=f.index,g=f.attributes.position;let v=0;if(m!==null){const x=m.array;v=m.version;for(let w=0,b=x.length;w<b;w+=3){const E=x[w+0],C=x[w+1],P=x[w+2];h.push(E,C,C,P,P,E)}}else{const x=g.array;v=g.version;for(let w=0,b=x.length/3-1;w<b;w+=3){const E=w+0,C=w+1,P=w+2;h.push(E,C,C,P,P,E)}}const y=new($I(h)?Nb:Ub)(h,1);y.version=v;const _=s.get(f);_&&e.remove(_),s.set(f,y)}function c(f){const h=s.get(f);if(h){const m=f.index;m!==null&&h.version<m.version&&u(f)}else u(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:c}}function o6(t,e,n,r){const i=r.isWebGL2;let s;function o(h){s=h}let a,l;function u(h){a=h.type,l=h.bytesPerElement}function c(h,m){t.drawElements(s,m,a,h*l),n.update(m,s,1)}function f(h,m,g){if(g===0)return;let v,y;if(i)v=t,y="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[y](s,m,a,h*l,g),n.update(m,s,g)}this.setMode=o,this.setIndex=u,this.render=c,this.renderInstances=f}function a6(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(s/3);break;case 1:n.lines+=a*(s/2);break;case 3:n.lines+=a*(s-1);break;case 2:n.lines+=a*s;break;case 0:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function l6(t,e){return t[0]-e[0]}function u6(t,e){return Math.abs(e[1])-Math.abs(t[1])}function c6(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new $t,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,c,f,h){const m=u.morphTargetInfluences;if(e.isWebGL2===!0){const v=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,y=v!==void 0?v.length:0;let _=s.get(c);if(_===void 0||_.count!==y){let Q=function(){N.dispose(),s.delete(c),c.removeEventListener("dispose",Q)};var g=Q;_!==void 0&&_.texture.dispose();const b=c.morphAttributes.position!==void 0,E=c.morphAttributes.normal!==void 0,C=c.morphAttributes.color!==void 0,P=c.morphAttributes.position||[],M=c.morphAttributes.normal||[],B=c.morphAttributes.color||[];let D=0;b===!0&&(D=1),E===!0&&(D=2),C===!0&&(D=3);let k=c.attributes.position.count*D,O=1;k>e.maxTextureSize&&(O=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);const U=new Float32Array(k*O*4*y),N=new Xv(U,k,O,y);N.type=Ni,N.needsUpdate=!0;const $=D*4;for(let ie=0;ie<y;ie++){const F=P[ie],z=M[ie],j=B[ie],H=k*O*4*ie;for(let G=0;G<F.count;G++){const Z=G*$;b===!0&&(o.fromBufferAttribute(F,G),U[H+Z+0]=o.x,U[H+Z+1]=o.y,U[H+Z+2]=o.z,U[H+Z+3]=0),E===!0&&(o.fromBufferAttribute(z,G),U[H+Z+4]=o.x,U[H+Z+5]=o.y,U[H+Z+6]=o.z,U[H+Z+7]=0),C===!0&&(o.fromBufferAttribute(j,G),U[H+Z+8]=o.x,U[H+Z+9]=o.y,U[H+Z+10]=o.z,U[H+Z+11]=j.itemSize===4?o.w:1)}}_={count:y,texture:N,size:new we(k,O)},s.set(c,_),c.addEventListener("dispose",Q)}let x=0;for(let b=0;b<m.length;b++)x+=m[b];const w=c.morphTargetsRelative?1:1-x;h.getUniforms().setValue(t,"morphTargetBaseInfluence",w),h.getUniforms().setValue(t,"morphTargetInfluences",m),h.getUniforms().setValue(t,"morphTargetsTexture",_.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",_.size)}else{const v=m===void 0?0:m.length;let y=r[c.id];if(y===void 0||y.length!==v){y=[];for(let E=0;E<v;E++)y[E]=[E,0];r[c.id]=y}for(let E=0;E<v;E++){const C=y[E];C[0]=E,C[1]=m[E]}y.sort(u6);for(let E=0;E<8;E++)E<v&&y[E][1]?(a[E][0]=y[E][0],a[E][1]=y[E][1]):(a[E][0]=Number.MAX_SAFE_INTEGER,a[E][1]=0);a.sort(l6);const _=c.morphAttributes.position,x=c.morphAttributes.normal;let w=0;for(let E=0;E<8;E++){const C=a[E],P=C[0],M=C[1];P!==Number.MAX_SAFE_INTEGER&&M?(_&&c.getAttribute("morphTarget"+E)!==_[P]&&c.setAttribute("morphTarget"+E,_[P]),x&&c.getAttribute("morphNormal"+E)!==x[P]&&c.setAttribute("morphNormal"+E,x[P]),i[E]=M,w+=M):(_&&c.hasAttribute("morphTarget"+E)===!0&&c.deleteAttribute("morphTarget"+E),x&&c.hasAttribute("morphNormal"+E)===!0&&c.deleteAttribute("morphNormal"+E),i[E]=0)}const b=c.morphTargetsRelative?1:1-w;h.getUniforms().setValue(t,"morphTargetBaseInfluence",b),h.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function f6(t,e,n,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,f=e.get(l,c);return i.get(f)!==u&&(e.update(f),i.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,34962),l.instanceColor!==null&&n.update(l.instanceColor,34962)),f}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:o}}const QI=new an,qI=new Xv,ZI=new Ob,eD=new vp,rC=[],iC=[],sC=new Float32Array(16),oC=new Float32Array(9),aC=new Float32Array(4);function Of(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=rC[i];if(s===void 0&&(s=new Float32Array(i),rC[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function or(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ar(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function Yv(t,e){let n=iC[e];n===void 0&&(n=new Int32Array(e),iC[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function d6(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function h6(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(or(n,e))return;t.uniform2fv(this.addr,e),ar(n,e)}}function p6(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(or(n,e))return;t.uniform3fv(this.addr,e),ar(n,e)}}function m6(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(or(n,e))return;t.uniform4fv(this.addr,e),ar(n,e)}}function g6(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(or(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ar(n,e)}else{if(or(n,r))return;aC.set(r),t.uniformMatrix2fv(this.addr,!1,aC),ar(n,r)}}function v6(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(or(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ar(n,e)}else{if(or(n,r))return;oC.set(r),t.uniformMatrix3fv(this.addr,!1,oC),ar(n,r)}}function y6(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(or(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ar(n,e)}else{if(or(n,r))return;sC.set(r),t.uniformMatrix4fv(this.addr,!1,sC),ar(n,r)}}function x6(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function _6(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(or(n,e))return;t.uniform2iv(this.addr,e),ar(n,e)}}function w6(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(or(n,e))return;t.uniform3iv(this.addr,e),ar(n,e)}}function S6(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(or(n,e))return;t.uniform4iv(this.addr,e),ar(n,e)}}function b6(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function A6(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(or(n,e))return;t.uniform2uiv(this.addr,e),ar(n,e)}}function M6(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(or(n,e))return;t.uniform3uiv(this.addr,e),ar(n,e)}}function E6(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(or(n,e))return;t.uniform4uiv(this.addr,e),ar(n,e)}}function C6(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||QI,i)}function T6(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||ZI,i)}function R6(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||eD,i)}function P6(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||qI,i)}function B6(t){switch(t){case 5126:return d6;case 35664:return h6;case 35665:return p6;case 35666:return m6;case 35674:return g6;case 35675:return v6;case 35676:return y6;case 5124:case 35670:return x6;case 35667:case 35671:return _6;case 35668:case 35672:return w6;case 35669:case 35673:return S6;case 5125:return b6;case 36294:return A6;case 36295:return M6;case 36296:return E6;case 35678:case 36198:case 36298:case 36306:case 35682:return C6;case 35679:case 36299:case 36307:return T6;case 35680:case 36300:case 36308:case 36293:return R6;case 36289:case 36303:case 36311:case 36292:return P6}}function I6(t,e){t.uniform1fv(this.addr,e)}function D6(t,e){const n=Of(e,this.size,2);t.uniform2fv(this.addr,n)}function L6(t,e){const n=Of(e,this.size,3);t.uniform3fv(this.addr,n)}function k6(t,e){const n=Of(e,this.size,4);t.uniform4fv(this.addr,n)}function F6(t,e){const n=Of(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function O6(t,e){const n=Of(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function U6(t,e){const n=Of(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function N6(t,e){t.uniform1iv(this.addr,e)}function z6(t,e){t.uniform2iv(this.addr,e)}function G6(t,e){t.uniform3iv(this.addr,e)}function H6(t,e){t.uniform4iv(this.addr,e)}function V6(t,e){t.uniform1uiv(this.addr,e)}function W6(t,e){t.uniform2uiv(this.addr,e)}function j6(t,e){t.uniform3uiv(this.addr,e)}function $6(t,e){t.uniform4uiv(this.addr,e)}function J6(t,e,n){const r=this.cache,i=e.length,s=Yv(n,i);or(r,s)||(t.uniform1iv(this.addr,s),ar(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||QI,s[o])}function X6(t,e,n){const r=this.cache,i=e.length,s=Yv(n,i);or(r,s)||(t.uniform1iv(this.addr,s),ar(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||ZI,s[o])}function K6(t,e,n){const r=this.cache,i=e.length,s=Yv(n,i);or(r,s)||(t.uniform1iv(this.addr,s),ar(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||eD,s[o])}function Y6(t,e,n){const r=this.cache,i=e.length,s=Yv(n,i);or(r,s)||(t.uniform1iv(this.addr,s),ar(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||qI,s[o])}function Q6(t){switch(t){case 5126:return I6;case 35664:return D6;case 35665:return L6;case 35666:return k6;case 35674:return F6;case 35675:return O6;case 35676:return U6;case 5124:case 35670:return N6;case 35667:case 35671:return z6;case 35668:case 35672:return G6;case 35669:case 35673:return H6;case 5125:return V6;case 36294:return W6;case 36295:return j6;case 36296:return $6;case 35678:case 36198:case 36298:case 36306:case 35682:return J6;case 35679:case 36299:case 36307:return X6;case 35680:case 36300:case 36308:case 36293:return K6;case 36289:case 36303:case 36311:case 36292:return Y6}}class q6{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=B6(n.type)}}class Z6{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=Q6(n.type)}}class eH{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const ux=/(\w+)(\])?(\[|\.)?/g;function lC(t,e){t.seq.push(e),t.map[e.id]=e}function tH(t,e,n){const r=t.name,i=r.length;for(ux.lastIndex=0;;){const s=ux.exec(r),o=ux.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){lC(n,u===void 0?new q6(a,t,e):new Z6(a,t,e));break}else{let f=n.map[a];f===void 0&&(f=new eH(a),lC(n,f)),n=f}}}class A0{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);tH(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function uC(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let nH=0;function rH(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}function iH(t){switch(t){case mo:return["Linear","( value )"];case Lt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function cC(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+rH(t.getShaderSource(e),o)}else return i}function sH(t,e){const n=iH(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function oH(t,e){let n;switch(e){case _I:n="Linear";break;case wI:n="Reinhard";break;case SI:n="OptimizedCineon";break;case Pb:n="ACESFilmic";break;case bI:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function aH(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(th).join(`
`)}function lH(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function uH(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function th(t){return t!==""}function fC(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function dC(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const cH=/^[ \t]*#include +<([\w\d./]+)>/gm;function Iw(t){return t.replace(cH,fH)}function fH(t,e){const n=Tt[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return Iw(n)}const dH=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hC(t){return t.replace(dH,hH)}function hH(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function pC(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function pH(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Vv?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===ph?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Ql&&(e="SHADOWMAP_TYPE_VSM"),e}function mH(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ta:case nl:e="ENVMAP_TYPE_CUBE";break;case Lf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function gH(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case nl:e="ENVMAP_MODE_REFRACTION";break}return e}function vH(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case mp:e="ENVMAP_BLENDING_MULTIPLY";break;case yI:e="ENVMAP_BLENDING_MIX";break;case xI:e="ENVMAP_BLENDING_ADD";break}return e}function yH(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function xH(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=pH(n),u=mH(n),c=gH(n),f=vH(n),h=yH(n),m=n.isWebGL2?"":aH(n),g=lH(s),v=i.createProgram();let y,_,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(y=[g].filter(th).join(`
`),y.length>0&&(y+=`
`),_=[m,g].filter(th).join(`
`),_.length>0&&(_+=`
`)):(y=[pC(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(th).join(`
`),_=[m,pC(n),"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Us?"#define TONE_MAPPING":"",n.toneMapping!==Us?Tt.tonemapping_pars_fragment:"",n.toneMapping!==Us?oH("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Tt.encodings_pars_fragment,sH("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(th).join(`
`)),o=Iw(o),o=fC(o,n),o=dC(o,n),a=Iw(a),a=fC(a,n),a=dC(a,n),o=hC(o),a=hC(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,_=["#define varying in",n.glslVersion===Rw?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Rw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const w=x+y+o,b=x+_+a,E=uC(i,35633,w),C=uC(i,35632,b);if(i.attachShader(v,E),i.attachShader(v,C),n.index0AttributeName!==void 0?i.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v),t.debug.checkShaderErrors){const B=i.getProgramInfoLog(v).trim(),D=i.getShaderInfoLog(E).trim(),k=i.getShaderInfoLog(C).trim();let O=!0,U=!0;if(i.getProgramParameter(v,35714)===!1){O=!1;const N=cC(i,E,"vertex"),$=cC(i,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,35715)+`

Program Info Log: `+B+`
`+N+`
`+$)}else B!==""?console.warn("THREE.WebGLProgram: Program Info Log:",B):(D===""||k==="")&&(U=!1);U&&(this.diagnostics={runnable:O,programLog:B,vertexShader:{log:D,prefix:y},fragmentShader:{log:k,prefix:_}})}i.deleteShader(E),i.deleteShader(C);let P;this.getUniforms=function(){return P===void 0&&(P=new A0(i,v)),P};let M;return this.getAttributes=function(){return M===void 0&&(M=uH(i,v)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=nH++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=E,this.fragmentShader=C,this}let _H=0;class wH{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new SH(e),n.set(e,r)),r}}class SH{constructor(e){this.id=_H++,this.code=e,this.usedTimes=0}}function bH(t,e,n,r,i,s,o){const a=new fu,l=new wH,u=[],c=i.isWebGL2,f=i.logarithmicDepthBuffer,h=i.vertexTextures;let m=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(M,B,D,k,O){const U=k.fog,N=O.geometry,$=M.isMeshStandardMaterial?k.environment:null,Q=(M.isMeshStandardMaterial?n:e).get(M.envMap||$),ie=Q&&Q.mapping===Lf?Q.image.height:null,F=g[M.type];M.precision!==null&&(m=i.getMaxPrecision(M.precision),m!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",m,"instead."));const z=N.morphAttributes.position||N.morphAttributes.normal||N.morphAttributes.color,j=z!==void 0?z.length:0;let H=0;N.morphAttributes.position!==void 0&&(H=1),N.morphAttributes.normal!==void 0&&(H=2),N.morphAttributes.color!==void 0&&(H=3);let G,Z,re,se;if(F){const xe=Ds[F];G=xe.vertexShader,Z=xe.fragmentShader}else G=M.vertexShader,Z=M.fragmentShader,l.update(M),re=l.getVertexShaderID(M),se=l.getFragmentShaderID(M);const Y=t.getRenderTarget(),ae=M.alphaTest>0,he=M.clearcoat>0,Ce=M.iridescence>0;return{isWebGL2:c,shaderID:F,shaderName:M.type,vertexShader:G,fragmentShader:Z,defines:M.defines,customVertexShaderID:re,customFragmentShaderID:se,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:m,instancing:O.isInstancedMesh===!0,instancingColor:O.isInstancedMesh===!0&&O.instanceColor!==null,supportsVertexTextures:h,outputEncoding:Y===null?t.outputEncoding:Y.isXRRenderTarget===!0?Y.texture.encoding:mo,map:!!M.map,matcap:!!M.matcap,envMap:!!Q,envMapMode:Q&&Q.mapping,envMapCubeUVHeight:ie,lightMap:!!M.lightMap,aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:M.normalMapType===VI,tangentSpaceNormalMap:M.normalMapType===cl,decodeVideoTexture:!!M.map&&M.map.isVideoTexture===!0&&M.map.encoding===Lt,clearcoat:he,clearcoatMap:he&&!!M.clearcoatMap,clearcoatRoughnessMap:he&&!!M.clearcoatRoughnessMap,clearcoatNormalMap:he&&!!M.clearcoatNormalMap,iridescence:Ce,iridescenceMap:Ce&&!!M.iridescenceMap,iridescenceThicknessMap:Ce&&!!M.iridescenceThicknessMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularColorMap:!!M.specularColorMap,opaque:M.transparent===!1&&M.blending===au,alphaMap:!!M.alphaMap,alphaTest:ae,gradientMap:!!M.gradientMap,sheen:M.sheen>0,sheenColorMap:!!M.sheenColorMap,sheenRoughnessMap:!!M.sheenRoughnessMap,transmission:M.transmission>0,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!N.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!N.attributes.color&&N.attributes.color.itemSize===4,vertexUvs:!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatMap||!!M.clearcoatRoughnessMap||!!M.clearcoatNormalMap||!!M.iridescenceMap||!!M.iridescenceThicknessMap||!!M.displacementMap||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularColorMap||!!M.sheenColorMap||!!M.sheenRoughnessMap,uvsVertexOnly:!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatNormalMap||M.iridescenceMap||M.iridescenceThicknessMap||M.transmission>0||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheen>0||M.sheenColorMap||M.sheenRoughnessMap)&&!!M.displacementMap,fog:!!U,useFog:M.fog===!0,fogExp2:U&&U.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:f,skinning:O.isSkinnedMesh===!0,morphTargets:N.morphAttributes.position!==void 0,morphNormals:N.morphAttributes.normal!==void 0,morphColors:N.morphAttributes.color!==void 0,morphTargetsCount:j,morphTextureStride:H,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:t.shadowMap.enabled&&D.length>0,shadowMapType:t.shadowMap.type,toneMapping:M.toneMapped?t.toneMapping:Us,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===wi,flipSided:M.side===Hr,useDepthPacking:!!M.depthPacking,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function y(M){const B=[];if(M.shaderID?B.push(M.shaderID):(B.push(M.customVertexShaderID),B.push(M.customFragmentShaderID)),M.defines!==void 0)for(const D in M.defines)B.push(D),B.push(M.defines[D]);return M.isRawShaderMaterial===!1&&(_(B,M),x(B,M),B.push(t.outputEncoding)),B.push(M.customProgramCacheKey),B.join()}function _(M,B){M.push(B.precision),M.push(B.outputEncoding),M.push(B.envMapMode),M.push(B.envMapCubeUVHeight),M.push(B.combine),M.push(B.vertexUvs),M.push(B.fogExp2),M.push(B.sizeAttenuation),M.push(B.morphTargetsCount),M.push(B.morphAttributeCount),M.push(B.numDirLights),M.push(B.numPointLights),M.push(B.numSpotLights),M.push(B.numSpotLightMaps),M.push(B.numHemiLights),M.push(B.numRectAreaLights),M.push(B.numDirLightShadows),M.push(B.numPointLightShadows),M.push(B.numSpotLightShadows),M.push(B.numSpotLightShadowsWithMaps),M.push(B.shadowMapType),M.push(B.toneMapping),M.push(B.numClippingPlanes),M.push(B.numClipIntersection),M.push(B.depthPacking)}function x(M,B){a.disableAll(),B.isWebGL2&&a.enable(0),B.supportsVertexTextures&&a.enable(1),B.instancing&&a.enable(2),B.instancingColor&&a.enable(3),B.map&&a.enable(4),B.matcap&&a.enable(5),B.envMap&&a.enable(6),B.lightMap&&a.enable(7),B.aoMap&&a.enable(8),B.emissiveMap&&a.enable(9),B.bumpMap&&a.enable(10),B.normalMap&&a.enable(11),B.objectSpaceNormalMap&&a.enable(12),B.tangentSpaceNormalMap&&a.enable(13),B.clearcoat&&a.enable(14),B.clearcoatMap&&a.enable(15),B.clearcoatRoughnessMap&&a.enable(16),B.clearcoatNormalMap&&a.enable(17),B.iridescence&&a.enable(18),B.iridescenceMap&&a.enable(19),B.iridescenceThicknessMap&&a.enable(20),B.displacementMap&&a.enable(21),B.specularMap&&a.enable(22),B.roughnessMap&&a.enable(23),B.metalnessMap&&a.enable(24),B.gradientMap&&a.enable(25),B.alphaMap&&a.enable(26),B.alphaTest&&a.enable(27),B.vertexColors&&a.enable(28),B.vertexAlphas&&a.enable(29),B.vertexUvs&&a.enable(30),B.vertexTangents&&a.enable(31),B.uvsVertexOnly&&a.enable(32),M.push(a.mask),a.disableAll(),B.fog&&a.enable(0),B.useFog&&a.enable(1),B.flatShading&&a.enable(2),B.logarithmicDepthBuffer&&a.enable(3),B.skinning&&a.enable(4),B.morphTargets&&a.enable(5),B.morphNormals&&a.enable(6),B.morphColors&&a.enable(7),B.premultipliedAlpha&&a.enable(8),B.shadowMapEnabled&&a.enable(9),B.physicallyCorrectLights&&a.enable(10),B.doubleSided&&a.enable(11),B.flipSided&&a.enable(12),B.useDepthPacking&&a.enable(13),B.dithering&&a.enable(14),B.specularIntensityMap&&a.enable(15),B.specularColorMap&&a.enable(16),B.transmission&&a.enable(17),B.transmissionMap&&a.enable(18),B.thicknessMap&&a.enable(19),B.sheen&&a.enable(20),B.sheenColorMap&&a.enable(21),B.sheenRoughnessMap&&a.enable(22),B.decodeVideoTexture&&a.enable(23),B.opaque&&a.enable(24),M.push(a.mask)}function w(M){const B=g[M.type];let D;if(B){const k=Ds[B];D=bu.clone(k.uniforms)}else D=M.uniforms;return D}function b(M,B){let D;for(let k=0,O=u.length;k<O;k++){const U=u[k];if(U.cacheKey===B){D=U,++D.usedTimes;break}}return D===void 0&&(D=new xH(t,B,M,s),u.push(D)),D}function E(M){if(--M.usedTimes===0){const B=u.indexOf(M);u[B]=u[u.length-1],u.pop(),M.destroy()}}function C(M){l.remove(M)}function P(){l.dispose()}return{getParameters:v,getProgramCacheKey:y,getUniforms:w,acquireProgram:b,releaseProgram:E,releaseShaderCache:C,programs:u,dispose:P}}function AH(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function r(s,o,a){t.get(s)[o]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function MH(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function mC(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function gC(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(f,h,m,g,v,y){let _=t[e];return _===void 0?(_={id:f.id,object:f,geometry:h,material:m,groupOrder:g,renderOrder:f.renderOrder,z:v,group:y},t[e]=_):(_.id=f.id,_.object=f,_.geometry=h,_.material=m,_.groupOrder=g,_.renderOrder=f.renderOrder,_.z=v,_.group=y),e++,_}function a(f,h,m,g,v,y){const _=o(f,h,m,g,v,y);m.transmission>0?r.push(_):m.transparent===!0?i.push(_):n.push(_)}function l(f,h,m,g,v,y){const _=o(f,h,m,g,v,y);m.transmission>0?r.unshift(_):m.transparent===!0?i.unshift(_):n.unshift(_)}function u(f,h){n.length>1&&n.sort(f||MH),r.length>1&&r.sort(h||mC),i.length>1&&i.sort(h||mC)}function c(){for(let f=e,h=t.length;f<h;f++){const m=t[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:c,sort:u}}function EH(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new gC,t.set(r,[o])):i>=s.length?(o=new gC,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function CH(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new V,color:new $e};break;case"SpotLight":n={position:new V,direction:new V,color:new $e,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new V,color:new $e,distance:0,decay:0};break;case"HemisphereLight":n={direction:new V,skyColor:new $e,groundColor:new $e};break;case"RectAreaLight":n={color:new $e,position:new V,halfWidth:new V,halfHeight:new V};break}return t[e.id]=n,n}}}function TH(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new we};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new we};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new we,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let RH=0;function PH(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function BH(t,e){const n=new CH,r=TH(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new V);const s=new V,o=new gt,a=new gt;function l(c,f){let h=0,m=0,g=0;for(let k=0;k<9;k++)i.probe[k].set(0,0,0);let v=0,y=0,_=0,x=0,w=0,b=0,E=0,C=0,P=0,M=0;c.sort(PH);const B=f!==!0?Math.PI:1;for(let k=0,O=c.length;k<O;k++){const U=c[k],N=U.color,$=U.intensity,Q=U.distance,ie=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)h+=N.r*$*B,m+=N.g*$*B,g+=N.b*$*B;else if(U.isLightProbe)for(let F=0;F<9;F++)i.probe[F].addScaledVector(U.sh.coefficients[F],$);else if(U.isDirectionalLight){const F=n.get(U);if(F.color.copy(U.color).multiplyScalar(U.intensity*B),U.castShadow){const z=U.shadow,j=r.get(U);j.shadowBias=z.bias,j.shadowNormalBias=z.normalBias,j.shadowRadius=z.radius,j.shadowMapSize=z.mapSize,i.directionalShadow[v]=j,i.directionalShadowMap[v]=ie,i.directionalShadowMatrix[v]=U.shadow.matrix,b++}i.directional[v]=F,v++}else if(U.isSpotLight){const F=n.get(U);F.position.setFromMatrixPosition(U.matrixWorld),F.color.copy(N).multiplyScalar($*B),F.distance=Q,F.coneCos=Math.cos(U.angle),F.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),F.decay=U.decay,i.spot[_]=F;const z=U.shadow;if(U.map&&(i.spotLightMap[P]=U.map,P++,z.updateMatrices(U),U.castShadow&&M++),i.spotLightMatrix[_]=z.matrix,U.castShadow){const j=r.get(U);j.shadowBias=z.bias,j.shadowNormalBias=z.normalBias,j.shadowRadius=z.radius,j.shadowMapSize=z.mapSize,i.spotShadow[_]=j,i.spotShadowMap[_]=ie,C++}_++}else if(U.isRectAreaLight){const F=n.get(U);F.color.copy(N).multiplyScalar($),F.halfWidth.set(U.width*.5,0,0),F.halfHeight.set(0,U.height*.5,0),i.rectArea[x]=F,x++}else if(U.isPointLight){const F=n.get(U);if(F.color.copy(U.color).multiplyScalar(U.intensity*B),F.distance=U.distance,F.decay=U.decay,U.castShadow){const z=U.shadow,j=r.get(U);j.shadowBias=z.bias,j.shadowNormalBias=z.normalBias,j.shadowRadius=z.radius,j.shadowMapSize=z.mapSize,j.shadowCameraNear=z.camera.near,j.shadowCameraFar=z.camera.far,i.pointShadow[y]=j,i.pointShadowMap[y]=ie,i.pointShadowMatrix[y]=U.shadow.matrix,E++}i.point[y]=F,y++}else if(U.isHemisphereLight){const F=n.get(U);F.skyColor.copy(U.color).multiplyScalar($*B),F.groundColor.copy(U.groundColor).multiplyScalar($*B),i.hemi[w]=F,w++}}x>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ye.LTC_FLOAT_1,i.rectAreaLTC2=Ye.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ye.LTC_HALF_1,i.rectAreaLTC2=Ye.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=m,i.ambient[2]=g;const D=i.hash;(D.directionalLength!==v||D.pointLength!==y||D.spotLength!==_||D.rectAreaLength!==x||D.hemiLength!==w||D.numDirectionalShadows!==b||D.numPointShadows!==E||D.numSpotShadows!==C||D.numSpotMaps!==P)&&(i.directional.length=v,i.spot.length=_,i.rectArea.length=x,i.point.length=y,i.hemi.length=w,i.directionalShadow.length=b,i.directionalShadowMap.length=b,i.pointShadow.length=E,i.pointShadowMap.length=E,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=b,i.pointShadowMatrix.length=E,i.spotLightMatrix.length=C+P-M,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=M,D.directionalLength=v,D.pointLength=y,D.spotLength=_,D.rectAreaLength=x,D.hemiLength=w,D.numDirectionalShadows=b,D.numPointShadows=E,D.numSpotShadows=C,D.numSpotMaps=P,i.version=RH++)}function u(c,f){let h=0,m=0,g=0,v=0,y=0;const _=f.matrixWorldInverse;for(let x=0,w=c.length;x<w;x++){const b=c[x];if(b.isDirectionalLight){const E=i.directional[h];E.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(_),h++}else if(b.isSpotLight){const E=i.spot[g];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(_),E.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(_),g++}else if(b.isRectAreaLight){const E=i.rectArea[v];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(_),a.identity(),o.copy(b.matrixWorld),o.premultiply(_),a.extractRotation(o),E.halfWidth.set(b.width*.5,0,0),E.halfHeight.set(0,b.height*.5,0),E.halfWidth.applyMatrix4(a),E.halfHeight.applyMatrix4(a),v++}else if(b.isPointLight){const E=i.point[m];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(_),m++}else if(b.isHemisphereLight){const E=i.hemi[y];E.direction.setFromMatrixPosition(b.matrixWorld),E.direction.transformDirection(_),y++}}}return{setup:l,setupView:u,state:i}}function vC(t,e){const n=new BH(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(f){r.push(f)}function a(f){i.push(f)}function l(f){n.setup(r,f)}function u(f){n.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function IH(t,e){let n=new WeakMap;function r(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new vC(t,e),n.set(s,[l])):o>=a.length?(l=new vC(t,e),a.push(l)):l=a[o],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class Qv extends zn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Jv,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class qv extends zn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new V,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const DH=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,LH=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function kH(t,e,n){let r=new Kv;const i=new we,s=new we,o=new $t,a=new Qv({depthPacking:Lb}),l=new qv,u={},c=n.maxTextureSize,f={[Gs]:Hr,[Hr]:Gs,[wi]:wi},h=new xn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new we},radius:{value:4}},vertexShader:DH,fragmentShader:LH}),m=h.clone();m.defines.HORIZONTAL_PASS=1;const g=new wt;g.setAttribute("position",new Ut(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Mn(g,h),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Vv,this.render=function(b,E,C){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||b.length===0)return;const P=t.getRenderTarget(),M=t.getActiveCubeFace(),B=t.getActiveMipmapLevel(),D=t.state;D.setBlending(ui),D.buffers.color.setClear(1,1,1,1),D.buffers.depth.setTest(!0),D.setScissorTest(!1);for(let k=0,O=b.length;k<O;k++){const U=b[k],N=U.shadow;if(N===void 0){console.warn("THREE.WebGLShadowMap:",U,"has no shadow.");continue}if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;i.copy(N.mapSize);const $=N.getFrameExtents();if(i.multiply($),s.copy(N.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/$.x),i.x=s.x*$.x,N.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/$.y),i.y=s.y*$.y,N.mapSize.y=s.y)),N.map===null){const ie=this.type!==Ql?{minFilter:Sn,magFilter:Sn}:{};N.map=new hn(i.x,i.y,ie),N.map.texture.name=U.name+".shadowMap",N.camera.updateProjectionMatrix()}t.setRenderTarget(N.map),t.clear();const Q=N.getViewportCount();for(let ie=0;ie<Q;ie++){const F=N.getViewport(ie);o.set(s.x*F.x,s.y*F.y,s.x*F.z,s.y*F.w),D.viewport(o),N.updateMatrices(U,ie),r=N.getFrustum(),w(E,C,N.camera,U,this.type)}N.isPointLightShadow!==!0&&this.type===Ql&&_(N,C),N.needsUpdate=!1}y.needsUpdate=!1,t.setRenderTarget(P,M,B)};function _(b,E){const C=e.update(v);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,m.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,m.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new hn(i.x,i.y)),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,t.setRenderTarget(b.mapPass),t.clear(),t.renderBufferDirect(E,null,C,h,v,null),m.uniforms.shadow_pass.value=b.mapPass.texture,m.uniforms.resolution.value=b.mapSize,m.uniforms.radius.value=b.radius,t.setRenderTarget(b.map),t.clear(),t.renderBufferDirect(E,null,C,m,v,null)}function x(b,E,C,P,M,B){let D=null;const k=C.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(k!==void 0)D=k;else if(D=C.isPointLight===!0?l:a,t.localClippingEnabled&&E.clipShadows===!0&&Array.isArray(E.clippingPlanes)&&E.clippingPlanes.length!==0||E.displacementMap&&E.displacementScale!==0||E.alphaMap&&E.alphaTest>0||E.map&&E.alphaTest>0){const O=D.uuid,U=E.uuid;let N=u[O];N===void 0&&(N={},u[O]=N);let $=N[U];$===void 0&&($=D.clone(),N[U]=$),D=$}return D.visible=E.visible,D.wireframe=E.wireframe,B===Ql?D.side=E.shadowSide!==null?E.shadowSide:E.side:D.side=E.shadowSide!==null?E.shadowSide:f[E.side],D.alphaMap=E.alphaMap,D.alphaTest=E.alphaTest,D.map=E.map,D.clipShadows=E.clipShadows,D.clippingPlanes=E.clippingPlanes,D.clipIntersection=E.clipIntersection,D.displacementMap=E.displacementMap,D.displacementScale=E.displacementScale,D.displacementBias=E.displacementBias,D.wireframeLinewidth=E.wireframeLinewidth,D.linewidth=E.linewidth,C.isPointLight===!0&&D.isMeshDistanceMaterial===!0&&(D.referencePosition.setFromMatrixPosition(C.matrixWorld),D.nearDistance=P,D.farDistance=M),D}function w(b,E,C,P,M){if(b.visible===!1)return;if(b.layers.test(E.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&M===Ql)&&(!b.frustumCulled||r.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,b.matrixWorld);const k=e.update(b),O=b.material;if(Array.isArray(O)){const U=k.groups;for(let N=0,$=U.length;N<$;N++){const Q=U[N],ie=O[Q.materialIndex];if(ie&&ie.visible){const F=x(b,ie,P,C.near,C.far,M);t.renderBufferDirect(C,null,k,F,b,Q)}}}else if(O.visible){const U=x(b,O,P,C.near,C.far,M);t.renderBufferDirect(C,null,k,U,b,null)}}const D=b.children;for(let k=0,O=D.length;k<O;k++)w(D[k],E,C,P,M)}}function FH(t,e,n){const r=n.isWebGL2;function i(){let te=!1;const me=new $t;let Oe=null;const Ke=new $t(0,0,0,0);return{setMask:function(nt){Oe!==nt&&!te&&(t.colorMask(nt,nt,nt,nt),Oe=nt)},setLocked:function(nt){te=nt},setClear:function(nt,Mt,Ht,Qt,Jt){Jt===!0&&(nt*=Qt,Mt*=Qt,Ht*=Qt),me.set(nt,Mt,Ht,Qt),Ke.equals(me)===!1&&(t.clearColor(nt,Mt,Ht,Qt),Ke.copy(me))},reset:function(){te=!1,Oe=null,Ke.set(-1,0,0,0)}}}function s(){let te=!1,me=null,Oe=null,Ke=null;return{setTest:function(nt){nt?ae(2929):he(2929)},setMask:function(nt){me!==nt&&!te&&(t.depthMask(nt),me=nt)},setFunc:function(nt){if(Oe!==nt){switch(nt){case fI:t.depthFunc(512);break;case dI:t.depthFunc(519);break;case hI:t.depthFunc(513);break;case tv:t.depthFunc(515);break;case pI:t.depthFunc(514);break;case mI:t.depthFunc(518);break;case gI:t.depthFunc(516);break;case vI:t.depthFunc(517);break;default:t.depthFunc(515)}Oe=nt}},setLocked:function(nt){te=nt},setClear:function(nt){Ke!==nt&&(t.clearDepth(nt),Ke=nt)},reset:function(){te=!1,me=null,Oe=null,Ke=null}}}function o(){let te=!1,me=null,Oe=null,Ke=null,nt=null,Mt=null,Ht=null,Qt=null,Jt=null;return{setTest:function(Xt){te||(Xt?ae(2960):he(2960))},setMask:function(Xt){me!==Xt&&!te&&(t.stencilMask(Xt),me=Xt)},setFunc:function(Xt,Vt,Ot){(Oe!==Xt||Ke!==Vt||nt!==Ot)&&(t.stencilFunc(Xt,Vt,Ot),Oe=Xt,Ke=Vt,nt=Ot)},setOp:function(Xt,Vt,Ot){(Mt!==Xt||Ht!==Vt||Qt!==Ot)&&(t.stencilOp(Xt,Vt,Ot),Mt=Xt,Ht=Vt,Qt=Ot)},setLocked:function(Xt){te=Xt},setClear:function(Xt){Jt!==Xt&&(t.clearStencil(Xt),Jt=Xt)},reset:function(){te=!1,me=null,Oe=null,Ke=null,nt=null,Mt=null,Ht=null,Qt=null,Jt=null}}}const a=new i,l=new s,u=new o,c=new WeakMap,f=new WeakMap;let h={},m={},g=new WeakMap,v=[],y=null,_=!1,x=null,w=null,b=null,E=null,C=null,P=null,M=null,B=!1,D=null,k=null,O=null,U=null,N=null;const $=t.getParameter(35661);let Q=!1,ie=0;const F=t.getParameter(7938);F.indexOf("WebGL")!==-1?(ie=parseFloat(/^WebGL (\d)/.exec(F)[1]),Q=ie>=1):F.indexOf("OpenGL ES")!==-1&&(ie=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),Q=ie>=2);let z=null,j={};const H=t.getParameter(3088),G=t.getParameter(2978),Z=new $t().fromArray(H),re=new $t().fromArray(G);function se(te,me,Oe){const Ke=new Uint8Array(4),nt=t.createTexture();t.bindTexture(te,nt),t.texParameteri(te,10241,9728),t.texParameteri(te,10240,9728);for(let Mt=0;Mt<Oe;Mt++)t.texImage2D(me+Mt,0,6408,1,1,0,6408,5121,Ke);return nt}const Y={};Y[3553]=se(3553,3553,1),Y[34067]=se(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),ae(2929),l.setFunc(tv),Re(!1),Ve(tw),ae(2884),Pe(ui);function ae(te){h[te]!==!0&&(t.enable(te),h[te]=!0)}function he(te){h[te]!==!1&&(t.disable(te),h[te]=!1)}function Ce(te,me){return m[te]!==me?(t.bindFramebuffer(te,me),m[te]=me,r&&(te===36009&&(m[36160]=me),te===36160&&(m[36009]=me)),!0):!1}function ve(te,me){let Oe=v,Ke=!1;if(te)if(Oe=g.get(me),Oe===void 0&&(Oe=[],g.set(me,Oe)),te.isWebGLMultipleRenderTargets){const nt=te.texture;if(Oe.length!==nt.length||Oe[0]!==36064){for(let Mt=0,Ht=nt.length;Mt<Ht;Mt++)Oe[Mt]=36064+Mt;Oe.length=nt.length,Ke=!0}}else Oe[0]!==36064&&(Oe[0]=36064,Ke=!0);else Oe[0]!==1029&&(Oe[0]=1029,Ke=!0);Ke&&(n.isWebGL2?t.drawBuffers(Oe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Oe))}function xe(te){return y!==te?(t.useProgram(te),y=te,!0):!1}const ne={[jl]:32774,[eI]:32778,[tI]:32779};if(r)ne[iw]=32775,ne[sw]=32776;else{const te=e.get("EXT_blend_minmax");te!==null&&(ne[iw]=te.MIN_EXT,ne[sw]=te.MAX_EXT)}const le={[nI]:0,[rI]:1,[iI]:768,[Tb]:770,[cI]:776,[lI]:774,[oI]:772,[sI]:769,[Rb]:771,[uI]:775,[aI]:773};function Pe(te,me,Oe,Ke,nt,Mt,Ht,Qt){if(te===ui){_===!0&&(he(3042),_=!1);return}if(_===!1&&(ae(3042),_=!0),te!==ZB){if(te!==x||Qt!==B){if((w!==jl||C!==jl)&&(t.blendEquation(32774),w=jl,C=jl),Qt)switch(te){case au:t.blendFuncSeparate(1,771,1,771);break;case Vh:t.blendFunc(1,1);break;case nw:t.blendFuncSeparate(0,769,0,1);break;case rw:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",te);break}else switch(te){case au:t.blendFuncSeparate(770,771,1,771);break;case Vh:t.blendFunc(770,1);break;case nw:t.blendFuncSeparate(0,769,0,1);break;case rw:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",te);break}b=null,E=null,P=null,M=null,x=te,B=Qt}return}nt=nt||me,Mt=Mt||Oe,Ht=Ht||Ke,(me!==w||nt!==C)&&(t.blendEquationSeparate(ne[me],ne[nt]),w=me,C=nt),(Oe!==b||Ke!==E||Mt!==P||Ht!==M)&&(t.blendFuncSeparate(le[Oe],le[Ke],le[Mt],le[Ht]),b=Oe,E=Ke,P=Mt,M=Ht),x=te,B=!1}function ke(te,me){te.side===wi?he(2884):ae(2884);let Oe=te.side===Hr;me&&(Oe=!Oe),Re(Oe),te.blending===au&&te.transparent===!1?Pe(ui):Pe(te.blending,te.blendEquation,te.blendSrc,te.blendDst,te.blendEquationAlpha,te.blendSrcAlpha,te.blendDstAlpha,te.premultipliedAlpha),l.setFunc(te.depthFunc),l.setTest(te.depthTest),l.setMask(te.depthWrite),a.setMask(te.colorWrite);const Ke=te.stencilWrite;u.setTest(Ke),Ke&&(u.setMask(te.stencilWriteMask),u.setFunc(te.stencilFunc,te.stencilRef,te.stencilFuncMask),u.setOp(te.stencilFail,te.stencilZFail,te.stencilZPass)),Fe(te.polygonOffset,te.polygonOffsetFactor,te.polygonOffsetUnits),te.alphaToCoverage===!0?ae(32926):he(32926)}function Re(te){D!==te&&(te?t.frontFace(2304):t.frontFace(2305),D=te)}function Ve(te){te!==YB?(ae(2884),te!==k&&(te===tw?t.cullFace(1029):te===QB?t.cullFace(1028):t.cullFace(1032))):he(2884),k=te}function Me(te){te!==O&&(Q&&t.lineWidth(te),O=te)}function Fe(te,me,Oe){te?(ae(32823),(U!==me||N!==Oe)&&(t.polygonOffset(me,Oe),U=me,N=Oe)):he(32823)}function ze(te){te?ae(3089):he(3089)}function Ee(te){te===void 0&&(te=33984+$-1),z!==te&&(t.activeTexture(te),z=te)}function W(te,me,Oe){Oe===void 0&&(z===null?Oe=33984+$-1:Oe=z);let Ke=j[Oe];Ke===void 0&&(Ke={type:void 0,texture:void 0},j[Oe]=Ke),(Ke.type!==te||Ke.texture!==me)&&(z!==Oe&&(t.activeTexture(Oe),z=Oe),t.bindTexture(te,me||Y[te]),Ke.type=te,Ke.texture=me)}function L(){const te=j[z];te!==void 0&&te.type!==void 0&&(t.bindTexture(te.type,null),te.type=void 0,te.texture=void 0)}function q(){try{t.compressedTexImage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function fe(){try{t.compressedTexImage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Be(){try{t.texSubImage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Ie(){try{t.texSubImage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Ne(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Ue(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function _e(){try{t.texStorage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function We(){try{t.texStorage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function K(){try{t.texImage2D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function pe(){try{t.texImage3D.apply(t,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Se(te){Z.equals(te)===!1&&(t.scissor(te.x,te.y,te.z,te.w),Z.copy(te))}function Ae(te){re.equals(te)===!1&&(t.viewport(te.x,te.y,te.z,te.w),re.copy(te))}function Ge(te,me){let Oe=f.get(me);Oe===void 0&&(Oe=new WeakMap,f.set(me,Oe));let Ke=Oe.get(te);Ke===void 0&&(Ke=t.getUniformBlockIndex(me,te.name),Oe.set(te,Ke))}function et(te,me){const Ke=f.get(me).get(te);c.get(me)!==Ke&&(t.uniformBlockBinding(me,Ke,te.__bindingPointIndex),c.set(me,Ke))}function mt(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),r===!0&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},z=null,j={},m={},g=new WeakMap,v=[],y=null,_=!1,x=null,w=null,b=null,E=null,C=null,P=null,M=null,B=!1,D=null,k=null,O=null,U=null,N=null,Z.set(0,0,t.canvas.width,t.canvas.height),re.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:ae,disable:he,bindFramebuffer:Ce,drawBuffers:ve,useProgram:xe,setBlending:Pe,setMaterial:ke,setFlipSided:Re,setCullFace:Ve,setLineWidth:Me,setPolygonOffset:Fe,setScissorTest:ze,activeTexture:Ee,bindTexture:W,unbindTexture:L,compressedTexImage2D:q,compressedTexImage3D:fe,texImage2D:K,texImage3D:pe,updateUBOMapping:Ge,uniformBlockBinding:et,texStorage2D:_e,texStorage3D:We,texSubImage2D:Be,texSubImage3D:Ie,compressedTexSubImage2D:Ne,compressedTexSubImage3D:Ue,scissor:Se,viewport:Ae,reset:mt}}function OH(t,e,n,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,f=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let v;const y=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(W,L){return _?new OffscreenCanvas(W,L):Kh("canvas")}function w(W,L,q,fe){let Be=1;if((W.width>fe||W.height>fe)&&(Be=fe/Math.max(W.width,W.height)),Be<1||L===!0)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap){const Ie=L?iv:Math.floor,Ne=Ie(Be*W.width),Ue=Ie(Be*W.height);v===void 0&&(v=x(Ne,Ue));const _e=q?x(Ne,Ue):v;return _e.width=Ne,_e.height=Ue,_e.getContext("2d").drawImage(W,0,0,Ne,Ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+Ne+"x"+Ue+")."),_e}else return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W;return W}function b(W){return Pw(W.width)&&Pw(W.height)}function E(W){return a?!1:W.wrapS!==Sr||W.wrapT!==Sr||W.minFilter!==Sn&&W.minFilter!==Kt}function C(W,L){return W.generateMipmaps&&L&&W.minFilter!==Sn&&W.minFilter!==Kt}function P(W){t.generateMipmap(W)}function M(W,L,q,fe,Be=!1){if(a===!1)return L;if(W!==null){if(t[W]!==void 0)return t[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let Ie=L;return L===6403&&(q===5126&&(Ie=33326),q===5131&&(Ie=33325),q===5121&&(Ie=33321)),L===33319&&(q===5126&&(Ie=33328),q===5131&&(Ie=33327),q===5121&&(Ie=33323)),L===6408&&(q===5126&&(Ie=34836),q===5131&&(Ie=34842),q===5121&&(Ie=fe===Lt&&Be===!1?35907:32856),q===32819&&(Ie=32854),q===32820&&(Ie=32855)),(Ie===33325||Ie===33326||Ie===33327||Ie===33328||Ie===34842||Ie===34836)&&e.get("EXT_color_buffer_float"),Ie}function B(W,L,q){return C(W,q)===!0||W.isFramebufferTexture&&W.minFilter!==Sn&&W.minFilter!==Kt?Math.log2(Math.max(L.width,L.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?L.mipmaps.length:1}function D(W){return W===Sn||W===jh||W===sf?9728:9729}function k(W){const L=W.target;L.removeEventListener("dispose",k),U(L),L.isVideoTexture&&g.delete(L)}function O(W){const L=W.target;L.removeEventListener("dispose",O),$(L)}function U(W){const L=r.get(W);if(L.__webglInit===void 0)return;const q=W.source,fe=y.get(q);if(fe){const Be=fe[L.__cacheKey];Be.usedTimes--,Be.usedTimes===0&&N(W),Object.keys(fe).length===0&&y.delete(q)}r.remove(W)}function N(W){const L=r.get(W);t.deleteTexture(L.__webglTexture);const q=W.source,fe=y.get(q);delete fe[L.__cacheKey],o.memory.textures--}function $(W){const L=W.texture,q=r.get(W),fe=r.get(L);if(fe.__webglTexture!==void 0&&(t.deleteTexture(fe.__webglTexture),o.memory.textures--),W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let Be=0;Be<6;Be++)t.deleteFramebuffer(q.__webglFramebuffer[Be]),q.__webglDepthbuffer&&t.deleteRenderbuffer(q.__webglDepthbuffer[Be]);else{if(t.deleteFramebuffer(q.__webglFramebuffer),q.__webglDepthbuffer&&t.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&t.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer)for(let Be=0;Be<q.__webglColorRenderbuffer.length;Be++)q.__webglColorRenderbuffer[Be]&&t.deleteRenderbuffer(q.__webglColorRenderbuffer[Be]);q.__webglDepthRenderbuffer&&t.deleteRenderbuffer(q.__webglDepthRenderbuffer)}if(W.isWebGLMultipleRenderTargets)for(let Be=0,Ie=L.length;Be<Ie;Be++){const Ne=r.get(L[Be]);Ne.__webglTexture&&(t.deleteTexture(Ne.__webglTexture),o.memory.textures--),r.remove(L[Be])}r.remove(L),r.remove(W)}let Q=0;function ie(){Q=0}function F(){const W=Q;return W>=l&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+l),Q+=1,W}function z(W){const L=[];return L.push(W.wrapS),L.push(W.wrapT),L.push(W.wrapR||0),L.push(W.magFilter),L.push(W.minFilter),L.push(W.anisotropy),L.push(W.internalFormat),L.push(W.format),L.push(W.type),L.push(W.generateMipmaps),L.push(W.premultiplyAlpha),L.push(W.flipY),L.push(W.unpackAlignment),L.push(W.encoding),L.join()}function j(W,L){const q=r.get(W);if(W.isVideoTexture&&ze(W),W.isRenderTargetTexture===!1&&W.version>0&&q.__version!==W.version){const fe=W.image;if(fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{he(q,W,L);return}}n.bindTexture(3553,q.__webglTexture,33984+L)}function H(W,L){const q=r.get(W);if(W.version>0&&q.__version!==W.version){he(q,W,L);return}n.bindTexture(35866,q.__webglTexture,33984+L)}function G(W,L){const q=r.get(W);if(W.version>0&&q.__version!==W.version){he(q,W,L);return}n.bindTexture(32879,q.__webglTexture,33984+L)}function Z(W,L){const q=r.get(W);if(W.version>0&&q.__version!==W.version){Ce(q,W,L);return}n.bindTexture(34067,q.__webglTexture,33984+L)}const re={[rl]:10497,[Sr]:33071,[xf]:33648},se={[Sn]:9728,[jh]:9984,[sf]:9986,[Kt]:9729,[jv]:9985,[Hs]:9987};function Y(W,L,q){if(q?(t.texParameteri(W,10242,re[L.wrapS]),t.texParameteri(W,10243,re[L.wrapT]),(W===32879||W===35866)&&t.texParameteri(W,32882,re[L.wrapR]),t.texParameteri(W,10240,se[L.magFilter]),t.texParameteri(W,10241,se[L.minFilter])):(t.texParameteri(W,10242,33071),t.texParameteri(W,10243,33071),(W===32879||W===35866)&&t.texParameteri(W,32882,33071),(L.wrapS!==Sr||L.wrapT!==Sr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(W,10240,D(L.magFilter)),t.texParameteri(W,10241,D(L.minFilter)),L.minFilter!==Sn&&L.minFilter!==Kt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const fe=e.get("EXT_texture_filter_anisotropic");if(L.magFilter===Sn||L.minFilter!==sf&&L.minFilter!==Hs||L.type===Ni&&e.has("OES_texture_float_linear")===!1||a===!1&&L.type===Nr&&e.has("OES_texture_half_float_linear")===!1)return;(L.anisotropy>1||r.get(L).__currentAnisotropy)&&(t.texParameterf(W,fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,i.getMaxAnisotropy())),r.get(L).__currentAnisotropy=L.anisotropy)}}function ae(W,L){let q=!1;W.__webglInit===void 0&&(W.__webglInit=!0,L.addEventListener("dispose",k));const fe=L.source;let Be=y.get(fe);Be===void 0&&(Be={},y.set(fe,Be));const Ie=z(L);if(Ie!==W.__cacheKey){Be[Ie]===void 0&&(Be[Ie]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,q=!0),Be[Ie].usedTimes++;const Ne=Be[W.__cacheKey];Ne!==void 0&&(Be[W.__cacheKey].usedTimes--,Ne.usedTimes===0&&N(L)),W.__cacheKey=Ie,W.__webglTexture=Be[Ie].texture}return q}function he(W,L,q){let fe=3553;(L.isDataArrayTexture||L.isCompressedArrayTexture)&&(fe=35866),L.isData3DTexture&&(fe=32879);const Be=ae(W,L),Ie=L.source;n.bindTexture(fe,W.__webglTexture,33984+q);const Ne=r.get(Ie);if(Ie.version!==Ne.__version||Be===!0){n.activeTexture(33984+q),t.pixelStorei(37440,L.flipY),t.pixelStorei(37441,L.premultiplyAlpha),t.pixelStorei(3317,L.unpackAlignment),t.pixelStorei(37443,0);const Ue=E(L)&&b(L.image)===!1;let _e=w(L.image,Ue,!1,c);_e=Ee(L,_e);const We=b(_e)||a,K=s.convert(L.format,L.encoding);let pe=s.convert(L.type),Se=M(L.internalFormat,K,pe,L.encoding,L.isVideoTexture);Y(fe,L,We);let Ae;const Ge=L.mipmaps,et=a&&L.isVideoTexture!==!0,mt=Ne.__version===void 0||Be===!0,te=B(L,_e,We);if(L.isDepthTexture)Se=6402,a?L.type===Ni?Se=36012:L.type===za?Se=33190:L.type===lu?Se=35056:Se=33189:L.type===Ni&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),L.format===qa&&Se===6402&&L.type!==Bb&&L.type!==za&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),L.type=za,pe=s.convert(L.type)),L.format===wu&&Se===6402&&(Se=34041,L.type!==lu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),L.type=lu,pe=s.convert(L.type))),mt&&(et?n.texStorage2D(3553,1,Se,_e.width,_e.height):n.texImage2D(3553,0,Se,_e.width,_e.height,0,K,pe,null));else if(L.isDataTexture)if(Ge.length>0&&We){et&&mt&&n.texStorage2D(3553,te,Se,Ge[0].width,Ge[0].height);for(let me=0,Oe=Ge.length;me<Oe;me++)Ae=Ge[me],et?n.texSubImage2D(3553,me,0,0,Ae.width,Ae.height,K,pe,Ae.data):n.texImage2D(3553,me,Se,Ae.width,Ae.height,0,K,pe,Ae.data);L.generateMipmaps=!1}else et?(mt&&n.texStorage2D(3553,te,Se,_e.width,_e.height),n.texSubImage2D(3553,0,0,0,_e.width,_e.height,K,pe,_e.data)):n.texImage2D(3553,0,Se,_e.width,_e.height,0,K,pe,_e.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){et&&mt&&n.texStorage3D(35866,te,Se,Ge[0].width,Ge[0].height,_e.depth);for(let me=0,Oe=Ge.length;me<Oe;me++)Ae=Ge[me],L.format!==Ur?K!==null?et?n.compressedTexSubImage3D(35866,me,0,0,0,Ae.width,Ae.height,_e.depth,K,Ae.data,0,0):n.compressedTexImage3D(35866,me,Se,Ae.width,Ae.height,_e.depth,0,Ae.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):et?n.texSubImage3D(35866,me,0,0,0,Ae.width,Ae.height,_e.depth,K,pe,Ae.data):n.texImage3D(35866,me,Se,Ae.width,Ae.height,_e.depth,0,K,pe,Ae.data)}else{et&&mt&&n.texStorage2D(3553,te,Se,Ge[0].width,Ge[0].height);for(let me=0,Oe=Ge.length;me<Oe;me++)Ae=Ge[me],L.format!==Ur?K!==null?et?n.compressedTexSubImage2D(3553,me,0,0,Ae.width,Ae.height,K,Ae.data):n.compressedTexImage2D(3553,me,Se,Ae.width,Ae.height,0,Ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):et?n.texSubImage2D(3553,me,0,0,Ae.width,Ae.height,K,pe,Ae.data):n.texImage2D(3553,me,Se,Ae.width,Ae.height,0,K,pe,Ae.data)}else if(L.isDataArrayTexture)et?(mt&&n.texStorage3D(35866,te,Se,_e.width,_e.height,_e.depth),n.texSubImage3D(35866,0,0,0,0,_e.width,_e.height,_e.depth,K,pe,_e.data)):n.texImage3D(35866,0,Se,_e.width,_e.height,_e.depth,0,K,pe,_e.data);else if(L.isData3DTexture)et?(mt&&n.texStorage3D(32879,te,Se,_e.width,_e.height,_e.depth),n.texSubImage3D(32879,0,0,0,0,_e.width,_e.height,_e.depth,K,pe,_e.data)):n.texImage3D(32879,0,Se,_e.width,_e.height,_e.depth,0,K,pe,_e.data);else if(L.isFramebufferTexture){if(mt)if(et)n.texStorage2D(3553,te,Se,_e.width,_e.height);else{let me=_e.width,Oe=_e.height;for(let Ke=0;Ke<te;Ke++)n.texImage2D(3553,Ke,Se,me,Oe,0,K,pe,null),me>>=1,Oe>>=1}}else if(Ge.length>0&&We){et&&mt&&n.texStorage2D(3553,te,Se,Ge[0].width,Ge[0].height);for(let me=0,Oe=Ge.length;me<Oe;me++)Ae=Ge[me],et?n.texSubImage2D(3553,me,0,0,K,pe,Ae):n.texImage2D(3553,me,Se,K,pe,Ae);L.generateMipmaps=!1}else et?(mt&&n.texStorage2D(3553,te,Se,_e.width,_e.height),n.texSubImage2D(3553,0,0,0,K,pe,_e)):n.texImage2D(3553,0,Se,K,pe,_e);C(L,We)&&P(fe),Ne.__version=Ie.version,L.onUpdate&&L.onUpdate(L)}W.__version=L.version}function Ce(W,L,q){if(L.image.length!==6)return;const fe=ae(W,L),Be=L.source;n.bindTexture(34067,W.__webglTexture,33984+q);const Ie=r.get(Be);if(Be.version!==Ie.__version||fe===!0){n.activeTexture(33984+q),t.pixelStorei(37440,L.flipY),t.pixelStorei(37441,L.premultiplyAlpha),t.pixelStorei(3317,L.unpackAlignment),t.pixelStorei(37443,0);const Ne=L.isCompressedTexture||L.image[0].isCompressedTexture,Ue=L.image[0]&&L.image[0].isDataTexture,_e=[];for(let me=0;me<6;me++)!Ne&&!Ue?_e[me]=w(L.image[me],!1,!0,u):_e[me]=Ue?L.image[me].image:L.image[me],_e[me]=Ee(L,_e[me]);const We=_e[0],K=b(We)||a,pe=s.convert(L.format,L.encoding),Se=s.convert(L.type),Ae=M(L.internalFormat,pe,Se,L.encoding),Ge=a&&L.isVideoTexture!==!0,et=Ie.__version===void 0||fe===!0;let mt=B(L,We,K);Y(34067,L,K);let te;if(Ne){Ge&&et&&n.texStorage2D(34067,mt,Ae,We.width,We.height);for(let me=0;me<6;me++){te=_e[me].mipmaps;for(let Oe=0;Oe<te.length;Oe++){const Ke=te[Oe];L.format!==Ur?pe!==null?Ge?n.compressedTexSubImage2D(34069+me,Oe,0,0,Ke.width,Ke.height,pe,Ke.data):n.compressedTexImage2D(34069+me,Oe,Ae,Ke.width,Ke.height,0,Ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ge?n.texSubImage2D(34069+me,Oe,0,0,Ke.width,Ke.height,pe,Se,Ke.data):n.texImage2D(34069+me,Oe,Ae,Ke.width,Ke.height,0,pe,Se,Ke.data)}}}else{te=L.mipmaps,Ge&&et&&(te.length>0&&mt++,n.texStorage2D(34067,mt,Ae,_e[0].width,_e[0].height));for(let me=0;me<6;me++)if(Ue){Ge?n.texSubImage2D(34069+me,0,0,0,_e[me].width,_e[me].height,pe,Se,_e[me].data):n.texImage2D(34069+me,0,Ae,_e[me].width,_e[me].height,0,pe,Se,_e[me].data);for(let Oe=0;Oe<te.length;Oe++){const nt=te[Oe].image[me].image;Ge?n.texSubImage2D(34069+me,Oe+1,0,0,nt.width,nt.height,pe,Se,nt.data):n.texImage2D(34069+me,Oe+1,Ae,nt.width,nt.height,0,pe,Se,nt.data)}}else{Ge?n.texSubImage2D(34069+me,0,0,0,pe,Se,_e[me]):n.texImage2D(34069+me,0,Ae,pe,Se,_e[me]);for(let Oe=0;Oe<te.length;Oe++){const Ke=te[Oe];Ge?n.texSubImage2D(34069+me,Oe+1,0,0,pe,Se,Ke.image[me]):n.texImage2D(34069+me,Oe+1,Ae,pe,Se,Ke.image[me])}}}C(L,K)&&P(34067),Ie.__version=Be.version,L.onUpdate&&L.onUpdate(L)}W.__version=L.version}function ve(W,L,q,fe,Be){const Ie=s.convert(q.format,q.encoding),Ne=s.convert(q.type),Ue=M(q.internalFormat,Ie,Ne,q.encoding);r.get(L).__hasExternalTextures||(Be===32879||Be===35866?n.texImage3D(Be,0,Ue,L.width,L.height,L.depth,0,Ie,Ne,null):n.texImage2D(Be,0,Ue,L.width,L.height,0,Ie,Ne,null)),n.bindFramebuffer(36160,W),Fe(L)?h.framebufferTexture2DMultisampleEXT(36160,fe,Be,r.get(q).__webglTexture,0,Me(L)):(Be===3553||Be>=34069&&Be<=34074)&&t.framebufferTexture2D(36160,fe,Be,r.get(q).__webglTexture,0),n.bindFramebuffer(36160,null)}function xe(W,L,q){if(t.bindRenderbuffer(36161,W),L.depthBuffer&&!L.stencilBuffer){let fe=33189;if(q||Fe(L)){const Be=L.depthTexture;Be&&Be.isDepthTexture&&(Be.type===Ni?fe=36012:Be.type===za&&(fe=33190));const Ie=Me(L);Fe(L)?h.renderbufferStorageMultisampleEXT(36161,Ie,fe,L.width,L.height):t.renderbufferStorageMultisample(36161,Ie,fe,L.width,L.height)}else t.renderbufferStorage(36161,fe,L.width,L.height);t.framebufferRenderbuffer(36160,36096,36161,W)}else if(L.depthBuffer&&L.stencilBuffer){const fe=Me(L);q&&Fe(L)===!1?t.renderbufferStorageMultisample(36161,fe,35056,L.width,L.height):Fe(L)?h.renderbufferStorageMultisampleEXT(36161,fe,35056,L.width,L.height):t.renderbufferStorage(36161,34041,L.width,L.height),t.framebufferRenderbuffer(36160,33306,36161,W)}else{const fe=L.isWebGLMultipleRenderTargets===!0?L.texture:[L.texture];for(let Be=0;Be<fe.length;Be++){const Ie=fe[Be],Ne=s.convert(Ie.format,Ie.encoding),Ue=s.convert(Ie.type),_e=M(Ie.internalFormat,Ne,Ue,Ie.encoding),We=Me(L);q&&Fe(L)===!1?t.renderbufferStorageMultisample(36161,We,_e,L.width,L.height):Fe(L)?h.renderbufferStorageMultisampleEXT(36161,We,_e,L.width,L.height):t.renderbufferStorage(36161,_e,L.width,L.height)}}t.bindRenderbuffer(36161,null)}function ne(W,L){if(L&&L.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,W),!(L.depthTexture&&L.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(L.depthTexture).__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)&&(L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0),j(L.depthTexture,0);const fe=r.get(L.depthTexture).__webglTexture,Be=Me(L);if(L.depthTexture.format===qa)Fe(L)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,fe,0,Be):t.framebufferTexture2D(36160,36096,3553,fe,0);else if(L.depthTexture.format===wu)Fe(L)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,fe,0,Be):t.framebufferTexture2D(36160,33306,3553,fe,0);else throw new Error("Unknown depthTexture format")}function le(W){const L=r.get(W),q=W.isWebGLCubeRenderTarget===!0;if(W.depthTexture&&!L.__autoAllocateDepthBuffer){if(q)throw new Error("target.depthTexture not supported in Cube render targets");ne(L.__webglFramebuffer,W)}else if(q){L.__webglDepthbuffer=[];for(let fe=0;fe<6;fe++)n.bindFramebuffer(36160,L.__webglFramebuffer[fe]),L.__webglDepthbuffer[fe]=t.createRenderbuffer(),xe(L.__webglDepthbuffer[fe],W,!1)}else n.bindFramebuffer(36160,L.__webglFramebuffer),L.__webglDepthbuffer=t.createRenderbuffer(),xe(L.__webglDepthbuffer,W,!1);n.bindFramebuffer(36160,null)}function Pe(W,L,q){const fe=r.get(W);L!==void 0&&ve(fe.__webglFramebuffer,W,W.texture,36064,3553),q!==void 0&&le(W)}function ke(W){const L=W.texture,q=r.get(W),fe=r.get(L);W.addEventListener("dispose",O),W.isWebGLMultipleRenderTargets!==!0&&(fe.__webglTexture===void 0&&(fe.__webglTexture=t.createTexture()),fe.__version=L.version,o.memory.textures++);const Be=W.isWebGLCubeRenderTarget===!0,Ie=W.isWebGLMultipleRenderTargets===!0,Ne=b(W)||a;if(Be){q.__webglFramebuffer=[];for(let Ue=0;Ue<6;Ue++)q.__webglFramebuffer[Ue]=t.createFramebuffer()}else{if(q.__webglFramebuffer=t.createFramebuffer(),Ie)if(i.drawBuffers){const Ue=W.texture;for(let _e=0,We=Ue.length;_e<We;_e++){const K=r.get(Ue[_e]);K.__webglTexture===void 0&&(K.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&W.samples>0&&Fe(W)===!1){const Ue=Ie?L:[L];q.__webglMultisampledFramebuffer=t.createFramebuffer(),q.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,q.__webglMultisampledFramebuffer);for(let _e=0;_e<Ue.length;_e++){const We=Ue[_e];q.__webglColorRenderbuffer[_e]=t.createRenderbuffer(),t.bindRenderbuffer(36161,q.__webglColorRenderbuffer[_e]);const K=s.convert(We.format,We.encoding),pe=s.convert(We.type),Se=M(We.internalFormat,K,pe,We.encoding,W.isXRRenderTarget===!0),Ae=Me(W);t.renderbufferStorageMultisample(36161,Ae,Se,W.width,W.height),t.framebufferRenderbuffer(36160,36064+_e,36161,q.__webglColorRenderbuffer[_e])}t.bindRenderbuffer(36161,null),W.depthBuffer&&(q.__webglDepthRenderbuffer=t.createRenderbuffer(),xe(q.__webglDepthRenderbuffer,W,!0)),n.bindFramebuffer(36160,null)}}if(Be){n.bindTexture(34067,fe.__webglTexture),Y(34067,L,Ne);for(let Ue=0;Ue<6;Ue++)ve(q.__webglFramebuffer[Ue],W,L,36064,34069+Ue);C(L,Ne)&&P(34067),n.unbindTexture()}else if(Ie){const Ue=W.texture;for(let _e=0,We=Ue.length;_e<We;_e++){const K=Ue[_e],pe=r.get(K);n.bindTexture(3553,pe.__webglTexture),Y(3553,K,Ne),ve(q.__webglFramebuffer,W,K,36064+_e,3553),C(K,Ne)&&P(3553)}n.unbindTexture()}else{let Ue=3553;(W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(a?Ue=W.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Ue,fe.__webglTexture),Y(Ue,L,Ne),ve(q.__webglFramebuffer,W,L,36064,Ue),C(L,Ne)&&P(Ue),n.unbindTexture()}W.depthBuffer&&le(W)}function Re(W){const L=b(W)||a,q=W.isWebGLMultipleRenderTargets===!0?W.texture:[W.texture];for(let fe=0,Be=q.length;fe<Be;fe++){const Ie=q[fe];if(C(Ie,L)){const Ne=W.isWebGLCubeRenderTarget?34067:3553,Ue=r.get(Ie).__webglTexture;n.bindTexture(Ne,Ue),P(Ne),n.unbindTexture()}}}function Ve(W){if(a&&W.samples>0&&Fe(W)===!1){const L=W.isWebGLMultipleRenderTargets?W.texture:[W.texture],q=W.width,fe=W.height;let Be=16384;const Ie=[],Ne=W.stencilBuffer?33306:36096,Ue=r.get(W),_e=W.isWebGLMultipleRenderTargets===!0;if(_e)for(let We=0;We<L.length;We++)n.bindFramebuffer(36160,Ue.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+We,36161,null),n.bindFramebuffer(36160,Ue.__webglFramebuffer),t.framebufferTexture2D(36009,36064+We,3553,null,0);n.bindFramebuffer(36008,Ue.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,Ue.__webglFramebuffer);for(let We=0;We<L.length;We++){Ie.push(36064+We),W.depthBuffer&&Ie.push(Ne);const K=Ue.__ignoreDepthValues!==void 0?Ue.__ignoreDepthValues:!1;if(K===!1&&(W.depthBuffer&&(Be|=256),W.stencilBuffer&&(Be|=1024)),_e&&t.framebufferRenderbuffer(36008,36064,36161,Ue.__webglColorRenderbuffer[We]),K===!0&&(t.invalidateFramebuffer(36008,[Ne]),t.invalidateFramebuffer(36009,[Ne])),_e){const pe=r.get(L[We]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,pe,0)}t.blitFramebuffer(0,0,q,fe,0,0,q,fe,Be,9728),m&&t.invalidateFramebuffer(36008,Ie)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),_e)for(let We=0;We<L.length;We++){n.bindFramebuffer(36160,Ue.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+We,36161,Ue.__webglColorRenderbuffer[We]);const K=r.get(L[We]).__webglTexture;n.bindFramebuffer(36160,Ue.__webglFramebuffer),t.framebufferTexture2D(36009,36064+We,3553,K,0)}n.bindFramebuffer(36009,Ue.__webglMultisampledFramebuffer)}}function Me(W){return Math.min(f,W.samples)}function Fe(W){const L=r.get(W);return a&&W.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&L.__useRenderToTexture!==!1}function ze(W){const L=o.render.frame;g.get(W)!==L&&(g.set(W,L),W.update())}function Ee(W,L){const q=W.encoding,fe=W.format,Be=W.type;return W.isCompressedTexture===!0||W.isVideoTexture===!0||W.format===rv||q!==mo&&(q===Lt?a===!1?e.has("EXT_sRGB")===!0&&fe===Ur?(W.format=rv,W.minFilter=Kt,W.generateMipmaps=!1):L=Fb.sRGBToLinear(L):(fe!==Ur||Be!==Ei)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",q)),L}this.allocateTextureUnit=F,this.resetTextureUnits=ie,this.setTexture2D=j,this.setTexture2DArray=H,this.setTexture3D=G,this.setTextureCube=Z,this.rebindTextures=Pe,this.setupRenderTarget=ke,this.updateRenderTargetMipmap=Re,this.updateMultisampleRenderTarget=Ve,this.setupDepthRenderbuffer=le,this.setupFrameBufferTexture=ve,this.useMultisampledRTT=Fe}function tD(t,e,n){const r=n.isWebGL2;function i(s,o=null){let a;if(s===Ei)return 5121;if(s===CI)return 32819;if(s===TI)return 32820;if(s===AI)return 5120;if(s===MI)return 5122;if(s===Bb)return 5123;if(s===EI)return 5124;if(s===za)return 5125;if(s===Ni)return 5126;if(s===Nr)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===RI)return 6406;if(s===Ur)return 6408;if(s===PI)return 6409;if(s===BI)return 6410;if(s===qa)return 6402;if(s===wu)return 34041;if(s===rv)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===II)return 6403;if(s===DI)return 36244;if(s===LI)return 33319;if(s===kI)return 33320;if(s===FI)return 36249;if(s===g0||s===v0||s===y0||s===x0)if(o===Lt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===g0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===v0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===y0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===x0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===g0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===v0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===y0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===x0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===ow||s===aw||s===lw||s===uw)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===ow)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===aw)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===lw)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===uw)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===OI)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===cw||s===fw)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===cw)return o===Lt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===fw)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===dw||s===hw||s===pw||s===mw||s===gw||s===vw||s===yw||s===xw||s===_w||s===ww||s===Sw||s===bw||s===Aw||s===Mw)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===dw)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===hw)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===pw)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===mw)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===gw)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===vw)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===yw)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===xw)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===_w)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===ww)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Sw)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===bw)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Aw)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Mw)return o===Lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===_0)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===_0)return o===Lt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===UI||s===Ew||s===Cw||s===Tw)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===_0)return a.COMPRESSED_RED_RGTC1_EXT;if(s===Ew)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Cw)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Tw)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===lu?r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:i}}class nD extends An{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Xo extends Gt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const UH={type:"move"};class cx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Xo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Xo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Xo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const v of e.hand.values()){const y=n.getJointPose(v,r),_=this._getHandJoint(u,v);y!==null&&(_.matrix.fromArray(y.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=y.radius),_.visible=y!==null}const c=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],h=c.position.distanceTo(f.position),m=.02,g=.005;u.inputState.pinching&&h>m+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=m-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(UH)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Xo;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class Hb extends an{constructor(e,n,r,i,s,o,a,l,u,c){if(c=c!==void 0?c:qa,c!==qa&&c!==wu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===qa&&(r=za),r===void 0&&c===wu&&(r=lu),super(null,i,s,o,a,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:Sn,this.minFilter=l!==void 0?l:Sn,this.flipY=!1,this.generateMipmaps=!1}}class NH extends $i{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,f=null,h=null,m=null,g=null;const v=n.getContextAttributes();let y=null,_=null;const x=[],w=[],b=new Set,E=new Map,C=new An;C.layers.enable(1),C.viewport=new $t;const P=new An;P.layers.enable(2),P.viewport=new $t;const M=[C,P],B=new nD;B.layers.enable(1),B.layers.enable(2);let D=null,k=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(G){let Z=x[G];return Z===void 0&&(Z=new cx,x[G]=Z),Z.getTargetRaySpace()},this.getControllerGrip=function(G){let Z=x[G];return Z===void 0&&(Z=new cx,x[G]=Z),Z.getGripSpace()},this.getHand=function(G){let Z=x[G];return Z===void 0&&(Z=new cx,x[G]=Z),Z.getHandSpace()};function O(G){const Z=w.indexOf(G.inputSource);if(Z===-1)return;const re=x[Z];re!==void 0&&re.dispatchEvent({type:G.type,data:G.inputSource})}function U(){i.removeEventListener("select",O),i.removeEventListener("selectstart",O),i.removeEventListener("selectend",O),i.removeEventListener("squeeze",O),i.removeEventListener("squeezestart",O),i.removeEventListener("squeezeend",O),i.removeEventListener("end",U),i.removeEventListener("inputsourceschange",N);for(let G=0;G<x.length;G++){const Z=w[G];Z!==null&&(w[G]=null,x[G].disconnect(Z))}D=null,k=null,e.setRenderTarget(y),m=null,h=null,f=null,i=null,_=null,H.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(G){s=G,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(G){a=G,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(G){u=G},this.getBaseLayer=function(){return h!==null?h:m},this.getBinding=function(){return f},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(G){if(i=G,i!==null){if(y=e.getRenderTarget(),i.addEventListener("select",O),i.addEventListener("selectstart",O),i.addEventListener("selectend",O),i.addEventListener("squeeze",O),i.addEventListener("squeezestart",O),i.addEventListener("squeezeend",O),i.addEventListener("end",U),i.addEventListener("inputsourceschange",N),v.xrCompatible!==!0&&await n.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Z={antialias:i.renderState.layers===void 0?v.antialias:!0,alpha:v.alpha,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,n,Z),i.updateRenderState({baseLayer:m}),_=new hn(m.framebufferWidth,m.framebufferHeight,{format:Ur,type:Ei,encoding:e.outputEncoding,stencilBuffer:v.stencil})}else{let Z=null,re=null,se=null;v.depth&&(se=v.stencil?35056:33190,Z=v.stencil?wu:qa,re=v.stencil?lu:za);const Y={colorFormat:32856,depthFormat:se,scaleFactor:s};f=new XRWebGLBinding(i,n),h=f.createProjectionLayer(Y),i.updateRenderState({layers:[h]}),_=new hn(h.textureWidth,h.textureHeight,{format:Ur,type:Ei,depthTexture:new Hb(h.textureWidth,h.textureHeight,re,void 0,void 0,void 0,void 0,void 0,void 0,Z),stencilBuffer:v.stencil,encoding:e.outputEncoding,samples:v.antialias?4:0});const ae=e.properties.get(_);ae.__ignoreDepthValues=h.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),H.setContext(i),H.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function N(G){for(let Z=0;Z<G.removed.length;Z++){const re=G.removed[Z],se=w.indexOf(re);se>=0&&(w[se]=null,x[se].disconnect(re))}for(let Z=0;Z<G.added.length;Z++){const re=G.added[Z];let se=w.indexOf(re);if(se===-1){for(let ae=0;ae<x.length;ae++)if(ae>=w.length){w.push(re),se=ae;break}else if(w[ae]===null){w[ae]=re,se=ae;break}if(se===-1)break}const Y=x[se];Y&&Y.connect(re)}}const $=new V,Q=new V;function ie(G,Z,re){$.setFromMatrixPosition(Z.matrixWorld),Q.setFromMatrixPosition(re.matrixWorld);const se=$.distanceTo(Q),Y=Z.projectionMatrix.elements,ae=re.projectionMatrix.elements,he=Y[14]/(Y[10]-1),Ce=Y[14]/(Y[10]+1),ve=(Y[9]+1)/Y[5],xe=(Y[9]-1)/Y[5],ne=(Y[8]-1)/Y[0],le=(ae[8]+1)/ae[0],Pe=he*ne,ke=he*le,Re=se/(-ne+le),Ve=Re*-ne;Z.matrixWorld.decompose(G.position,G.quaternion,G.scale),G.translateX(Ve),G.translateZ(Re),G.matrixWorld.compose(G.position,G.quaternion,G.scale),G.matrixWorldInverse.copy(G.matrixWorld).invert();const Me=he+Re,Fe=Ce+Re,ze=Pe-Ve,Ee=ke+(se-Ve),W=ve*Ce/Fe*Me,L=xe*Ce/Fe*Me;G.projectionMatrix.makePerspective(ze,Ee,W,L,Me,Fe)}function F(G,Z){Z===null?G.matrixWorld.copy(G.matrix):G.matrixWorld.multiplyMatrices(Z.matrixWorld,G.matrix),G.matrixWorldInverse.copy(G.matrixWorld).invert()}this.updateCamera=function(G){if(i===null)return;B.near=P.near=C.near=G.near,B.far=P.far=C.far=G.far,(D!==B.near||k!==B.far)&&(i.updateRenderState({depthNear:B.near,depthFar:B.far}),D=B.near,k=B.far);const Z=G.parent,re=B.cameras;F(B,Z);for(let Y=0;Y<re.length;Y++)F(re[Y],Z);B.matrixWorld.decompose(B.position,B.quaternion,B.scale),G.matrix.copy(B.matrix),G.matrix.decompose(G.position,G.quaternion,G.scale);const se=G.children;for(let Y=0,ae=se.length;Y<ae;Y++)se[Y].updateMatrixWorld(!0);re.length===2?ie(B,C,P):B.projectionMatrix.copy(C.projectionMatrix)},this.getCamera=function(){return B},this.getFoveation=function(){if(!(h===null&&m===null))return l},this.setFoveation=function(G){l=G,h!==null&&(h.fixedFoveation=G),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=G)},this.getPlanes=function(){return b};let z=null;function j(G,Z){if(c=Z.getViewerPose(u||o),g=Z,c!==null){const re=c.views;m!==null&&(e.setRenderTargetFramebuffer(_,m.framebuffer),e.setRenderTarget(_));let se=!1;re.length!==B.cameras.length&&(B.cameras.length=0,se=!0);for(let Y=0;Y<re.length;Y++){const ae=re[Y];let he=null;if(m!==null)he=m.getViewport(ae);else{const ve=f.getViewSubImage(h,ae);he=ve.viewport,Y===0&&(e.setRenderTargetTextures(_,ve.colorTexture,h.ignoreDepthValues?void 0:ve.depthStencilTexture),e.setRenderTarget(_))}let Ce=M[Y];Ce===void 0&&(Ce=new An,Ce.layers.enable(Y),Ce.viewport=new $t,M[Y]=Ce),Ce.matrix.fromArray(ae.transform.matrix),Ce.projectionMatrix.fromArray(ae.projectionMatrix),Ce.viewport.set(he.x,he.y,he.width,he.height),Y===0&&B.matrix.copy(Ce.matrix),se===!0&&B.cameras.push(Ce)}}for(let re=0;re<x.length;re++){const se=w[re],Y=x[re];se!==null&&Y!==void 0&&Y.update(se,Z,u||o)}if(z&&z(G,Z),Z.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:Z.detectedPlanes});let re=null;for(const se of b)Z.detectedPlanes.has(se)||(re===null&&(re=[]),re.push(se));if(re!==null)for(const se of re)b.delete(se),E.delete(se),r.dispatchEvent({type:"planeremoved",data:se});for(const se of Z.detectedPlanes)if(!b.has(se))b.add(se),E.set(se,Z.lastChangedTime),r.dispatchEvent({type:"planeadded",data:se});else{const Y=E.get(se);se.lastChangedTime>Y&&(E.set(se,se.lastChangedTime),r.dispatchEvent({type:"planechanged",data:se}))}}g=null}const H=new YI;H.setAnimationLoop(j),this.setAnimationLoop=function(G){z=G},this.dispose=function(){}}}function zH(t,e){function n(v,y){y.color.getRGB(v.fogColor.value,XI(t)),y.isFog?(v.fogNear.value=y.near,v.fogFar.value=y.far):y.isFogExp2&&(v.fogDensity.value=y.density)}function r(v,y,_,x,w){y.isMeshBasicMaterial||y.isMeshLambertMaterial?i(v,y):y.isMeshToonMaterial?(i(v,y),c(v,y)):y.isMeshPhongMaterial?(i(v,y),u(v,y)):y.isMeshStandardMaterial?(i(v,y),f(v,y),y.isMeshPhysicalMaterial&&h(v,y,w)):y.isMeshMatcapMaterial?(i(v,y),m(v,y)):y.isMeshDepthMaterial?i(v,y):y.isMeshDistanceMaterial?(i(v,y),g(v,y)):y.isMeshNormalMaterial?i(v,y):y.isLineBasicMaterial?(s(v,y),y.isLineDashedMaterial&&o(v,y)):y.isPointsMaterial?a(v,y,_,x):y.isSpriteMaterial?l(v,y):y.isShadowMaterial?(v.color.value.copy(y.color),v.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function i(v,y){v.opacity.value=y.opacity,y.color&&v.diffuse.value.copy(y.color),y.emissive&&v.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(v.map.value=y.map),y.alphaMap&&(v.alphaMap.value=y.alphaMap),y.bumpMap&&(v.bumpMap.value=y.bumpMap,v.bumpScale.value=y.bumpScale,y.side===Hr&&(v.bumpScale.value*=-1)),y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap),y.normalMap&&(v.normalMap.value=y.normalMap,v.normalScale.value.copy(y.normalScale),y.side===Hr&&v.normalScale.value.negate()),y.specularMap&&(v.specularMap.value=y.specularMap),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);const _=e.get(y).envMap;if(_&&(v.envMap.value=_,v.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=y.reflectivity,v.ior.value=y.ior,v.refractionRatio.value=y.refractionRatio),y.lightMap){v.lightMap.value=y.lightMap;const b=t.physicallyCorrectLights!==!0?Math.PI:1;v.lightMapIntensity.value=y.lightMapIntensity*b}y.aoMap&&(v.aoMap.value=y.aoMap,v.aoMapIntensity.value=y.aoMapIntensity);let x;y.map?x=y.map:y.specularMap?x=y.specularMap:y.displacementMap?x=y.displacementMap:y.normalMap?x=y.normalMap:y.bumpMap?x=y.bumpMap:y.roughnessMap?x=y.roughnessMap:y.metalnessMap?x=y.metalnessMap:y.alphaMap?x=y.alphaMap:y.emissiveMap?x=y.emissiveMap:y.clearcoatMap?x=y.clearcoatMap:y.clearcoatNormalMap?x=y.clearcoatNormalMap:y.clearcoatRoughnessMap?x=y.clearcoatRoughnessMap:y.iridescenceMap?x=y.iridescenceMap:y.iridescenceThicknessMap?x=y.iridescenceThicknessMap:y.specularIntensityMap?x=y.specularIntensityMap:y.specularColorMap?x=y.specularColorMap:y.transmissionMap?x=y.transmissionMap:y.thicknessMap?x=y.thicknessMap:y.sheenColorMap?x=y.sheenColorMap:y.sheenRoughnessMap&&(x=y.sheenRoughnessMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),v.uvTransform.value.copy(x.matrix));let w;y.aoMap?w=y.aoMap:y.lightMap&&(w=y.lightMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),v.uv2Transform.value.copy(w.matrix))}function s(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity}function o(v,y){v.dashSize.value=y.dashSize,v.totalSize.value=y.dashSize+y.gapSize,v.scale.value=y.scale}function a(v,y,_,x){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.size.value=y.size*_,v.scale.value=x*.5,y.map&&(v.map.value=y.map),y.alphaMap&&(v.alphaMap.value=y.alphaMap),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);let w;y.map?w=y.map:y.alphaMap&&(w=y.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),v.uvTransform.value.copy(w.matrix))}function l(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.rotation.value=y.rotation,y.map&&(v.map.value=y.map),y.alphaMap&&(v.alphaMap.value=y.alphaMap),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);let _;y.map?_=y.map:y.alphaMap&&(_=y.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),v.uvTransform.value.copy(_.matrix))}function u(v,y){v.specular.value.copy(y.specular),v.shininess.value=Math.max(y.shininess,1e-4)}function c(v,y){y.gradientMap&&(v.gradientMap.value=y.gradientMap)}function f(v,y){v.roughness.value=y.roughness,v.metalness.value=y.metalness,y.roughnessMap&&(v.roughnessMap.value=y.roughnessMap),y.metalnessMap&&(v.metalnessMap.value=y.metalnessMap),e.get(y).envMap&&(v.envMapIntensity.value=y.envMapIntensity)}function h(v,y,_){v.ior.value=y.ior,y.sheen>0&&(v.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),v.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(v.sheenColorMap.value=y.sheenColorMap),y.sheenRoughnessMap&&(v.sheenRoughnessMap.value=y.sheenRoughnessMap)),y.clearcoat>0&&(v.clearcoat.value=y.clearcoat,v.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(v.clearcoatMap.value=y.clearcoatMap),y.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap),y.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),v.clearcoatNormalMap.value=y.clearcoatNormalMap,y.side===Hr&&v.clearcoatNormalScale.value.negate())),y.iridescence>0&&(v.iridescence.value=y.iridescence,v.iridescenceIOR.value=y.iridescenceIOR,v.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(v.iridescenceMap.value=y.iridescenceMap),y.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=y.iridescenceThicknessMap)),y.transmission>0&&(v.transmission.value=y.transmission,v.transmissionSamplerMap.value=_.texture,v.transmissionSamplerSize.value.set(_.width,_.height),y.transmissionMap&&(v.transmissionMap.value=y.transmissionMap),v.thickness.value=y.thickness,y.thicknessMap&&(v.thicknessMap.value=y.thicknessMap),v.attenuationDistance.value=y.attenuationDistance,v.attenuationColor.value.copy(y.attenuationColor)),v.specularIntensity.value=y.specularIntensity,v.specularColor.value.copy(y.specularColor),y.specularIntensityMap&&(v.specularIntensityMap.value=y.specularIntensityMap),y.specularColorMap&&(v.specularColorMap.value=y.specularColorMap)}function m(v,y){y.matcap&&(v.matcap.value=y.matcap)}function g(v,y){v.referencePosition.value.copy(y.referencePosition),v.nearDistance.value=y.nearDistance,v.farDistance.value=y.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function GH(t,e,n,r){let i={},s={},o=[];const a=n.isWebGL2?t.getParameter(35375):0;function l(x,w){const b=w.program;r.uniformBlockBinding(x,b)}function u(x,w){let b=i[x.id];b===void 0&&(g(x),b=c(x),i[x.id]=b,x.addEventListener("dispose",y));const E=w.program;r.updateUBOMapping(x,E);const C=e.render.frame;s[x.id]!==C&&(h(x),s[x.id]=C)}function c(x){const w=f();x.__bindingPointIndex=w;const b=t.createBuffer(),E=x.__size,C=x.usage;return t.bindBuffer(35345,b),t.bufferData(35345,E,C),t.bindBuffer(35345,null),t.bindBufferBase(35345,w,b),b}function f(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(x){const w=i[x.id],b=x.uniforms,E=x.__cache;t.bindBuffer(35345,w);for(let C=0,P=b.length;C<P;C++){const M=b[C];if(m(M,C,E)===!0){const B=M.__offset,D=Array.isArray(M.value)?M.value:[M.value];let k=0;for(let O=0;O<D.length;O++){const U=D[O],N=v(U);typeof U=="number"?(M.__data[0]=U,t.bufferSubData(35345,B+k,M.__data)):U.isMatrix3?(M.__data[0]=U.elements[0],M.__data[1]=U.elements[1],M.__data[2]=U.elements[2],M.__data[3]=U.elements[0],M.__data[4]=U.elements[3],M.__data[5]=U.elements[4],M.__data[6]=U.elements[5],M.__data[7]=U.elements[0],M.__data[8]=U.elements[6],M.__data[9]=U.elements[7],M.__data[10]=U.elements[8],M.__data[11]=U.elements[0]):(U.toArray(M.__data,k),k+=N.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,B,M.__data)}}t.bindBuffer(35345,null)}function m(x,w,b){const E=x.value;if(b[w]===void 0){if(typeof E=="number")b[w]=E;else{const C=Array.isArray(E)?E:[E],P=[];for(let M=0;M<C.length;M++)P.push(C[M].clone());b[w]=P}return!0}else if(typeof E=="number"){if(b[w]!==E)return b[w]=E,!0}else{const C=Array.isArray(b[w])?b[w]:[b[w]],P=Array.isArray(E)?E:[E];for(let M=0;M<C.length;M++){const B=C[M];if(B.equals(P[M])===!1)return B.copy(P[M]),!0}}return!1}function g(x){const w=x.uniforms;let b=0;const E=16;let C=0;for(let P=0,M=w.length;P<M;P++){const B=w[P],D={boundary:0,storage:0},k=Array.isArray(B.value)?B.value:[B.value];for(let O=0,U=k.length;O<U;O++){const N=k[O],$=v(N);D.boundary+=$.boundary,D.storage+=$.storage}if(B.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=b,P>0){C=b%E;const O=E-C;C!==0&&O-D.boundary<0&&(b+=E-C,B.__offset=b)}b+=D.storage}return C=b%E,C>0&&(b+=E-C),x.__size=b,x.__cache={},this}function v(x){const w={boundary:0,storage:0};return typeof x=="number"?(w.boundary=4,w.storage=4):x.isVector2?(w.boundary=8,w.storage=8):x.isVector3||x.isColor?(w.boundary=16,w.storage=12):x.isVector4?(w.boundary=16,w.storage=16):x.isMatrix3?(w.boundary=48,w.storage=48):x.isMatrix4?(w.boundary=64,w.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),w}function y(x){const w=x.target;w.removeEventListener("dispose",y);const b=o.indexOf(w.__bindingPointIndex);o.splice(b,1),t.deleteBuffer(i[w.id]),delete i[w.id],delete s[w.id]}function _(){for(const x in i)t.deleteBuffer(i[x]);o=[],i={},s={}}return{bind:l,update:u,dispose:_}}function HH(){const t=Kh("canvas");return t.style.display="block",t}function Vb(t={}){this.isWebGLRenderer=!0;const e=t.canvas!==void 0?t.canvas:HH(),n=t.context!==void 0?t.context:null,r=t.depth!==void 0?t.depth:!0,i=t.stencil!==void 0?t.stencil:!0,s=t.antialias!==void 0?t.antialias:!1,o=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,a=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,l=t.powerPreference!==void 0?t.powerPreference:"default",u=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let c;n!==null?c=n.getContextAttributes().alpha:c=t.alpha!==void 0?t.alpha:!1;let f=null,h=null;const m=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=mo,this.physicallyCorrectLights=!1,this.toneMapping=Us,this.toneMappingExposure=1;const v=this;let y=!1,_=0,x=0,w=null,b=-1,E=null;const C=new $t,P=new $t;let M=null,B=e.width,D=e.height,k=1,O=null,U=null;const N=new $t(0,0,B,D),$=new $t(0,0,B,D);let Q=!1;const ie=new Kv;let F=!1,z=!1,j=null;const H=new gt,G=new we,Z=new V,re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function se(){return w===null?k:1}let Y=n;function ae(J,de){for(let be=0;be<J.length;be++){const ce=J[be],Le=e.getContext(ce,de);if(Le!==null)return Le}return null}try{const J={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Lu}`),e.addEventListener("webglcontextlost",Se,!1),e.addEventListener("webglcontextrestored",Ae,!1),e.addEventListener("webglcontextcreationerror",Ge,!1),Y===null){const de=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&de.shift(),Y=ae(de,J),Y===null)throw ae(de)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Y.getShaderPrecisionFormat===void 0&&(Y.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(J){throw console.error("THREE.WebGLRenderer: "+J.message),J}let he,Ce,ve,xe,ne,le,Pe,ke,Re,Ve,Me,Fe,ze,Ee,W,L,q,fe,Be,Ie,Ne,Ue,_e,We;function K(){he=new i6(Y),Ce=new qG(Y,he,t),he.init(Ce),Ue=new tD(Y,he,Ce),ve=new FH(Y,he,Ce),xe=new a6,ne=new AH,le=new OH(Y,he,ve,ne,Ce,Ue,xe),Pe=new e6(v),ke=new r6(v),Re=new gz(Y,Ce),_e=new YG(Y,he,Re,Ce),Ve=new s6(Y,Re,xe,_e),Me=new f6(Y,Ve,Re,xe),Be=new c6(Y,Ce,le),L=new ZG(ne),Fe=new bH(v,Pe,ke,he,Ce,_e,L),ze=new zH(v,ne),Ee=new EH,W=new IH(he,Ce),fe=new KG(v,Pe,ke,ve,Me,c,o),q=new kH(v,Me,Ce),We=new GH(Y,xe,Ce,ve),Ie=new QG(Y,he,xe,Ce),Ne=new o6(Y,he,xe,Ce),xe.programs=Fe.programs,v.capabilities=Ce,v.extensions=he,v.properties=ne,v.renderLists=Ee,v.shadowMap=q,v.state=ve,v.info=xe}K();const pe=new NH(v,Y);this.xr=pe,this.getContext=function(){return Y},this.getContextAttributes=function(){return Y.getContextAttributes()},this.forceContextLoss=function(){const J=he.get("WEBGL_lose_context");J&&J.loseContext()},this.forceContextRestore=function(){const J=he.get("WEBGL_lose_context");J&&J.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(J){J!==void 0&&(k=J,this.setSize(B,D,!1))},this.getSize=function(J){return J.set(B,D)},this.setSize=function(J,de,be){if(pe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}B=J,D=de,e.width=Math.floor(J*k),e.height=Math.floor(de*k),be!==!1&&(e.style.width=J+"px",e.style.height=de+"px"),this.setViewport(0,0,J,de)},this.getDrawingBufferSize=function(J){return J.set(B*k,D*k).floor()},this.setDrawingBufferSize=function(J,de,be){B=J,D=de,k=be,e.width=Math.floor(J*be),e.height=Math.floor(de*be),this.setViewport(0,0,J,de)},this.getCurrentViewport=function(J){return J.copy(C)},this.getViewport=function(J){return J.copy(N)},this.setViewport=function(J,de,be,ce){J.isVector4?N.set(J.x,J.y,J.z,J.w):N.set(J,de,be,ce),ve.viewport(C.copy(N).multiplyScalar(k).floor())},this.getScissor=function(J){return J.copy($)},this.setScissor=function(J,de,be,ce){J.isVector4?$.set(J.x,J.y,J.z,J.w):$.set(J,de,be,ce),ve.scissor(P.copy($).multiplyScalar(k).floor())},this.getScissorTest=function(){return Q},this.setScissorTest=function(J){ve.setScissorTest(Q=J)},this.setOpaqueSort=function(J){O=J},this.setTransparentSort=function(J){U=J},this.getClearColor=function(J){return J.copy(fe.getClearColor())},this.setClearColor=function(){fe.setClearColor.apply(fe,arguments)},this.getClearAlpha=function(){return fe.getClearAlpha()},this.setClearAlpha=function(){fe.setClearAlpha.apply(fe,arguments)},this.clear=function(J=!0,de=!0,be=!0){let ce=0;J&&(ce|=16384),de&&(ce|=256),be&&(ce|=1024),Y.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Se,!1),e.removeEventListener("webglcontextrestored",Ae,!1),e.removeEventListener("webglcontextcreationerror",Ge,!1),Ee.dispose(),W.dispose(),ne.dispose(),Pe.dispose(),ke.dispose(),Me.dispose(),_e.dispose(),We.dispose(),Fe.dispose(),pe.dispose(),pe.removeEventListener("sessionstart",Ke),pe.removeEventListener("sessionend",nt),j&&(j.dispose(),j=null),Mt.stop()};function Se(J){J.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function Ae(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const J=xe.autoReset,de=q.enabled,be=q.autoUpdate,ce=q.needsUpdate,Le=q.type;K(),xe.autoReset=J,q.enabled=de,q.autoUpdate=be,q.needsUpdate=ce,q.type=Le}function Ge(J){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",J.statusMessage)}function et(J){const de=J.target;de.removeEventListener("dispose",et),mt(de)}function mt(J){te(J),ne.remove(J)}function te(J){const de=ne.get(J).programs;de!==void 0&&(de.forEach(function(be){Fe.releaseProgram(be)}),J.isShaderMaterial&&Fe.releaseShaderCache(J))}this.renderBufferDirect=function(J,de,be,ce,Le,rt){de===null&&(de=re);const ft=Le.isMesh&&Le.matrixWorld.determinant()<0,Et=gr(J,de,be,ce,Le);ve.setMaterial(ce,ft);let Ct=be.index,Rt=1;ce.wireframe===!0&&(Ct=Ve.getWireframeAttribute(be),Rt=2);const Pt=be.drawRange,kt=be.attributes.position;let mn=Pt.start*Rt,Xn=(Pt.start+Pt.count)*Rt;rt!==null&&(mn=Math.max(mn,rt.start*Rt),Xn=Math.min(Xn,(rt.start+rt.count)*Rt)),Ct!==null?(mn=Math.max(mn,0),Xn=Math.min(Xn,Ct.count)):kt!=null&&(mn=Math.max(mn,0),Xn=Math.min(Xn,kt.count));const Jr=Xn-mn;if(Jr<0||Jr===1/0)return;_e.setup(Le,ce,Et,be,Ct);let Ci,Je=Ie;if(Ct!==null&&(Ci=Re.get(Ct),Je=Ne,Je.setIndex(Ci)),Le.isMesh)ce.wireframe===!0?(ve.setLineWidth(ce.wireframeLinewidth*se()),Je.setMode(1)):Je.setMode(4);else if(Le.isLine){let vt=ce.linewidth;vt===void 0&&(vt=1),ve.setLineWidth(vt*se()),Le.isLineSegments?Je.setMode(1):Le.isLineLoop?Je.setMode(2):Je.setMode(3)}else Le.isPoints?Je.setMode(0):Le.isSprite&&Je.setMode(4);if(Le.isInstancedMesh)Je.renderInstances(mn,Jr,Le.count);else if(be.isInstancedBufferGeometry){const vt=be._maxInstanceCount!==void 0?be._maxInstanceCount:1/0,_o=Math.min(be.instanceCount,vt);Je.renderInstances(mn,Jr,_o)}else Je.render(mn,Jr)},this.compile=function(J,de){function be(ce,Le,rt){ce.transparent===!0&&ce.side===wi&&ce.forceSinglePass===!1?(ce.side=Hr,ce.needsUpdate=!0,Ot(ce,Le,rt),ce.side=Gs,ce.needsUpdate=!0,Ot(ce,Le,rt),ce.side=wi):Ot(ce,Le,rt)}h=W.get(J),h.init(),g.push(h),J.traverseVisible(function(ce){ce.isLight&&ce.layers.test(de.layers)&&(h.pushLight(ce),ce.castShadow&&h.pushShadow(ce))}),h.setupLights(v.physicallyCorrectLights),J.traverse(function(ce){const Le=ce.material;if(Le)if(Array.isArray(Le))for(let rt=0;rt<Le.length;rt++){const ft=Le[rt];be(ft,J,ce)}else be(Le,J,ce)}),g.pop(),h=null};let me=null;function Oe(J){me&&me(J)}function Ke(){Mt.stop()}function nt(){Mt.start()}const Mt=new YI;Mt.setAnimationLoop(Oe),typeof self<"u"&&Mt.setContext(self),this.setAnimationLoop=function(J){me=J,pe.setAnimationLoop(J),J===null?Mt.stop():Mt.start()},pe.addEventListener("sessionstart",Ke),pe.addEventListener("sessionend",nt),this.render=function(J,de){if(de!==void 0&&de.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),de.parent===null&&de.matrixWorldAutoUpdate===!0&&de.updateMatrixWorld(),pe.enabled===!0&&pe.isPresenting===!0&&(pe.cameraAutoUpdate===!0&&pe.updateCamera(de),de=pe.getCamera()),J.isScene===!0&&J.onBeforeRender(v,J,de,w),h=W.get(J,g.length),h.init(),g.push(h),H.multiplyMatrices(de.projectionMatrix,de.matrixWorldInverse),ie.setFromProjectionMatrix(H),z=this.localClippingEnabled,F=L.init(this.clippingPlanes,z),f=Ee.get(J,m.length),f.init(),m.push(f),Ht(J,de,0,v.sortObjects),f.finish(),v.sortObjects===!0&&f.sort(O,U),F===!0&&L.beginShadows();const be=h.state.shadowsArray;if(q.render(be,J,de),F===!0&&L.endShadows(),this.info.autoReset===!0&&this.info.reset(),fe.render(f,J),h.setupLights(v.physicallyCorrectLights),de.isArrayCamera){const ce=de.cameras;for(let Le=0,rt=ce.length;Le<rt;Le++){const ft=ce[Le];Qt(f,J,ft,ft.viewport)}}else Qt(f,J,de);w!==null&&(le.updateMultisampleRenderTarget(w),le.updateRenderTargetMipmap(w)),J.isScene===!0&&J.onAfterRender(v,J,de),_e.resetDefaultState(),b=-1,E=null,g.pop(),g.length>0?h=g[g.length-1]:h=null,m.pop(),m.length>0?f=m[m.length-1]:f=null};function Ht(J,de,be,ce){if(J.visible===!1)return;if(J.layers.test(de.layers)){if(J.isGroup)be=J.renderOrder;else if(J.isLOD)J.autoUpdate===!0&&J.update(de);else if(J.isLight)h.pushLight(J),J.castShadow&&h.pushShadow(J);else if(J.isSprite){if(!J.frustumCulled||ie.intersectsSprite(J)){ce&&Z.setFromMatrixPosition(J.matrixWorld).applyMatrix4(H);const ft=Me.update(J),Et=J.material;Et.visible&&f.push(J,ft,Et,be,Z.z,null)}}else if((J.isMesh||J.isLine||J.isPoints)&&(J.isSkinnedMesh&&J.skeleton.frame!==xe.render.frame&&(J.skeleton.update(),J.skeleton.frame=xe.render.frame),!J.frustumCulled||ie.intersectsObject(J))){ce&&Z.setFromMatrixPosition(J.matrixWorld).applyMatrix4(H);const ft=Me.update(J),Et=J.material;if(Array.isArray(Et)){const Ct=ft.groups;for(let Rt=0,Pt=Ct.length;Rt<Pt;Rt++){const kt=Ct[Rt],mn=Et[kt.materialIndex];mn&&mn.visible&&f.push(J,ft,mn,be,Z.z,kt)}}else Et.visible&&f.push(J,ft,Et,be,Z.z,null)}}const rt=J.children;for(let ft=0,Et=rt.length;ft<Et;ft++)Ht(rt[ft],de,be,ce)}function Qt(J,de,be,ce){const Le=J.opaque,rt=J.transmissive,ft=J.transparent;h.setupLightsView(be),F===!0&&L.setGlobalState(v.clippingPlanes,be),rt.length>0&&Jt(Le,de,be),ce&&ve.viewport(C.copy(ce)),Le.length>0&&Xt(Le,de,be),rt.length>0&&Xt(rt,de,be),ft.length>0&&Xt(ft,de,be),ve.buffers.depth.setTest(!0),ve.buffers.depth.setMask(!0),ve.buffers.color.setMask(!0),ve.setPolygonOffset(!1)}function Jt(J,de,be){const ce=Ce.isWebGL2;j===null&&(j=new hn(1,1,{generateMipmaps:!0,type:he.has("EXT_color_buffer_half_float")?Nr:Ei,minFilter:Hs,samples:ce&&s===!0?4:0})),v.getDrawingBufferSize(G),ce?j.setSize(G.x,G.y):j.setSize(iv(G.x),iv(G.y));const Le=v.getRenderTarget();v.setRenderTarget(j),v.clear();const rt=v.toneMapping;v.toneMapping=Us,Xt(J,de,be),v.toneMapping=rt,le.updateMultisampleRenderTarget(j),le.updateRenderTargetMipmap(j),v.setRenderTarget(Le)}function Xt(J,de,be){const ce=de.isScene===!0?de.overrideMaterial:null;for(let Le=0,rt=J.length;Le<rt;Le++){const ft=J[Le],Et=ft.object,Ct=ft.geometry,Rt=ce===null?ft.material:ce,Pt=ft.group;Et.layers.test(be.layers)&&Vt(Et,de,be,Ct,Rt,Pt)}}function Vt(J,de,be,ce,Le,rt){J.onBeforeRender(v,de,be,ce,Le,rt),J.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,J.matrixWorld),J.normalMatrix.getNormalMatrix(J.modelViewMatrix),Le.onBeforeRender(v,de,be,ce,J,rt),Le.transparent===!0&&Le.side===wi&&Le.forceSinglePass===!1?(Le.side=Hr,Le.needsUpdate=!0,v.renderBufferDirect(be,de,ce,Le,J,rt),Le.side=Gs,Le.needsUpdate=!0,v.renderBufferDirect(be,de,ce,Le,J,rt),Le.side=wi):v.renderBufferDirect(be,de,ce,Le,J,rt),J.onAfterRender(v,de,be,ce,Le,rt)}function Ot(J,de,be){de.isScene!==!0&&(de=re);const ce=ne.get(J),Le=h.state.lights,rt=h.state.shadowsArray,ft=Le.state.version,Et=Fe.getParameters(J,Le.state,rt,de,be),Ct=Fe.getProgramCacheKey(Et);let Rt=ce.programs;ce.environment=J.isMeshStandardMaterial?de.environment:null,ce.fog=de.fog,ce.envMap=(J.isMeshStandardMaterial?ke:Pe).get(J.envMap||ce.environment),Rt===void 0&&(J.addEventListener("dispose",et),Rt=new Map,ce.programs=Rt);let Pt=Rt.get(Ct);if(Pt!==void 0){if(ce.currentProgram===Pt&&ce.lightsStateVersion===ft)return Er(J,Et),Pt}else Et.uniforms=Fe.getUniforms(J),J.onBuild(be,Et,v),J.onBeforeCompile(Et,v),Pt=Fe.acquireProgram(Et,Ct),Rt.set(Ct,Pt),ce.uniforms=Et.uniforms;const kt=ce.uniforms;(!J.isShaderMaterial&&!J.isRawShaderMaterial||J.clipping===!0)&&(kt.clippingPlanes=L.uniform),Er(J,Et),ce.needsLights=Cn(J),ce.lightsStateVersion=ft,ce.needsLights&&(kt.ambientLightColor.value=Le.state.ambient,kt.lightProbe.value=Le.state.probe,kt.directionalLights.value=Le.state.directional,kt.directionalLightShadows.value=Le.state.directionalShadow,kt.spotLights.value=Le.state.spot,kt.spotLightShadows.value=Le.state.spotShadow,kt.rectAreaLights.value=Le.state.rectArea,kt.ltc_1.value=Le.state.rectAreaLTC1,kt.ltc_2.value=Le.state.rectAreaLTC2,kt.pointLights.value=Le.state.point,kt.pointLightShadows.value=Le.state.pointShadow,kt.hemisphereLights.value=Le.state.hemi,kt.directionalShadowMap.value=Le.state.directionalShadowMap,kt.directionalShadowMatrix.value=Le.state.directionalShadowMatrix,kt.spotShadowMap.value=Le.state.spotShadowMap,kt.spotLightMatrix.value=Le.state.spotLightMatrix,kt.spotLightMap.value=Le.state.spotLightMap,kt.pointShadowMap.value=Le.state.pointShadowMap,kt.pointShadowMatrix.value=Le.state.pointShadowMatrix);const mn=Pt.getUniforms(),Xn=A0.seqWithValue(mn.seq,kt);return ce.currentProgram=Pt,ce.uniformsList=Xn,Pt}function Er(J,de){const be=ne.get(J);be.outputEncoding=de.outputEncoding,be.instancing=de.instancing,be.skinning=de.skinning,be.morphTargets=de.morphTargets,be.morphNormals=de.morphNormals,be.morphColors=de.morphColors,be.morphTargetsCount=de.morphTargetsCount,be.numClippingPlanes=de.numClippingPlanes,be.numIntersection=de.numClipIntersection,be.vertexAlphas=de.vertexAlphas,be.vertexTangents=de.vertexTangents,be.toneMapping=de.toneMapping}function gr(J,de,be,ce,Le){de.isScene!==!0&&(de=re),le.resetTextureUnits();const rt=de.fog,ft=ce.isMeshStandardMaterial?de.environment:null,Et=w===null?v.outputEncoding:w.isXRRenderTarget===!0?w.texture.encoding:mo,Ct=(ce.isMeshStandardMaterial?ke:Pe).get(ce.envMap||ft),Rt=ce.vertexColors===!0&&!!be.attributes.color&&be.attributes.color.itemSize===4,Pt=!!ce.normalMap&&!!be.attributes.tangent,kt=!!be.morphAttributes.position,mn=!!be.morphAttributes.normal,Xn=!!be.morphAttributes.color,Jr=ce.toneMapped?v.toneMapping:Us,Ci=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,Je=Ci!==void 0?Ci.length:0,vt=ne.get(ce),_o=h.state.lights;if(F===!0&&(z===!0||J!==E)){const Wt=J===E&&ce.id===b;L.setState(ce,J,Wt)}let un=!1;ce.version===vt.__version?(vt.needsLights&&vt.lightsStateVersion!==_o.state.version||vt.outputEncoding!==Et||Le.isInstancedMesh&&vt.instancing===!1||!Le.isInstancedMesh&&vt.instancing===!0||Le.isSkinnedMesh&&vt.skinning===!1||!Le.isSkinnedMesh&&vt.skinning===!0||vt.envMap!==Ct||ce.fog===!0&&vt.fog!==rt||vt.numClippingPlanes!==void 0&&(vt.numClippingPlanes!==L.numPlanes||vt.numIntersection!==L.numIntersection)||vt.vertexAlphas!==Rt||vt.vertexTangents!==Pt||vt.morphTargets!==kt||vt.morphNormals!==mn||vt.morphColors!==Xn||vt.toneMapping!==Jr||Ce.isWebGL2===!0&&vt.morphTargetsCount!==Je)&&(un=!0):(un=!0,vt.__version=ce.version);let Ki=vt.currentProgram;un===!0&&(Ki=Ot(ce,de,Le));let Ks=!1,vr=!1,yr=!1;const xt=Ki.getUniforms(),It=vt.uniforms;if(ve.useProgram(Ki.program)&&(Ks=!0,vr=!0,yr=!0),ce.id!==b&&(b=ce.id,vr=!0),Ks||E!==J){if(xt.setValue(Y,"projectionMatrix",J.projectionMatrix),Ce.logarithmicDepthBuffer&&xt.setValue(Y,"logDepthBufFC",2/(Math.log(J.far+1)/Math.LN2)),E!==J&&(E=J,vr=!0,yr=!0),ce.isShaderMaterial||ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshStandardMaterial||ce.envMap){const Wt=xt.map.cameraPosition;Wt!==void 0&&Wt.setValue(Y,Z.setFromMatrixPosition(J.matrixWorld))}(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&xt.setValue(Y,"isOrthographic",J.isOrthographicCamera===!0),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial||ce.isShadowMaterial||Le.isSkinnedMesh)&&xt.setValue(Y,"viewMatrix",J.matrixWorldInverse)}if(Le.isSkinnedMesh){xt.setOptional(Y,Le,"bindMatrix"),xt.setOptional(Y,Le,"bindMatrixInverse");const Wt=Le.skeleton;Wt&&(Ce.floatVertexTextures?(Wt.boneTexture===null&&Wt.computeBoneTexture(),xt.setValue(Y,"boneTexture",Wt.boneTexture,le),xt.setValue(Y,"boneTextureSize",Wt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Xr=be.morphAttributes;if((Xr.position!==void 0||Xr.normal!==void 0||Xr.color!==void 0&&Ce.isWebGL2===!0)&&Be.update(Le,be,ce,Ki),(vr||vt.receiveShadow!==Le.receiveShadow)&&(vt.receiveShadow=Le.receiveShadow,xt.setValue(Y,"receiveShadow",Le.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(It.envMap.value=Ct,It.flipEnvMap.value=Ct.isCubeTexture&&Ct.isRenderTargetTexture===!1?-1:1),vr&&(xt.setValue(Y,"toneMappingExposure",v.toneMappingExposure),vt.needsLights&&qt(It,yr),rt&&ce.fog===!0&&ze.refreshFogUniforms(It,rt),ze.refreshMaterialUniforms(It,ce,k,D,j),A0.upload(Y,vt.uniformsList,It,le)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(A0.upload(Y,vt.uniformsList,It,le),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&xt.setValue(Y,"center",Le.center),xt.setValue(Y,"modelViewMatrix",Le.modelViewMatrix),xt.setValue(Y,"normalMatrix",Le.normalMatrix),xt.setValue(Y,"modelMatrix",Le.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const Wt=ce.uniformsGroups;for(let Hn=0,Kr=Wt.length;Hn<Kr;Hn++)if(Ce.isWebGL2){const Ti=Wt[Hn];We.update(Ti,Ki),We.bind(Ti,Ki)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ki}function qt(J,de){J.ambientLightColor.needsUpdate=de,J.lightProbe.needsUpdate=de,J.directionalLights.needsUpdate=de,J.directionalLightShadows.needsUpdate=de,J.pointLights.needsUpdate=de,J.pointLightShadows.needsUpdate=de,J.spotLights.needsUpdate=de,J.spotLightShadows.needsUpdate=de,J.rectAreaLights.needsUpdate=de,J.hemisphereLights.needsUpdate=de}function Cn(J){return J.isMeshLambertMaterial||J.isMeshToonMaterial||J.isMeshPhongMaterial||J.isMeshStandardMaterial||J.isShadowMaterial||J.isShaderMaterial&&J.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(J,de,be){ne.get(J.texture).__webglTexture=de,ne.get(J.depthTexture).__webglTexture=be;const ce=ne.get(J);ce.__hasExternalTextures=!0,ce.__hasExternalTextures&&(ce.__autoAllocateDepthBuffer=be===void 0,ce.__autoAllocateDepthBuffer||he.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ce.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(J,de){const be=ne.get(J);be.__webglFramebuffer=de,be.__useDefaultFramebuffer=de===void 0},this.setRenderTarget=function(J,de=0,be=0){w=J,_=de,x=be;let ce=!0,Le=null,rt=!1,ft=!1;if(J){const Ct=ne.get(J);Ct.__useDefaultFramebuffer!==void 0?(ve.bindFramebuffer(36160,null),ce=!1):Ct.__webglFramebuffer===void 0?le.setupRenderTarget(J):Ct.__hasExternalTextures&&le.rebindTextures(J,ne.get(J.texture).__webglTexture,ne.get(J.depthTexture).__webglTexture);const Rt=J.texture;(Rt.isData3DTexture||Rt.isDataArrayTexture||Rt.isCompressedArrayTexture)&&(ft=!0);const Pt=ne.get(J).__webglFramebuffer;J.isWebGLCubeRenderTarget?(Le=Pt[de],rt=!0):Ce.isWebGL2&&J.samples>0&&le.useMultisampledRTT(J)===!1?Le=ne.get(J).__webglMultisampledFramebuffer:Le=Pt,C.copy(J.viewport),P.copy(J.scissor),M=J.scissorTest}else C.copy(N).multiplyScalar(k).floor(),P.copy($).multiplyScalar(k).floor(),M=Q;if(ve.bindFramebuffer(36160,Le)&&Ce.drawBuffers&&ce&&ve.drawBuffers(J,Le),ve.viewport(C),ve.scissor(P),ve.setScissorTest(M),rt){const Ct=ne.get(J.texture);Y.framebufferTexture2D(36160,36064,34069+de,Ct.__webglTexture,be)}else if(ft){const Ct=ne.get(J.texture),Rt=de||0;Y.framebufferTextureLayer(36160,36064,Ct.__webglTexture,be||0,Rt)}b=-1},this.readRenderTargetPixels=function(J,de,be,ce,Le,rt,ft){if(!(J&&J.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Et=ne.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&ft!==void 0&&(Et=Et[ft]),Et){ve.bindFramebuffer(36160,Et);try{const Ct=J.texture,Rt=Ct.format,Pt=Ct.type;if(Rt!==Ur&&Ue.convert(Rt)!==Y.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const kt=Pt===Nr&&(he.has("EXT_color_buffer_half_float")||Ce.isWebGL2&&he.has("EXT_color_buffer_float"));if(Pt!==Ei&&Ue.convert(Pt)!==Y.getParameter(35738)&&!(Pt===Ni&&(Ce.isWebGL2||he.has("OES_texture_float")||he.has("WEBGL_color_buffer_float")))&&!kt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}de>=0&&de<=J.width-ce&&be>=0&&be<=J.height-Le&&Y.readPixels(de,be,ce,Le,Ue.convert(Rt),Ue.convert(Pt),rt)}finally{const Ct=w!==null?ne.get(w).__webglFramebuffer:null;ve.bindFramebuffer(36160,Ct)}}},this.copyFramebufferToTexture=function(J,de,be=0){const ce=Math.pow(2,-be),Le=Math.floor(de.image.width*ce),rt=Math.floor(de.image.height*ce);le.setTexture2D(de,0),Y.copyTexSubImage2D(3553,be,0,0,J.x,J.y,Le,rt),ve.unbindTexture()},this.copyTextureToTexture=function(J,de,be,ce=0){const Le=de.image.width,rt=de.image.height,ft=Ue.convert(be.format),Et=Ue.convert(be.type);le.setTexture2D(be,0),Y.pixelStorei(37440,be.flipY),Y.pixelStorei(37441,be.premultiplyAlpha),Y.pixelStorei(3317,be.unpackAlignment),de.isDataTexture?Y.texSubImage2D(3553,ce,J.x,J.y,Le,rt,ft,Et,de.image.data):de.isCompressedTexture?Y.compressedTexSubImage2D(3553,ce,J.x,J.y,de.mipmaps[0].width,de.mipmaps[0].height,ft,de.mipmaps[0].data):Y.texSubImage2D(3553,ce,J.x,J.y,ft,Et,de.image),ce===0&&be.generateMipmaps&&Y.generateMipmap(3553),ve.unbindTexture()},this.copyTextureToTexture3D=function(J,de,be,ce,Le=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const rt=J.max.x-J.min.x+1,ft=J.max.y-J.min.y+1,Et=J.max.z-J.min.z+1,Ct=Ue.convert(ce.format),Rt=Ue.convert(ce.type);let Pt;if(ce.isData3DTexture)le.setTexture3D(ce,0),Pt=32879;else if(ce.isDataArrayTexture)le.setTexture2DArray(ce,0),Pt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Y.pixelStorei(37440,ce.flipY),Y.pixelStorei(37441,ce.premultiplyAlpha),Y.pixelStorei(3317,ce.unpackAlignment);const kt=Y.getParameter(3314),mn=Y.getParameter(32878),Xn=Y.getParameter(3316),Jr=Y.getParameter(3315),Ci=Y.getParameter(32877),Je=be.isCompressedTexture?be.mipmaps[0]:be.image;Y.pixelStorei(3314,Je.width),Y.pixelStorei(32878,Je.height),Y.pixelStorei(3316,J.min.x),Y.pixelStorei(3315,J.min.y),Y.pixelStorei(32877,J.min.z),be.isDataTexture||be.isData3DTexture?Y.texSubImage3D(Pt,Le,de.x,de.y,de.z,rt,ft,Et,Ct,Rt,Je.data):be.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Y.compressedTexSubImage3D(Pt,Le,de.x,de.y,de.z,rt,ft,Et,Ct,Je.data)):Y.texSubImage3D(Pt,Le,de.x,de.y,de.z,rt,ft,Et,Ct,Rt,Je),Y.pixelStorei(3314,kt),Y.pixelStorei(32878,mn),Y.pixelStorei(3316,Xn),Y.pixelStorei(3315,Jr),Y.pixelStorei(32877,Ci),Le===0&&ce.generateMipmaps&&Y.generateMipmap(Pt),ve.unbindTexture()},this.initTexture=function(J){J.isCubeTexture?le.setTextureCube(J,0):J.isData3DTexture?le.setTexture3D(J,0):J.isDataArrayTexture||J.isCompressedArrayTexture?le.setTexture2DArray(J,0):le.setTexture2D(J,0),ve.unbindTexture()},this.resetState=function(){_=0,x=0,w=null,ve.reset(),_e.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class rD extends Vb{}rD.prototype.isWebGL1Renderer=!0;class Zv{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new $e(e),this.density=n}clone(){return new Zv(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class ey{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new $e(e),this.near=n,this.far=r}clone(){return new ey(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let Au=class extends Gt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}};class yp{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Jh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Gi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Gi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Gi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ei=new V;class il{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)ei.fromBufferAttribute(this,n),ei.applyMatrix4(e),this.setXYZ(n,ei.x,ei.y,ei.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)ei.fromBufferAttribute(this,n),ei.applyNormalMatrix(e),this.setXYZ(n,ei.x,ei.y,ei.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)ei.fromBufferAttribute(this,n),ei.transformDirection(e),this.setXYZ(n,ei.x,ei.y,ei.z);return this}setX(e,n){return this.normalized&&(n=dn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=dn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=dn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=dn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Jo(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Jo(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Jo(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Jo(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=dn(n,this.array),r=dn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=dn(n,this.array),r=dn(r,this.array),i=dn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=dn(n,this.array),r=dn(r,this.array),i=dn(i,this.array),s=dn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new Ut(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new il(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Wb extends zn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let _c;const Ld=new V,wc=new V,Sc=new V,bc=new we,kd=new we,iD=new gt,xg=new V,Fd=new V,_g=new V,yC=new we,fx=new we,xC=new we;class sD extends Gt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",_c===void 0){_c=new wt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new yp(n,5);_c.setIndex([0,1,2,0,2,3]),_c.setAttribute("position",new il(r,3,0,!1)),_c.setAttribute("uv",new il(r,2,3,!1))}this.geometry=_c,this.material=e!==void 0?e:new Wb,this.center=new we(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),wc.setFromMatrixScale(this.matrixWorld),iD.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Sc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&wc.multiplyScalar(-Sc.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;wg(xg.set(-.5,-.5,0),Sc,o,wc,i,s),wg(Fd.set(.5,-.5,0),Sc,o,wc,i,s),wg(_g.set(.5,.5,0),Sc,o,wc,i,s),yC.set(0,0),fx.set(1,0),xC.set(1,1);let a=e.ray.intersectTriangle(xg,Fd,_g,!1,Ld);if(a===null&&(wg(Fd.set(-.5,.5,0),Sc,o,wc,i,s),fx.set(0,1),a=e.ray.intersectTriangle(xg,_g,Fd,!1,Ld),a===null))return;const l=e.ray.origin.distanceTo(Ld);l<e.near||l>e.far||n.push({distance:l,point:Ld.clone(),uv:ds.getUV(Ld,xg,Fd,_g,yC,fx,xC,new we),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function wg(t,e,n,r,i,s){bc.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(kd.x=s*bc.x-i*bc.y,kd.y=i*bc.x+s*bc.y):kd.copy(bc),t.copy(e),t.x+=kd.x,t.y+=kd.y,t.applyMatrix4(iD)}const Sg=new V,_C=new V;class oD extends Gt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){Sg.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Sg);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Sg.setFromMatrixPosition(e.matrixWorld),_C.setFromMatrixPosition(this.matrixWorld);const r=Sg.distanceTo(_C)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const wC=new V,SC=new $t,bC=new $t,VH=new V,AC=new gt;class jb extends Mn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new gt,this.bindMatrixInverse=new gt}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new $t,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,n){const r=this.skeleton,i=this.geometry;SC.fromBufferAttribute(i.attributes.skinIndex,e),bC.fromBufferAttribute(i.attributes.skinWeight,e),wC.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=bC.getComponent(s);if(o!==0){const a=SC.getComponent(s);AC.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(VH.copy(wC).applyMatrix4(AC),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class ty extends Gt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class of extends an{constructor(e=null,n=1,r=1,i,s,o,a,l,u=Sn,c=Sn,f,h){super(null,o,a,l,u,c,i,s,f,h),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const MC=new gt,WH=new gt;class xp{constructor(e=[],n=[]){this.uuid=Gi(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new gt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new gt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:WH;MC.multiplyMatrices(a,n[s]),MC.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new xp(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=jI(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new of(n,e,e,Ur,Ni);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new ty),this.bones.push(o),this.boneInverses.push(new gt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Mu extends Ut{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const EC=new gt,CC=new gt,bg=[],jH=new gt,Od=new Mn;class $b extends Mn{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Mu(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1;for(let i=0;i<r;i++)this.setMatrixAt(i,jH)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(Od.geometry=this.geometry,Od.material=this.material,Od.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,EC),CC.multiplyMatrices(r,EC),Od.matrixWorld=CC,Od.raycast(e,bg);for(let o=0,a=bg.length;o<a;o++){const l=bg[o];l.instanceId=s,l.object=this,n.push(l)}bg.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Mu(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Wr extends zn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new $e(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const TC=new V,RC=new V,PC=new gt,dx=new gp,Ag=new oa;class na extends Gt{constructor(e=new wt,n=new Wr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)TC.fromBufferAttribute(n,i-1),RC.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=TC.distanceTo(RC);e.setAttribute("lineDistance",new at(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Ag.copy(r.boundingSphere),Ag.applyMatrix4(i),Ag.radius+=s,e.ray.intersectsSphere(Ag)===!1)return;PC.copy(i).invert(),dx.copy(e.ray).applyMatrix4(PC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new V,c=new V,f=new V,h=new V,m=this.isLineSegments?2:1,g=r.index,y=r.attributes.position;if(g!==null){const _=Math.max(0,o.start),x=Math.min(g.count,o.start+o.count);for(let w=_,b=x-1;w<b;w+=m){const E=g.getX(w),C=g.getX(w+1);if(u.fromBufferAttribute(y,E),c.fromBufferAttribute(y,C),dx.distanceSqToSegment(u,c,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(h);M<e.near||M>e.far||n.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,o.start),x=Math.min(y.count,o.start+o.count);for(let w=_,b=x-1;w<b;w+=m){if(u.fromBufferAttribute(y,w),c.fromBufferAttribute(y,w+1),dx.distanceSqToSegment(u,c,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(h);C<e.near||C>e.far||n.push({distance:C,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const BC=new V,IC=new V;class js extends na{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)BC.fromBufferAttribute(n,i),IC.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+BC.distanceTo(IC);e.setAttribute("lineDistance",new at(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Jb extends na{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class ny extends zn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const DC=new gt,Dw=new gp,Mg=new oa,Eg=new V;class Xb extends Gt{constructor(e=new wt,n=new ny){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Mg.copy(r.boundingSphere),Mg.applyMatrix4(i),Mg.radius+=s,e.ray.intersectsSphere(Mg)===!1)return;DC.copy(i).invert(),Dw.copy(e.ray).applyMatrix4(DC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,f=r.attributes.position;if(u!==null){const h=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let g=h,v=m;g<v;g++){const y=u.getX(g);Eg.fromBufferAttribute(f,y),LC(Eg,y,l,i,e,n,this)}}else{const h=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let g=h,v=m;g<v;g++)Eg.fromBufferAttribute(f,g),LC(Eg,g,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function LC(t,e,n,r,i,s,o){const a=Dw.distanceSqToPoint(t);if(a<n){const l=new V;Dw.closestPointToPoint(t,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class $H extends an{constructor(e,n,r,i,s,o,a,l,u){super(e,n,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Kt,this.magFilter=s!==void 0?s:Kt,this.generateMipmaps=!1;const c=this;function f(){c.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class JH extends an{constructor(e,n,r){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=Sn,this.minFilter=Sn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Kb extends an{constructor(e,n,r,i,s,o,a,l,u,c,f,h){super(null,o,a,l,u,c,i,s,f,h),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class XH extends Kb{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Sr}}class KH extends an{constructor(e,n,r,i,s,o,a,l,u){super(e,n,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class $s{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],h=r[i+1]-c,m=(o-c)/h;return(i+m)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new we:new V);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new V,i=[],s=[],o=[],a=new V,l=new gt;for(let m=0;m<=e;m++){const g=m/e;i[m]=this.getTangentAt(g,new V)}s[0]=new V,o[0]=new V;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),f=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),h<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Jn(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(i[m],s[m])}if(n===!0){let m=Math.acos(Jn(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],m*g)),o[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ry extends $s{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const r=n||new we,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,m=u-this.aY;l=h*c-m*f+this.aX,u=h*f+m*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class aD extends ry{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Yb(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,f){let h=(o-s)/u-(a-s)/(u+c)+(a-o)/c,m=(a-o)/c-(l-o)/(c+f)+(l-a)/f;h*=c,m*=c,i(o,a,h,m)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const Cg=new V,hx=new Yb,px=new Yb,mx=new Yb;class lD extends $s{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new V){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%s]:(Cg.subVectors(i[0],i[1]).add(i[0]),u=Cg);const f=i[a%s],h=i[(a+1)%s];if(this.closed||a+2<s?c=i[(a+2)%s]:(Cg.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=Cg),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(f),m),v=Math.pow(f.distanceToSquared(h),m),y=Math.pow(h.distanceToSquared(c),m);v<1e-4&&(v=1),g<1e-4&&(g=v),y<1e-4&&(y=v),hx.initNonuniformCatmullRom(u.x,f.x,h.x,c.x,g,v,y),px.initNonuniformCatmullRom(u.y,f.y,h.y,c.y,g,v,y),mx.initNonuniformCatmullRom(u.z,f.z,h.z,c.z,g,v,y)}else this.curveType==="catmullrom"&&(hx.initCatmullRom(u.x,f.x,h.x,c.x,this.tension),px.initCatmullRom(u.y,f.y,h.y,c.y,this.tension),mx.initCatmullRom(u.z,f.z,h.z,c.z,this.tension));return r.set(hx.calc(l),px.calc(l),mx.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new V().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function kC(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function YH(t,e){const n=1-t;return n*n*e}function QH(t,e){return 2*(1-t)*t*e}function qH(t,e){return t*t*e}function gh(t,e,n,r){return YH(t,e)+QH(t,n)+qH(t,r)}function ZH(t,e){const n=1-t;return n*n*n*e}function e9(t,e){const n=1-t;return 3*n*n*t*e}function t9(t,e){return 3*(1-t)*t*t*e}function n9(t,e){return t*t*t*e}function vh(t,e,n,r,i){return ZH(t,e)+e9(t,n)+t9(t,r)+n9(t,i)}class Qb extends $s{constructor(e=new we,n=new we,r=new we,i=new we){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new we){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(vh(e,i.x,s.x,o.x,a.x),vh(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class uD extends $s{constructor(e=new V,n=new V,r=new V,i=new V){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new V){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(vh(e,i.x,s.x,o.x,a.x),vh(e,i.y,s.y,o.y,a.y),vh(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class iy extends $s{constructor(e=new we,n=new we){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new we){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n){const r=n||new we;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cD extends $s{constructor(e=new V,n=new V){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new V){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qb extends $s{constructor(e=new we,n=new we,r=new we){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new we){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(gh(e,i.x,s.x,o.x),gh(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Zb extends $s{constructor(e=new V,n=new V,r=new V){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new V){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(gh(e,i.x,s.x,o.x),gh(e,i.y,s.y,o.y),gh(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eA extends $s{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new we){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(kC(a,l.x,u.x,c.x,f.x),kC(a,l.y,u.y,c.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new we().fromArray(i))}return this}}var tA=Object.freeze({__proto__:null,ArcCurve:aD,CatmullRomCurve3:lD,CubicBezierCurve:Qb,CubicBezierCurve3:uD,EllipseCurve:ry,LineCurve:iy,LineCurve3:cD,QuadraticBezierCurve:qb,QuadraticBezierCurve3:Zb,SplineCurve:eA});class fD extends $s{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new iy(n,e))}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(n.push(c),r=c)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new tA[i.type]().fromJSON(i))}return this}}class Yh extends fD{constructor(e){super(),this.type="Path",this.currentPoint=new we,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new iy(this.currentPoint.clone(),new we(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new qb(this.currentPoint.clone(),new we(e,n),new we(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new Qb(this.currentPoint.clone(),new we(e,n),new we(r,i),new we(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new eA(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,n+c,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const u=new ry(e,n,r,i,s,o,a,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Uf extends wt{constructor(e=[new we(0,-.5),new we(.5,0),new we(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Jn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/n,f=new V,h=new we,m=new V,g=new V,v=new V;let y=0,_=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:y=e[x+1].x-e[x].x,_=e[x+1].y-e[x].y,m.x=_*1,m.y=-y,m.z=_*0,v.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:y=e[x+1].x-e[x].x,_=e[x+1].y-e[x].y,m.x=_*1,m.y=-y,m.z=_*0,g.copy(m),m.x+=v.x,m.y+=v.y,m.z+=v.z,m.normalize(),l.push(m.x,m.y,m.z),v.copy(g)}for(let x=0;x<=n;x++){const w=r+x*c*i,b=Math.sin(w),E=Math.cos(w);for(let C=0;C<=e.length-1;C++){f.x=e[C].x*b,f.y=e[C].y,f.z=e[C].x*E,o.push(f.x,f.y,f.z),h.x=x/n,h.y=C/(e.length-1),a.push(h.x,h.y);const P=l[3*C+0]*b,M=l[3*C+1],B=l[3*C+0]*E;u.push(P,M,B)}}for(let x=0;x<n;x++)for(let w=0;w<e.length-1;w++){const b=w+x*e.length,E=b,C=b+e.length,P=b+e.length+1,M=b+1;s.push(E,C,M),s.push(P,M,C)}this.setIndex(s),this.setAttribute("position",new at(o,3)),this.setAttribute("uv",new at(a,2)),this.setAttribute("normal",new at(u,3))}static fromJSON(e){return new Uf(e.points,e.segments,e.phiStart,e.phiLength)}}class _p extends Uf{constructor(e=1,n=1,r=4,i=8){const s=new Yh;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new _p(e.radius,e.length,e.capSegments,e.radialSegments)}}class wp extends wt{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],u=new V,c=new we;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=n;f++,h+=3){const m=r+f/n*i;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[h]/e+1)/2,c.y=(o[h+1]/e+1)/2,l.push(c.x,c.y)}for(let f=1;f<=n;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new at(o,3)),this.setAttribute("normal",new at(a,3)),this.setAttribute("uv",new at(l,2))}static fromJSON(e){return new wp(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ku extends wt{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const c=[],f=[],h=[],m=[];let g=0;const v=[],y=r/2;let _=0;x(),o===!1&&(e>0&&w(!0),n>0&&w(!1)),this.setIndex(c),this.setAttribute("position",new at(f,3)),this.setAttribute("normal",new at(h,3)),this.setAttribute("uv",new at(m,2));function x(){const b=new V,E=new V;let C=0;const P=(n-e)/r;for(let M=0;M<=s;M++){const B=[],D=M/s,k=D*(n-e)+e;for(let O=0;O<=i;O++){const U=O/i,N=U*l+a,$=Math.sin(N),Q=Math.cos(N);E.x=k*$,E.y=-D*r+y,E.z=k*Q,f.push(E.x,E.y,E.z),b.set($,P,Q).normalize(),h.push(b.x,b.y,b.z),m.push(U,1-D),B.push(g++)}v.push(B)}for(let M=0;M<i;M++)for(let B=0;B<s;B++){const D=v[B][M],k=v[B+1][M],O=v[B+1][M+1],U=v[B][M+1];c.push(D,k,U),c.push(k,O,U),C+=6}u.addGroup(_,C,0),_+=C}function w(b){const E=g,C=new we,P=new V;let M=0;const B=b===!0?e:n,D=b===!0?1:-1;for(let O=1;O<=i;O++)f.push(0,y*D,0),h.push(0,D,0),m.push(.5,.5),g++;const k=g;for(let O=0;O<=i;O++){const N=O/i*l+a,$=Math.cos(N),Q=Math.sin(N);P.x=B*Q,P.y=y*D,P.z=B*$,f.push(P.x,P.y,P.z),h.push(0,D,0),C.x=$*.5+.5,C.y=Q*.5*D+.5,m.push(C.x,C.y),g++}for(let O=0;O<i;O++){const U=E+O,N=k+O;b===!0?c.push(N,N+1,U):c.push(N+1,N,U),M+=3}u.addGroup(_,M,b===!0?1:2),_+=M}}static fromJSON(e){return new ku(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Sp extends ku{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Sp(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class aa extends wt{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),u(r),c(),this.setAttribute("position",new at(s,3)),this.setAttribute("normal",new at(s.slice(),3)),this.setAttribute("uv",new at(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const w=new V,b=new V,E=new V;for(let C=0;C<n.length;C+=3)m(n[C+0],w),m(n[C+1],b),m(n[C+2],E),l(w,b,E,x)}function l(x,w,b,E){const C=E+1,P=[];for(let M=0;M<=C;M++){P[M]=[];const B=x.clone().lerp(b,M/C),D=w.clone().lerp(b,M/C),k=C-M;for(let O=0;O<=k;O++)O===0&&M===C?P[M][O]=B:P[M][O]=B.clone().lerp(D,O/k)}for(let M=0;M<C;M++)for(let B=0;B<2*(C-M)-1;B++){const D=Math.floor(B/2);B%2===0?(h(P[M][D+1]),h(P[M+1][D]),h(P[M][D])):(h(P[M][D+1]),h(P[M+1][D+1]),h(P[M+1][D]))}}function u(x){const w=new V;for(let b=0;b<s.length;b+=3)w.x=s[b+0],w.y=s[b+1],w.z=s[b+2],w.normalize().multiplyScalar(x),s[b+0]=w.x,s[b+1]=w.y,s[b+2]=w.z}function c(){const x=new V;for(let w=0;w<s.length;w+=3){x.x=s[w+0],x.y=s[w+1],x.z=s[w+2];const b=y(x)/2/Math.PI+.5,E=_(x)/Math.PI+.5;o.push(b,1-E)}g(),f()}function f(){for(let x=0;x<o.length;x+=6){const w=o[x+0],b=o[x+2],E=o[x+4],C=Math.max(w,b,E),P=Math.min(w,b,E);C>.9&&P<.1&&(w<.2&&(o[x+0]+=1),b<.2&&(o[x+2]+=1),E<.2&&(o[x+4]+=1))}}function h(x){s.push(x.x,x.y,x.z)}function m(x,w){const b=x*3;w.x=e[b+0],w.y=e[b+1],w.z=e[b+2]}function g(){const x=new V,w=new V,b=new V,E=new V,C=new we,P=new we,M=new we;for(let B=0,D=0;B<s.length;B+=9,D+=6){x.set(s[B+0],s[B+1],s[B+2]),w.set(s[B+3],s[B+4],s[B+5]),b.set(s[B+6],s[B+7],s[B+8]),C.set(o[D+0],o[D+1]),P.set(o[D+2],o[D+3]),M.set(o[D+4],o[D+5]),E.copy(x).add(w).add(b).divideScalar(3);const k=y(E);v(C,D+0,x,k),v(P,D+2,w,k),v(M,D+4,b,k)}}function v(x,w,b,E){E<0&&x.x===1&&(o[w]=x.x-1),b.x===0&&b.z===0&&(o[w]=E/2/Math.PI+.5)}function y(x){return Math.atan2(x.z,-x.x)}function _(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}static fromJSON(e){return new aa(e.vertices,e.indices,e.radius,e.details)}}class bp extends aa{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new bp(e.radius,e.detail)}}const Tg=new V,Rg=new V,gx=new V,Pg=new ds;class dD extends wt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(uu*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],f=new Array(3),h={},m=[];for(let g=0;g<l;g+=3){o?(u[0]=o.getX(g),u[1]=o.getX(g+1),u[2]=o.getX(g+2)):(u[0]=g,u[1]=g+1,u[2]=g+2);const{a:v,b:y,c:_}=Pg;if(v.fromBufferAttribute(a,u[0]),y.fromBufferAttribute(a,u[1]),_.fromBufferAttribute(a,u[2]),Pg.getNormal(gx),f[0]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,f[1]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,f[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let x=0;x<3;x++){const w=(x+1)%3,b=f[x],E=f[w],C=Pg[c[x]],P=Pg[c[w]],M=`${b}_${E}`,B=`${E}_${b}`;B in h&&h[B]?(gx.dot(h[B].normal)<=s&&(m.push(C.x,C.y,C.z),m.push(P.x,P.y,P.z)),h[B]=null):M in h||(h[M]={index0:u[x],index1:u[w],normal:gx.clone()})}}for(const g in h)if(h[g]){const{index0:v,index1:y}=h[g];Tg.fromBufferAttribute(a,v),Rg.fromBufferAttribute(a,y),m.push(Tg.x,Tg.y,Tg.z),m.push(Rg.x,Rg.y,Rg.z)}this.setAttribute("position",new at(m,3))}}}class du extends Yh{constructor(e){super(e),this.uuid=Gi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new Yh().fromJSON(i))}return this}}const r9={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=hD(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,f,h,m;if(r&&(s=l9(t,e,s,n)),t.length>80*n){a=u=t[0],l=c=t[1];for(let g=n;g<i;g+=n)f=t[g],h=t[g+1],f<a&&(a=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);m=Math.max(u-a,c-l),m=m!==0?32767/m:0}return Qh(s,o,n,a,l,m,0),o}};function hD(t,e,n,r,i){let s,o;if(i===x9(t,e,n,r)>0)for(s=e;s<n;s+=r)o=FC(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=FC(s,t[s],t[s+1],o);return o&&sy(o,o.next)&&(Zh(o),o=o.next),o}function Eu(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(sy(n,n.next)||In(n.prev,n,n.next)===0)){if(Zh(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Qh(t,e,n,r,i,s,o){if(!t)return;!o&&s&&h9(t,r,i,s);let a=t,l,u;for(;t.prev!==t.next;){if(l=t.prev,u=t.next,s?s9(t,r,i,s):i9(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),Zh(t),t=u.next,a=u.next;continue}if(t=u,t===a){o?o===1?(t=o9(Eu(t),e,n),Qh(t,e,n,r,i,s,2)):o===2&&a9(t,e,n,r,i,s):Qh(Eu(t),e,n,r,i,s,1);break}}}function i9(t){const e=t.prev,n=t,r=t.next;if(In(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,u=r.y,c=i<s?i<o?i:o:s<o?s:o,f=a<l?a<u?a:u:l<u?l:u,h=i>s?i>o?i:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let g=r.next;for(;g!==e;){if(g.x>=c&&g.x<=h&&g.y>=f&&g.y<=m&&Xc(i,a,s,l,o,u,g.x,g.y)&&In(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function s9(t,e,n,r){const i=t.prev,s=t,o=t.next;if(In(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,c=i.y,f=s.y,h=o.y,m=a<l?a<u?a:u:l<u?l:u,g=c<f?c<h?c:h:f<h?f:h,v=a>l?a>u?a:u:l>u?l:u,y=c>f?c>h?c:h:f>h?f:h,_=Lw(m,g,e,n,r),x=Lw(v,y,e,n,r);let w=t.prevZ,b=t.nextZ;for(;w&&w.z>=_&&b&&b.z<=x;){if(w.x>=m&&w.x<=v&&w.y>=g&&w.y<=y&&w!==i&&w!==o&&Xc(a,c,l,f,u,h,w.x,w.y)&&In(w.prev,w,w.next)>=0||(w=w.prevZ,b.x>=m&&b.x<=v&&b.y>=g&&b.y<=y&&b!==i&&b!==o&&Xc(a,c,l,f,u,h,b.x,b.y)&&In(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;w&&w.z>=_;){if(w.x>=m&&w.x<=v&&w.y>=g&&w.y<=y&&w!==i&&w!==o&&Xc(a,c,l,f,u,h,w.x,w.y)&&In(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;b&&b.z<=x;){if(b.x>=m&&b.x<=v&&b.y>=g&&b.y<=y&&b!==i&&b!==o&&Xc(a,c,l,f,u,h,b.x,b.y)&&In(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function o9(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!sy(i,s)&&pD(i,r,r.next,s)&&qh(i,s)&&qh(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),Zh(r),Zh(r.next),r=t=s),r=r.next}while(r!==t);return Eu(r)}function a9(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&g9(o,a)){let l=mD(o,a);o=Eu(o,o.next),l=Eu(l,l.next),Qh(o,e,n,r,i,s,0),Qh(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function l9(t,e,n,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,u=hD(t,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(m9(u));for(i.sort(u9),s=0;s<i.length;s++)n=c9(i[s],n);return n}function u9(t,e){return t.x-e.x}function c9(t,e){const n=f9(t,e);if(!n)return e;const r=mD(n,t);return Eu(r,r.next),Eu(n,n.next)}function f9(t,e){let n=e,r=-1/0,i;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const h=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=s&&h>r&&(r=h,i=n.x<n.next.x?n:n.next,h===s))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let c=1/0,f;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&Xc(o<u?s:r,o,l,u,o<u?r:s,o,n.x,n.y)&&(f=Math.abs(o-n.y)/(s-n.x),qh(n,t)&&(f<c||f===c&&(n.x>i.x||n.x===i.x&&d9(i,n)))&&(i=n,c=f)),n=n.next;while(n!==a);return i}function d9(t,e){return In(t.prev,t,e.prev)<0&&In(e.next,t,t.next)<0}function h9(t,e,n,r){let i=t;do i.z===0&&(i.z=Lw(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,p9(i)}function p9(t){let e,n,r,i,s,o,a,l,u=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,u*=2}while(o>1);return t}function Lw(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function m9(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Xc(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function g9(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!v9(t,e)&&(qh(t,e)&&qh(e,t)&&y9(t,e)&&(In(t.prev,t,e.prev)||In(t,e.prev,e))||sy(t,e)&&In(t.prev,t,t.next)>0&&In(e.prev,e,e.next)>0)}function In(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function sy(t,e){return t.x===e.x&&t.y===e.y}function pD(t,e,n,r){const i=Ig(In(t,e,n)),s=Ig(In(t,e,r)),o=Ig(In(n,r,t)),a=Ig(In(n,r,e));return!!(i!==s&&o!==a||i===0&&Bg(t,n,e)||s===0&&Bg(t,r,e)||o===0&&Bg(n,t,r)||a===0&&Bg(n,e,r))}function Bg(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Ig(t){return t>0?1:t<0?-1:0}function v9(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&pD(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function qh(t,e){return In(t.prev,t,t.next)<0?In(t,e,t.next)>=0&&In(t,t.prev,e)>=0:In(t,e,t.prev)<0||In(t,t.next,e)<0}function y9(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function mD(t,e){const n=new kw(t.i,t.x,t.y),r=new kw(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function FC(t,e,n,r){const i=new kw(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Zh(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function kw(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function x9(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class ho{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return ho.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];OC(e),UC(r,e);let o=e.length;n.forEach(OC);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,UC(r,n[l]);const a=r9.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function OC(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function UC(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Ap extends wt{constructor(e=new du([new we(.5,.5),new we(-.5,.5),new we(-.5,-.5),new we(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new at(i,3)),this.setAttribute("uv",new at(s,2)),this.computeVertexNormals();function o(a){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,c=n.steps!==void 0?n.steps:1,f=n.depth!==void 0?n.depth:1;let h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,g=n.bevelSize!==void 0?n.bevelSize:m-.1,v=n.bevelOffset!==void 0?n.bevelOffset:0,y=n.bevelSegments!==void 0?n.bevelSegments:3;const _=n.extrudePath,x=n.UVGenerator!==void 0?n.UVGenerator:_9;let w,b=!1,E,C,P,M;_&&(w=_.getSpacedPoints(c),b=!0,h=!1,E=_.computeFrenetFrames(c,!1),C=new V,P=new V,M=new V),h||(y=0,m=0,g=0,v=0);const B=a.extractPoints(u);let D=B.shape;const k=B.holes;if(!ho.isClockWise(D)){D=D.reverse();for(let ne=0,le=k.length;ne<le;ne++){const Pe=k[ne];ho.isClockWise(Pe)&&(k[ne]=Pe.reverse())}}const U=ho.triangulateShape(D,k),N=D;for(let ne=0,le=k.length;ne<le;ne++){const Pe=k[ne];D=D.concat(Pe)}function $(ne,le,Pe){return le||console.error("THREE.ExtrudeGeometry: vec does not exist"),le.clone().multiplyScalar(Pe).add(ne)}const Q=D.length,ie=U.length;function F(ne,le,Pe){let ke,Re,Ve;const Me=ne.x-le.x,Fe=ne.y-le.y,ze=Pe.x-ne.x,Ee=Pe.y-ne.y,W=Me*Me+Fe*Fe,L=Me*Ee-Fe*ze;if(Math.abs(L)>Number.EPSILON){const q=Math.sqrt(W),fe=Math.sqrt(ze*ze+Ee*Ee),Be=le.x-Fe/q,Ie=le.y+Me/q,Ne=Pe.x-Ee/fe,Ue=Pe.y+ze/fe,_e=((Ne-Be)*Ee-(Ue-Ie)*ze)/(Me*Ee-Fe*ze);ke=Be+Me*_e-ne.x,Re=Ie+Fe*_e-ne.y;const We=ke*ke+Re*Re;if(We<=2)return new we(ke,Re);Ve=Math.sqrt(We/2)}else{let q=!1;Me>Number.EPSILON?ze>Number.EPSILON&&(q=!0):Me<-Number.EPSILON?ze<-Number.EPSILON&&(q=!0):Math.sign(Fe)===Math.sign(Ee)&&(q=!0),q?(ke=-Fe,Re=Me,Ve=Math.sqrt(W)):(ke=Me,Re=Fe,Ve=Math.sqrt(W/2))}return new we(ke/Ve,Re/Ve)}const z=[];for(let ne=0,le=N.length,Pe=le-1,ke=ne+1;ne<le;ne++,Pe++,ke++)Pe===le&&(Pe=0),ke===le&&(ke=0),z[ne]=F(N[ne],N[Pe],N[ke]);const j=[];let H,G=z.concat();for(let ne=0,le=k.length;ne<le;ne++){const Pe=k[ne];H=[];for(let ke=0,Re=Pe.length,Ve=Re-1,Me=ke+1;ke<Re;ke++,Ve++,Me++)Ve===Re&&(Ve=0),Me===Re&&(Me=0),H[ke]=F(Pe[ke],Pe[Ve],Pe[Me]);j.push(H),G=G.concat(H)}for(let ne=0;ne<y;ne++){const le=ne/y,Pe=m*Math.cos(le*Math.PI/2),ke=g*Math.sin(le*Math.PI/2)+v;for(let Re=0,Ve=N.length;Re<Ve;Re++){const Me=$(N[Re],z[Re],ke);ae(Me.x,Me.y,-Pe)}for(let Re=0,Ve=k.length;Re<Ve;Re++){const Me=k[Re];H=j[Re];for(let Fe=0,ze=Me.length;Fe<ze;Fe++){const Ee=$(Me[Fe],H[Fe],ke);ae(Ee.x,Ee.y,-Pe)}}}const Z=g+v;for(let ne=0;ne<Q;ne++){const le=h?$(D[ne],G[ne],Z):D[ne];b?(P.copy(E.normals[0]).multiplyScalar(le.x),C.copy(E.binormals[0]).multiplyScalar(le.y),M.copy(w[0]).add(P).add(C),ae(M.x,M.y,M.z)):ae(le.x,le.y,0)}for(let ne=1;ne<=c;ne++)for(let le=0;le<Q;le++){const Pe=h?$(D[le],G[le],Z):D[le];b?(P.copy(E.normals[ne]).multiplyScalar(Pe.x),C.copy(E.binormals[ne]).multiplyScalar(Pe.y),M.copy(w[ne]).add(P).add(C),ae(M.x,M.y,M.z)):ae(Pe.x,Pe.y,f/c*ne)}for(let ne=y-1;ne>=0;ne--){const le=ne/y,Pe=m*Math.cos(le*Math.PI/2),ke=g*Math.sin(le*Math.PI/2)+v;for(let Re=0,Ve=N.length;Re<Ve;Re++){const Me=$(N[Re],z[Re],ke);ae(Me.x,Me.y,f+Pe)}for(let Re=0,Ve=k.length;Re<Ve;Re++){const Me=k[Re];H=j[Re];for(let Fe=0,ze=Me.length;Fe<ze;Fe++){const Ee=$(Me[Fe],H[Fe],ke);b?ae(Ee.x,Ee.y+w[c-1].y,w[c-1].x+Pe):ae(Ee.x,Ee.y,f+Pe)}}}re(),se();function re(){const ne=i.length/3;if(h){let le=0,Pe=Q*le;for(let ke=0;ke<ie;ke++){const Re=U[ke];he(Re[2]+Pe,Re[1]+Pe,Re[0]+Pe)}le=c+y*2,Pe=Q*le;for(let ke=0;ke<ie;ke++){const Re=U[ke];he(Re[0]+Pe,Re[1]+Pe,Re[2]+Pe)}}else{for(let le=0;le<ie;le++){const Pe=U[le];he(Pe[2],Pe[1],Pe[0])}for(let le=0;le<ie;le++){const Pe=U[le];he(Pe[0]+Q*c,Pe[1]+Q*c,Pe[2]+Q*c)}}r.addGroup(ne,i.length/3-ne,0)}function se(){const ne=i.length/3;let le=0;Y(N,le),le+=N.length;for(let Pe=0,ke=k.length;Pe<ke;Pe++){const Re=k[Pe];Y(Re,le),le+=Re.length}r.addGroup(ne,i.length/3-ne,1)}function Y(ne,le){let Pe=ne.length;for(;--Pe>=0;){const ke=Pe;let Re=Pe-1;Re<0&&(Re=ne.length-1);for(let Ve=0,Me=c+y*2;Ve<Me;Ve++){const Fe=Q*Ve,ze=Q*(Ve+1),Ee=le+ke+Fe,W=le+Re+Fe,L=le+Re+ze,q=le+ke+ze;Ce(Ee,W,L,q)}}}function ae(ne,le,Pe){l.push(ne),l.push(le),l.push(Pe)}function he(ne,le,Pe){ve(ne),ve(le),ve(Pe);const ke=i.length/3,Re=x.generateTopUV(r,i,ke-3,ke-2,ke-1);xe(Re[0]),xe(Re[1]),xe(Re[2])}function Ce(ne,le,Pe,ke){ve(ne),ve(le),ve(ke),ve(le),ve(Pe),ve(ke);const Re=i.length/3,Ve=x.generateSideWallUV(r,i,Re-6,Re-3,Re-2,Re-1);xe(Ve[0]),xe(Ve[1]),xe(Ve[3]),xe(Ve[1]),xe(Ve[2]),xe(Ve[3])}function ve(ne){i.push(l[ne*3+0]),i.push(l[ne*3+1]),i.push(l[ne*3+2])}function xe(ne){s.push(ne.x),s.push(ne.y)}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return w9(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new tA[i.type]().fromJSON(i)),new Ap(r,e.options)}}const _9={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new we(s,o),new we(a,l),new we(u,c)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],u=e[r*3],c=e[r*3+1],f=e[r*3+2],h=e[i*3],m=e[i*3+1],g=e[i*3+2],v=e[s*3],y=e[s*3+1],_=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new we(o,1-l),new we(u,1-f),new we(h,1-g),new we(v,1-_)]:[new we(a,1-l),new we(c,1-f),new we(m,1-g),new we(y,1-_)]}};function w9(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Nf extends aa{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Nf(e.radius,e.detail)}}class zf extends aa{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new zf(e.radius,e.detail)}}class Mp extends wt{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],c=[];let f=e;const h=(n-e)/i,m=new V,g=new we;for(let v=0;v<=i;v++){for(let y=0;y<=r;y++){const _=s+y/r*o;m.x=f*Math.cos(_),m.y=f*Math.sin(_),l.push(m.x,m.y,m.z),u.push(0,0,1),g.x=(m.x/n+1)/2,g.y=(m.y/n+1)/2,c.push(g.x,g.y)}f+=h}for(let v=0;v<i;v++){const y=v*(r+1);for(let _=0;_<r;_++){const x=_+y,w=x,b=x+r+1,E=x+r+2,C=x+1;a.push(w,b,C),a.push(b,E,C)}}this.setIndex(a),this.setAttribute("position",new at(l,3)),this.setAttribute("normal",new at(u,3)),this.setAttribute("uv",new at(c,2))}static fromJSON(e){return new Mp(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ep extends wt{constructor(e=new du([new we(0,.5),new we(-.5,-.5),new we(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new at(i,3)),this.setAttribute("normal",new at(s,3)),this.setAttribute("uv",new at(o,2));function u(c){const f=i.length/3,h=c.extractPoints(n);let m=h.shape;const g=h.holes;ho.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,_=g.length;y<_;y++){const x=g[y];ho.isClockWise(x)===!0&&(g[y]=x.reverse())}const v=ho.triangulateShape(m,g);for(let y=0,_=g.length;y<_;y++){const x=g[y];m=m.concat(x)}for(let y=0,_=m.length;y<_;y++){const x=m[y];i.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let y=0,_=v.length;y<_;y++){const x=v[y],w=x[0]+f,b=x[1]+f,E=x[2]+f;r.push(w,b,E),l+=3}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return S9(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new Ep(r,e.curveSegments)}}function S9(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Gf extends wt{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const c=[],f=new V,h=new V,m=[],g=[],v=[],y=[];for(let _=0;_<=r;_++){const x=[],w=_/r;let b=0;_==0&&o==0?b=.5/n:_==r&&l==Math.PI&&(b=-.5/n);for(let E=0;E<=n;E++){const C=E/n;f.x=-e*Math.cos(i+C*s)*Math.sin(o+w*a),f.y=e*Math.cos(o+w*a),f.z=e*Math.sin(i+C*s)*Math.sin(o+w*a),g.push(f.x,f.y,f.z),h.copy(f).normalize(),v.push(h.x,h.y,h.z),y.push(C+b,1-w),x.push(u++)}c.push(x)}for(let _=0;_<r;_++)for(let x=0;x<n;x++){const w=c[_][x+1],b=c[_][x],E=c[_+1][x],C=c[_+1][x+1];(_!==0||o>0)&&m.push(w,b,C),(_!==r-1||l<Math.PI)&&m.push(b,E,C)}this.setIndex(m),this.setAttribute("position",new at(g,3)),this.setAttribute("normal",new at(v,3)),this.setAttribute("uv",new at(y,2))}static fromJSON(e){return new Gf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Cp extends aa{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Cp(e.radius,e.detail)}}class Tp extends wt{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],c=new V,f=new V,h=new V;for(let m=0;m<=r;m++)for(let g=0;g<=i;g++){const v=g/i*s,y=m/r*Math.PI*2;f.x=(e+n*Math.cos(y))*Math.cos(v),f.y=(e+n*Math.cos(y))*Math.sin(v),f.z=n*Math.sin(y),a.push(f.x,f.y,f.z),c.x=e*Math.cos(v),c.y=e*Math.sin(v),h.subVectors(f,c).normalize(),l.push(h.x,h.y,h.z),u.push(g/i),u.push(m/r)}for(let m=1;m<=r;m++)for(let g=1;g<=i;g++){const v=(i+1)*m+g-1,y=(i+1)*(m-1)+g-1,_=(i+1)*(m-1)+g,x=(i+1)*m+g;o.push(v,y,x),o.push(y,_,x)}this.setIndex(o),this.setAttribute("position",new at(a,3)),this.setAttribute("normal",new at(l,3)),this.setAttribute("uv",new at(u,2))}static fromJSON(e){return new Tp(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Rp extends wt{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],c=[],f=new V,h=new V,m=new V,g=new V,v=new V,y=new V,_=new V;for(let w=0;w<=r;++w){const b=w/r*s*Math.PI*2;x(b,s,o,e,m),x(b+.01,s,o,e,g),y.subVectors(g,m),_.addVectors(g,m),v.crossVectors(y,_),_.crossVectors(v,y),v.normalize(),_.normalize();for(let E=0;E<=i;++E){const C=E/i*Math.PI*2,P=-n*Math.cos(C),M=n*Math.sin(C);f.x=m.x+(P*_.x+M*v.x),f.y=m.y+(P*_.y+M*v.y),f.z=m.z+(P*_.z+M*v.z),l.push(f.x,f.y,f.z),h.subVectors(f,m).normalize(),u.push(h.x,h.y,h.z),c.push(w/r),c.push(E/i)}}for(let w=1;w<=r;w++)for(let b=1;b<=i;b++){const E=(i+1)*(w-1)+(b-1),C=(i+1)*w+(b-1),P=(i+1)*w+b,M=(i+1)*(w-1)+b;a.push(E,C,M),a.push(C,P,M)}this.setIndex(a),this.setAttribute("position",new at(l,3)),this.setAttribute("normal",new at(u,3)),this.setAttribute("uv",new at(c,2));function x(w,b,E,C,P){const M=Math.cos(w),B=Math.sin(w),D=E/b*w,k=Math.cos(D);P.x=C*(2+k)*.5*M,P.y=C*(2+k)*B*.5,P.z=C*Math.sin(D)*.5}}static fromJSON(e){return new Rp(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Pp extends wt{constructor(e=new Zb(new V(-1,-1,0),new V(-1,1,0),new V(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new V,l=new V,u=new we;let c=new V;const f=[],h=[],m=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new at(f,3)),this.setAttribute("normal",new at(h,3)),this.setAttribute("uv",new at(m,2));function v(){for(let w=0;w<n;w++)y(w);y(s===!1?n:0),x(),_()}function y(w){c=e.getPointAt(w/n,c);const b=o.normals[w],E=o.binormals[w];for(let C=0;C<=i;C++){const P=C/i*Math.PI*2,M=Math.sin(P),B=-Math.cos(P);l.x=B*b.x+M*E.x,l.y=B*b.y+M*E.y,l.z=B*b.z+M*E.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=c.x+r*l.x,a.y=c.y+r*l.y,a.z=c.z+r*l.z,f.push(a.x,a.y,a.z)}}function _(){for(let w=1;w<=n;w++)for(let b=1;b<=i;b++){const E=(i+1)*(w-1)+(b-1),C=(i+1)*w+(b-1),P=(i+1)*w+b,M=(i+1)*(w-1)+b;g.push(E,C,M),g.push(C,P,M)}}function x(){for(let w=0;w<=n;w++)for(let b=0;b<=i;b++)u.x=w/n,u.y=b/i,m.push(u.x,u.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Pp(new tA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class gD extends wt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new V,s=new V;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const f=l[u],h=f.start,m=f.count;for(let g=h,v=h+m;g<v;g+=3)for(let y=0;y<3;y++){const _=a.getX(g+y),x=a.getX(g+(y+1)%3);i.fromBufferAttribute(o,_),s.fromBufferAttribute(o,x),NC(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,f=3*a+(u+1)%3;i.fromBufferAttribute(o,c),s.fromBufferAttribute(o,f),NC(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new at(n,3))}}}function NC(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var zC=Object.freeze({__proto__:null,BoxGeometry:fl,CapsuleGeometry:_p,CircleGeometry:wp,ConeGeometry:Sp,CylinderGeometry:ku,DodecahedronGeometry:bp,EdgesGeometry:dD,ExtrudeGeometry:Ap,IcosahedronGeometry:Nf,LatheGeometry:Uf,OctahedronGeometry:zf,PlaneGeometry:yo,PolyhedronGeometry:aa,RingGeometry:Mp,ShapeGeometry:Ep,SphereGeometry:Gf,TetrahedronGeometry:Cp,TorusGeometry:Tp,TorusKnotGeometry:Rp,TubeGeometry:Pp,WireframeGeometry:gD});class vD extends zn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new $e(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class yD extends xn{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Bp extends zn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new $e(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xo extends Bp{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new we(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Jn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new $e(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new $e(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new $e(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class xD extends zn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new $e(16777215),this.specular=new $e(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=mp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _D extends zn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new $e(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class wD extends zn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class SD extends zn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=mp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bD extends zn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new $e(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class AD extends Wr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function as(t,e,n){return nA(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function nu(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function nA(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function MD(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function Fw(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function rA(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function b9(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),f=[],h=[];for(let m=0;m<u.times.length;++m){const g=u.times[m]*i;if(!(g<n||g>=r)){f.push(u.times[m]);for(let v=0;v<c;++v)h.push(u.values[m*c+v])}}f.length!==0&&(u.times=nu(f,u.times.constructor),u.values=nu(h,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function A9(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=t.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(u===void 0)continue;let c=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=f/3);let h=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=m/3);const g=a.times.length-1;let v;if(s<=a.times[0]){const _=c,x=f-c;v=as(a.values,_,x)}else if(s>=a.times[g]){const _=g*f+c,x=_+f-c;v=as(a.values,_,x)}else{const _=a.createInterpolant(),x=c,w=f-c;_.evaluate(s),v=as(_.resultBuffer,x,w)}l==="quaternion"&&new sr().fromArray(v).normalize().conjugate().toArray(v);const y=u.times.length;for(let _=0;_<y;++_){const x=_*m+h;if(l==="quaternion")sr.multiplyQuaternionsFlat(u.values,x,v,0,u.values,x);else{const w=m-h*2;for(let b=0;b<w;++b)u.values[x+b]-=v[b]}}}return t.blendMode=Ib,t}var M9=Object.freeze({__proto__:null,arraySlice:as,convertArray:nu,flattenJSON:rA,getKeyframeOrder:MD,isTypedArray:nA,makeClipAdditive:A9,sortedArray:Fw,subclip:b9});class Hf{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ED extends Hf{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ql,endingEnd:ql}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Zl:s=e,a=2*n-r;break;case $h:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Zl:o=e,l=2*r-n;break;case $h:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const u=(r-n)*.5,c=this.valueSize;this._weightPrev=u/(n-a),this._weightNext=u/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,m=this._weightNext,g=(r-n)/(i-n),v=g*g,y=v*g,_=-h*y+2*h*v-h*g,x=(1+h)*y+(-1.5-2*h)*v+(-.5+h)*g+1,w=(-1-m)*y+(1.5+m)*v+.5*g,b=m*y-m*v;for(let E=0;E!==a;++E)s[E]=_*o[c+E]+x*o[u+E]+w*o[l+E]+b*o[f+E];return s}}class iA extends Hf{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-n)/(i-n),f=1-c;for(let h=0;h!==a;++h)s[h]=o[u+h]*f+o[l+h]*c;return s}}class CD extends Hf{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Js{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=nu(n,this.TimeBufferType),this.values=nu(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:nu(e.times,Array),values:nu(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new CD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new iA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ED(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case _f:n=this.InterpolantFactoryMethodDiscrete;break;case Su:n=this.InterpolantFactoryMethodLinear;break;case w0:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _f;case this.InterpolantFactoryMethodLinear:return Su;case this.InterpolantFactoryMethodSmooth:return w0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=as(r,s,o),this.values=as(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&nA(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=as(this.times),n=as(this.values),r=this.getValueSize(),i=this.getInterpolation()===w0,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const f=a*r,h=f-r,m=f+r;for(let g=0;g!==r;++g){const v=n[f+g];if(v!==n[h+g]||v!==n[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,h=o*r;for(let m=0;m!==r;++m)n[h+m]=n[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)n[l+u]=n[a+u];++o}return o!==e.length?(this.times=as(e,0,o),this.values=as(n,0,o*r)):(this.times=e,this.values=n),this}clone(){const e=as(this.times,0),n=as(this.values,0),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Js.prototype.TimeBufferType=Float32Array;Js.prototype.ValueBufferType=Float32Array;Js.prototype.DefaultInterpolation=Su;class Fu extends Js{}Fu.prototype.ValueTypeName="bool";Fu.prototype.ValueBufferType=Array;Fu.prototype.DefaultInterpolation=_f;Fu.prototype.InterpolantFactoryMethodLinear=void 0;Fu.prototype.InterpolantFactoryMethodSmooth=void 0;class sA extends Js{}sA.prototype.ValueTypeName="color";class bf extends Js{}bf.prototype.ValueTypeName="number";class TD extends Hf{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let u=e*a;for(let c=u+a;u!==c;u+=4)sr.slerpFlat(s,0,o,u-a,o,u,l);return s}}class sl extends Js{InterpolantFactoryMethodLinear(e){return new TD(this.times,this.values,this.getValueSize(),e)}}sl.prototype.ValueTypeName="quaternion";sl.prototype.DefaultInterpolation=Su;sl.prototype.InterpolantFactoryMethodSmooth=void 0;class Ou extends Js{}Ou.prototype.ValueTypeName="string";Ou.prototype.ValueBufferType=Array;Ou.prototype.DefaultInterpolation=_f;Ou.prototype.InterpolantFactoryMethodLinear=void 0;Ou.prototype.InterpolantFactoryMethodSmooth=void 0;class Af extends Js{}Af.prototype.ValueTypeName="vector";class Mf{constructor(e,n=-1,r,i=$v){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Gi(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(C9(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(Js.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=MD(l);l=Fw(l,1,c),u=Fw(u,1,c),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new bf(".morphTargetInfluences["+n[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const f=c[1];let h=i[f];h||(i[f]=h=[]),h.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,h,m,g,v){if(m.length!==0){const y=[],_=[];rA(m,y,_,g),y.length!==0&&v.push(new f(h,y,_))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const h=u[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const m={};let g;for(g=0;g<h.length;g++)if(h[g].morphTargets)for(let v=0;v<h[g].morphTargets.length;v++)m[h[g].morphTargets[v]]=-1;for(const v in m){const y=[],_=[];for(let x=0;x!==h[g].morphTargets.length;++x){const w=h[g];y.push(w.time),_.push(w.morphTarget===v?1:0)}i.push(new bf(".morphTargetInfluence["+v+"]",y,_))}l=m.length*o}else{const m=".bones["+n[f].name+"]";r(Af,m+".position",h,"pos",i),r(sl,m+".quaternion",h,"rot",i),r(Af,m+".scale",h,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function E9(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return bf;case"vector":case"vector2":case"vector3":case"vector4":return Af;case"color":return sA;case"quaternion":return sl;case"bool":case"boolean":return Fu;case"string":return Ou}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function C9(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=E9(t.type);if(t.times===void 0){const n=[],r=[];rA(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Cu={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class oA{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,f){return u.push(c,f),this},this.removeHandler=function(c){const f=u.indexOf(c);return f!==-1&&u.splice(f,2),this},this.getHandler=function(c){for(let f=0,h=u.length;f<h;f+=2){const m=u[f],g=u[f+1];if(m.global&&(m.lastIndex=0),m.test(c))return g}return null}}}const Kc=new oA;class di{constructor(e){this.manager=e!==void 0?e:Kc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Fo={};class T9 extends Error{constructor(e,n){super(e),this.response=n}}class Vi extends di{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Cu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Fo[e]!==void 0){Fo[e].push({onLoad:n,onProgress:r,onError:i});return}Fo[e]=[],Fo[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=Fo[e],f=u.body.getReader(),h=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),m=h?parseInt(h):0,g=m!==0;let v=0;const y=new ReadableStream({start(_){x();function x(){f.read().then(({done:w,value:b})=>{if(w)_.close();else{v+=b.byteLength;const E=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:m});for(let C=0,P=c.length;C<P;C++){const M=c[C];M.onProgress&&M.onProgress(E)}_.enqueue(b),x()}})}}});return new Response(y)}else throw new T9(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),h=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(h);return u.arrayBuffer().then(g=>m.decode(g))}}}).then(u=>{Cu.add(e,u);const c=Fo[e];delete Fo[e];for(let f=0,h=c.length;f<h;f++){const m=c[f];m.onLoad&&m.onLoad(u)}}).catch(u=>{const c=Fo[e];if(c===void 0)throw this.manager.itemError(e),u;delete Fo[e];for(let f=0,h=c.length;f<h;f++){const m=c[f];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class R9 extends di{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Vi(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=Mf.parse(e[r]);n.push(i)}return n}}class P9 extends di{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new Kb,l=new Vi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(f){l.load(e[f],function(h){const m=s.parse(h,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=Kt),a.image=o,a.format=m.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let f=0,h=e.length;f<h;++f)c(f);else l.load(e,function(f){const h=s.parse(f,!0);if(h.isCubemap){const m=h.mipmaps.length/h.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let v=0;v<h.mipmapCount;v++)o[g].mipmaps.push(h.mipmaps[g*h.mipmapCount+v]),o[g].format=h.format,o[g].width=h.width,o[g].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=Kt),a.format=h.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class ep extends di{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Cu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=Kh("img");function l(){c(),Cu.add(e,this),n&&n(this),s.manager.itemEnd(e)}function u(f){c(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class RD extends di{constructor(e){super(e)}load(e,n,r,i){const s=new vp,o=new ep(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class PD extends di{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new of,a=new Vi(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Sr,o.wrapT=u.wrapT!==void 0?u.wrapT:Sr,o.magFilter=u.magFilter!==void 0?u.magFilter:Kt,o.minFilter=u.minFilter!==void 0?u.minFilter:Kt,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Hs),u.mipmapCount===1&&(o.minFilter=Kt),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,n&&n(o,u))},r,i),o}}class aA extends di{constructor(e){super(e)}load(e,n,r,i){const s=new an,o=new ep(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class dl extends Gt{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new $e(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class BD extends dl{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new $e(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const vx=new gt,GC=new V,HC=new V;class lA{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new we(512,512),this.map=null,this.mapPass=null,this.matrix=new gt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Kv,this._frameExtents=new we(1,1),this._viewportCount=1,this._viewports=[new $t(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;GC.setFromMatrixPosition(e.matrixWorld),n.position.copy(GC),HC.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(HC),n.updateMatrixWorld(),vx.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vx),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(vx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class B9 extends lA{constructor(){super(new An(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=Xh*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class uA extends dl{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.target=new Gt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new B9}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const VC=new gt,Ud=new V,yx=new V;class I9 extends lA{constructor(){super(new An(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new we(4,2),this._viewportCount=6,this._viewports=[new $t(2,1,1,1),new $t(0,1,1,1),new $t(3,1,1,1),new $t(1,1,1,1),new $t(3,0,1,1),new $t(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Ud.setFromMatrixPosition(e.matrixWorld),r.position.copy(Ud),yx.copy(r.position),yx.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(yx),r.updateMatrixWorld(),i.makeTranslation(-Ud.x,-Ud.y,-Ud.z),VC.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(VC)}}class cA extends dl{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new I9}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class D9 extends lA{constructor(){super(new ys(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class fA extends dl{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.target=new Gt,this.shadow=new D9}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ID extends dl{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class DD extends dl{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class LD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new V)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class oy extends dl{constructor(e=new LD,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class ay extends di{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new Vi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=ay.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new $e().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new $e().setHex(o.value);break;case"v2":i.uniforms[s].value=new we().fromArray(o.value);break;case"v3":i.uniforms[s].value=new V().fromArray(o.value);break;case"v4":i.uniforms[s].value=new $t().fromArray(o.value);break;case"m3":i.uniforms[s].value=new zr().fromArray(o.value);break;case"m4":i.uniforms[s].value=new gt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new we().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new we().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:vD,SpriteMaterial:Wb,RawShaderMaterial:yD,ShaderMaterial:xn,PointsMaterial:ny,MeshPhysicalMaterial:xo,MeshStandardMaterial:Bp,MeshPhongMaterial:xD,MeshToonMaterial:_D,MeshNormalMaterial:wD,MeshLambertMaterial:SD,MeshDepthMaterial:Qv,MeshDistanceMaterial:qv,MeshBasicMaterial:si,MeshMatcapMaterial:bD,LineDashedMaterial:AD,LineBasicMaterial:Wr,Material:zn};return new n[e]}}class po{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class dA extends wt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class kD extends di{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Vi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(m,g){if(n[g]!==void 0)return n[g];const y=m.interleavedBuffers[g],_=s(m,y.buffer),x=$c(y.type,_),w=new yp(x,y.stride);return w.uuid=y.uuid,n[g]=w,w}function s(m,g){if(r[g]!==void 0)return r[g];const y=m.arrayBuffers[g],_=new Uint32Array(y).buffer;return r[g]=_,_}const o=e.isInstancedBufferGeometry?new dA:new wt,a=e.data.index;if(a!==void 0){const m=$c(a.type,a.array);o.setIndex(new Ut(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let v;if(g.isInterleavedBufferAttribute){const y=i(e.data,g.data);v=new il(y,g.itemSize,g.offset,g.normalized)}else{const y=$c(g.type,g.array),_=g.isInstancedBufferAttribute?Mu:Ut;v=new _(y,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),g.updateRange!==void 0&&(v.updateRange.offset=g.updateRange.offset,v.updateRange.count=g.updateRange.count),o.setAttribute(m,v)}const u=e.data.morphAttributes;if(u)for(const m in u){const g=u[m],v=[];for(let y=0,_=g.length;y<_;y++){const x=g[y];let w;if(x.isInterleavedBufferAttribute){const b=i(e.data,x.data);w=new il(b,x.itemSize,x.offset,x.normalized)}else{const b=$c(x.type,x.array);w=new Ut(b,x.itemSize,x.normalized)}x.name!==void 0&&(w.name=x.name),v.push(w)}o.morphAttributes[m]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,g=f.length;m!==g;++m){const v=f[m];o.addGroup(v.start,v.count,v.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const m=new V;h.center!==void 0&&m.fromArray(h.center),o.boundingSphere=new oa(m,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class L9 extends di{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?po.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Vi(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?po.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Vi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),n!==void 0){let f=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){f=!0;break}f===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new du().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new xp().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new kD;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in zC?a=zC[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new ay;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Mf.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(c)}else return l.data?{data:$c(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new oA(n);s=new ep(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const f=e[u],h=f.url;if(Array.isArray(h)){const m=[];for(let g=0,v=h.length;g<v;g++){const y=h[g],_=a(y);_!==null&&(_ instanceof HTMLImageElement?m.push(_):m.push(new of(_.data,_.width,_.height)))}i[f.uuid]=new tu(m)}else{const m=a(f.url);i[f.uuid]=new tu(m)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:$c(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new ep(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let f=0,h=u.length;f<h;f++){const m=u[f],g=await s(m);g!==null&&(g instanceof HTMLImageElement?c.push(g):c.push(new of(g.data,g.width,g.height)))}r[l.uuid]=new tu(c)}else{const c=await s(l.url);r[l.uuid]=new tu(c)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],u=l.data;let c;Array.isArray(u)?(c=new vp,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new of:c=new an,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=r(a.mapping,k9)),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=r(a.wrap[0],WC),c.wrapT=r(a.wrap[1],WC)),a.format!==void 0&&(c.format=a.format),a.type!==void 0&&(c.type=a.type),a.encoding!==void 0&&(c.encoding=a.encoding),a.minFilter!==void 0&&(c.minFilter=r(a.minFilter,jC)),a.magFilter!==void 0&&(c.magFilter=r(a.magFilter,jC)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(c.userData=a.userData),i[a.uuid]=c}return i}parseObject(e,n,r,i,s){let o;function a(h){return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),n[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const m=[];for(let g=0,v=h.length;g<v;g++){const y=h[g];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),m.push(r[y])}return m}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function u(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let c,f;switch(e.type){case"Scene":o=new Au,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new $e(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new ey(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Zv(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new An(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new ys(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new ID(e.color,e.intensity);break;case"DirectionalLight":o=new fA(e.color,e.intensity);break;case"PointLight":o=new cA(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new DD(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new uA(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new BD(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new oy().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),f=l(e.material),o=new jb(c,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),f=l(e.material),o=new Mn(c,f);break;case"InstancedMesh":c=a(e.geometry),f=l(e.material);const h=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new $b(c,f,h),o.instanceMatrix=new Mu(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new Mu(new Float32Array(g.array),g.itemSize));break;case"LOD":o=new oD;break;case"Line":o=new na(a(e.geometry),l(e.material));break;case"LineLoop":o=new Jb(a(e.geometry),l(e.material));break;case"LineSegments":o=new js(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new Xb(a(e.geometry),l(e.material));break;case"Sprite":o=new sD(l(e.material));break;case"Group":o=new Xo;break;case"Bone":o=new ty;break;default:o=new Gt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let m=0;m<h.length;m++)o.add(this.parseObject(h[m],n,r,i,s))}if(e.animations!==void 0){const h=e.animations;for(let m=0;m<h.length;m++){const g=h[m];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let m=0;m<h.length;m++){const g=h[m],v=o.getObjectByProperty("uuid",g.object);v!==void 0&&o.addLevel(v,g.distance,g.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const k9={UVMapping:Wv,CubeReflectionMapping:ta,CubeRefractionMapping:nl,EquirectangularReflectionMapping:yf,EquirectangularRefractionMapping:Wh,CubeUVReflectionMapping:Lf},WC={RepeatWrapping:rl,ClampToEdgeWrapping:Sr,MirroredRepeatWrapping:xf},jC={NearestFilter:Sn,NearestMipmapNearestFilter:jh,NearestMipmapLinearFilter:sf,LinearFilter:Kt,LinearMipmapNearestFilter:jv,LinearMipmapLinearFilter:Hs};class FD extends di{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Cu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Cu.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Dg;class hA{static getContext(){return Dg===void 0&&(Dg=new(window.AudioContext||window.webkitAudioContext)),Dg}static setContext(e){Dg=e}}class F9 extends di{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Vi(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);hA.getContext().decodeAudioData(l,function(c){n(c)})}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}}class O9 extends oy{constructor(e,n,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new $e().set(e),s=new $e().set(n),o=new V(i.r,i.g,i.b),a=new V(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class U9 extends oy{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const r=new $e().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const $C=new gt,JC=new gt,Pl=new gt;class N9{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new An,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new An,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Pl.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(uu*n.fov*.5)/n.zoom;let a,l;JC.elements[12]=-i,$C.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,Pl.elements[0]=2*n.near/(l-a),Pl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Pl),a=-o*n.aspect-s,l=o*n.aspect-s,Pl.elements[0]=2*n.near/(l-a),Pl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Pl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(JC),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply($C)}}class ly{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=XC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=XC();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function XC(){return(typeof performance>"u"?Date:performance).now()}const Bl=new V,KC=new sr,z9=new V,Il=new V;class G9 extends Gt{constructor(){super(),this.type="AudioListener",this.context=hA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ly}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Bl,KC,z9),Il.set(0,0,-1).applyQuaternion(KC),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Bl.x,i),n.positionY.linearRampToValueAtTime(Bl.y,i),n.positionZ.linearRampToValueAtTime(Bl.z,i),n.forwardX.linearRampToValueAtTime(Il.x,i),n.forwardY.linearRampToValueAtTime(Il.y,i),n.forwardZ.linearRampToValueAtTime(Il.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Bl.x,Bl.y,Bl.z),n.setOrientation(Il.x,Il.y,Il.z,r.x,r.y,r.z)}}class OD extends Gt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Dl=new V,YC=new sr,H9=new V,Ll=new V;class V9 extends OD{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Dl,YC,H9),Ll.set(0,0,1).applyQuaternion(YC);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Dl.x,r),n.positionY.linearRampToValueAtTime(Dl.y,r),n.positionZ.linearRampToValueAtTime(Dl.z,r),n.orientationX.linearRampToValueAtTime(Ll.x,r),n.orientationY.linearRampToValueAtTime(Ll.y,r),n.orientationZ.linearRampToValueAtTime(Ll.z,r)}else n.setPosition(Dl.x,Dl.y,Dl.z),n.setOrientation(Ll.x,Ll.y,Ll.z)}}class W9{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class UD{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){sr.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;sr.multiplyQuaternionsFlat(e,o,e,n,e,r),sr.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const pA="\\[\\]\\.:\\/",j9=new RegExp("["+pA+"]","g"),mA="[^"+pA+"]",$9="[^"+pA.replace("\\.","")+"]",J9=/((?:WC+[\/:])*)/.source.replace("WC",mA),X9=/(WCOD+)?/.source.replace("WCOD",$9),K9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",mA),Y9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",mA),Q9=new RegExp("^"+J9+X9+K9+Y9+"$"),q9=["material","materials","bones","map"];class Z9{constructor(e,n,r){const i=r||jt.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class jt{constructor(e,n,r){this.path=n,this.parsedPath=r||jt.parseTrackName(n),this.node=jt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new jt.Composite(e,n,r):new jt(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(j9,"")}static parseTrackName(e){const n=Q9.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);q9.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=jt.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let u=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}jt.Composite=Z9;jt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};jt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};jt.prototype.GetterByBindingType=[jt.prototype._getValue_direct,jt.prototype._getValue_array,jt.prototype._getValue_arrayElement,jt.prototype._getValue_toArray];jt.prototype.SetterByBindingTypeAndVersioning=[[jt.prototype._setValue_direct,jt.prototype._setValue_direct_setNeedsUpdate,jt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[jt.prototype._setValue_array,jt.prototype._setValue_array_setNeedsUpdate,jt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[jt.prototype._setValue_arrayElement,jt.prototype._setValue_arrayElement_setNeedsUpdate,jt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[jt.prototype._setValue_fromArray,jt.prototype._setValue_fromArray_setNeedsUpdate,jt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class e8{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Gi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,f=arguments.length;c!==f;++c){const h=arguments[c],m=h.uuid;let g=n[m];if(g===void 0){g=l++,n[m]=g,e.push(h);for(let v=0,y=o;v!==y;++v)s[v].push(new jt(h,r[v],i[v]))}else if(g<u){a=e[g];const v=--u,y=e[v];n[y.uuid]=g,e[g]=y,n[m]=v,e[v]=h;for(let _=0,x=o;_!==x;++_){const w=s[_],b=w[v];let E=w[g];w[g]=b,E===void 0&&(E=new jt(h,r[_],i[_])),w[v]=E}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=n[u];if(c!==void 0&&c>=s){const f=s++,h=e[f];n[h.uuid]=c,e[c]=h,n[u]=f,e[f]=l;for(let m=0,g=i;m!==g;++m){const v=r[m],y=v[f],_=v[c];v[c]=y,v[f]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,f=n[c];if(f!==void 0)if(delete n[c],f<s){const h=--s,m=e[h],g=--o,v=e[g];n[m.uuid]=f,e[f]=m,n[v.uuid]=h,e[h]=v,e.pop();for(let y=0,_=i;y!==_;++y){const x=r[y],w=x[h],b=x[g];x[f]=w,x[h]=b,x.pop()}}else{const h=--o,m=e[h];h>0&&(n[m.uuid]=f),e[f]=m,e.pop();for(let g=0,v=i;g!==v;++g){const y=r[g];y[f]=y[h],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,f=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(f);for(let h=c,m=l.length;h!==m;++h){const g=l[h];f[h]=new jt(g,e,n)}return f}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];n[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class t8{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:ql,endingEnd:ql};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zI,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case Ib:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case $v:default:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===GI;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===NI){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Zl,i.endingEnd=Zl):(e?i.endingStart=this.zeroSlopeAtStart?Zl:ql:i.endingStart=$h,n?i.endingEnd=this.zeroSlopeAtEnd?Zl:ql:i.endingEnd=$h)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const n8=new Float32Array(1);class ND extends $i{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let f=0;f!==s;++f){const h=i[f],m=h.name;let g=c[m];if(g!==void 0)++g.referenceCount,o[f]=g;else{if(g=o[f],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const v=n&&n._propertyBindings[f].binding.parsedPath;g=new UD(jt.create(r,m,v),h.ValueTypeName,h.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[f]=g}a[f].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],u=e._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new iA(new Float32Array(2),new Float32Array(2),1,n8),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?Mf.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=$v),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new t8(this,o,n,r);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?Mf.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)n[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,f=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=c,n[c]=f,n.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class lt{constructor(e){this.value=e}clone(){return new lt(this.value.clone===void 0?this.value:this.value.clone())}}let r8=0;class i8 extends $i{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:r8++}),this.name="",this.usage=Jh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++)this.uniforms.push(n[r].clone());return this}clone(){return new this.constructor().copy(this)}}class s8 extends yp{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class o8{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class gA{constructor(e,n,r=0,i=1/0){this.ray=new gp(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new fu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return Ow(e,this,r,n),r.sort(QC),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)Ow(e[i],this,r,n);return r.sort(QC),r}}function QC(t,e){return t.distance-e.distance}function Ow(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,o=i.length;s<o;s++)Ow(i[s],e,n,!0)}}class sv{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Jn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class a8{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const qC=new we;class l8{constructor(e=new we(1/0,1/0),n=new we(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=qC.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return qC.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ZC=new V,Lg=new V;class u8{constructor(e=new V,n=new V){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){ZC.subVectors(e,this.start),Lg.subVectors(this.end,this.start);const r=Lg.dot(Lg);let s=Lg.dot(ZC)/r;return n&&(s=Jn(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const eT=new V;class c8 extends Gt{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new wt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new at(i,3));const s=new Wr({fog:!1,toneMapped:!1});this.cone=new js(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),eT.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(eT),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ea=new V,kg=new gt,xx=new gt;class f8 extends js{constructor(e){const n=zD(e),r=new wt,i=[],s=[],o=new $e(0,0,1),a=new $e(0,1,0);for(let u=0;u<n.length;u++){const c=n[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new at(i,3)),r.setAttribute("color",new at(s,3));const l=new Wr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");xx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(kg.multiplyMatrices(xx,a.matrixWorld),Ea.setFromMatrixPosition(kg),i.setXYZ(o,Ea.x,Ea.y,Ea.z),kg.multiplyMatrices(xx,a.parent.matrixWorld),Ea.setFromMatrixPosition(kg),i.setXYZ(o+1,Ea.x,Ea.y,Ea.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function zD(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,zD(t.children[n]));return e}class d8 extends Mn{constructor(e,n,r){const i=new Gf(n,4,2),s=new si({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const h8=new V,tT=new $e,nT=new $e;class p8 extends Gt{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new zf(n);i.rotateY(Math.PI*.5),this.material=new si({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Ut(o,3)),this.add(new Mn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");tT.copy(this.light.color),nT.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?tT:nT;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(h8.setFromMatrixPosition(this.light.matrixWorld).negate())}}class m8 extends js{constructor(e=10,n=10,r=4473924,i=8947848){r=new $e(r),i=new $e(i);const s=n/2,o=e/n,a=e/2,l=[],u=[];for(let h=0,m=0,g=-a;h<=n;h++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const v=h===s?r:i;v.toArray(u,m),m+=3,v.toArray(u,m),m+=3,v.toArray(u,m),m+=3,v.toArray(u,m),m+=3}const c=new wt;c.setAttribute("position",new at(l,3)),c.setAttribute("color",new at(u,3));const f=new Wr({vertexColors:!0,toneMapped:!1});super(c,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class g8 extends js{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new $e(s),o=new $e(o);const a=[],l=[];if(n>1)for(let f=0;f<n;f++){const h=f/n*(Math.PI*2),m=Math.sin(h)*e,g=Math.cos(h)*e;a.push(0,0,0),a.push(m,0,g);const v=f&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let f=0;f<r;f++){const h=f&1?s:o,m=e-e/r*f;for(let g=0;g<i;g++){let v=g/i*(Math.PI*2),y=Math.sin(v)*m,_=Math.cos(v)*m;a.push(y,0,_),l.push(h.r,h.g,h.b),v=(g+1)/i*(Math.PI*2),y=Math.sin(v)*m,_=Math.cos(v)*m,a.push(y,0,_),l.push(h.r,h.g,h.b)}}const u=new wt;u.setAttribute("position",new at(a,3)),u.setAttribute("color",new at(l,3));const c=new Wr({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const rT=new V,Fg=new V,iT=new V;class v8 extends Gt{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new wt;i.setAttribute("position",new at([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Wr({fog:!1,toneMapped:!1});this.lightPlane=new na(i,s),this.add(this.lightPlane),i=new wt,i.setAttribute("position",new at([0,0,0,0,0,1],3)),this.targetLine=new na(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),rT.setFromMatrixPosition(this.light.matrixWorld),Fg.setFromMatrixPosition(this.light.target.matrixWorld),iT.subVectors(Fg,rT),this.lightPlane.lookAt(Fg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Fg),this.targetLine.scale.z=iT.length()}}const Og=new V,On=new Ff;class y8 extends js{constructor(e){const n=new wt,r=new Wr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,v){l(g),l(v)}function l(g){i.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(i.length/3-1)}n.setAttribute("position",new at(i,3)),n.setAttribute("color",new at(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new $e(16755200),c=new $e(16711680),f=new $e(43775),h=new $e(16777215),m=new $e(3355443);this.setColors(u,c,f,h,m)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;On.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),jn("c",n,e,On,0,0,-1),jn("t",n,e,On,0,0,1),jn("n1",n,e,On,-r,-i,-1),jn("n2",n,e,On,r,-i,-1),jn("n3",n,e,On,-r,i,-1),jn("n4",n,e,On,r,i,-1),jn("f1",n,e,On,-r,-i,1),jn("f2",n,e,On,r,-i,1),jn("f3",n,e,On,-r,i,1),jn("f4",n,e,On,r,i,1),jn("u1",n,e,On,r*.7,i*1.1,-1),jn("u2",n,e,On,-r*.7,i*1.1,-1),jn("u3",n,e,On,0,i*2,-1),jn("cf1",n,e,On,-r,0,1),jn("cf2",n,e,On,r,0,1),jn("cf3",n,e,On,0,-i,1),jn("cf4",n,e,On,0,i,1),jn("cn1",n,e,On,-r,0,-1),jn("cn2",n,e,On,r,0,-1),jn("cn3",n,e,On,0,-i,-1),jn("cn4",n,e,On,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function jn(t,e,n,r,i,s,o){Og.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],Og.x,Og.y,Og.z)}}const Ug=new vo;class x8 extends js{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new wt;s.setIndex(new Ut(r,1)),s.setAttribute("position",new Ut(i,3)),super(s,new Wr({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Ug.setFromObject(this.object),Ug.isEmpty())return;const n=Ug.min,r=Ug.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class _8 extends js{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new wt;s.setIndex(new Ut(r,1)),s.setAttribute("position",new at(i,3)),super(s,new Wr({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class w8 extends na{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new wt;o.setAttribute("position",new at(s,3)),o.computeBoundingSphere(),super(o,new Wr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new wt;l.setAttribute("position",new at(a,3)),l.computeBoundingSphere(),this.add(new Mn(l,new si({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const sT=new V;let Ng,_x;class S8 extends Gt{constructor(e=new V(0,0,1),n=new V(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",Ng===void 0&&(Ng=new wt,Ng.setAttribute("position",new at([0,0,0,0,1,0],3)),_x=new ku(0,.5,1,5,1),_x.translate(0,-.5,0)),this.position.copy(n),this.line=new na(Ng,new Wr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mn(_x,new si({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{sT.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(sT,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class b8 extends js{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new wt;i.setAttribute("position",new at(n,3)),i.setAttribute("color",new at(r,3));const s=new Wr({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new $e,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class A8{constructor(){this.type="ShapePath",this.color=new $e,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Yh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(_){const x=[];for(let w=0,b=_.length;w<b;w++){const E=_[w],C=new du;C.curves=E.curves,x.push(C)}return x}function r(_,x){const w=x.length;let b=!1;for(let E=w-1,C=0;C<w;E=C++){let P=x[E],M=x[C],B=M.x-P.x,D=M.y-P.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(P=x[C],B=-B,M=x[E],D=-D),_.y<P.y||_.y>M.y)continue;if(_.y===P.y){if(_.x===P.x)return!0}else{const k=D*(_.x-P.x)-B*(_.y-P.y);if(k===0)return!0;if(k<0)continue;b=!b}}else{if(_.y!==P.y)continue;if(M.x<=_.x&&_.x<=P.x||P.x<=_.x&&_.x<=M.x)return!0}}return b}const i=ho.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new du,l.curves=a.curves,u.push(l),u;let c=!i(s[0].getPoints());c=e?!c:c;const f=[],h=[];let m=[],g=0,v;h[g]=void 0,m[g]=[];for(let _=0,x=s.length;_<x;_++)a=s[_],v=a.getPoints(),o=i(v),o=e?!o:o,o?(!c&&h[g]&&g++,h[g]={s:new du,p:v},h[g].s.curves=a.curves,c&&g++,m[g]=[]):m[g].push({h:a,p:v[0]});if(!h[0])return n(s);if(h.length>1){let _=!1,x=0;for(let w=0,b=h.length;w<b;w++)f[w]=[];for(let w=0,b=h.length;w<b;w++){const E=m[w];for(let C=0;C<E.length;C++){const P=E[C];let M=!0;for(let B=0;B<h.length;B++)r(P.p,h[B].p)&&(w!==B&&x++,M?(M=!1,f[B].push(P)):_=!0);M&&f[w].push(P)}}x>0&&_===!1&&(m=f)}let y;for(let _=0,x=h.length;_<x;_++){l=h[_].s,u.push(l),y=m[_];for(let w=0,b=y.length;w<b;w++)l.holes.push(y[w].h)}return u}}const Ho=M8();function M8(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function E8(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Jn(t,-65504,65504),Ho.floatView[0]=t;const e=Ho.uint32View[0],n=e>>23&511;return Ho.baseTable[n]+((e&8388607)>>Ho.shiftTable[n])}function C8(t){const e=t>>10;return Ho.uint32View[0]=Ho.mantissaTable[Ho.offsetTable[e]+(t&1023)]+Ho.exponentTable[e],Ho.floatView[0]}var nh=Object.freeze({__proto__:null,fromHalfFloat:C8,toHalfFloat:E8});class T8 extends fl{constructor(e,n,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,r,i,s,o)}}class R8 extends _p{constructor(e,n,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,r,i)}}class P8 extends wp{constructor(e,n,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,r,i)}}class B8 extends Sp{constructor(e,n,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,r,i,s,o,a)}}class I8 extends ku{constructor(e,n,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,r,i,s,o,a,l)}}class D8 extends bp{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class L8 extends Ap{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class k8 extends Nf{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class F8 extends Uf{constructor(e,n,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,r,i)}}class O8 extends zf{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class U8 extends yo{constructor(e,n,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,r,i)}}class N8 extends aa{constructor(e,n,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,r,i)}}class z8 extends Mp{constructor(e,n,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,r,i,s,o)}}class G8 extends Ep{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class H8 extends Gf{constructor(e,n,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,r,i,s,o,a)}}class V8 extends Cp{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class W8 extends Tp{constructor(e,n,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,r,i,s)}}class j8 extends Rp{constructor(e,n,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,r,i,s,o)}}class $8 extends Pp{constructor(e,n,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Lu}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Lu);const GD=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Pb,AddEquation:jl,AddOperation:xI,AdditiveAnimationBlendMode:Ib,AdditiveBlending:Vh,AlphaFormat:RI,AlwaysDepth:dI,AlwaysStencilFunc:WI,AmbientLight:ID,AmbientLightProbe:U9,AnimationClip:Mf,AnimationLoader:R9,AnimationMixer:ND,AnimationObjectGroup:e8,AnimationUtils:M9,ArcCurve:aD,ArrayCamera:nD,ArrowHelper:S8,Audio:OD,AudioAnalyser:W9,AudioContext:hA,AudioListener:G9,AudioLoader:F9,AxesHelper:b8,BackSide:Hr,BasicDepthPacking:Jv,BasicShadowMap:qB,Bone:ty,BooleanKeyframeTrack:Fu,Box2:l8,Box3:vo,Box3Helper:_8,BoxBufferGeometry:T8,BoxGeometry:fl,BoxHelper:x8,BufferAttribute:Ut,BufferGeometry:wt,BufferGeometryLoader:kD,ByteType:AI,Cache:Cu,Camera:Ff,CameraHelper:y8,CanvasTexture:KH,CapsuleBufferGeometry:R8,CapsuleGeometry:_p,CatmullRomCurve3:lD,CineonToneMapping:SI,CircleBufferGeometry:P8,CircleGeometry:wp,ClampToEdgeWrapping:Sr,Clock:ly,Color:$e,ColorKeyframeTrack:sA,ColorManagement:Fr,CompressedArrayTexture:XH,CompressedTexture:Kb,CompressedTextureLoader:P9,ConeBufferGeometry:B8,ConeGeometry:Sp,CubeCamera:KI,CubeReflectionMapping:ta,CubeRefractionMapping:nl,CubeTexture:vp,CubeTextureLoader:RD,CubeUVReflectionMapping:Lf,CubicBezierCurve:Qb,CubicBezierCurve3:uD,CubicInterpolant:ED,CullFaceBack:tw,CullFaceFront:QB,CullFaceFrontBack:eN,CullFaceNone:YB,Curve:$s,CurvePath:fD,CustomBlending:ZB,CustomToneMapping:bI,CylinderBufferGeometry:I8,CylinderGeometry:ku,Cylindrical:a8,Data3DTexture:Ob,DataArrayTexture:Xv,DataTexture:of,DataTextureLoader:PD,DataUtils:nh,DecrementStencilOp:cN,DecrementWrapStencilOp:dN,DefaultLoadingManager:Kc,DepthFormat:qa,DepthStencilFormat:wu,DepthTexture:Hb,DirectionalLight:fA,DirectionalLightHelper:v8,DiscreteInterpolant:CD,DodecahedronBufferGeometry:D8,DodecahedronGeometry:bp,DoubleSide:wi,DstAlphaFactor:oI,DstColorFactor:lI,DynamicCopyUsage:CN,DynamicDrawUsage:wN,DynamicReadUsage:AN,EdgesGeometry:dD,EllipseCurve:ry,EqualDepth:pI,EqualStencilFunc:gN,EquirectangularReflectionMapping:yf,EquirectangularRefractionMapping:Wh,Euler:kf,EventDispatcher:$i,ExtrudeBufferGeometry:L8,ExtrudeGeometry:Ap,FileLoader:Vi,Float16BufferAttribute:az,Float32BufferAttribute:at,Float64BufferAttribute:lz,FloatType:Ni,Fog:ey,FogExp2:Zv,FramebufferTexture:JH,FrontSide:Gs,Frustum:Kv,GLBufferAttribute:o8,GLSL1:RN,GLSL3:Rw,GreaterDepth:gI,GreaterEqualDepth:mI,GreaterEqualStencilFunc:_N,GreaterStencilFunc:yN,GridHelper:m8,Group:Xo,HalfFloatType:Nr,HemisphereLight:BD,HemisphereLightHelper:p8,HemisphereLightProbe:O9,IcosahedronBufferGeometry:k8,IcosahedronGeometry:Nf,ImageBitmapLoader:FD,ImageLoader:ep,ImageUtils:Fb,IncrementStencilOp:uN,IncrementWrapStencilOp:fN,InstancedBufferAttribute:Mu,InstancedBufferGeometry:dA,InstancedInterleavedBuffer:s8,InstancedMesh:$b,Int16BufferAttribute:sz,Int32BufferAttribute:oz,Int8BufferAttribute:nz,IntType:EI,InterleavedBuffer:yp,InterleavedBufferAttribute:il,Interpolant:Hf,InterpolateDiscrete:_f,InterpolateLinear:Su,InterpolateSmooth:w0,InvertStencilOp:hN,KeepStencilOp:S0,KeyframeTrack:Js,LOD:oD,LatheBufferGeometry:F8,LatheGeometry:Uf,Layers:fu,LessDepth:hI,LessEqualDepth:tv,LessEqualStencilFunc:vN,LessStencilFunc:mN,Light:dl,LightProbe:oy,Line:na,Line3:u8,LineBasicMaterial:Wr,LineCurve:iy,LineCurve3:cD,LineDashedMaterial:AD,LineLoop:Jb,LineSegments:js,LinearEncoding:mo,LinearFilter:Kt,LinearInterpolant:iA,LinearMipMapLinearFilter:sN,LinearMipMapNearestFilter:iN,LinearMipmapLinearFilter:Hs,LinearMipmapNearestFilter:jv,LinearSRGBColorSpace:wf,LinearToneMapping:_I,Loader:di,LoaderUtils:po,LoadingManager:oA,LoopOnce:NI,LoopPingPong:GI,LoopRepeat:zI,LuminanceAlphaFormat:BI,LuminanceFormat:PI,MOUSE:zl,Material:zn,MaterialLoader:ay,MathUtils:eu,Matrix3:zr,Matrix4:gt,MaxEquation:sw,Mesh:Mn,MeshBasicMaterial:si,MeshDepthMaterial:Qv,MeshDistanceMaterial:qv,MeshLambertMaterial:SD,MeshMatcapMaterial:bD,MeshNormalMaterial:wD,MeshPhongMaterial:xD,MeshPhysicalMaterial:xo,MeshStandardMaterial:Bp,MeshToonMaterial:_D,MinEquation:iw,MirroredRepeatWrapping:xf,MixOperation:yI,MultiplyBlending:rw,MultiplyOperation:mp,NearestFilter:Sn,NearestMipMapLinearFilter:rN,NearestMipMapNearestFilter:nN,NearestMipmapLinearFilter:sf,NearestMipmapNearestFilter:jh,NeverDepth:fI,NeverStencilFunc:pN,NoBlending:ui,NoColorSpace:oN,NoToneMapping:Us,NormalAnimationBlendMode:$v,NormalBlending:au,NotEqualDepth:vI,NotEqualStencilFunc:xN,NumberKeyframeTrack:bf,Object3D:Gt,ObjectLoader:L9,ObjectSpaceNormalMap:VI,OctahedronBufferGeometry:O8,OctahedronGeometry:zf,OneFactor:rI,OneMinusDstAlphaFactor:aI,OneMinusDstColorFactor:uI,OneMinusSrcAlphaFactor:Rb,OneMinusSrcColorFactor:sI,OrthographicCamera:ys,PCFShadowMap:Vv,PCFSoftShadowMap:ph,PMREMGenerator:Bw,Path:Yh,PerspectiveCamera:An,Plane:La,PlaneBufferGeometry:U8,PlaneGeometry:yo,PlaneHelper:w8,PointLight:cA,PointLightHelper:d8,Points:Xb,PointsMaterial:ny,PolarGridHelper:g8,PolyhedronBufferGeometry:N8,PolyhedronGeometry:aa,PositionalAudio:V9,PropertyBinding:jt,PropertyMixer:UD,QuadraticBezierCurve:qb,QuadraticBezierCurve3:Zb,Quaternion:sr,QuaternionKeyframeTrack:sl,QuaternionLinearInterpolant:TD,RED_GREEN_RGTC2_Format:Cw,RED_RGTC1_Format:UI,REVISION:Lu,RGBADepthPacking:Lb,RGBAFormat:Ur,RGBAIntegerFormat:FI,RGBA_ASTC_10x10_Format:bw,RGBA_ASTC_10x5_Format:_w,RGBA_ASTC_10x6_Format:ww,RGBA_ASTC_10x8_Format:Sw,RGBA_ASTC_12x10_Format:Aw,RGBA_ASTC_12x12_Format:Mw,RGBA_ASTC_4x4_Format:dw,RGBA_ASTC_5x4_Format:hw,RGBA_ASTC_5x5_Format:pw,RGBA_ASTC_6x5_Format:mw,RGBA_ASTC_6x6_Format:gw,RGBA_ASTC_8x5_Format:vw,RGBA_ASTC_8x6_Format:yw,RGBA_ASTC_8x8_Format:xw,RGBA_BPTC_Format:_0,RGBA_ETC2_EAC_Format:fw,RGBA_PVRTC_2BPPV1_Format:uw,RGBA_PVRTC_4BPPV1_Format:lw,RGBA_S3TC_DXT1_Format:v0,RGBA_S3TC_DXT3_Format:y0,RGBA_S3TC_DXT5_Format:x0,RGB_ETC1_Format:OI,RGB_ETC2_Format:cw,RGB_PVRTC_2BPPV1_Format:aw,RGB_PVRTC_4BPPV1_Format:ow,RGB_S3TC_DXT1_Format:g0,RGFormat:LI,RGIntegerFormat:kI,RawShaderMaterial:yD,Ray:gp,Raycaster:gA,RectAreaLight:DD,RedFormat:II,RedIntegerFormat:DI,ReinhardToneMapping:wI,RepeatWrapping:rl,ReplaceStencilOp:lN,ReverseSubtractEquation:tI,RingBufferGeometry:z8,RingGeometry:Mp,SIGNED_RED_GREEN_RGTC2_Format:Tw,SIGNED_RED_RGTC1_Format:Ew,SRGBColorSpace:Bs,Scene:Au,ShaderChunk:Tt,ShaderLib:Ds,ShaderMaterial:xn,ShadowMaterial:vD,Shape:du,ShapeBufferGeometry:G8,ShapeGeometry:Ep,ShapePath:A8,ShapeUtils:ho,ShortType:MI,Skeleton:xp,SkeletonHelper:f8,SkinnedMesh:jb,Source:tu,Sphere:oa,SphereBufferGeometry:H8,SphereGeometry:Gf,Spherical:sv,SphericalHarmonics3:LD,SplineCurve:eA,SpotLight:uA,SpotLightHelper:c8,Sprite:sD,SpriteMaterial:Wb,SrcAlphaFactor:Tb,SrcAlphaSaturateFactor:cI,SrcColorFactor:iI,StaticCopyUsage:EN,StaticDrawUsage:Jh,StaticReadUsage:bN,StereoCamera:N9,StreamCopyUsage:TN,StreamDrawUsage:SN,StreamReadUsage:MN,StringKeyframeTrack:Ou,SubtractEquation:eI,SubtractiveBlending:nw,TOUCH:Gl,TangentSpaceNormalMap:cl,TetrahedronBufferGeometry:V8,TetrahedronGeometry:Cp,Texture:an,TextureLoader:aA,TorusBufferGeometry:W8,TorusGeometry:Tp,TorusKnotBufferGeometry:j8,TorusKnotGeometry:Rp,Triangle:ds,TriangleFanDrawMode:nv,TriangleStripDrawMode:Db,TrianglesDrawMode:HI,TubeBufferGeometry:$8,TubeGeometry:Pp,TwoPassDoubleSide:tN,UVMapping:Wv,Uint16BufferAttribute:Ub,Uint32BufferAttribute:Nb,Uint8BufferAttribute:rz,Uint8ClampedBufferAttribute:iz,Uniform:lt,UniformsGroup:i8,UniformsLib:Ye,UniformsUtils:bu,UnsignedByteType:Ei,UnsignedInt248Type:lu,UnsignedIntType:za,UnsignedShort4444Type:CI,UnsignedShort5551Type:TI,UnsignedShortType:Bb,VSMShadowMap:Ql,Vector2:we,Vector3:V,Vector4:$t,VectorKeyframeTrack:Af,VideoTexture:$H,WebGL1Renderer:rD,WebGL3DRenderTarget:$N,WebGLArrayRenderTarget:jN,WebGLCubeRenderTarget:zb,WebGLMultipleRenderTargets:JN,WebGLRenderTarget:hn,WebGLRenderer:Vb,WebGLUtils:tD,WireframeGeometry:gD,WrapAroundEnding:$h,ZeroCurvatureEnding:ql,ZeroFactor:nI,ZeroSlopeEnding:Zl,ZeroStencilOp:aN,_SRGBAFormat:rv,sRGBEncoding:Lt},Symbol.toStringTag,{value:"Module"}));var Ga={},J8={get exports(){return Ga},set exports(t){Ga=t}},Uu={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Uu.ConcurrentRoot=1;Uu.ContinuousEventPriority=4;Uu.DefaultEventPriority=16;Uu.DiscreteEventPriority=1;Uu.IdleEventPriority=536870912;Uu.LegacyRoot=0;(function(t){t.exports=Uu})(J8);function X8(t){let e;const n=new Set,r=(u,c)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const h=e;e=c?f:Object.assign({},e,f),n.forEach(m=>m(e,h))}},i=()=>e,s=(u,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=c(e);function m(){const g=c(e);if(!f(h,g)){const v=h;u(h=g,v)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:i,subscribe:(u,c,f)=>c||f?s(u,c,f):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(r,i,l),l}const K8=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),oT=K8?R.useEffect:R.useLayoutEffect;function HD(t){const e=typeof t=="function"?X8(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=R.useReducer(y=>y+1,0),o=e.getState(),a=R.useRef(o),l=R.useRef(r),u=R.useRef(i),c=R.useRef(!1),f=R.useRef();f.current===void 0&&(f.current=r(o));let h,m=!1;(a.current!==o||l.current!==r||u.current!==i||c.current)&&(h=r(o),m=!i(f.current,h)),oT(()=>{m&&(f.current=h),a.current=o,l.current=r,u.current=i,c.current=!1});const g=R.useRef(o);oT(()=>{const y=()=>{try{const x=e.getState(),w=l.current(x);u.current(f.current,w)||(a.current=x,f.current=w,s())}catch{c.current=!0,s()}},_=e.subscribe(y);return e.getState()!==g.current&&y(),_},[]);const v=m?h:f.current;return R.useDebugValue(v),v};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var Uw={},Y8={get exports(){return Uw},set exports(t){Uw=t}},ov={},Q8={get exports(){return ov},set exports(t){ov=t}},wx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function q8(){return aT||(aT=1,function(t){function e(F,z){var j=F.length;F.push(z);e:for(;0<j;){var H=j-1>>>1,G=F[H];if(0<i(G,z))F[H]=z,F[j]=G,j=H;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var z=F[0],j=F.pop();if(j!==z){F[0]=j;e:for(var H=0,G=F.length,Z=G>>>1;H<Z;){var re=2*(H+1)-1,se=F[re],Y=re+1,ae=F[Y];if(0>i(se,j))Y<G&&0>i(ae,se)?(F[H]=ae,F[Y]=j,H=Y):(F[H]=se,F[re]=j,H=re);else if(Y<G&&0>i(ae,j))F[H]=ae,F[Y]=j,H=Y;else break e}}return z}function i(F,z){var j=F.sortIndex-z.sortIndex;return j!==0?j:F.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,h=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=F)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(u)}}function b(F){if(v=!1,w(F),!g)if(n(l)!==null)g=!0,Q(E);else{var z=n(u);z!==null&&ie(b,z.startTime-F)}}function E(F,z){g=!1,v&&(v=!1,_(M),M=-1),m=!0;var j=h;try{for(w(z),f=n(l);f!==null&&(!(f.expirationTime>z)||F&&!k());){var H=f.callback;if(typeof H=="function"){f.callback=null,h=f.priorityLevel;var G=H(f.expirationTime<=z);z=t.unstable_now(),typeof G=="function"?f.callback=G:f===n(l)&&r(l),w(z)}else r(l);f=n(l)}if(f!==null)var Z=!0;else{var re=n(u);re!==null&&ie(b,re.startTime-z),Z=!1}return Z}finally{f=null,h=j,m=!1}}var C=!1,P=null,M=-1,B=5,D=-1;function k(){return!(t.unstable_now()-D<B)}function O(){if(P!==null){var F=t.unstable_now();D=F;var z=!0;try{z=P(!0,F)}finally{z?U():(C=!1,P=null)}}else C=!1}var U;if(typeof x=="function")U=function(){x(O)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,$=N.port2;N.port1.onmessage=O,U=function(){$.postMessage(null)}}else U=function(){y(O,0)};function Q(F){P=F,C||(C=!0,U())}function ie(F,z){M=y(function(){F(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,Q(E))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var j=h;h=z;try{return F()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,z){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var j=h;h=F;try{return z()}finally{h=j}},t.unstable_scheduleCallback=function(F,z,j){var H=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?H+j:H):j=H,F){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=j+G,F={id:c++,callback:z,priorityLevel:F,startTime:j,expirationTime:G,sortIndex:-1},j>H?(F.sortIndex=j,e(u,F),n(l)===null&&F===n(u)&&(v?(_(M),M=-1):v=!0,ie(b,j-H))):(F.sortIndex=G,e(l,F),g||m||(g=!0,Q(E))),F},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(F){var z=h;return function(){var j=h;h=z;try{return F.apply(this,arguments)}finally{h=j}}}}(wx)),wx}var lT;function Z8(){return lT||(lT=1,function(t){t.exports=q8()}(Q8)),ov}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eV=function(e){var n={},r=R,i=Z8(),s=Object.assign;function o(d){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+d,S=1;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),E=Symbol.iterator;function C(d){return d===null||typeof d!="object"?null:(d=E&&d[E]||d["@@iterator"],typeof d=="function"?d:null)}function P(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case c:return"Fragment";case u:return"Portal";case h:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case _:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case g:return(d.displayName||"Context")+".Consumer";case m:return(d._context.displayName||"Context")+".Provider";case v:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case x:return p=d.displayName||null,p!==null?p:P(d.type)||"Memo";case w:p=d._payload,d=d._init;try{return P(d(p))}catch{}}return null}function M(d){var p=d.type;switch(d.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=p.render,d=d.displayName||d.name||"",p.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(p);case 8:return p===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function B(d){var p=d,S=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,p.flags&4098&&(S=p.return),d=p.return;while(d)}return p.tag===3?S:null}function D(d){if(B(d)!==d)throw Error(o(188))}function k(d){var p=d.alternate;if(!p){if(p=B(d),p===null)throw Error(o(188));return p!==d?null:d}for(var S=d,A=p;;){var T=S.return;if(T===null)break;var I=T.alternate;if(I===null){if(A=T.return,A!==null){S=A;continue}break}if(T.child===I.child){for(I=T.child;I;){if(I===S)return D(T),d;if(I===A)return D(T),p;I=I.sibling}throw Error(o(188))}if(S.return!==A.return)S=T,A=I;else{for(var X=!1,oe=T.child;oe;){if(oe===S){X=!0,S=T,A=I;break}if(oe===A){X=!0,A=T,S=I;break}oe=oe.sibling}if(!X){for(oe=I.child;oe;){if(oe===S){X=!0,S=I,A=T;break}if(oe===A){X=!0,A=I,S=T;break}oe=oe.sibling}if(!X)throw Error(o(189))}}if(S.alternate!==A)throw Error(o(190))}if(S.tag!==3)throw Error(o(188));return S.stateNode.current===S?d:p}function O(d){return d=k(d),d!==null?U(d):null}function U(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var p=U(d);if(p!==null)return p;d=d.sibling}return null}function N(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var p=N(d);if(p!==null)return p}d=d.sibling}return null}var $=Array.isArray,Q=e.getPublicInstance,ie=e.getRootHostContext,F=e.getChildHostContext,z=e.prepareForCommit,j=e.resetAfterCommit,H=e.createInstance,G=e.appendInitialChild,Z=e.finalizeInitialChildren,re=e.prepareUpdate,se=e.shouldSetTextContent,Y=e.createTextInstance,ae=e.scheduleTimeout,he=e.cancelTimeout,Ce=e.noTimeout,ve=e.isPrimaryRenderer,xe=e.supportsMutation,ne=e.supportsPersistence,le=e.supportsHydration,Pe=e.getInstanceFromNode,ke=e.preparePortalMount,Re=e.getCurrentEventPriority,Ve=e.detachDeletedInstance,Me=e.supportsMicrotasks,Fe=e.scheduleMicrotask,ze=e.supportsTestSelectors,Ee=e.findFiberRoot,W=e.getBoundingRect,L=e.getTextContent,q=e.isHiddenSubtree,fe=e.matchAccessibilityRole,Be=e.setFocusIfFocusable,Ie=e.setupIntersectionObserver,Ne=e.appendChild,Ue=e.appendChildToContainer,_e=e.commitTextUpdate,We=e.commitMount,K=e.commitUpdate,pe=e.insertBefore,Se=e.insertInContainerBefore,Ae=e.removeChild,Ge=e.removeChildFromContainer,et=e.resetTextContent,mt=e.hideInstance,te=e.hideTextInstance,me=e.unhideInstance,Oe=e.unhideTextInstance,Ke=e.clearContainer,nt=e.cloneInstance,Mt=e.createContainerChildSet,Ht=e.appendChildToContainerChildSet,Qt=e.finalizeContainerChildren,Jt=e.replaceContainerChildren,Xt=e.cloneHiddenInstance,Vt=e.cloneHiddenTextInstance,Ot=e.canHydrateInstance,Er=e.canHydrateTextInstance,gr=e.canHydrateSuspenseInstance,qt=e.isSuspenseInstancePending,Cn=e.isSuspenseInstanceFallback,J=e.registerSuspenseInstanceRetry,de=e.getNextHydratableSibling,be=e.getFirstHydratableChild,ce=e.getFirstHydratableChildWithinContainer,Le=e.getFirstHydratableChildWithinSuspenseInstance,rt=e.hydrateInstance,ft=e.hydrateTextInstance,Et=e.hydrateSuspenseInstance,Ct=e.getNextHydratableInstanceAfterSuspenseInstance,Rt=e.commitHydratedContainer,Pt=e.commitHydratedSuspenseInstance,kt=e.clearSuspenseBoundary,mn=e.clearSuspenseBoundaryFromContainer,Xn=e.shouldDeleteUnhydratedTailInstances,Jr=e.didNotMatchHydratedContainerTextInstance,Ci=e.didNotMatchHydratedTextInstance,Je;function vt(d){if(Je===void 0)try{throw Error()}catch(S){var p=S.stack.trim().match(/\n( *(at )?)/);Je=p&&p[1]||""}return`
`+Je+d}var _o=!1;function un(d,p){if(!d||_o)return"";_o=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(je){var A=je}Reflect.construct(d,[],p)}else{try{p.call()}catch(je){A=je}d.call(p.prototype)}else{try{throw Error()}catch(je){A=je}d()}}catch(je){if(je&&A&&typeof je.stack=="string"){for(var T=je.stack.split(`
`),I=A.stack.split(`
`),X=T.length-1,oe=I.length-1;1<=X&&0<=oe&&T[X]!==I[oe];)oe--;for(;1<=X&&0<=oe;X--,oe--)if(T[X]!==I[oe]){if(X!==1||oe!==1)do if(X--,oe--,0>oe||T[X]!==I[oe]){var De=`
`+T[X].replace(" at new "," at ");return d.displayName&&De.includes("<anonymous>")&&(De=De.replace("<anonymous>",d.displayName)),De}while(1<=X&&0<=oe);break}}}finally{_o=!1,Error.prepareStackTrace=S}return(d=d?d.displayName||d.name:"")?vt(d):""}var Ki=Object.prototype.hasOwnProperty,Ks=[],vr=-1;function yr(d){return{current:d}}function xt(d){0>vr||(d.current=Ks[vr],Ks[vr]=null,vr--)}function It(d,p){vr++,Ks[vr]=d.current,d.current=p}var Xr={},Wt=yr(Xr),Hn=yr(!1),Kr=Xr;function Ti(d,p){var S=d.type.contextTypes;if(!S)return Xr;var A=d.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===p)return A.__reactInternalMemoizedMaskedChildContext;var T={},I;for(I in S)T[I]=p[I];return A&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=p,d.__reactInternalMemoizedMaskedChildContext=T),T}function Vn(d){return d=d.childContextTypes,d!=null}function ua(){xt(Hn),xt(Wt)}function Gu(d,p,S){if(Wt.current!==Xr)throw Error(o(168));It(Wt,p),It(Hn,S)}function Hu(d,p,S){var A=d.stateNode;if(p=p.childContextTypes,typeof A.getChildContext!="function")return S;A=A.getChildContext();for(var T in A)if(!(T in p))throw Error(o(108,M(d)||"Unknown",T));return s({},S,A)}function Ys(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Xr,Kr=Wt.current,It(Wt,d),It(Hn,Hn.current),!0}function Xp(d,p,S){var A=d.stateNode;if(!A)throw Error(o(169));S?(d=Hu(d,p,Kr),A.__reactInternalMemoizedMergedChildContext=d,xt(Hn),xt(Wt),It(Wt,d)):xt(Hn),It(Hn,S)}var Cr=Math.clz32?Math.clz32:Kp,Vu=Math.log,hl=Math.LN2;function Kp(d){return d>>>=0,d===0?32:31-(Vu(d)/hl|0)|0}var wo=64,So=4194304;function bo(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function pl(d,p){var S=d.pendingLanes;if(S===0)return 0;var A=0,T=d.suspendedLanes,I=d.pingedLanes,X=S&268435455;if(X!==0){var oe=X&~T;oe!==0?A=bo(oe):(I&=X,I!==0&&(A=bo(I)))}else X=S&~T,X!==0?A=bo(X):I!==0&&(A=bo(I));if(A===0)return 0;if(p!==0&&p!==A&&!(p&T)&&(T=A&-A,I=p&-p,T>=I||T===16&&(I&4194240)!==0))return p;if(A&4&&(A|=S&16),p=d.entangledLanes,p!==0)for(d=d.entanglements,p&=A;0<p;)S=31-Cr(p),T=1<<S,A|=d[S],p&=~T;return A}function Yp(d,p){switch(d){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kf(d,p){for(var S=d.suspendedLanes,A=d.pingedLanes,T=d.expirationTimes,I=d.pendingLanes;0<I;){var X=31-Cr(I),oe=1<<X,De=T[X];De===-1?(!(oe&S)||oe&A)&&(T[X]=Yp(oe,p)):De<=p&&(d.expiredLanes|=oe),I&=~oe}}function Ao(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Wu(d){for(var p=[],S=0;31>S;S++)p.push(d);return p}function Qs(d,p,S){d.pendingLanes|=p,p!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,p=31-Cr(p),d[p]=S}function ca(d,p){var S=d.pendingLanes&~p;d.pendingLanes=p,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=p,d.mutableReadLanes&=p,d.entangledLanes&=p,p=d.entanglements;var A=d.eventTimes;for(d=d.expirationTimes;0<S;){var T=31-Cr(S),I=1<<T;p[T]=0,A[T]=-1,d[T]=-1,S&=~I}}function qs(d,p){var S=d.entangledLanes|=p;for(d=d.entanglements;S;){var A=31-Cr(S),T=1<<A;T&p|d[A]&p&&(d[A]|=p),S&=~T}}var Ft=0;function Yf(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var Mo=i.unstable_scheduleCallback,ju=i.unstable_cancelCallback,Qf=i.unstable_shouldYield,Qp=i.unstable_requestPaint,_n=i.unstable_now,fa=i.unstable_ImmediatePriority,qp=i.unstable_UserBlockingPriority,Yr=i.unstable_NormalPriority,qf=i.unstable_IdlePriority,da=null,Ri=null;function Zf(d){if(Ri&&typeof Ri.onCommitFiberRoot=="function")try{Ri.onCommitFiberRoot(da,d,void 0,(d.current.flags&128)===128)}catch{}}function $u(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var Pi=typeof Object.is=="function"?Object.is:$u,Qr=null,Zs=!1,Yi=!1;function ed(d){Qr===null?Qr=[d]:Qr.push(d)}function td(d){Zs=!0,ed(d)}function hi(){if(!Yi&&Qr!==null){Yi=!0;var d=0,p=Ft;try{var S=Qr;for(Ft=1;d<S.length;d++){var A=S[d];do A=A(!0);while(A!==null)}Qr=null,Zs=!1}catch(T){throw Qr!==null&&(Qr=Qr.slice(d+1)),Mo(fa,hi),T}finally{Ft=p,Yi=!1}}return null}var ml=a.ReactCurrentBatchConfig;function gl(d,p){if(Pi(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var S=Object.keys(d),A=Object.keys(p);if(S.length!==A.length)return!1;for(A=0;A<S.length;A++){var T=S[A];if(!Ki.call(p,T)||!Pi(d[T],p[T]))return!1}return!0}function vl(d){switch(d.tag){case 5:return vt(d.type);case 16:return vt("Lazy");case 13:return vt("Suspense");case 19:return vt("SuspenseList");case 0:case 2:case 15:return d=un(d.type,!1),d;case 11:return d=un(d.type.render,!1),d;case 1:return d=un(d.type,!0),d;default:return""}}function Tr(d,p){if(d&&d.defaultProps){p=s({},p),d=d.defaultProps;for(var S in d)p[S]===void 0&&(p[S]=d[S]);return p}return p}var lr=yr(null),Ju=null,Ss=null,ha=null;function Xu(){ha=Ss=Ju=null}function Zp(d,p,S){ve?(It(lr,p._currentValue),p._currentValue=S):(It(lr,p._currentValue2),p._currentValue2=S)}function eo(d){var p=lr.current;xt(lr),ve?d._currentValue=p:d._currentValue2=p}function Kn(d,p,S){for(;d!==null;){var A=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,A!==null&&(A.childLanes|=p)):A!==null&&(A.childLanes&p)!==p&&(A.childLanes|=p),d===S)break;d=d.return}}function ur(d,p){Ju=d,ha=Ss=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&p&&(Di=!0),d.firstContext=null)}function cn(d){var p=ve?d._currentValue:d._currentValue2;if(ha!==d)if(d={context:d,memoizedValue:p,next:null},Ss===null){if(Ju===null)throw Error(o(308));Ss=d,Ju.dependencies={lanes:0,firstContext:d}}else Ss=Ss.next=d;return p}var er=null,bs=!1;function Sy(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iM(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Eo(d,p){return{eventTime:d,lane:p,tag:0,payload:null,callback:null,next:null}}function pa(d,p){var S=d.updateQueue;S!==null&&(S=S.shared,Yn!==null&&d.mode&1&&!(Dt&2)?(d=S.interleaved,d===null?(p.next=p,er===null?er=[S]:er.push(S)):(p.next=d.next,d.next=p),S.interleaved=p):(d=S.pending,d===null?p.next=p:(p.next=d.next,d.next=p),S.pending=p))}function em(d,p,S){if(p=p.updateQueue,p!==null&&(p=p.shared,(S&4194240)!==0)){var A=p.lanes;A&=d.pendingLanes,S|=A,p.lanes=S,qs(d,S)}}function sM(d,p){var S=d.updateQueue,A=d.alternate;if(A!==null&&(A=A.updateQueue,S===A)){var T=null,I=null;if(S=S.firstBaseUpdate,S!==null){do{var X={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};I===null?T=I=X:I=I.next=X,S=S.next}while(S!==null);I===null?T=I=p:I=I.next=p}else T=I=p;S={baseState:A.baseState,firstBaseUpdate:T,lastBaseUpdate:I,shared:A.shared,effects:A.effects},d.updateQueue=S;return}d=S.lastBaseUpdate,d===null?S.firstBaseUpdate=p:d.next=p,S.lastBaseUpdate=p}function tm(d,p,S,A){var T=d.updateQueue;bs=!1;var I=T.firstBaseUpdate,X=T.lastBaseUpdate,oe=T.shared.pending;if(oe!==null){T.shared.pending=null;var De=oe,je=De.next;De.next=null,X===null?I=je:X.next=je,X=De;var it=d.alternate;it!==null&&(it=it.updateQueue,oe=it.lastBaseUpdate,oe!==X&&(oe===null?it.firstBaseUpdate=je:oe.next=je,it.lastBaseUpdate=De))}if(I!==null){var St=T.baseState;X=0,it=je=De=null,oe=I;do{var dt=oe.lane,fn=oe.eventTime;if((A&dt)===dt){it!==null&&(it=it.next={eventTime:fn,lane:0,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null});e:{var ct=d,Ir=oe;switch(dt=p,fn=S,Ir.tag){case 1:if(ct=Ir.payload,typeof ct=="function"){St=ct.call(fn,St,dt);break e}St=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=Ir.payload,dt=typeof ct=="function"?ct.call(fn,St,dt):ct,dt==null)break e;St=s({},St,dt);break e;case 2:bs=!0}}oe.callback!==null&&oe.lane!==0&&(d.flags|=64,dt=T.effects,dt===null?T.effects=[oe]:dt.push(oe))}else fn={eventTime:fn,lane:dt,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},it===null?(je=it=fn,De=St):it=it.next=fn,X|=dt;if(oe=oe.next,oe===null){if(oe=T.shared.pending,oe===null)break;dt=oe,oe=dt.next,dt.next=null,T.lastBaseUpdate=dt,T.shared.pending=null}}while(1);if(it===null&&(De=St),T.baseState=De,T.firstBaseUpdate=je,T.lastBaseUpdate=it,p=T.shared.interleaved,p!==null){T=p;do X|=T.lane,T=T.next;while(T!==p)}else I===null&&(T.shared.lanes=0);rc|=X,d.lanes=X,d.memoizedState=St}}function oM(d,p,S){if(d=p.effects,p.effects=null,d!==null)for(p=0;p<d.length;p++){var A=d[p],T=A.callback;if(T!==null){if(A.callback=null,A=S,typeof T!="function")throw Error(o(191,T));T.call(A)}}}var aM=new r.Component().refs;function by(d,p,S,A){p=d.memoizedState,S=S(A,p),S=S==null?p:s({},p,S),d.memoizedState=S,d.lanes===0&&(d.updateQueue.baseState=S)}var nm={isMounted:function(d){return(d=d._reactInternals)?B(d)===d:!1},enqueueSetState:function(d,p,S){d=d._reactInternals;var A=Zr(),T=va(d),I=Eo(A,T);I.payload=p,S!=null&&(I.callback=S),pa(d,I),p=ts(d,T,A),p!==null&&em(p,d,T)},enqueueReplaceState:function(d,p,S){d=d._reactInternals;var A=Zr(),T=va(d),I=Eo(A,T);I.tag=1,I.payload=p,S!=null&&(I.callback=S),pa(d,I),p=ts(d,T,A),p!==null&&em(p,d,T)},enqueueForceUpdate:function(d,p){d=d._reactInternals;var S=Zr(),A=va(d),T=Eo(S,A);T.tag=2,p!=null&&(T.callback=p),pa(d,T),p=ts(d,A,S),p!==null&&em(p,d,A)}};function lM(d,p,S,A,T,I,X){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(A,I,X):p.prototype&&p.prototype.isPureReactComponent?!gl(S,A)||!gl(T,I):!0}function uM(d,p,S){var A=!1,T=Xr,I=p.contextType;return typeof I=="object"&&I!==null?I=cn(I):(T=Vn(p)?Kr:Wt.current,A=p.contextTypes,I=(A=A!=null)?Ti(d,T):Xr),p=new p(S,I),d.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=nm,d.stateNode=p,p._reactInternals=d,A&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=T,d.__reactInternalMemoizedMaskedChildContext=I),p}function cM(d,p,S,A){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(S,A),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(S,A),p.state!==d&&nm.enqueueReplaceState(p,p.state,null)}function Ay(d,p,S,A){var T=d.stateNode;T.props=S,T.state=d.memoizedState,T.refs=aM,Sy(d);var I=p.contextType;typeof I=="object"&&I!==null?T.context=cn(I):(I=Vn(p)?Kr:Wt.current,T.context=Ti(d,I)),T.state=d.memoizedState,I=p.getDerivedStateFromProps,typeof I=="function"&&(by(d,p,I,S),T.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(p=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),p!==T.state&&nm.enqueueReplaceState(T,T.state,null),tm(d,S,T,A),T.state=d.memoizedState),typeof T.componentDidMount=="function"&&(d.flags|=4194308)}var Ku=[],Yu=0,rm=null,im=0,Qi=[],qi=0,yl=null,Co=1,To="";function xl(d,p){Ku[Yu++]=im,Ku[Yu++]=rm,rm=d,im=p}function fM(d,p,S){Qi[qi++]=Co,Qi[qi++]=To,Qi[qi++]=yl,yl=d;var A=Co;d=To;var T=32-Cr(A)-1;A&=~(1<<T),S+=1;var I=32-Cr(p)+T;if(30<I){var X=T-T%5;I=(A&(1<<X)-1).toString(32),A>>=X,T-=X,Co=1<<32-Cr(p)+T|S<<T|A,To=I+d}else Co=1<<I|S<<T|A,To=d}function My(d){d.return!==null&&(xl(d,1),fM(d,1,0))}function Ey(d){for(;d===rm;)rm=Ku[--Yu],Ku[Yu]=null,im=Ku[--Yu],Ku[Yu]=null;for(;d===yl;)yl=Qi[--qi],Qi[qi]=null,To=Qi[--qi],Qi[qi]=null,Co=Qi[--qi],Qi[qi]=null}var Bi=null,Ii=null,wn=!1,nd=!1,As=null;function dM(d,p){var S=ns(5,null,null,0);S.elementType="DELETED",S.stateNode=p,S.return=d,p=d.deletions,p===null?(d.deletions=[S],d.flags|=16):p.push(S)}function hM(d,p){switch(d.tag){case 5:return p=Ot(p,d.type,d.pendingProps),p!==null?(d.stateNode=p,Bi=d,Ii=be(p),!0):!1;case 6:return p=Er(p,d.pendingProps),p!==null?(d.stateNode=p,Bi=d,Ii=null,!0):!1;case 13:if(p=gr(p),p!==null){var S=yl!==null?{id:Co,overflow:To}:null;return d.memoizedState={dehydrated:p,treeContext:S,retryLane:1073741824},S=ns(18,null,null,0),S.stateNode=p,S.return=d,d.child=S,Bi=d,Ii=null,!0}return!1;default:return!1}}function Cy(d){return(d.mode&1)!==0&&(d.flags&128)===0}function Ty(d){if(wn){var p=Ii;if(p){var S=p;if(!hM(d,p)){if(Cy(d))throw Error(o(418));p=de(S);var A=Bi;p&&hM(d,p)?dM(A,S):(d.flags=d.flags&-4097|2,wn=!1,Bi=d)}}else{if(Cy(d))throw Error(o(418));d.flags=d.flags&-4097|2,wn=!1,Bi=d}}}function pM(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Bi=d}function rd(d){if(!le||d!==Bi)return!1;if(!wn)return pM(d),wn=!0,!1;if(d.tag!==3&&(d.tag!==5||Xn(d.type)&&!se(d.type,d.memoizedProps))){var p=Ii;if(p){if(Cy(d)){for(d=Ii;d;)d=de(d);throw Error(o(418))}for(;p;)dM(d,p),p=de(p)}}if(pM(d),d.tag===13){if(!le)throw Error(o(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));Ii=Ct(d)}else Ii=Bi?de(d.stateNode):null;return!0}function Qu(){le&&(Ii=Bi=null,nd=wn=!1)}function Ry(d){As===null?As=[d]:As.push(d)}function id(d,p,S){if(d=S.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(o(309));var A=S.stateNode}if(!A)throw Error(o(147,d));var T=A,I=""+d;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===I?p.ref:(p=function(X){var oe=T.refs;oe===aM&&(oe=T.refs={}),X===null?delete oe[I]:oe[I]=X},p._stringRef=I,p)}if(typeof d!="string")throw Error(o(284));if(!S._owner)throw Error(o(290,d))}return d}function sm(d,p){throw d=Object.prototype.toString.call(p),Error(o(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d))}function mM(d){var p=d._init;return p(d._payload)}function gM(d){function p(ye,ue){if(d){var Te=ye.deletions;Te===null?(ye.deletions=[ue],ye.flags|=16):Te.push(ue)}}function S(ye,ue){if(!d)return null;for(;ue!==null;)p(ye,ue),ue=ue.sibling;return null}function A(ye,ue){for(ye=new Map;ue!==null;)ue.key!==null?ye.set(ue.key,ue):ye.set(ue.index,ue),ue=ue.sibling;return ye}function T(ye,ue){return ye=xa(ye,ue),ye.index=0,ye.sibling=null,ye}function I(ye,ue,Te){return ye.index=Te,d?(Te=ye.alternate,Te!==null?(Te=Te.index,Te<ue?(ye.flags|=2,ue):Te):(ye.flags|=2,ue)):(ye.flags|=1048576,ue)}function X(ye){return d&&ye.alternate===null&&(ye.flags|=2),ye}function oe(ye,ue,Te,Ze){return ue===null||ue.tag!==6?(ue=d1(Te,ye.mode,Ze),ue.return=ye,ue):(ue=T(ue,Te),ue.return=ye,ue)}function De(ye,ue,Te,Ze){var ut=Te.type;return ut===c?it(ye,ue,Te.props.children,Ze,Te.key):ue!==null&&(ue.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===w&&mM(ut)===ue.type)?(Ze=T(ue,Te.props),Ze.ref=id(ye,ue,Te),Ze.return=ye,Ze):(Ze=Fm(Te.type,Te.key,Te.props,null,ye.mode,Ze),Ze.ref=id(ye,ue,Te),Ze.return=ye,Ze)}function je(ye,ue,Te,Ze){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==Te.containerInfo||ue.stateNode.implementation!==Te.implementation?(ue=h1(Te,ye.mode,Ze),ue.return=ye,ue):(ue=T(ue,Te.children||[]),ue.return=ye,ue)}function it(ye,ue,Te,Ze,ut){return ue===null||ue.tag!==7?(ue=El(Te,ye.mode,Ze,ut),ue.return=ye,ue):(ue=T(ue,Te),ue.return=ye,ue)}function St(ye,ue,Te){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return ue=d1(""+ue,ye.mode,Te),ue.return=ye,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case l:return Te=Fm(ue.type,ue.key,ue.props,null,ye.mode,Te),Te.ref=id(ye,null,ue),Te.return=ye,Te;case u:return ue=h1(ue,ye.mode,Te),ue.return=ye,ue;case w:var Ze=ue._init;return St(ye,Ze(ue._payload),Te)}if($(ue)||C(ue))return ue=El(ue,ye.mode,Te,null),ue.return=ye,ue;sm(ye,ue)}return null}function dt(ye,ue,Te,Ze){var ut=ue!==null?ue.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return ut!==null?null:oe(ye,ue,""+Te,Ze);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case l:return Te.key===ut?De(ye,ue,Te,Ze):null;case u:return Te.key===ut?je(ye,ue,Te,Ze):null;case w:return ut=Te._init,dt(ye,ue,ut(Te._payload),Ze)}if($(Te)||C(Te))return ut!==null?null:it(ye,ue,Te,Ze,null);sm(ye,Te)}return null}function fn(ye,ue,Te,Ze,ut){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return ye=ye.get(Te)||null,oe(ue,ye,""+Ze,ut);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case l:return ye=ye.get(Ze.key===null?Te:Ze.key)||null,De(ue,ye,Ze,ut);case u:return ye=ye.get(Ze.key===null?Te:Ze.key)||null,je(ue,ye,Ze,ut);case w:var Bt=Ze._init;return fn(ye,ue,Te,Bt(Ze._payload),ut)}if($(Ze)||C(Ze))return ye=ye.get(Te)||null,it(ue,ye,Ze,ut,null);sm(ue,Ze)}return null}function ct(ye,ue,Te,Ze){for(var ut=null,Bt=null,bt=ue,Zt=ue=0,fr=null;bt!==null&&Zt<Te.length;Zt++){bt.index>Zt?(fr=bt,bt=null):fr=bt.sibling;var en=dt(ye,bt,Te[Zt],Ze);if(en===null){bt===null&&(bt=fr);break}d&&bt&&en.alternate===null&&p(ye,bt),ue=I(en,ue,Zt),Bt===null?ut=en:Bt.sibling=en,Bt=en,bt=fr}if(Zt===Te.length)return S(ye,bt),wn&&xl(ye,Zt),ut;if(bt===null){for(;Zt<Te.length;Zt++)bt=St(ye,Te[Zt],Ze),bt!==null&&(ue=I(bt,ue,Zt),Bt===null?ut=bt:Bt.sibling=bt,Bt=bt);return wn&&xl(ye,Zt),ut}for(bt=A(ye,bt);Zt<Te.length;Zt++)fr=fn(bt,ye,Zt,Te[Zt],Ze),fr!==null&&(d&&fr.alternate!==null&&bt.delete(fr.key===null?Zt:fr.key),ue=I(fr,ue,Zt),Bt===null?ut=fr:Bt.sibling=fr,Bt=fr);return d&&bt.forEach(function(_a){return p(ye,_a)}),wn&&xl(ye,Zt),ut}function Ir(ye,ue,Te,Ze){var ut=C(Te);if(typeof ut!="function")throw Error(o(150));if(Te=ut.call(Te),Te==null)throw Error(o(151));for(var Bt=ut=null,bt=ue,Zt=ue=0,fr=null,en=Te.next();bt!==null&&!en.done;Zt++,en=Te.next()){bt.index>Zt?(fr=bt,bt=null):fr=bt.sibling;var _a=dt(ye,bt,en.value,Ze);if(_a===null){bt===null&&(bt=fr);break}d&&bt&&_a.alternate===null&&p(ye,bt),ue=I(_a,ue,Zt),Bt===null?ut=_a:Bt.sibling=_a,Bt=_a,bt=fr}if(en.done)return S(ye,bt),wn&&xl(ye,Zt),ut;if(bt===null){for(;!en.done;Zt++,en=Te.next())en=St(ye,en.value,Ze),en!==null&&(ue=I(en,ue,Zt),Bt===null?ut=en:Bt.sibling=en,Bt=en);return wn&&xl(ye,Zt),ut}for(bt=A(ye,bt);!en.done;Zt++,en=Te.next())en=fn(bt,ye,Zt,en.value,Ze),en!==null&&(d&&en.alternate!==null&&bt.delete(en.key===null?Zt:en.key),ue=I(en,ue,Zt),Bt===null?ut=en:Bt.sibling=en,Bt=en);return d&&bt.forEach(function(SO){return p(ye,SO)}),wn&&xl(ye,Zt),ut}function rs(ye,ue,Te,Ze){if(typeof Te=="object"&&Te!==null&&Te.type===c&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case l:e:{for(var ut=Te.key,Bt=ue;Bt!==null;){if(Bt.key===ut){if(ut=Te.type,ut===c){if(Bt.tag===7){S(ye,Bt.sibling),ue=T(Bt,Te.props.children),ue.return=ye,ye=ue;break e}}else if(Bt.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===w&&mM(ut)===Bt.type){S(ye,Bt.sibling),ue=T(Bt,Te.props),ue.ref=id(ye,Bt,Te),ue.return=ye,ye=ue;break e}S(ye,Bt);break}else p(ye,Bt);Bt=Bt.sibling}Te.type===c?(ue=El(Te.props.children,ye.mode,Ze,Te.key),ue.return=ye,ye=ue):(Ze=Fm(Te.type,Te.key,Te.props,null,ye.mode,Ze),Ze.ref=id(ye,ue,Te),Ze.return=ye,ye=Ze)}return X(ye);case u:e:{for(Bt=Te.key;ue!==null;){if(ue.key===Bt)if(ue.tag===4&&ue.stateNode.containerInfo===Te.containerInfo&&ue.stateNode.implementation===Te.implementation){S(ye,ue.sibling),ue=T(ue,Te.children||[]),ue.return=ye,ye=ue;break e}else{S(ye,ue);break}else p(ye,ue);ue=ue.sibling}ue=h1(Te,ye.mode,Ze),ue.return=ye,ye=ue}return X(ye);case w:return Bt=Te._init,rs(ye,ue,Bt(Te._payload),Ze)}if($(Te))return ct(ye,ue,Te,Ze);if(C(Te))return Ir(ye,ue,Te,Ze);sm(ye,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,ue!==null&&ue.tag===6?(S(ye,ue.sibling),ue=T(ue,Te),ue.return=ye,ye=ue):(S(ye,ue),ue=d1(Te,ye.mode,Ze),ue.return=ye,ye=ue),X(ye)):S(ye,ue)}return rs}var qu=gM(!0),vM=gM(!1),sd={},Zi=yr(sd),od=yr(sd),Zu=yr(sd);function to(d){if(d===sd)throw Error(o(174));return d}function Py(d,p){It(Zu,p),It(od,d),It(Zi,sd),d=ie(p),xt(Zi),It(Zi,d)}function ec(){xt(Zi),xt(od),xt(Zu)}function yM(d){var p=to(Zu.current),S=to(Zi.current);p=F(S,d.type,p),S!==p&&(It(od,d),It(Zi,p))}function By(d){od.current===d&&(xt(Zi),xt(od))}var Tn=yr(0);function om(d){for(var p=d;p!==null;){if(p.tag===13){var S=p.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||qt(S)||Cn(S)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Iy=[];function Dy(){for(var d=0;d<Iy.length;d++){var p=Iy[d];ve?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}Iy.length=0}var am=a.ReactCurrentDispatcher,es=a.ReactCurrentBatchConfig,tc=0,Fn=null,Rr=null,cr=null,lm=!1,ad=!1,ld=0,JF=0;function Pr(){throw Error(o(321))}function Ly(d,p){if(p===null)return!1;for(var S=0;S<p.length&&S<d.length;S++)if(!Pi(d[S],p[S]))return!1;return!0}function ky(d,p,S,A,T,I){if(tc=I,Fn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,am.current=d===null||d.memoizedState===null?QF:qF,d=S(A,T),ad){I=0;do{if(ad=!1,ld=0,25<=I)throw Error(o(301));I+=1,cr=Rr=null,p.updateQueue=null,am.current=ZF,d=S(A,T)}while(ad)}if(am.current=hm,p=Rr!==null&&Rr.next!==null,tc=0,cr=Rr=Fn=null,lm=!1,p)throw Error(o(300));return d}function Fy(){var d=ld!==0;return ld=0,d}function Ro(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cr===null?Fn.memoizedState=cr=d:cr=cr.next=d,cr}function no(){if(Rr===null){var d=Fn.alternate;d=d!==null?d.memoizedState:null}else d=Rr.next;var p=cr===null?Fn.memoizedState:cr.next;if(p!==null)cr=p,Rr=d;else{if(d===null)throw Error(o(310));Rr=d,d={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},cr===null?Fn.memoizedState=cr=d:cr=cr.next=d}return cr}function _l(d,p){return typeof p=="function"?p(d):p}function um(d){var p=no(),S=p.queue;if(S===null)throw Error(o(311));S.lastRenderedReducer=d;var A=Rr,T=A.baseQueue,I=S.pending;if(I!==null){if(T!==null){var X=T.next;T.next=I.next,I.next=X}A.baseQueue=T=I,S.pending=null}if(T!==null){I=T.next,A=A.baseState;var oe=X=null,De=null,je=I;do{var it=je.lane;if((tc&it)===it)De!==null&&(De=De.next={lane:0,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null}),A=je.hasEagerState?je.eagerState:d(A,je.action);else{var St={lane:it,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null};De===null?(oe=De=St,X=A):De=De.next=St,Fn.lanes|=it,rc|=it}je=je.next}while(je!==null&&je!==I);De===null?X=A:De.next=oe,Pi(A,p.memoizedState)||(Di=!0),p.memoizedState=A,p.baseState=X,p.baseQueue=De,S.lastRenderedState=A}if(d=S.interleaved,d!==null){T=d;do I=T.lane,Fn.lanes|=I,rc|=I,T=T.next;while(T!==d)}else T===null&&(S.lanes=0);return[p.memoizedState,S.dispatch]}function cm(d){var p=no(),S=p.queue;if(S===null)throw Error(o(311));S.lastRenderedReducer=d;var A=S.dispatch,T=S.pending,I=p.memoizedState;if(T!==null){S.pending=null;var X=T=T.next;do I=d(I,X.action),X=X.next;while(X!==T);Pi(I,p.memoizedState)||(Di=!0),p.memoizedState=I,p.baseQueue===null&&(p.baseState=I),S.lastRenderedState=I}return[I,A]}function xM(){}function _M(d,p){var S=Fn,A=no(),T=p(),I=!Pi(A.memoizedState,T);if(I&&(A.memoizedState=T,Di=!0),A=A.queue,cd(bM.bind(null,S,A,d),[d]),A.getSnapshot!==p||I||cr!==null&&cr.memoizedState.tag&1){if(S.flags|=2048,ud(9,SM.bind(null,S,A,T,p),void 0,null),Yn===null)throw Error(o(349));tc&30||wM(S,p,T)}return T}function wM(d,p,S){d.flags|=16384,d={getSnapshot:p,value:S},p=Fn.updateQueue,p===null?(p={lastEffect:null,stores:null},Fn.updateQueue=p,p.stores=[d]):(S=p.stores,S===null?p.stores=[d]:S.push(d))}function SM(d,p,S,A){p.value=S,p.getSnapshot=A,AM(p)&&ts(d,1,-1)}function bM(d,p,S){return S(function(){AM(p)&&ts(d,1,-1)})}function AM(d){var p=d.getSnapshot;d=d.value;try{var S=p();return!Pi(d,S)}catch{return!0}}function Oy(d){var p=Ro();return typeof d=="function"&&(d=d()),p.memoizedState=p.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_l,lastRenderedState:d},p.queue=d,d=d.dispatch=YF.bind(null,Fn,d),[p.memoizedState,d]}function ud(d,p,S,A){return d={tag:d,create:p,destroy:S,deps:A,next:null},p=Fn.updateQueue,p===null?(p={lastEffect:null,stores:null},Fn.updateQueue=p,p.lastEffect=d.next=d):(S=p.lastEffect,S===null?p.lastEffect=d.next=d:(A=S.next,S.next=d,d.next=A,p.lastEffect=d)),d}function MM(){return no().memoizedState}function fm(d,p,S,A){var T=Ro();Fn.flags|=d,T.memoizedState=ud(1|p,S,void 0,A===void 0?null:A)}function dm(d,p,S,A){var T=no();A=A===void 0?null:A;var I=void 0;if(Rr!==null){var X=Rr.memoizedState;if(I=X.destroy,A!==null&&Ly(A,X.deps)){T.memoizedState=ud(p,S,I,A);return}}Fn.flags|=d,T.memoizedState=ud(1|p,S,I,A)}function Uy(d,p){return fm(8390656,8,d,p)}function cd(d,p){return dm(2048,8,d,p)}function EM(d,p){return dm(4,2,d,p)}function CM(d,p){return dm(4,4,d,p)}function TM(d,p){if(typeof p=="function")return d=d(),p(d),function(){p(null)};if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function RM(d,p,S){return S=S!=null?S.concat([d]):null,dm(4,4,TM.bind(null,p,d),S)}function Ny(){}function PM(d,p){var S=no();p=p===void 0?null:p;var A=S.memoizedState;return A!==null&&p!==null&&Ly(p,A[1])?A[0]:(S.memoizedState=[d,p],d)}function BM(d,p){var S=no();p=p===void 0?null:p;var A=S.memoizedState;return A!==null&&p!==null&&Ly(p,A[1])?A[0]:(d=d(),S.memoizedState=[d,p],d)}function XF(d,p){var S=Ft;Ft=S!==0&&4>S?S:4,d(!0);var A=es.transition;es.transition={};try{d(!1),p()}finally{Ft=S,es.transition=A}}function IM(){return no().memoizedState}function KF(d,p,S){var A=va(d);S={lane:A,action:S,hasEagerState:!1,eagerState:null,next:null},DM(d)?LM(p,S):(kM(d,p,S),S=Zr(),d=ts(d,A,S),d!==null&&FM(d,p,A))}function YF(d,p,S){var A=va(d),T={lane:A,action:S,hasEagerState:!1,eagerState:null,next:null};if(DM(d))LM(p,T);else{kM(d,p,T);var I=d.alternate;if(d.lanes===0&&(I===null||I.lanes===0)&&(I=p.lastRenderedReducer,I!==null))try{var X=p.lastRenderedState,oe=I(X,S);if(T.hasEagerState=!0,T.eagerState=oe,Pi(oe,X))return}catch{}finally{}S=Zr(),d=ts(d,A,S),d!==null&&FM(d,p,A)}}function DM(d){var p=d.alternate;return d===Fn||p!==null&&p===Fn}function LM(d,p){ad=lm=!0;var S=d.pending;S===null?p.next=p:(p.next=S.next,S.next=p),d.pending=p}function kM(d,p,S){Yn!==null&&d.mode&1&&!(Dt&2)?(d=p.interleaved,d===null?(S.next=S,er===null?er=[p]:er.push(p)):(S.next=d.next,d.next=S),p.interleaved=S):(d=p.pending,d===null?S.next=S:(S.next=d.next,d.next=S),p.pending=S)}function FM(d,p,S){if(S&4194240){var A=p.lanes;A&=d.pendingLanes,S|=A,p.lanes=S,qs(d,S)}}var hm={readContext:cn,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},QF={readContext:cn,useCallback:function(d,p){return Ro().memoizedState=[d,p===void 0?null:p],d},useContext:cn,useEffect:Uy,useImperativeHandle:function(d,p,S){return S=S!=null?S.concat([d]):null,fm(4194308,4,TM.bind(null,p,d),S)},useLayoutEffect:function(d,p){return fm(4194308,4,d,p)},useInsertionEffect:function(d,p){return fm(4,2,d,p)},useMemo:function(d,p){var S=Ro();return p=p===void 0?null:p,d=d(),S.memoizedState=[d,p],d},useReducer:function(d,p,S){var A=Ro();return p=S!==void 0?S(p):p,A.memoizedState=A.baseState=p,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:p},A.queue=d,d=d.dispatch=KF.bind(null,Fn,d),[A.memoizedState,d]},useRef:function(d){var p=Ro();return d={current:d},p.memoizedState=d},useState:Oy,useDebugValue:Ny,useDeferredValue:function(d){var p=Oy(d),S=p[0],A=p[1];return Uy(function(){var T=es.transition;es.transition={};try{A(d)}finally{es.transition=T}},[d]),S},useTransition:function(){var d=Oy(!1),p=d[0];return d=XF.bind(null,d[1]),Ro().memoizedState=d,[p,d]},useMutableSource:function(){},useSyncExternalStore:function(d,p,S){var A=Fn,T=Ro();if(wn){if(S===void 0)throw Error(o(407));S=S()}else{if(S=p(),Yn===null)throw Error(o(349));tc&30||wM(A,p,S)}T.memoizedState=S;var I={value:S,getSnapshot:p};return T.queue=I,Uy(bM.bind(null,A,I,d),[d]),A.flags|=2048,ud(9,SM.bind(null,A,I,S,p),void 0,null),S},useId:function(){var d=Ro(),p=Yn.identifierPrefix;if(wn){var S=To,A=Co;S=(A&~(1<<32-Cr(A)-1)).toString(32)+S,p=":"+p+"R"+S,S=ld++,0<S&&(p+="H"+S.toString(32)),p+=":"}else S=JF++,p=":"+p+"r"+S.toString(32)+":";return d.memoizedState=p},unstable_isNewReconciler:!1},qF={readContext:cn,useCallback:PM,useContext:cn,useEffect:cd,useImperativeHandle:RM,useInsertionEffect:EM,useLayoutEffect:CM,useMemo:BM,useReducer:um,useRef:MM,useState:function(){return um(_l)},useDebugValue:Ny,useDeferredValue:function(d){var p=um(_l),S=p[0],A=p[1];return cd(function(){var T=es.transition;es.transition={};try{A(d)}finally{es.transition=T}},[d]),S},useTransition:function(){var d=um(_l)[0],p=no().memoizedState;return[d,p]},useMutableSource:xM,useSyncExternalStore:_M,useId:IM,unstable_isNewReconciler:!1},ZF={readContext:cn,useCallback:PM,useContext:cn,useEffect:cd,useImperativeHandle:RM,useInsertionEffect:EM,useLayoutEffect:CM,useMemo:BM,useReducer:cm,useRef:MM,useState:function(){return cm(_l)},useDebugValue:Ny,useDeferredValue:function(d){var p=cm(_l),S=p[0],A=p[1];return cd(function(){var T=es.transition;es.transition={};try{A(d)}finally{es.transition=T}},[d]),S},useTransition:function(){var d=cm(_l)[0],p=no().memoizedState;return[d,p]},useMutableSource:xM,useSyncExternalStore:_M,useId:IM,unstable_isNewReconciler:!1};function zy(d,p){try{var S="",A=p;do S+=vl(A),A=A.return;while(A);var T=S}catch(I){T=`
Error generating stack: `+I.message+`
`+I.stack}return{value:d,source:p,stack:T}}function Gy(d,p){try{console.error(p.value)}catch(S){setTimeout(function(){throw S})}}var eO=typeof WeakMap=="function"?WeakMap:Map;function OM(d,p,S){S=Eo(-1,S),S.tag=3,S.payload={element:null};var A=p.value;return S.callback=function(){Rm||(Rm=!0,s1=A),Gy(d,p)},S}function UM(d,p,S){S=Eo(-1,S),S.tag=3;var A=d.type.getDerivedStateFromError;if(typeof A=="function"){var T=p.value;S.payload=function(){return A(T)},S.callback=function(){Gy(d,p)}}var I=d.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(S.callback=function(){Gy(d,p),typeof A!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var X=p.stack;this.componentDidCatch(p.value,{componentStack:X!==null?X:""})}),S}function NM(d,p,S){var A=d.pingCache;if(A===null){A=d.pingCache=new eO;var T=new Set;A.set(p,T)}else T=A.get(p),T===void 0&&(T=new Set,A.set(p,T));T.has(S)||(T.add(S),d=pO.bind(null,d,p,S),p.then(d,d))}function zM(d){do{var p;if((p=d.tag===13)&&(p=d.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return d;d=d.return}while(d!==null);return null}function GM(d,p,S,A,T){return d.mode&1?(d.flags|=65536,d.lanes=T,d):(d===p?d.flags|=65536:(d.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(p=Eo(-1,1),p.tag=2,pa(S,p))),S.lanes|=1),d)}function ro(d){d.flags|=4}function HM(d,p){if(d!==null&&d.child===p.child)return!0;if(p.flags&16)return!1;for(d=p.child;d!==null;){if(d.flags&12854||d.subtreeFlags&12854)return!1;d=d.sibling}return!0}var fd,dd,pm,mm;if(xe)fd=function(d,p){for(var S=p.child;S!==null;){if(S.tag===5||S.tag===6)G(d,S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===p)break;for(;S.sibling===null;){if(S.return===null||S.return===p)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},dd=function(){},pm=function(d,p,S,A,T){if(d=d.memoizedProps,d!==A){var I=p.stateNode,X=to(Zi.current);S=re(I,S,d,A,T,X),(p.updateQueue=S)&&ro(p)}},mm=function(d,p,S,A){S!==A&&ro(p)};else if(ne){fd=function(d,p,S,A){for(var T=p.child;T!==null;){if(T.tag===5){var I=T.stateNode;S&&A&&(I=Xt(I,T.type,T.memoizedProps,T)),G(d,I)}else if(T.tag===6)I=T.stateNode,S&&A&&(I=Vt(I,T.memoizedProps,T)),G(d,I);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)I=T.child,I!==null&&(I.return=T),fd(d,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===p)break;for(;T.sibling===null;){if(T.return===null||T.return===p)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var VM=function(d,p,S,A){for(var T=p.child;T!==null;){if(T.tag===5){var I=T.stateNode;S&&A&&(I=Xt(I,T.type,T.memoizedProps,T)),Ht(d,I)}else if(T.tag===6)I=T.stateNode,S&&A&&(I=Vt(I,T.memoizedProps,T)),Ht(d,I);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)I=T.child,I!==null&&(I.return=T),VM(d,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===p)break;for(;T.sibling===null;){if(T.return===null||T.return===p)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};dd=function(d,p){var S=p.stateNode;if(!HM(d,p)){d=S.containerInfo;var A=Mt(d);VM(A,p,!1,!1),S.pendingChildren=A,ro(p),Qt(d,A)}},pm=function(d,p,S,A,T){var I=d.stateNode,X=d.memoizedProps;if((d=HM(d,p))&&X===A)p.stateNode=I;else{var oe=p.stateNode,De=to(Zi.current),je=null;X!==A&&(je=re(oe,S,X,A,T,De)),d&&je===null?p.stateNode=I:(I=nt(I,je,S,X,A,p,d,oe),Z(I,S,A,T,De)&&ro(p),p.stateNode=I,d?ro(p):fd(I,p,!1,!1))}},mm=function(d,p,S,A){S!==A?(d=to(Zu.current),S=to(Zi.current),p.stateNode=Y(A,d,S,p),ro(p)):p.stateNode=d.stateNode}}else dd=function(){},pm=function(){},mm=function(){};function hd(d,p){if(!wn)switch(d.tailMode){case"hidden":p=d.tail;for(var S=null;p!==null;)p.alternate!==null&&(S=p),p=p.sibling;S===null?d.tail=null:S.sibling=null;break;case"collapsed":S=d.tail;for(var A=null;S!==null;)S.alternate!==null&&(A=S),S=S.sibling;A===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:A.sibling=null}}function Br(d){var p=d.alternate!==null&&d.alternate.child===d.child,S=0,A=0;if(p)for(var T=d.child;T!==null;)S|=T.lanes|T.childLanes,A|=T.subtreeFlags&14680064,A|=T.flags&14680064,T.return=d,T=T.sibling;else for(T=d.child;T!==null;)S|=T.lanes|T.childLanes,A|=T.subtreeFlags,A|=T.flags,T.return=d,T=T.sibling;return d.subtreeFlags|=A,d.childLanes=S,p}function tO(d,p,S){var A=p.pendingProps;switch(Ey(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(p),null;case 1:return Vn(p.type)&&ua(),Br(p),null;case 3:return A=p.stateNode,ec(),xt(Hn),xt(Wt),Dy(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(d===null||d.child===null)&&(rd(p)?ro(p):d===null||d.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,As!==null&&(l1(As),As=null))),dd(d,p),Br(p),null;case 5:By(p),S=to(Zu.current);var T=p.type;if(d!==null&&p.stateNode!=null)pm(d,p,T,A,S),d.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!A){if(p.stateNode===null)throw Error(o(166));return Br(p),null}if(d=to(Zi.current),rd(p)){if(!le)throw Error(o(175));d=rt(p.stateNode,p.type,p.memoizedProps,S,d,p,!nd),p.updateQueue=d,d!==null&&ro(p)}else{var I=H(T,A,S,d,p);fd(I,p,!1,!1),p.stateNode=I,Z(I,T,A,S,d)&&ro(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Br(p),null;case 6:if(d&&p.stateNode!=null)mm(d,p,d.memoizedProps,A);else{if(typeof A!="string"&&p.stateNode===null)throw Error(o(166));if(d=to(Zu.current),S=to(Zi.current),rd(p)){if(!le)throw Error(o(176));if(d=p.stateNode,A=p.memoizedProps,(S=ft(d,A,p,!nd))&&(T=Bi,T!==null))switch(I=(T.mode&1)!==0,T.tag){case 3:Jr(T.stateNode.containerInfo,d,A,I);break;case 5:Ci(T.type,T.memoizedProps,T.stateNode,d,A,I)}S&&ro(p)}else p.stateNode=Y(A,d,S,p)}return Br(p),null;case 13:if(xt(Tn),A=p.memoizedState,wn&&Ii!==null&&p.mode&1&&!(p.flags&128)){for(d=Ii;d;)d=de(d);return Qu(),p.flags|=98560,p}if(A!==null&&A.dehydrated!==null){if(A=rd(p),d===null){if(!A)throw Error(o(318));if(!le)throw Error(o(344));if(d=p.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));Et(d,p)}else Qu(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return Br(p),null}return As!==null&&(l1(As),As=null),p.flags&128?(p.lanes=S,p):(A=A!==null,S=!1,d===null?rd(p):S=d.memoizedState!==null,A&&!S&&(p.child.flags|=8192,p.mode&1&&(d===null||Tn.current&1?tr===0&&(tr=3):c1())),p.updateQueue!==null&&(p.flags|=4),Br(p),null);case 4:return ec(),dd(d,p),d===null&&ke(p.stateNode.containerInfo),Br(p),null;case 10:return eo(p.type._context),Br(p),null;case 17:return Vn(p.type)&&ua(),Br(p),null;case 19:if(xt(Tn),T=p.memoizedState,T===null)return Br(p),null;if(A=(p.flags&128)!==0,I=T.rendering,I===null)if(A)hd(T,!1);else{if(tr!==0||d!==null&&d.flags&128)for(d=p.child;d!==null;){if(I=om(d),I!==null){for(p.flags|=128,hd(T,!1),d=I.updateQueue,d!==null&&(p.updateQueue=d,p.flags|=4),p.subtreeFlags=0,d=S,A=p.child;A!==null;)S=A,T=d,S.flags&=14680066,I=S.alternate,I===null?(S.childLanes=0,S.lanes=T,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=I.childLanes,S.lanes=I.lanes,S.child=I.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=I.memoizedProps,S.memoizedState=I.memoizedState,S.updateQueue=I.updateQueue,S.type=I.type,T=I.dependencies,S.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),A=A.sibling;return It(Tn,Tn.current&1|2),p.child}d=d.sibling}T.tail!==null&&_n()>i1&&(p.flags|=128,A=!0,hd(T,!1),p.lanes=4194304)}else{if(!A)if(d=om(I),d!==null){if(p.flags|=128,A=!0,d=d.updateQueue,d!==null&&(p.updateQueue=d,p.flags|=4),hd(T,!0),T.tail===null&&T.tailMode==="hidden"&&!I.alternate&&!wn)return Br(p),null}else 2*_n()-T.renderingStartTime>i1&&S!==1073741824&&(p.flags|=128,A=!0,hd(T,!1),p.lanes=4194304);T.isBackwards?(I.sibling=p.child,p.child=I):(d=T.last,d!==null?d.sibling=I:p.child=I,T.last=I)}return T.tail!==null?(p=T.tail,T.rendering=p,T.tail=p.sibling,T.renderingStartTime=_n(),p.sibling=null,d=Tn.current,It(Tn,A?d&1|2:d&1),p):(Br(p),null);case 22:case 23:return u1(),A=p.memoizedState!==null,d!==null&&d.memoizedState!==null!==A&&(p.flags|=8192),A&&p.mode&1?Li&1073741824&&(Br(p),xe&&p.subtreeFlags&6&&(p.flags|=8192)):Br(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var nO=a.ReactCurrentOwner,Di=!1;function qr(d,p,S,A){p.child=d===null?vM(p,null,S,A):qu(p,d.child,S,A)}function WM(d,p,S,A,T){S=S.render;var I=p.ref;return ur(p,T),A=ky(d,p,S,A,I,T),S=Fy(),d!==null&&!Di?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~T,Po(d,p,T)):(wn&&S&&My(p),p.flags|=1,qr(d,p,A,T),p.child)}function jM(d,p,S,A,T){if(d===null){var I=S.type;return typeof I=="function"&&!f1(I)&&I.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(p.tag=15,p.type=I,$M(d,p,I,A,T)):(d=Fm(S.type,null,A,p,p.mode,T),d.ref=p.ref,d.return=p,p.child=d)}if(I=d.child,!(d.lanes&T)){var X=I.memoizedProps;if(S=S.compare,S=S!==null?S:gl,S(X,A)&&d.ref===p.ref)return Po(d,p,T)}return p.flags|=1,d=xa(I,A),d.ref=p.ref,d.return=p,p.child=d}function $M(d,p,S,A,T){if(d!==null&&gl(d.memoizedProps,A)&&d.ref===p.ref)if(Di=!1,(d.lanes&T)!==0)d.flags&131072&&(Di=!0);else return p.lanes=d.lanes,Po(d,p,T);return Hy(d,p,S,A,T)}function JM(d,p,S){var A=p.pendingProps,T=A.children,I=d!==null?d.memoizedState:null;if(A.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},It(nc,Li),Li|=S;else if(S&1073741824)p.memoizedState={baseLanes:0,cachePool:null},A=I!==null?I.baseLanes:S,It(nc,Li),Li|=A;else return d=I!==null?I.baseLanes|S:S,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:d,cachePool:null},p.updateQueue=null,It(nc,Li),Li|=d,null;else I!==null?(A=I.baseLanes|S,p.memoizedState=null):A=S,It(nc,Li),Li|=A;return qr(d,p,T,S),p.child}function XM(d,p){var S=p.ref;(d===null&&S!==null||d!==null&&d.ref!==S)&&(p.flags|=512,p.flags|=2097152)}function Hy(d,p,S,A,T){var I=Vn(S)?Kr:Wt.current;return I=Ti(p,I),ur(p,T),S=ky(d,p,S,A,I,T),A=Fy(),d!==null&&!Di?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~T,Po(d,p,T)):(wn&&A&&My(p),p.flags|=1,qr(d,p,S,T),p.child)}function KM(d,p,S,A,T){if(Vn(S)){var I=!0;Ys(p)}else I=!1;if(ur(p,T),p.stateNode===null)d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),uM(p,S,A),Ay(p,S,A,T),A=!0;else if(d===null){var X=p.stateNode,oe=p.memoizedProps;X.props=oe;var De=X.context,je=S.contextType;typeof je=="object"&&je!==null?je=cn(je):(je=Vn(S)?Kr:Wt.current,je=Ti(p,je));var it=S.getDerivedStateFromProps,St=typeof it=="function"||typeof X.getSnapshotBeforeUpdate=="function";St||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(oe!==A||De!==je)&&cM(p,X,A,je),bs=!1;var dt=p.memoizedState;X.state=dt,tm(p,A,X,T),De=p.memoizedState,oe!==A||dt!==De||Hn.current||bs?(typeof it=="function"&&(by(p,S,it,A),De=p.memoizedState),(oe=bs||lM(p,S,oe,A,dt,De,je))?(St||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(p.flags|=4194308)):(typeof X.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=A,p.memoizedState=De),X.props=A,X.state=De,X.context=je,A=oe):(typeof X.componentDidMount=="function"&&(p.flags|=4194308),A=!1)}else{X=p.stateNode,iM(d,p),oe=p.memoizedProps,je=p.type===p.elementType?oe:Tr(p.type,oe),X.props=je,St=p.pendingProps,dt=X.context,De=S.contextType,typeof De=="object"&&De!==null?De=cn(De):(De=Vn(S)?Kr:Wt.current,De=Ti(p,De));var fn=S.getDerivedStateFromProps;(it=typeof fn=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(oe!==St||dt!==De)&&cM(p,X,A,De),bs=!1,dt=p.memoizedState,X.state=dt,tm(p,A,X,T);var ct=p.memoizedState;oe!==St||dt!==ct||Hn.current||bs?(typeof fn=="function"&&(by(p,S,fn,A),ct=p.memoizedState),(je=bs||lM(p,S,je,A,dt,ct,De)||!1)?(it||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(A,ct,De),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(A,ct,De)),typeof X.componentDidUpdate=="function"&&(p.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof X.componentDidUpdate!="function"||oe===d.memoizedProps&&dt===d.memoizedState||(p.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||oe===d.memoizedProps&&dt===d.memoizedState||(p.flags|=1024),p.memoizedProps=A,p.memoizedState=ct),X.props=A,X.state=ct,X.context=De,A=je):(typeof X.componentDidUpdate!="function"||oe===d.memoizedProps&&dt===d.memoizedState||(p.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||oe===d.memoizedProps&&dt===d.memoizedState||(p.flags|=1024),A=!1)}return Vy(d,p,S,A,I,T)}function Vy(d,p,S,A,T,I){XM(d,p);var X=(p.flags&128)!==0;if(!A&&!X)return T&&Xp(p,S,!1),Po(d,p,I);A=p.stateNode,nO.current=p;var oe=X&&typeof S.getDerivedStateFromError!="function"?null:A.render();return p.flags|=1,d!==null&&X?(p.child=qu(p,d.child,null,I),p.child=qu(p,null,oe,I)):qr(d,p,oe,I),p.memoizedState=A.state,T&&Xp(p,S,!0),p.child}function YM(d){var p=d.stateNode;p.pendingContext?Gu(d,p.pendingContext,p.pendingContext!==p.context):p.context&&Gu(d,p.context,!1),Py(d,p.containerInfo)}function QM(d,p,S,A,T){return Qu(),Ry(T),p.flags|=256,qr(d,p,S,A),p.child}var gm={dehydrated:null,treeContext:null,retryLane:0};function vm(d){return{baseLanes:d,cachePool:null}}function qM(d,p,S){var A=p.pendingProps,T=Tn.current,I=!1,X=(p.flags&128)!==0,oe;if((oe=X)||(oe=d!==null&&d.memoizedState===null?!1:(T&2)!==0),oe?(I=!0,p.flags&=-129):(d===null||d.memoizedState!==null)&&(T|=1),It(Tn,T&1),d===null)return Ty(p),d=p.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(p.mode&1?Cn(d)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(T=A.children,d=A.fallback,I?(A=p.mode,I=p.child,T={mode:"hidden",children:T},!(A&1)&&I!==null?(I.childLanes=0,I.pendingProps=T):I=Om(T,A,0,null),d=El(d,A,S,null),I.return=p,d.return=p,I.sibling=d,p.child=I,p.child.memoizedState=vm(S),p.memoizedState=gm,d):Wy(p,T));if(T=d.memoizedState,T!==null){if(oe=T.dehydrated,oe!==null){if(X)return p.flags&256?(p.flags&=-257,ym(d,p,S,Error(o(422)))):p.memoizedState!==null?(p.child=d.child,p.flags|=128,null):(I=A.fallback,T=p.mode,A=Om({mode:"visible",children:A.children},T,0,null),I=El(I,T,S,null),I.flags|=2,A.return=p,I.return=p,A.sibling=I,p.child=A,p.mode&1&&qu(p,d.child,null,S),p.child.memoizedState=vm(S),p.memoizedState=gm,I);if(!(p.mode&1))p=ym(d,p,S,null);else if(Cn(oe))p=ym(d,p,S,Error(o(419)));else if(A=(S&d.childLanes)!==0,Di||A){if(A=Yn,A!==null){switch(S&-S){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}A=I&(A.suspendedLanes|S)?0:I,A!==0&&A!==T.retryLane&&(T.retryLane=A,ts(d,A,-1))}c1(),p=ym(d,p,S,Error(o(421)))}else qt(oe)?(p.flags|=128,p.child=d.child,p=mO.bind(null,d),J(oe,p),p=null):(S=T.treeContext,le&&(Ii=Le(oe),Bi=p,wn=!0,As=null,nd=!1,S!==null&&(Qi[qi++]=Co,Qi[qi++]=To,Qi[qi++]=yl,Co=S.id,To=S.overflow,yl=p)),p=Wy(p,p.pendingProps.children),p.flags|=4096);return p}return I?(A=e2(d,p,A.children,A.fallback,S),I=p.child,T=d.child.memoizedState,I.memoizedState=T===null?vm(S):{baseLanes:T.baseLanes|S,cachePool:null},I.childLanes=d.childLanes&~S,p.memoizedState=gm,A):(S=ZM(d,p,A.children,S),p.memoizedState=null,S)}return I?(A=e2(d,p,A.children,A.fallback,S),I=p.child,T=d.child.memoizedState,I.memoizedState=T===null?vm(S):{baseLanes:T.baseLanes|S,cachePool:null},I.childLanes=d.childLanes&~S,p.memoizedState=gm,A):(S=ZM(d,p,A.children,S),p.memoizedState=null,S)}function Wy(d,p){return p=Om({mode:"visible",children:p},d.mode,0,null),p.return=d,d.child=p}function ZM(d,p,S,A){var T=d.child;return d=T.sibling,S=xa(T,{mode:"visible",children:S}),!(p.mode&1)&&(S.lanes=A),S.return=p,S.sibling=null,d!==null&&(A=p.deletions,A===null?(p.deletions=[d],p.flags|=16):A.push(d)),p.child=S}function e2(d,p,S,A,T){var I=p.mode;d=d.child;var X=d.sibling,oe={mode:"hidden",children:S};return!(I&1)&&p.child!==d?(S=p.child,S.childLanes=0,S.pendingProps=oe,p.deletions=null):(S=xa(d,oe),S.subtreeFlags=d.subtreeFlags&14680064),X!==null?A=xa(X,A):(A=El(A,I,T,null),A.flags|=2),A.return=p,S.return=p,S.sibling=A,p.child=S,A}function ym(d,p,S,A){return A!==null&&Ry(A),qu(p,d.child,null,S),d=Wy(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function t2(d,p,S){d.lanes|=p;var A=d.alternate;A!==null&&(A.lanes|=p),Kn(d.return,p,S)}function jy(d,p,S,A,T){var I=d.memoizedState;I===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:A,tail:S,tailMode:T}:(I.isBackwards=p,I.rendering=null,I.renderingStartTime=0,I.last=A,I.tail=S,I.tailMode=T)}function n2(d,p,S){var A=p.pendingProps,T=A.revealOrder,I=A.tail;if(qr(d,p,A.children,S),A=Tn.current,A&2)A=A&1|2,p.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&t2(d,S,p);else if(d.tag===19)t2(d,S,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}A&=1}if(It(Tn,A),!(p.mode&1))p.memoizedState=null;else switch(T){case"forwards":for(S=p.child,T=null;S!==null;)d=S.alternate,d!==null&&om(d)===null&&(T=S),S=S.sibling;S=T,S===null?(T=p.child,p.child=null):(T=S.sibling,S.sibling=null),jy(p,!1,T,S,I);break;case"backwards":for(S=null,T=p.child,p.child=null;T!==null;){if(d=T.alternate,d!==null&&om(d)===null){p.child=T;break}d=T.sibling,T.sibling=S,S=T,T=d}jy(p,!0,S,null,I);break;case"together":jy(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Po(d,p,S){if(d!==null&&(p.dependencies=d.dependencies),rc|=p.lanes,!(S&p.childLanes))return null;if(d!==null&&p.child!==d.child)throw Error(o(153));if(p.child!==null){for(d=p.child,S=xa(d,d.pendingProps),p.child=S,S.return=p;d.sibling!==null;)d=d.sibling,S=S.sibling=xa(d,d.pendingProps),S.return=p;S.sibling=null}return p.child}function rO(d,p,S){switch(p.tag){case 3:YM(p),Qu();break;case 5:yM(p);break;case 1:Vn(p.type)&&Ys(p);break;case 4:Py(p,p.stateNode.containerInfo);break;case 10:Zp(p,p.type._context,p.memoizedProps.value);break;case 13:var A=p.memoizedState;if(A!==null)return A.dehydrated!==null?(It(Tn,Tn.current&1),p.flags|=128,null):S&p.child.childLanes?qM(d,p,S):(It(Tn,Tn.current&1),d=Po(d,p,S),d!==null?d.sibling:null);It(Tn,Tn.current&1);break;case 19:if(A=(S&p.childLanes)!==0,d.flags&128){if(A)return n2(d,p,S);p.flags|=128}var T=p.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),It(Tn,Tn.current),A)break;return null;case 22:case 23:return p.lanes=0,JM(d,p,S)}return Po(d,p,S)}function iO(d,p){switch(Ey(p),p.tag){case 1:return Vn(p.type)&&ua(),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return ec(),xt(Hn),xt(Wt),Dy(),d=p.flags,d&65536&&!(d&128)?(p.flags=d&-65537|128,p):null;case 5:return By(p),null;case 13:if(xt(Tn),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(o(340));Qu()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return xt(Tn),null;case 4:return ec(),null;case 10:return eo(p.type._context),null;case 22:case 23:return u1(),null;case 24:return null;default:return null}}var xm=!1,wl=!1,sO=typeof WeakSet=="function"?WeakSet:Set,qe=null;function _m(d,p){var S=d.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(A){gi(d,p,A)}else S.current=null}function $y(d,p,S){try{S()}catch(A){gi(d,p,A)}}var r2=!1;function oO(d,p){for(z(d.containerInfo),qe=p;qe!==null;)if(d=qe,p=d.child,(d.subtreeFlags&1028)!==0&&p!==null)p.return=d,qe=p;else for(;qe!==null;){d=qe;try{var S=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var A=S.memoizedProps,T=S.memoizedState,I=d.stateNode,X=I.getSnapshotBeforeUpdate(d.elementType===d.type?A:Tr(d.type,A),T);I.__reactInternalSnapshotBeforeUpdate=X}break;case 3:xe&&Ke(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(oe){gi(d,d.return,oe)}if(p=d.sibling,p!==null){p.return=d.return,qe=p;break}qe=d.return}return S=r2,r2=!1,S}function Sl(d,p,S){var A=p.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var T=A=A.next;do{if((T.tag&d)===d){var I=T.destroy;T.destroy=void 0,I!==void 0&&$y(p,S,I)}T=T.next}while(T!==A)}}function pd(d,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var S=p=p.next;do{if((S.tag&d)===d){var A=S.create;S.destroy=A()}S=S.next}while(S!==p)}}function Jy(d){var p=d.ref;if(p!==null){var S=d.stateNode;switch(d.tag){case 5:d=Q(S);break;default:d=S}typeof p=="function"?p(d):p.current=d}}function i2(d,p,S){if(Ri&&typeof Ri.onCommitFiberUnmount=="function")try{Ri.onCommitFiberUnmount(da,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(d=p.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var A=d=d.next;do{var T=A,I=T.destroy;T=T.tag,I!==void 0&&(T&2||T&4)&&$y(p,S,I),A=A.next}while(A!==d)}break;case 1:if(_m(p,S),d=p.stateNode,typeof d.componentWillUnmount=="function")try{d.props=p.memoizedProps,d.state=p.memoizedState,d.componentWillUnmount()}catch(X){gi(p,S,X)}break;case 5:_m(p,S);break;case 4:xe?c2(d,p,S):ne&&ne&&(p=p.stateNode.containerInfo,S=Mt(p),Jt(p,S))}}function s2(d,p,S){for(var A=p;;)if(i2(d,A,S),A.child===null||xe&&A.tag===4){if(A===p)break;for(;A.sibling===null;){if(A.return===null||A.return===p)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function o2(d){var p=d.alternate;p!==null&&(d.alternate=null,o2(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&Ve(p)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function a2(d){return d.tag===5||d.tag===3||d.tag===4}function l2(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||a2(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function u2(d){if(xe){e:{for(var p=d.return;p!==null;){if(a2(p))break e;p=p.return}throw Error(o(160))}var S=p;switch(S.tag){case 5:p=S.stateNode,S.flags&32&&(et(p),S.flags&=-33),S=l2(d),Ky(d,S,p);break;case 3:case 4:p=S.stateNode.containerInfo,S=l2(d),Xy(d,S,p);break;default:throw Error(o(161))}}}function Xy(d,p,S){var A=d.tag;if(A===5||A===6)d=d.stateNode,p?Se(S,d,p):Ue(S,d);else if(A!==4&&(d=d.child,d!==null))for(Xy(d,p,S),d=d.sibling;d!==null;)Xy(d,p,S),d=d.sibling}function Ky(d,p,S){var A=d.tag;if(A===5||A===6)d=d.stateNode,p?pe(S,d,p):Ne(S,d);else if(A!==4&&(d=d.child,d!==null))for(Ky(d,p,S),d=d.sibling;d!==null;)Ky(d,p,S),d=d.sibling}function c2(d,p,S){for(var A=p,T=!1,I,X;;){if(!T){T=A.return;e:for(;;){if(T===null)throw Error(o(160));switch(I=T.stateNode,T.tag){case 5:X=!1;break e;case 3:I=I.containerInfo,X=!0;break e;case 4:I=I.containerInfo,X=!0;break e}T=T.return}T=!0}if(A.tag===5||A.tag===6)s2(d,A,S),X?Ge(I,A.stateNode):Ae(I,A.stateNode);else if(A.tag===18)X?mn(I,A.stateNode):kt(I,A.stateNode);else if(A.tag===4){if(A.child!==null){I=A.stateNode.containerInfo,X=!0,A.child.return=A,A=A.child;continue}}else if(i2(d,A,S),A.child!==null){A.child.return=A,A=A.child;continue}if(A===p)break;for(;A.sibling===null;){if(A.return===null||A.return===p)return;A=A.return,A.tag===4&&(T=!1)}A.sibling.return=A.return,A=A.sibling}}function Yy(d,p){if(xe){switch(p.tag){case 0:case 11:case 14:case 15:Sl(3,p,p.return),pd(3,p),Sl(5,p,p.return);return;case 1:return;case 5:var S=p.stateNode;if(S!=null){var A=p.memoizedProps;d=d!==null?d.memoizedProps:A;var T=p.type,I=p.updateQueue;p.updateQueue=null,I!==null&&K(S,I,T,d,A,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));S=p.memoizedProps,_e(p.stateNode,d!==null?d.memoizedProps:S,S);return;case 3:le&&d!==null&&d.memoizedState.isDehydrated&&Rt(p.stateNode.containerInfo);return;case 12:return;case 13:wm(p);return;case 19:wm(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:Sl(3,p,p.return),pd(3,p),Sl(5,p,p.return);return;case 12:return;case 13:wm(p);return;case 19:wm(p);return;case 3:le&&d!==null&&d.memoizedState.isDehydrated&&Rt(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(ne){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,Jt(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function wm(d){var p=d.updateQueue;if(p!==null){d.updateQueue=null;var S=d.stateNode;S===null&&(S=d.stateNode=new sO),p.forEach(function(A){var T=gO.bind(null,d,A);S.has(A)||(S.add(A),A.then(T,T))})}}function aO(d,p){for(qe=p;qe!==null;){p=qe;var S=p.deletions;if(S!==null)for(var A=0;A<S.length;A++){var T=S[A];try{var I=d;xe?c2(I,T,p):s2(I,T,p);var X=T.alternate;X!==null&&(X.return=null),T.return=null}catch(ut){gi(T,p,ut)}}if(S=p.child,p.subtreeFlags&12854&&S!==null)S.return=p,qe=S;else for(;qe!==null;){p=qe;try{var oe=p.flags;if(oe&32&&xe&&et(p.stateNode),oe&512){var De=p.alternate;if(De!==null){var je=De.ref;je!==null&&(typeof je=="function"?je(null):je.current=null)}}if(oe&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var it=p.alternate;(it===null||it.memoizedState===null)&&(r1=_n())}break;case 22:var St=p.memoizedState!==null,dt=p.alternate,fn=dt!==null&&dt.memoizedState!==null;if(S=p,xe){e:if(A=S,T=St,I=null,xe)for(var ct=A;;){if(ct.tag===5){if(I===null){I=ct;var Ir=ct.stateNode;T?mt(Ir):me(ct.stateNode,ct.memoizedProps)}}else if(ct.tag===6){if(I===null){var rs=ct.stateNode;T?te(rs):Oe(rs,ct.memoizedProps)}}else if((ct.tag!==22&&ct.tag!==23||ct.memoizedState===null||ct===A)&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===A)break;for(;ct.sibling===null;){if(ct.return===null||ct.return===A)break e;I===ct&&(I=null),ct=ct.return}I===ct&&(I=null),ct.sibling.return=ct.return,ct=ct.sibling}}if(St&&!fn&&S.mode&1){qe=S;for(var ye=S.child;ye!==null;){for(S=qe=ye;qe!==null;){A=qe;var ue=A.child;switch(A.tag){case 0:case 11:case 14:case 15:Sl(4,A,A.return);break;case 1:_m(A,A.return);var Te=A.stateNode;if(typeof Te.componentWillUnmount=="function"){var Ze=A.return;try{Te.props=A.memoizedProps,Te.state=A.memoizedState,Te.componentWillUnmount()}catch(ut){gi(A,Ze,ut)}}break;case 5:_m(A,A.return);break;case 22:if(A.memoizedState!==null){h2(S);continue}}ue!==null?(ue.return=A,qe=ue):h2(S)}ye=ye.sibling}}}switch(oe&4102){case 2:u2(p),p.flags&=-3;break;case 6:u2(p),p.flags&=-3,Yy(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,Yy(p.alternate,p);break;case 4:Yy(p.alternate,p)}}catch(ut){gi(p,p.return,ut)}if(S=p.sibling,S!==null){S.return=p.return,qe=S;break}qe=p.return}}}function lO(d,p,S){qe=d,f2(d)}function f2(d,p,S){for(var A=(d.mode&1)!==0;qe!==null;){var T=qe,I=T.child;if(T.tag===22&&A){var X=T.memoizedState!==null||xm;if(!X){var oe=T.alternate,De=oe!==null&&oe.memoizedState!==null||wl;oe=xm;var je=wl;if(xm=X,(wl=De)&&!je)for(qe=T;qe!==null;)X=qe,De=X.child,X.tag===22&&X.memoizedState!==null?p2(T):De!==null?(De.return=X,qe=De):p2(T);for(;I!==null;)qe=I,f2(I),I=I.sibling;qe=T,xm=oe,wl=je}d2(d)}else T.subtreeFlags&8772&&I!==null?(I.return=T,qe=I):d2(d)}}function d2(d){for(;qe!==null;){var p=qe;if(p.flags&8772){var S=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:wl||pd(5,p);break;case 1:var A=p.stateNode;if(p.flags&4&&!wl)if(S===null)A.componentDidMount();else{var T=p.elementType===p.type?S.memoizedProps:Tr(p.type,S.memoizedProps);A.componentDidUpdate(T,S.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var I=p.updateQueue;I!==null&&oM(p,I,A);break;case 3:var X=p.updateQueue;if(X!==null){if(S=null,p.child!==null)switch(p.child.tag){case 5:S=Q(p.child.stateNode);break;case 1:S=p.child.stateNode}oM(p,X,S)}break;case 5:var oe=p.stateNode;S===null&&p.flags&4&&We(oe,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(le&&p.memoizedState===null){var De=p.alternate;if(De!==null){var je=De.memoizedState;if(je!==null){var it=je.dehydrated;it!==null&&Pt(it)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}wl||p.flags&512&&Jy(p)}catch(St){gi(p,p.return,St)}}if(p===d){qe=null;break}if(S=p.sibling,S!==null){S.return=p.return,qe=S;break}qe=p.return}}function h2(d){for(;qe!==null;){var p=qe;if(p===d){qe=null;break}var S=p.sibling;if(S!==null){S.return=p.return,qe=S;break}qe=p.return}}function p2(d){for(;qe!==null;){var p=qe;try{switch(p.tag){case 0:case 11:case 15:var S=p.return;try{pd(4,p)}catch(De){gi(p,S,De)}break;case 1:var A=p.stateNode;if(typeof A.componentDidMount=="function"){var T=p.return;try{A.componentDidMount()}catch(De){gi(p,T,De)}}var I=p.return;try{Jy(p)}catch(De){gi(p,I,De)}break;case 5:var X=p.return;try{Jy(p)}catch(De){gi(p,X,De)}}}catch(De){gi(p,p.return,De)}if(p===d){qe=null;break}var oe=p.sibling;if(oe!==null){oe.return=p.return,qe=oe;break}qe=p.return}}var Sm=0,bm=1,Am=2,Mm=3,Em=4;if(typeof Symbol=="function"&&Symbol.for){var md=Symbol.for;Sm=md("selector.component"),bm=md("selector.has_pseudo_class"),Am=md("selector.role"),Mm=md("selector.test_id"),Em=md("selector.text")}function Qy(d){var p=Pe(d);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(d=Ee(d),d===null)throw Error(o(362));return d.stateNode.current}function qy(d,p){switch(p.$$typeof){case Sm:if(d.type===p.value)return!0;break;case bm:e:{p=p.value,d=[d,0];for(var S=0;S<d.length;){var A=d[S++],T=d[S++],I=p[T];if(A.tag!==5||!q(A)){for(;I!=null&&qy(A,I);)T++,I=p[T];if(T===p.length){p=!0;break e}else for(A=A.child;A!==null;)d.push(A,T),A=A.sibling}}p=!1}return p;case Am:if(d.tag===5&&fe(d.stateNode,p.value))return!0;break;case Em:if((d.tag===5||d.tag===6)&&(d=L(d),d!==null&&0<=d.indexOf(p.value)))return!0;break;case Mm:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Zy(d){switch(d.$$typeof){case Sm:return"<"+(P(d.value)||"Unknown")+">";case bm:return":has("+(Zy(d)||"")+")";case Am:return'[role="'+d.value+'"]';case Em:return'"'+d.value+'"';case Mm:return'[data-testname="'+d.value+'"]';default:throw Error(o(365))}}function m2(d,p){var S=[];d=[d,0];for(var A=0;A<d.length;){var T=d[A++],I=d[A++],X=p[I];if(T.tag!==5||!q(T)){for(;X!=null&&qy(T,X);)I++,X=p[I];if(I===p.length)S.push(T);else for(T=T.child;T!==null;)d.push(T,I),T=T.sibling}}return S}function e1(d,p){if(!ze)throw Error(o(363));d=Qy(d),d=m2(d,p),p=[],d=Array.from(d);for(var S=0;S<d.length;){var A=d[S++];if(A.tag===5)q(A)||p.push(A.stateNode);else for(A=A.child;A!==null;)d.push(A),A=A.sibling}return p}var uO=Math.ceil,Cm=a.ReactCurrentDispatcher,t1=a.ReactCurrentOwner,Wn=a.ReactCurrentBatchConfig,Dt=0,Yn=null,Qn=null,xr=0,Li=0,nc=yr(0),tr=0,gd=null,rc=0,Tm=0,n1=0,vd=null,pi=null,r1=0,i1=1/0;function ic(){i1=_n()+500}var Rm=!1,s1=null,ma=null,Pm=!1,ga=null,Bm=0,yd=0,o1=null,Im=-1,Dm=0;function Zr(){return Dt&6?_n():Im!==-1?Im:Im=_n()}function va(d){return d.mode&1?Dt&2&&xr!==0?xr&-xr:ml.transition!==null?(Dm===0&&(d=wo,wo<<=1,!(wo&4194240)&&(wo=64),Dm=d),Dm):(d=Ft,d!==0?d:Re()):1}function ts(d,p,S){if(50<yd)throw yd=0,o1=null,Error(o(185));var A=Lm(d,p);return A===null?null:(Qs(A,p,S),(!(Dt&2)||A!==Yn)&&(A===Yn&&(!(Dt&2)&&(Tm|=p),tr===4&&ya(A,xr)),mi(A,S),p===1&&Dt===0&&!(d.mode&1)&&(ic(),Zs&&hi())),A)}function Lm(d,p){d.lanes|=p;var S=d.alternate;for(S!==null&&(S.lanes|=p),S=d,d=d.return;d!==null;)d.childLanes|=p,S=d.alternate,S!==null&&(S.childLanes|=p),S=d,d=d.return;return S.tag===3?S.stateNode:null}function mi(d,p){var S=d.callbackNode;Kf(d,p);var A=pl(d,d===Yn?xr:0);if(A===0)S!==null&&ju(S),d.callbackNode=null,d.callbackPriority=0;else if(p=A&-A,d.callbackPriority!==p){if(S!=null&&ju(S),p===1)d.tag===0?td(v2.bind(null,d)):ed(v2.bind(null,d)),Me?Fe(function(){Dt===0&&hi()}):Mo(fa,hi),S=null;else{switch(Yf(A)){case 1:S=fa;break;case 4:S=qp;break;case 16:S=Yr;break;case 536870912:S=qf;break;default:S=Yr}S=E2(S,g2.bind(null,d))}d.callbackPriority=p,d.callbackNode=S}}function g2(d,p){if(Im=-1,Dm=0,Dt&6)throw Error(o(327));var S=d.callbackNode;if(Ml()&&d.callbackNode!==S)return null;var A=pl(d,d===Yn?xr:0);if(A===0)return null;if(A&30||A&d.expiredLanes||p)p=km(d,A);else{p=A;var T=Dt;Dt|=2;var I=_2();(Yn!==d||xr!==p)&&(ic(),bl(d,p));do try{dO();break}catch(oe){x2(d,oe)}while(1);Xu(),Cm.current=I,Dt=T,Qn!==null?p=0:(Yn=null,xr=0,p=tr)}if(p!==0){if(p===2&&(T=Ao(d),T!==0&&(A=T,p=a1(d,T))),p===1)throw S=gd,bl(d,0),ya(d,A),mi(d,_n()),S;if(p===6)ya(d,A);else{if(T=d.current.alternate,!(A&30)&&!cO(T)&&(p=km(d,A),p===2&&(I=Ao(d),I!==0&&(A=I,p=a1(d,I))),p===1))throw S=gd,bl(d,0),ya(d,A),mi(d,_n()),S;switch(d.finishedWork=T,d.finishedLanes=A,p){case 0:case 1:throw Error(o(345));case 2:Al(d,pi);break;case 3:if(ya(d,A),(A&130023424)===A&&(p=r1+500-_n(),10<p)){if(pl(d,0)!==0)break;if(T=d.suspendedLanes,(T&A)!==A){Zr(),d.pingedLanes|=d.suspendedLanes&T;break}d.timeoutHandle=ae(Al.bind(null,d,pi),p);break}Al(d,pi);break;case 4:if(ya(d,A),(A&4194240)===A)break;for(p=d.eventTimes,T=-1;0<A;){var X=31-Cr(A);I=1<<X,X=p[X],X>T&&(T=X),A&=~I}if(A=T,A=_n()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*uO(A/1960))-A,10<A){d.timeoutHandle=ae(Al.bind(null,d,pi),A);break}Al(d,pi);break;case 5:Al(d,pi);break;default:throw Error(o(329))}}}return mi(d,_n()),d.callbackNode===S?g2.bind(null,d):null}function a1(d,p){var S=vd;return d.current.memoizedState.isDehydrated&&(bl(d,p).flags|=256),d=km(d,p),d!==2&&(p=pi,pi=S,p!==null&&l1(p)),d}function l1(d){pi===null?pi=d:pi.push.apply(pi,d)}function cO(d){for(var p=d;;){if(p.flags&16384){var S=p.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var A=0;A<S.length;A++){var T=S[A],I=T.getSnapshot;T=T.value;try{if(!Pi(I(),T))return!1}catch{return!1}}}if(S=p.child,p.subtreeFlags&16384&&S!==null)S.return=p,p=S;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function ya(d,p){for(p&=~n1,p&=~Tm,d.suspendedLanes|=p,d.pingedLanes&=~p,d=d.expirationTimes;0<p;){var S=31-Cr(p),A=1<<S;d[S]=-1,p&=~A}}function v2(d){if(Dt&6)throw Error(o(327));Ml();var p=pl(d,0);if(!(p&1))return mi(d,_n()),null;var S=km(d,p);if(d.tag!==0&&S===2){var A=Ao(d);A!==0&&(p=A,S=a1(d,A))}if(S===1)throw S=gd,bl(d,0),ya(d,p),mi(d,_n()),S;if(S===6)throw Error(o(345));return d.finishedWork=d.current.alternate,d.finishedLanes=p,Al(d,pi),mi(d,_n()),null}function y2(d){ga!==null&&ga.tag===0&&!(Dt&6)&&Ml();var p=Dt;Dt|=1;var S=Wn.transition,A=Ft;try{if(Wn.transition=null,Ft=1,d)return d()}finally{Ft=A,Wn.transition=S,Dt=p,!(Dt&6)&&hi()}}function u1(){Li=nc.current,xt(nc)}function bl(d,p){d.finishedWork=null,d.finishedLanes=0;var S=d.timeoutHandle;if(S!==Ce&&(d.timeoutHandle=Ce,he(S)),Qn!==null)for(S=Qn.return;S!==null;){var A=S;switch(Ey(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&ua();break;case 3:ec(),xt(Hn),xt(Wt),Dy();break;case 5:By(A);break;case 4:ec();break;case 13:xt(Tn);break;case 19:xt(Tn);break;case 10:eo(A.type._context);break;case 22:case 23:u1()}S=S.return}if(Yn=d,Qn=d=xa(d.current,null),xr=Li=p,tr=0,gd=null,n1=Tm=rc=0,pi=vd=null,er!==null){for(p=0;p<er.length;p++)if(S=er[p],A=S.interleaved,A!==null){S.interleaved=null;var T=A.next,I=S.pending;if(I!==null){var X=I.next;I.next=T,A.next=X}S.pending=A}er=null}return d}function x2(d,p){do{var S=Qn;try{if(Xu(),am.current=hm,lm){for(var A=Fn.memoizedState;A!==null;){var T=A.queue;T!==null&&(T.pending=null),A=A.next}lm=!1}if(tc=0,cr=Rr=Fn=null,ad=!1,ld=0,t1.current=null,S===null||S.return===null){tr=1,gd=p,Qn=null;break}e:{var I=d,X=S.return,oe=S,De=p;if(p=xr,oe.flags|=32768,De!==null&&typeof De=="object"&&typeof De.then=="function"){var je=De,it=oe,St=it.tag;if(!(it.mode&1)&&(St===0||St===11||St===15)){var dt=it.alternate;dt?(it.updateQueue=dt.updateQueue,it.memoizedState=dt.memoizedState,it.lanes=dt.lanes):(it.updateQueue=null,it.memoizedState=null)}var fn=zM(X);if(fn!==null){fn.flags&=-257,GM(fn,X,oe,I,p),fn.mode&1&&NM(I,je,p),p=fn,De=je;var ct=p.updateQueue;if(ct===null){var Ir=new Set;Ir.add(De),p.updateQueue=Ir}else ct.add(De);break e}else{if(!(p&1)){NM(I,je,p),c1();break e}De=Error(o(426))}}else if(wn&&oe.mode&1){var rs=zM(X);if(rs!==null){!(rs.flags&65536)&&(rs.flags|=256),GM(rs,X,oe,I,p),Ry(De);break e}}I=De,tr!==4&&(tr=2),vd===null?vd=[I]:vd.push(I),De=zy(De,oe),oe=X;do{switch(oe.tag){case 3:oe.flags|=65536,p&=-p,oe.lanes|=p;var ye=OM(oe,De,p);sM(oe,ye);break e;case 1:I=De;var ue=oe.type,Te=oe.stateNode;if(!(oe.flags&128)&&(typeof ue.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(ma===null||!ma.has(Te)))){oe.flags|=65536,p&=-p,oe.lanes|=p;var Ze=UM(oe,I,p);sM(oe,Ze);break e}}oe=oe.return}while(oe!==null)}S2(S)}catch(ut){p=ut,Qn===S&&S!==null&&(Qn=S=S.return);continue}break}while(1)}function _2(){var d=Cm.current;return Cm.current=hm,d===null?hm:d}function c1(){(tr===0||tr===3||tr===2)&&(tr=4),Yn===null||!(rc&268435455)&&!(Tm&268435455)||ya(Yn,xr)}function km(d,p){var S=Dt;Dt|=2;var A=_2();Yn===d&&xr===p||bl(d,p);do try{fO();break}catch(T){x2(d,T)}while(1);if(Xu(),Dt=S,Cm.current=A,Qn!==null)throw Error(o(261));return Yn=null,xr=0,tr}function fO(){for(;Qn!==null;)w2(Qn)}function dO(){for(;Qn!==null&&!Qf();)w2(Qn)}function w2(d){var p=M2(d.alternate,d,Li);d.memoizedProps=d.pendingProps,p===null?S2(d):Qn=p,t1.current=null}function S2(d){var p=d;do{var S=p.alternate;if(d=p.return,p.flags&32768){if(S=iO(S,p),S!==null){S.flags&=32767,Qn=S;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{tr=6,Qn=null;return}}else if(S=tO(S,p,Li),S!==null){Qn=S;return}if(p=p.sibling,p!==null){Qn=p;return}Qn=p=d}while(p!==null);tr===0&&(tr=5)}function Al(d,p){var S=Ft,A=Wn.transition;try{Wn.transition=null,Ft=1,hO(d,p,S)}finally{Wn.transition=A,Ft=S}return null}function hO(d,p,S){do Ml();while(ga!==null);if(Dt&6)throw Error(o(327));var A=d.finishedWork,T=d.finishedLanes;if(A===null)return null;if(d.finishedWork=null,d.finishedLanes=0,A===d.current)throw Error(o(177));d.callbackNode=null,d.callbackPriority=0;var I=A.lanes|A.childLanes;if(ca(d,I),d===Yn&&(Qn=Yn=null,xr=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||Pm||(Pm=!0,E2(Yr,function(){return Ml(),null})),I=(A.flags&15990)!==0,A.subtreeFlags&15990||I){I=Wn.transition,Wn.transition=null;var X=Ft;Ft=1;var oe=Dt;Dt|=4,t1.current=null,oO(d,A),aO(d,A),j(d.containerInfo),d.current=A,lO(A),Qp(),Dt=oe,Ft=X,Wn.transition=I}else d.current=A;if(Pm&&(Pm=!1,ga=d,Bm=T),I=d.pendingLanes,I===0&&(ma=null),Zf(A.stateNode),mi(d,_n()),p!==null)for(S=d.onRecoverableError,A=0;A<p.length;A++)S(p[A]);if(Rm)throw Rm=!1,d=s1,s1=null,d;return Bm&1&&d.tag!==0&&Ml(),I=d.pendingLanes,I&1?d===o1?yd++:(yd=0,o1=d):yd=0,hi(),null}function Ml(){if(ga!==null){var d=Yf(Bm),p=Wn.transition,S=Ft;try{if(Wn.transition=null,Ft=16>d?16:d,ga===null)var A=!1;else{if(d=ga,ga=null,Bm=0,Dt&6)throw Error(o(331));var T=Dt;for(Dt|=4,qe=d.current;qe!==null;){var I=qe,X=I.child;if(qe.flags&16){var oe=I.deletions;if(oe!==null){for(var De=0;De<oe.length;De++){var je=oe[De];for(qe=je;qe!==null;){var it=qe;switch(it.tag){case 0:case 11:case 15:Sl(8,it,I)}var St=it.child;if(St!==null)St.return=it,qe=St;else for(;qe!==null;){it=qe;var dt=it.sibling,fn=it.return;if(o2(it),it===je){qe=null;break}if(dt!==null){dt.return=fn,qe=dt;break}qe=fn}}}var ct=I.alternate;if(ct!==null){var Ir=ct.child;if(Ir!==null){ct.child=null;do{var rs=Ir.sibling;Ir.sibling=null,Ir=rs}while(Ir!==null)}}qe=I}}if(I.subtreeFlags&2064&&X!==null)X.return=I,qe=X;else e:for(;qe!==null;){if(I=qe,I.flags&2048)switch(I.tag){case 0:case 11:case 15:Sl(9,I,I.return)}var ye=I.sibling;if(ye!==null){ye.return=I.return,qe=ye;break e}qe=I.return}}var ue=d.current;for(qe=ue;qe!==null;){X=qe;var Te=X.child;if(X.subtreeFlags&2064&&Te!==null)Te.return=X,qe=Te;else e:for(X=ue;qe!==null;){if(oe=qe,oe.flags&2048)try{switch(oe.tag){case 0:case 11:case 15:pd(9,oe)}}catch(ut){gi(oe,oe.return,ut)}if(oe===X){qe=null;break e}var Ze=oe.sibling;if(Ze!==null){Ze.return=oe.return,qe=Ze;break e}qe=oe.return}}if(Dt=T,hi(),Ri&&typeof Ri.onPostCommitFiberRoot=="function")try{Ri.onPostCommitFiberRoot(da,d)}catch{}A=!0}return A}finally{Ft=S,Wn.transition=p}}return!1}function b2(d,p,S){p=zy(S,p),p=OM(d,p,1),pa(d,p),p=Zr(),d=Lm(d,1),d!==null&&(Qs(d,1,p),mi(d,p))}function gi(d,p,S){if(d.tag===3)b2(d,d,S);else for(;p!==null;){if(p.tag===3){b2(p,d,S);break}else if(p.tag===1){var A=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(ma===null||!ma.has(A))){d=zy(S,d),d=UM(p,d,1),pa(p,d),d=Zr(),p=Lm(p,1),p!==null&&(Qs(p,1,d),mi(p,d));break}}p=p.return}}function pO(d,p,S){var A=d.pingCache;A!==null&&A.delete(p),p=Zr(),d.pingedLanes|=d.suspendedLanes&S,Yn===d&&(xr&S)===S&&(tr===4||tr===3&&(xr&130023424)===xr&&500>_n()-r1?bl(d,0):n1|=S),mi(d,p)}function A2(d,p){p===0&&(d.mode&1?(p=So,So<<=1,!(So&130023424)&&(So=4194304)):p=1);var S=Zr();d=Lm(d,p),d!==null&&(Qs(d,p,S),mi(d,S))}function mO(d){var p=d.memoizedState,S=0;p!==null&&(S=p.retryLane),A2(d,S)}function gO(d,p){var S=0;switch(d.tag){case 13:var A=d.stateNode,T=d.memoizedState;T!==null&&(S=T.retryLane);break;case 19:A=d.stateNode;break;default:throw Error(o(314))}A!==null&&A.delete(p),A2(d,S)}var M2;M2=function(d,p,S){if(d!==null)if(d.memoizedProps!==p.pendingProps||Hn.current)Di=!0;else{if(!(d.lanes&S)&&!(p.flags&128))return Di=!1,rO(d,p,S);Di=!!(d.flags&131072)}else Di=!1,wn&&p.flags&1048576&&fM(p,im,p.index);switch(p.lanes=0,p.tag){case 2:var A=p.type;d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),d=p.pendingProps;var T=Ti(p,Wt.current);ur(p,S),T=ky(null,p,A,d,T,S);var I=Fy();return p.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Vn(A)?(I=!0,Ys(p)):I=!1,p.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Sy(p),T.updater=nm,p.stateNode=T,T._reactInternals=p,Ay(p,A,d,S),p=Vy(null,p,A,!0,I,S)):(p.tag=0,wn&&I&&My(p),qr(null,p,T,S),p=p.child),p;case 16:A=p.elementType;e:{switch(d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),d=p.pendingProps,T=A._init,A=T(A._payload),p.type=A,T=p.tag=yO(A),d=Tr(A,d),T){case 0:p=Hy(null,p,A,d,S);break e;case 1:p=KM(null,p,A,d,S);break e;case 11:p=WM(null,p,A,d,S);break e;case 14:p=jM(null,p,A,Tr(A.type,d),S);break e}throw Error(o(306,A,""))}return p;case 0:return A=p.type,T=p.pendingProps,T=p.elementType===A?T:Tr(A,T),Hy(d,p,A,T,S);case 1:return A=p.type,T=p.pendingProps,T=p.elementType===A?T:Tr(A,T),KM(d,p,A,T,S);case 3:e:{if(YM(p),d===null)throw Error(o(387));A=p.pendingProps,I=p.memoizedState,T=I.element,iM(d,p),tm(p,A,null,S);var X=p.memoizedState;if(A=X.element,le&&I.isDehydrated)if(I={element:A,isDehydrated:!1,cache:X.cache,transitions:X.transitions},p.updateQueue.baseState=I,p.memoizedState=I,p.flags&256){T=Error(o(423)),p=QM(d,p,A,S,T);break e}else if(A!==T){T=Error(o(424)),p=QM(d,p,A,S,T);break e}else for(le&&(Ii=ce(p.stateNode.containerInfo),Bi=p,wn=!0,As=null,nd=!1),S=vM(p,null,A,S),p.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(Qu(),A===T){p=Po(d,p,S);break e}qr(d,p,A,S)}p=p.child}return p;case 5:return yM(p),d===null&&Ty(p),A=p.type,T=p.pendingProps,I=d!==null?d.memoizedProps:null,X=T.children,se(A,T)?X=null:I!==null&&se(A,I)&&(p.flags|=32),XM(d,p),qr(d,p,X,S),p.child;case 6:return d===null&&Ty(p),null;case 13:return qM(d,p,S);case 4:return Py(p,p.stateNode.containerInfo),A=p.pendingProps,d===null?p.child=qu(p,null,A,S):qr(d,p,A,S),p.child;case 11:return A=p.type,T=p.pendingProps,T=p.elementType===A?T:Tr(A,T),WM(d,p,A,T,S);case 7:return qr(d,p,p.pendingProps,S),p.child;case 8:return qr(d,p,p.pendingProps.children,S),p.child;case 12:return qr(d,p,p.pendingProps.children,S),p.child;case 10:e:{if(A=p.type._context,T=p.pendingProps,I=p.memoizedProps,X=T.value,Zp(p,A,X),I!==null)if(Pi(I.value,X)){if(I.children===T.children&&!Hn.current){p=Po(d,p,S);break e}}else for(I=p.child,I!==null&&(I.return=p);I!==null;){var oe=I.dependencies;if(oe!==null){X=I.child;for(var De=oe.firstContext;De!==null;){if(De.context===A){if(I.tag===1){De=Eo(-1,S&-S),De.tag=2;var je=I.updateQueue;if(je!==null){je=je.shared;var it=je.pending;it===null?De.next=De:(De.next=it.next,it.next=De),je.pending=De}}I.lanes|=S,De=I.alternate,De!==null&&(De.lanes|=S),Kn(I.return,S,p),oe.lanes|=S;break}De=De.next}}else if(I.tag===10)X=I.type===p.type?null:I.child;else if(I.tag===18){if(X=I.return,X===null)throw Error(o(341));X.lanes|=S,oe=X.alternate,oe!==null&&(oe.lanes|=S),Kn(X,S,p),X=I.sibling}else X=I.child;if(X!==null)X.return=I;else for(X=I;X!==null;){if(X===p){X=null;break}if(I=X.sibling,I!==null){I.return=X.return,X=I;break}X=X.return}I=X}qr(d,p,T.children,S),p=p.child}return p;case 9:return T=p.type,A=p.pendingProps.children,ur(p,S),T=cn(T),A=A(T),p.flags|=1,qr(d,p,A,S),p.child;case 14:return A=p.type,T=Tr(A,p.pendingProps),T=Tr(A.type,T),jM(d,p,A,T,S);case 15:return $M(d,p,p.type,p.pendingProps,S);case 17:return A=p.type,T=p.pendingProps,T=p.elementType===A?T:Tr(A,T),d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,Vn(A)?(d=!0,Ys(p)):d=!1,ur(p,S),uM(p,A,T),Ay(p,A,T,S),Vy(null,p,A,!0,d,S);case 19:return n2(d,p,S);case 22:return JM(d,p,S)}throw Error(o(156,p.tag))};function E2(d,p){return Mo(d,p)}function vO(d,p,S,A){this.tag=d,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ns(d,p,S,A){return new vO(d,p,S,A)}function f1(d){return d=d.prototype,!(!d||!d.isReactComponent)}function yO(d){if(typeof d=="function")return f1(d)?1:0;if(d!=null){if(d=d.$$typeof,d===v)return 11;if(d===x)return 14}return 2}function xa(d,p){var S=d.alternate;return S===null?(S=ns(d.tag,p,d.key,d.mode),S.elementType=d.elementType,S.type=d.type,S.stateNode=d.stateNode,S.alternate=d,d.alternate=S):(S.pendingProps=p,S.type=d.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=d.flags&14680064,S.childLanes=d.childLanes,S.lanes=d.lanes,S.child=d.child,S.memoizedProps=d.memoizedProps,S.memoizedState=d.memoizedState,S.updateQueue=d.updateQueue,p=d.dependencies,S.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},S.sibling=d.sibling,S.index=d.index,S.ref=d.ref,S}function Fm(d,p,S,A,T,I){var X=2;if(A=d,typeof d=="function")f1(d)&&(X=1);else if(typeof d=="string")X=5;else e:switch(d){case c:return El(S.children,T,I,p);case f:X=8,T|=8;break;case h:return d=ns(12,S,p,T|2),d.elementType=h,d.lanes=I,d;case y:return d=ns(13,S,p,T),d.elementType=y,d.lanes=I,d;case _:return d=ns(19,S,p,T),d.elementType=_,d.lanes=I,d;case b:return Om(S,T,I,p);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case m:X=10;break e;case g:X=9;break e;case v:X=11;break e;case x:X=14;break e;case w:X=16,A=null;break e}throw Error(o(130,d==null?d:typeof d,""))}return p=ns(X,S,p,T),p.elementType=d,p.type=A,p.lanes=I,p}function El(d,p,S,A){return d=ns(7,d,A,p),d.lanes=S,d}function Om(d,p,S,A){return d=ns(22,d,A,p),d.elementType=b,d.lanes=S,d.stateNode={},d}function d1(d,p,S){return d=ns(6,d,null,p),d.lanes=S,d}function h1(d,p,S){return p=ns(4,d.children!==null?d.children:[],d.key,p),p.lanes=S,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}function xO(d,p,S,A,T){this.tag=p,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ce,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wu(0),this.expirationTimes=Wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wu(0),this.identifierPrefix=A,this.onRecoverableError=T,le&&(this.mutableSourceEagerHydrationData=null)}function C2(d,p,S,A,T,I,X,oe,De){return d=new xO(d,p,S,oe,De),p===1?(p=1,I===!0&&(p|=8)):p=0,I=ns(3,null,null,p),d.current=I,I.stateNode=d,I.memoizedState={element:A,isDehydrated:S,cache:null,transitions:null},Sy(I),d}function T2(d){if(!d)return Xr;d=d._reactInternals;e:{if(B(d)!==d||d.tag!==1)throw Error(o(170));var p=d;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Vn(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(d.tag===1){var S=d.type;if(Vn(S))return Hu(d,S,p)}return p}function R2(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(o(188)):(d=Object.keys(d).join(","),Error(o(268,d)));return d=O(p),d===null?null:d.stateNode}function P2(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var S=d.retryLane;d.retryLane=S!==0&&S<p?S:p}}function p1(d,p){P2(d,p),(d=d.alternate)&&P2(d,p)}function _O(d){return d=O(d),d===null?null:d.stateNode}function wO(){return null}return n.attemptContinuousHydration=function(d){if(d.tag===13){var p=Zr();ts(d,134217728,p),p1(d,134217728)}},n.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var p=Zr(),S=va(d);ts(d,S,p),p1(d,S)}},n.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var p=d.stateNode;if(p.current.memoizedState.isDehydrated){var S=bo(p.pendingLanes);S!==0&&(qs(p,S|1),mi(p,_n()),!(Dt&6)&&(ic(),hi()))}break;case 13:var A=Zr();y2(function(){return ts(d,1,A)}),p1(d,1)}},n.batchedUpdates=function(d,p){var S=Dt;Dt|=1;try{return d(p)}finally{Dt=S,Dt===0&&(ic(),Zs&&hi())}},n.createComponentSelector=function(d){return{$$typeof:Sm,value:d}},n.createContainer=function(d,p,S,A,T,I,X){return C2(d,p,!1,null,S,A,T,I,X)},n.createHasPseudoClassSelector=function(d){return{$$typeof:bm,value:d}},n.createHydrationContainer=function(d,p,S,A,T,I,X,oe,De){return d=C2(S,A,!0,d,T,I,X,oe,De),d.context=T2(null),S=d.current,A=Zr(),T=va(S),I=Eo(A,T),I.callback=p??null,pa(S,I),d.current.lanes=T,Qs(d,T,A),mi(d,A),d},n.createPortal=function(d,p,S){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:A==null?null:""+A,children:d,containerInfo:p,implementation:S}},n.createRoleSelector=function(d){return{$$typeof:Am,value:d}},n.createTestNameSelector=function(d){return{$$typeof:Mm,value:d}},n.createTextSelector=function(d){return{$$typeof:Em,value:d}},n.deferredUpdates=function(d){var p=Ft,S=Wn.transition;try{return Wn.transition=null,Ft=16,d()}finally{Ft=p,Wn.transition=S}},n.discreteUpdates=function(d,p,S,A,T){var I=Ft,X=Wn.transition;try{return Wn.transition=null,Ft=1,d(p,S,A,T)}finally{Ft=I,Wn.transition=X,Dt===0&&ic()}},n.findAllNodes=e1,n.findBoundingRects=function(d,p){if(!ze)throw Error(o(363));p=e1(d,p),d=[];for(var S=0;S<p.length;S++)d.push(W(p[S]));for(p=d.length-1;0<p;p--){S=d[p];for(var A=S.x,T=A+S.width,I=S.y,X=I+S.height,oe=p-1;0<=oe;oe--)if(p!==oe){var De=d[oe],je=De.x,it=je+De.width,St=De.y,dt=St+De.height;if(A>=je&&I>=St&&T<=it&&X<=dt){d.splice(p,1);break}else if(A!==je||S.width!==De.width||dt<I||St>X){if(!(I!==St||S.height!==De.height||it<A||je>T)){je>A&&(De.width+=je-A,De.x=A),it<T&&(De.width=T-je),d.splice(p,1);break}}else{St>I&&(De.height+=St-I,De.y=I),dt<X&&(De.height=X-St),d.splice(p,1);break}}}return d},n.findHostInstance=R2,n.findHostInstanceWithNoPortals=function(d){return d=k(d),d=d!==null?N(d):null,d===null?null:d.stateNode},n.findHostInstanceWithWarning=function(d){return R2(d)},n.flushControlled=function(d){var p=Dt;Dt|=1;var S=Wn.transition,A=Ft;try{Wn.transition=null,Ft=1,d()}finally{Ft=A,Wn.transition=S,Dt=p,Dt===0&&(ic(),hi())}},n.flushPassiveEffects=Ml,n.flushSync=y2,n.focusWithin=function(d,p){if(!ze)throw Error(o(363));for(d=Qy(d),p=m2(d,p),p=Array.from(p),d=0;d<p.length;){var S=p[d++];if(!q(S)){if(S.tag===5&&Be(S.stateNode))return!0;for(S=S.child;S!==null;)p.push(S),S=S.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Ft},n.getFindAllNodesFailureDescription=function(d,p){if(!ze)throw Error(o(363));var S=0,A=[];d=[Qy(d),0];for(var T=0;T<d.length;){var I=d[T++],X=d[T++],oe=p[X];if((I.tag!==5||!q(I))&&(qy(I,oe)&&(A.push(Zy(oe)),X++,X>S&&(S=X)),X<p.length))for(I=I.child;I!==null;)d.push(I,X),I=I.sibling}if(S<p.length){for(d=[];S<p.length;S++)d.push(Zy(p[S]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},n.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return Q(d.child.stateNode);default:return d.child.stateNode}},n.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:_O,findFiberByHostInstance:d.findFiberByHostInstance||wO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)d=!0;else{try{da=p.inject(d),Ri=p}catch{}d=!!p.checkDCE}}return d},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(d,p,S,A){if(!ze)throw Error(o(363));d=e1(d,p);var T=Ie(d,S,A).disconnect;return{disconnect:function(){T()}}},n.registerMutableSourceForHydration=function(d,p){var S=p._getVersion;S=S(p._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[p,S]:d.mutableSourceEagerHydrationData.push(p,S)},n.runWithPriority=function(d,p){var S=Ft;try{return Ft=d,p()}finally{Ft=S}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(d,p,S,A){var T=p.current,I=Zr(),X=va(T);return S=T2(S),p.context===null?p.context=S:p.pendingContext=S,p=Eo(I,X),p.payload={element:d},A=A===void 0?null:A,A!==null&&(p.callback=A),pa(T,p),d=ts(T,X,I),d!==null&&em(d,T,X),X},n};(function(t){t.exports=eV})(Y8);const tV=Ev(Uw);var av={},nV={get exports(){return av},set exports(t){av=t}},VD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,z){var j=F.length;F.push(z);e:for(;0<j;){var H=j-1>>>1,G=F[H];if(0<i(G,z))F[H]=z,F[j]=G,j=H;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var z=F[0],j=F.pop();if(j!==z){F[0]=j;e:for(var H=0,G=F.length,Z=G>>>1;H<Z;){var re=2*(H+1)-1,se=F[re],Y=re+1,ae=F[Y];if(0>i(se,j))Y<G&&0>i(ae,se)?(F[H]=ae,F[Y]=j,H=Y):(F[H]=se,F[re]=j,H=re);else if(Y<G&&0>i(ae,j))F[H]=ae,F[Y]=j,H=Y;else break e}}return z}function i(F,z){var j=F.sortIndex-z.sortIndex;return j!==0?j:F.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,h=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=F)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(u)}}function b(F){if(v=!1,w(F),!g)if(n(l)!==null)g=!0,Q(E);else{var z=n(u);z!==null&&ie(b,z.startTime-F)}}function E(F,z){g=!1,v&&(v=!1,_(M),M=-1),m=!0;var j=h;try{for(w(z),f=n(l);f!==null&&(!(f.expirationTime>z)||F&&!k());){var H=f.callback;if(typeof H=="function"){f.callback=null,h=f.priorityLevel;var G=H(f.expirationTime<=z);z=t.unstable_now(),typeof G=="function"?f.callback=G:f===n(l)&&r(l),w(z)}else r(l);f=n(l)}if(f!==null)var Z=!0;else{var re=n(u);re!==null&&ie(b,re.startTime-z),Z=!1}return Z}finally{f=null,h=j,m=!1}}var C=!1,P=null,M=-1,B=5,D=-1;function k(){return!(t.unstable_now()-D<B)}function O(){if(P!==null){var F=t.unstable_now();D=F;var z=!0;try{z=P(!0,F)}finally{z?U():(C=!1,P=null)}}else C=!1}var U;if(typeof x=="function")U=function(){x(O)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,$=N.port2;N.port1.onmessage=O,U=function(){$.postMessage(null)}}else U=function(){y(O,0)};function Q(F){P=F,C||(C=!0,U())}function ie(F,z){M=y(function(){F(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,Q(E))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var j=h;h=z;try{return F()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,z){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var j=h;h=F;try{return z()}finally{h=j}},t.unstable_scheduleCallback=function(F,z,j){var H=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?H+j:H):j=H,F){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=j+G,F={id:c++,callback:z,priorityLevel:F,startTime:j,expirationTime:G,sortIndex:-1},j>H?(F.sortIndex=j,e(u,F),n(l)===null&&F===n(u)&&(v?(_(M),M=-1):v=!0,ie(b,j-H))):(F.sortIndex=G,e(l,F),g||m||(g=!0,Q(E))),F},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(F){var z=h;return function(){var j=h;h=z;try{return F.apply(this,arguments)}finally{h=j}}}})(VD);(function(t){t.exports=VD})(nV);function WD(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}const Vo=[];function jD(t,e,n=!1,r={}){for(const s of Vo)if(WD(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!n)throw s.promise}const i={keys:e,equal:r.equal,promise:t(...e).then(s=>i.response=s).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{const s=Vo.indexOf(i);s!==-1&&Vo.splice(s,1)},r.lifespan)}).catch(s=>i.error=s)};if(Vo.push(i),!n)throw i.promise}const $D=(t,e,n)=>jD(t,e,!1,n),rV=(t,e,n)=>void jD(t,e,!0,n),iV=t=>{if(t===void 0||t.length===0)Vo.splice(0,Vo.length);else{const e=Vo.find(n=>WD(t,n.keys,n.equal));if(e){const n=Vo.indexOf(e);n!==-1&&Vo.splice(n,1)}}},vA={},Ip=t=>void Object.assign(vA,t);function sV(t,e){function n(c,{args:f=[],attach:h,...m},g){let v=`${c[0].toUpperCase()}${c.slice(1)}`,y;if(c==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=m.object;y=Ic(_,{type:c,root:g,attach:h,primitive:!0})}else{const _=vA[v];if(!_)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");y=Ic(new _(...f),{type:c,root:g,attach:h,memoizedProps:{args:f}})}return y.__r3f.attach===void 0&&(y instanceof wt?y.__r3f.attach="geometry":y instanceof zn&&(y.__r3f.attach="material")),v!=="inject"&&Ax(y,m),y}function r(c,f){let h=!1;if(f){var m,g;(m=f.__r3f)!=null&&m.attach?bx(c,f,f.__r3f.attach):f.isObject3D&&c.isObject3D&&(c.add(f),h=!0),h||(g=c.__r3f)==null||g.objects.push(f),f.__r3f||Ic(f,{}),f.__r3f.parent=c,zw(f),Dc(f)}}function i(c,f,h){let m=!1;if(f){var g,v;if((g=f.__r3f)!=null&&g.attach)bx(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){f.parent=c,f.dispatchEvent({type:"added"});const y=c.children.filter(x=>x!==f),_=y.indexOf(h);c.children=[...y.slice(0,_),f,...y.slice(_)],m=!0}m||(v=c.__r3f)==null||v.objects.push(f),f.__r3f||Ic(f,{}),f.__r3f.parent=c,zw(f),Dc(f)}}function s(c,f,h=!1){c&&[...c].forEach(m=>o(f,m,h))}function o(c,f,h){if(f){var m,g,v;if(f.__r3f&&(f.__r3f.parent=null),(m=c.__r3f)!=null&&m.objects&&(c.__r3f.objects=c.__r3f.objects.filter(b=>b!==f)),(g=f.__r3f)!=null&&g.attach)hT(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){var y;c.remove(f),(y=f.__r3f)!=null&&y.root&&dV(f.__r3f.root,f)}const x=(v=f.__r3f)==null?void 0:v.primitive,w=h===void 0?f.dispose!==null&&!x:h;if(!x){var _;s((_=f.__r3f)==null?void 0:_.objects,f,w),s(f.children,f,w)}f.__r3f&&(delete f.__r3f.root,delete f.__r3f.objects,delete f.__r3f.handlers,delete f.__r3f.memoizedProps,x||delete f.__r3f),w&&f.dispose&&f.type!=="Scene"&&av.unstable_scheduleCallback(av.unstable_IdlePriority,()=>{try{f.dispose()}catch{}}),Dc(c)}}function a(c,f,h,m){var g;const v=(g=c.__r3f)==null?void 0:g.parent;if(!v)return;const y=n(f,h,c.__r3f.root);if(c.children){for(const _ of c.children)_.__r3f&&r(y,_);c.children=c.children.filter(_=>!_.__r3f)}c.__r3f.objects.forEach(_=>r(y,_)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(v,c),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),r(v,y),y.raycast&&y.__r3f.eventCount&&y.__r3f.root.getState().internal.interaction.push(y),[m,m.alternate].forEach(_=>{_!==null&&(_.stateNode=y,_.ref&&(typeof _.ref=="function"?_.ref(y):_.ref.current=y))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:tV({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,f)=>{if(!f)return;const h=c.getState().scene;h.__r3f&&(h.__r3f.root=c,r(h,f))},removeChildFromContainer:(c,f)=>{f&&o(c.getState().scene,f)},insertInContainerBefore:(c,f,h)=>{if(!f||!h)return;const m=c.getState().scene;m.__r3f&&i(m,f,h)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var f;const h=(f=c==null?void 0:c.__r3f)!=null?f:{};return Boolean(h.handlers)},prepareUpdate(c,f,h,m){if(c.__r3f.primitive&&m.object&&m.object!==c)return[!0];{const{args:g=[],children:v,...y}=m,{args:_=[],children:x,...w}=h;if(!Array.isArray(g))throw new Error("R3F: the args prop must be an array!");if(g.some((E,C)=>E!==_[C]))return[!0];const b=ZD(c,y,w,!0);return b.changes.length?[!1,b]:null}},commitUpdate(c,[f,h],m,g,v,y){f?a(c,m,v,y):Ax(c,h)},commitMount(c,f,h,m){var g;const v=(g=c.__r3f)!=null?g:{};c.raycast&&v.handlers&&v.eventCount&&c.__r3f.root.getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>Ic(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var f;const{attach:h,parent:m}=(f=c.__r3f)!=null?f:{};h&&m&&hT(m,c,h),c.isObject3D&&(c.visible=!1),Dc(c)},unhideInstance(c,f){var h;const{attach:m,parent:g}=(h=c.__r3f)!=null?h:{};m&&g&&bx(g,c,m),(c.isObject3D&&f.visible==null||f.visible)&&(c.visible=!0),Dc(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Ga.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&vn.fun(performance.now)?performance.now:vn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:vn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:vn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Ax}}var uT,cT;const Sx=t=>"colorSpace"in t||"outputColorSpace"in t,JD=()=>{var t;return(t=vA.ColorManagement)!=null?t:null},XD=t=>t&&t.isOrthographicCamera,oV=t=>t&&t.hasOwnProperty("current"),Dp=typeof window<"u"&&((uT=window.document)!=null&&uT.createElement||((cT=window.navigator)==null?void 0:cT.product)==="ReactNative")?R.useLayoutEffect:R.useEffect;function KD(t){const e=R.useRef(t);return Dp(()=>void(e.current=t),[t]),e}function aV({set:t}){return Dp(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class YD extends R.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}YD.getDerivedStateFromError=()=>({error:!0});const QD="__default",fT=new Map,lV=t=>t&&!!t.memoized&&!!t.changes;function qD(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const Nd=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},vn={obj:t=>t===Object(t)&&!vn.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(vn.str(t)||vn.num(t))return t===e;const s=vn.obj(t);if(s&&r==="reference")return t===e;const o=vn.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!vn.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(vn.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function uV(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function cV(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Ic(t,e){const n=t;return(e!=null&&e.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),t}function Nw(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const dT=/-\d+$/;function bx(t,e,n){if(vn.str(n)){if(dT.test(n)){const s=n.replace(dT,""),{target:o,key:a}=Nw(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=Nw(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function hT(t,e,n){var r,i;if(vn.str(n)){const{target:s,key:o}=Nw(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function ZD(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){var c;const f=(c=t==null?void 0:t.__r3f)!=null?c:{},h=Object.entries(i),m=[];if(u){const v=Object.keys(l);for(let y=0;y<v.length;y++)i.hasOwnProperty(v[y])||h.unshift([v[y],QD+"remove"])}h.forEach(([v,y])=>{var _;if((_=t.__r3f)!=null&&_.primitive&&v==="object"||vn.equ(y,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return m.push([v,y,!0,[]]);let x=[];v.includes("-")&&(x=v.split("-")),m.push([v,y,!1,x]);for(const w in i){const b=i[w];w.startsWith(`${v}-`)&&m.push([w,b,!1,w.split("-")])}});const g={...i};return f.memoizedProps&&f.memoizedProps.args&&(g.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(g.attach=f.memoizedProps.attach),{memoized:g,changes:m}}function Ax(t,e){var n,r,i;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:u}=lV(e)?e:ZD(t,e),c=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let h=0;h<u.length;h++){let[m,g,v,y]=u[h];if(Sx(t)){const b="srgb",E="srgb-linear";m==="encoding"?(m="colorSpace",g=g===3001?b:E):m==="outputEncoding"&&(m="outputColorSpace",g=g===3001?b:E)}let _=t,x=_[m];if(y.length&&(x=y.reduce((w,b)=>w[b],t),!(x&&x.set))){const[w,...b]=y.reverse();_=b.reverse().reduce((E,C)=>E[C],t),m=w}if(g===QD+"remove")if(_.constructor){let w=fT.get(_.constructor);w||(w=new _.constructor,fT.set(_.constructor,w)),g=w[m]}else g=0;if(v)g?s.handlers[m]=g:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof fu)){if(Array.isArray(g))x.fromArray?x.fromArray(g):x.set(...g);else if(x.copy&&g&&g.constructor&&x.constructor===g.constructor)x.copy(g);else if(g!==void 0){const w=x instanceof $e;!w&&x.setScalar?x.setScalar(g):x instanceof fu&&g instanceof fu?x.mask=g.mask:x.set(g),!JD()&&!a.linear&&w&&x.convertSRGBToLinear()}}else if(_[m]=g,_[m]instanceof an&&_[m].format===Ur&&_[m].type===Ei){const w=_[m];Sx(w)&&Sx(a.gl)?w.colorSpace=a.gl.outputColorSpace:w.encoding=a.gl.outputEncoding}Dc(t)}if(s.parent&&a.internal&&t.raycast&&c!==s.eventCount){const h=a.internal.interaction.indexOf(t);h>-1&&a.internal.interaction.splice(h,1),s.eventCount&&a.internal.interaction.push(t)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=t.__r3f)!=null&&i.parent&&zw(t),t}function Dc(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function zw(t){t.onUpdate==null||t.onUpdate(t)}function eL(t,e){t.manual||(XD(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function zg(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function fV(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Ga.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ga.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ga.ContinuousEventPriority;default:return Ga.DefaultEventPriority}}function tL(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function dV(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{tL(n.capturedMap,e,r,i)})}function hV(t){function e(l){const{internal:u}=t.getState(),c=l.offsetX-u.initialClick[0],f=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+f*f))}function n(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+c]}))}function r(l,u){const c=t.getState(),f=new Set,h=[],m=u?u(c.internal.interaction):c.internal.interaction;for(let _=0;_<m.length;_++){const x=Nd(m[_]);x&&(x.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function g(_){const x=Nd(_);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var w;x.events.compute==null||x.events.compute(l,x,(w=x.previousRoot)==null?void 0:w.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(_,!0):[]}let v=m.flatMap(g).sort((_,x)=>{const w=Nd(_.object),b=Nd(x.object);return!w||!b?_.distance-x.distance:b.events.priority-w.events.priority||_.distance-x.distance}).filter(_=>{const x=zg(_);return f.has(x)?!1:(f.add(x),!0)});c.events.filter&&(v=c.events.filter(v,c));for(const _ of v){let x=_.object;for(;x;){var y;(y=x.__r3f)!=null&&y.eventCount&&h.push({..._,eventObject:x}),x=x.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let _ of c.internal.capturedMap.get(l.pointerId).values())f.has(zg(_.intersection))||h.push(_.intersection);return h}function i(l,u,c,f){const h=t.getState();if(l.length){const m={stopped:!1};for(const g of l){const v=Nd(g.object)||h,{raycaster:y,pointer:_,camera:x,internal:w}=v,b=new V(_.x,_.y,0).unproject(x),E=D=>{var k,O;return(k=(O=w.capturedMap.get(D))==null?void 0:O.has(g.eventObject))!=null?k:!1},C=D=>{const k={intersection:g,target:u.target};w.capturedMap.has(D)?w.capturedMap.get(D).set(g.eventObject,k):w.capturedMap.set(D,new Map([[g.eventObject,k]])),u.target.setPointerCapture(D)},P=D=>{const k=w.capturedMap.get(D);k&&tL(w.capturedMap,g.eventObject,k,D)};let M={};for(let D in u){let k=u[D];typeof k!="function"&&(M[D]=k)}let B={...g,...M,pointer:_,intersections:l,stopped:m.stopped,delta:c,unprojectedPoint:b,ray:y.ray,camera:x,stopPropagation(){const D="pointerId"in u&&w.capturedMap.get(u.pointerId);if((!D||D.has(g.eventObject))&&(B.stopped=m.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(k=>k.eventObject===g.eventObject))){const k=l.slice(0,l.indexOf(g));s([...k,g])}},target:{hasPointerCapture:E,setPointerCapture:C,releasePointerCapture:P},currentTarget:{hasPointerCapture:E,setPointerCapture:C,releasePointerCapture:P},nativeEvent:u};if(f(B),m.stopped===!0)break}}return l}function s(l){const{internal:u}=t.getState();for(const c of u.hovered.values())if(!l.length||!l.find(f=>f.object===c.object&&f.index===c.index&&f.instanceId===c.instanceId)){const h=c.eventObject.__r3f,m=h==null?void 0:h.handlers;if(u.hovered.delete(zg(c)),h!=null&&h.eventCount){const g={...c,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function o(l,u){for(let c=0;c<u.length;c++){const f=u[c].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=t.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:f,internal:h}=t.getState();h.lastEvent.current=c;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=r(c,m?n:void 0),_=g?e(c):0;l==="onPointerDown"&&(h.initialClick=[c.offsetX,c.offsetY],h.initialHits=y.map(w=>w.eventObject)),g&&!y.length&&_<=2&&(o(c,h.interaction),f&&f(c)),m&&s(y);function x(w){const b=w.eventObject,E=b.__r3f,C=E==null?void 0:E.handlers;if(E!=null&&E.eventCount)if(m){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const P=zg(w),M=h.hovered.get(P);M?M.stopped&&w.stopPropagation():(h.hovered.set(P,w),C.onPointerOver==null||C.onPointerOver(w),C.onPointerEnter==null||C.onPointerEnter(w))}C.onPointerMove==null||C.onPointerMove(w)}else{const P=C[l];P?(!g||h.initialHits.includes(b))&&(o(c,h.interaction.filter(M=>!h.initialHits.includes(M))),P(w)):g&&h.initialHits.includes(b)&&o(c,h.interaction.filter(M=>!h.initialHits.includes(M)))}}i(y,c,_,x)}}return{handlePointer:a}}const pV=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],nL=t=>!!(t!=null&&t.render),yA=R.createContext(null),mV=(t,e)=>{const n=HD((a,l)=>{const u=new V,c=new V,f=new V;function h(_=l().camera,x=c,w=l().size){const{width:b,height:E,top:C,left:P}=w,M=b/E;x instanceof V?f.copy(x):f.set(...x);const B=_.getWorldPosition(u).distanceTo(f);if(XD(_))return{width:b/_.zoom,height:E/_.zoom,top:C,left:P,factor:1,distance:B,aspect:M};{const D=_.fov*Math.PI/180,k=2*Math.tan(D/2)*B,O=k*(b/E);return{width:O,height:k,top:C,left:P,factor:b/O,distance:B,aspect:M}}}let m;const g=_=>a(x=>({performance:{...x.performance,current:_}})),v=new we;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>t(l(),_),advance:(_,x)=>e(_,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new ly,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();m&&clearTimeout(m),_.performance.current!==_.performance.min&&g(_.performance.min),m=setTimeout(()=>g(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:_=>a(x=>({...x,events:{...x.events,..._}})),setSize:(_,x,w,b,E)=>{const C=l().camera,P={width:_,height:x,top:b||0,left:E||0,updateStyle:w};a(M=>({size:P,viewport:{...M.viewport,...h(C,c,P)}}))},setDpr:_=>a(x=>{const w=qD(_);return{viewport:{...x.viewport,dpr:w,initialDpr:x.viewport.initialDpr||w}}}),setFrameloop:(_="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,_!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:R.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,x,w)=>{const b=l().internal;return b.priority=b.priority+(x>0?1:0),b.subscribers.push({ref:_,priority:x,store:w}),b.subscribers=b.subscribers.sort((E,C)=>E.priority-C.priority),()=>{const E=l().internal;E!=null&&E.subscribers&&(E.priority=E.priority-(x>0?1:0),E.subscribers=E.subscribers.filter(C=>C.ref!==_))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:f}=n.getState();if(l!==i||u.dpr!==s){var h;i=l,s=u.dpr,eL(a,l),c.setPixelRatio(u.dpr);const m=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};function gV(t,e){const n={callback:t};return e.add(n),()=>void e.delete(n)}let Gg,rL=new Set,vV=new Set,yV=new Set;const xV=t=>gV(t,rL);function Mx(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function zd(t,e){switch(t){case"before":return Mx(rL,e);case"after":return Mx(vV,e);case"tail":return Mx(yV,e)}}let Ex,Cx;function Tx(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),Ex=e.internal.subscribers,Gg=0;Gg<Ex.length;Gg++)Cx=Ex[Gg],Cx.ref.current(Cx.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function _V(t){let e=!1,n,r,i;function s(l){r=requestAnimationFrame(s),e=!0,n=0,zd("before",l);for(const c of t.values()){var u;i=c.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(n+=Tx(l,i))}if(zd("after",l),n===0)return zd("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,u=1){var c;if(!l)return t.forEach(f=>o(f.store.getState()),u);(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,c,f){if(u&&zd("before",l),c)Tx(l,c,f);else for(const h of t.values())Tx(l,h.store.getState());u&&zd("after",l)}return{loop:s,invalidate:o,advance:a}}function xA(){const t=R.useContext(yA);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Nn(t=n=>n,e){return xA()(t,e)}function jr(t,e=0){const n=xA(),r=n.getState().internal.subscribe,i=KD(t);return Dp(()=>r(i,e,n),[e,r,n]),null}function iL(t,e){return function(n,...r){const i=new n;return t&&t(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,uV(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function Nu(t,e,n,r){const i=Array.isArray(e)?e:[e],s=$D(iL(n,r),[t,...i],{equal:vn.equ});return Array.isArray(e)?s:s[0]}Nu.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return rV(iL(n),[t,...r])};Nu.clear=function(t,e){const n=Array.isArray(e)?e:[e];return iV([t,...n])};const Ef=new Map,{invalidate:pT,advance:mT}=_V(Ef),{reconciler:tp,applyProps:Vl}=sV(Ef,fV),Ac={objects:"shallow",strict:!1},wV=(t,e)=>{const n=typeof t=="function"?t(e):t;return nL(n)?n:new Vb({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function SV(t,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:r,top:i,left:s}=t.parentElement.getBoundingClientRect();return{width:n,height:r,top:i,left:s}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function bV(t){const e=Ef.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||mV(pT,mT),o=n||tp.createContainer(s,Ga.ConcurrentRoot,null,!1,null,"",i,null);e||Ef.set(t,{fiber:o,store:s});let a,l=!1,u;return{configure(c={}){let{gl:f,size:h,scene:m,events:g,onCreated:v,shadows:y=!1,linear:_=!1,flat:x=!1,legacy:w=!1,orthographic:b=!1,frameloop:E="always",dpr:C=[1,2],performance:P,raycaster:M,camera:B,onPointerMissed:D}=c,k=s.getState(),O=k.gl;k.gl||k.set({gl:O=wV(f,t)});let U=k.raycaster;U||k.set({raycaster:U=new gA});const{params:N,...$}=M||{};if(vn.equ($,U,Ac)||Vl(U,{...$}),vn.equ(N,U.params,Ac)||Vl(U,{params:{...U.params,...N}}),!k.camera||k.camera===u&&!vn.equ(u,B,Ac)){u=B;const H=B instanceof Ff,G=H?B:b?new ys(0,0,0,0,.1,1e3):new An(75,0,.1,1e3);H||(G.position.z=5,B&&Vl(G,B),!k.camera&&!(B!=null&&B.rotation)&&G.lookAt(0,0,0)),k.set({camera:G})}if(!k.scene){let H;m instanceof Au?H=m:(H=new Au,m&&Vl(H,m)),k.set({scene:Ic(H)})}if(!k.xr){const H=(re,se)=>{const Y=s.getState();Y.frameloop!=="never"&&mT(re,!0,Y,se)},G=()=>{const re=s.getState();re.gl.xr.enabled=re.gl.xr.isPresenting,re.gl.xr.setAnimationLoop(re.gl.xr.isPresenting?H:null),re.gl.xr.isPresenting||pT(re)},Z={connect(){const re=s.getState().gl;re.xr.addEventListener("sessionstart",G),re.xr.addEventListener("sessionend",G)},disconnect(){const re=s.getState().gl;re.xr.removeEventListener("sessionstart",G),re.xr.removeEventListener("sessionend",G)}};O.xr&&Z.connect(),k.set({xr:Z})}if(O.shadowMap){const H=O.shadowMap.enabled,G=O.shadowMap.type;if(O.shadowMap.enabled=!!y,vn.boo(y))O.shadowMap.type=ph;else if(vn.str(y)){var Q;const Z={basic:qB,percentage:Vv,soft:ph,variance:Ql};O.shadowMap.type=(Q=Z[y])!=null?Q:ph}else vn.obj(y)&&Object.assign(O.shadowMap,y);(H!==O.shadowMap.enabled||G!==O.shadowMap.type)&&(O.shadowMap.needsUpdate=!0)}const ie=JD();ie&&("enabled"in ie?ie.enabled=!w:"legacyMode"in ie&&(ie.legacyMode=w)),Vl(O,{outputEncoding:_?3e3:3001,toneMapping:x?Us:Pb}),k.legacy!==w&&k.set(()=>({legacy:w})),k.linear!==_&&k.set(()=>({linear:_})),k.flat!==x&&k.set(()=>({flat:x})),f&&!vn.fun(f)&&!nL(f)&&!vn.equ(f,O,Ac)&&Vl(O,f),g&&!k.events.handlers&&k.set({events:g(s)});const j=SV(t,h);return vn.equ(j,k.size,Ac)||k.setSize(j.width,j.height,j.updateStyle,j.top,j.left),C&&k.viewport.dpr!==qD(C)&&k.setDpr(C),k.frameloop!==E&&k.setFrameloop(E),k.onPointerMissed||k.set({onPointerMissed:D}),P&&!vn.equ(P,k.performance,Ac)&&k.set(H=>({performance:{...H.performance,...P}})),a=v,l=!0,this},render(c){return l||this.configure(),tp.updateContainer(R.createElement(AV,{store:s,children:c,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){sL(t)}}}function AV({store:t,children:e,onCreated:n,rootElement:r}){return Dp(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),R.createElement(yA.Provider,{value:t},e)}function sL(t,e){const n=Ef.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),tp.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),cV(i),Ef.delete(t),e&&e(t)}catch{}},500)})}}function MV(t,e,n){return R.createElement(EV,{key:e.uuid,children:t,container:e,state:n})}function EV({state:t={},children:e,container:n}){const{events:r,size:i,...s}=t,o=xA(),[a]=R.useState(()=>new gA),[l]=R.useState(()=>new we),u=R.useCallback((f,h)=>{const m={...f};Object.keys(f).forEach(v=>{(pV.includes(v)||f[v]!==h[v]&&h[v])&&delete m[v]});let g;if(h&&i){const v=h.camera;g=f.viewport.getCurrentViewport(v,new V,i),v!==f.camera&&eL(v,i)}return{...m,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...h==null?void 0:h.events,...r},size:{...f.size,...i},viewport:{...f.viewport,...g},...s}},[t]),[c]=R.useState(()=>{const f=o.getState();return HD((m,g)=>({...f,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...r},size:{...f.size,...i},...s,set:m,get:g,setEvents:v=>m(y=>({...y,events:{...y.events,...v}}))}))});return R.useEffect(()=>{const f=o.subscribe(h=>c.setState(m=>u(h,m)));return()=>{f(),c.destroy()}},[]),R.useEffect(()=>{c.setState(f=>u(o.getState(),f))},[u]),R.createElement(R.Fragment,null,tp.createPortal(R.createElement(yA.Provider,{value:c},e),c,null))}tp.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:R.version});function Gw(t,e,n){var r,i,s,o,a;e==null&&(e=100);function l(){var c=Date.now()-o;c<e&&c>=0?r=setTimeout(l,e-c):(r=null,n||(a=t.apply(s,i),s=i=null))}var u=function(){s=this,i=arguments,o=Date.now();var c=n&&!r;return r||(r=setTimeout(l,e)),c&&(a=t.apply(s,i),s=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=t.apply(s,i),s=i=null,clearTimeout(r),r=null)},u}Gw.debounce=Gw;var gT=Gw;function CV(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=R.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=R.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,f=R.useRef(!1);R.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[h,m,g]=R.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:w,top:b,width:E,height:C,bottom:P,right:M,x:B,y:D}=l.current.element.getBoundingClientRect(),k={left:w,top:b,width:E,height:C,bottom:P,right:M,x:B,y:D};l.current.element instanceof HTMLElement&&i&&(k.height=l.current.element.offsetHeight,k.width=l.current.element.offsetWidth),Object.freeze(k),f.current&&!BV(l.current.lastBounds,k)&&a(l.current.lastBounds=k)};return[x,c?gT(x,c):x,u?gT(x,u):x]},[a,i,u,c]);function v(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new s(g),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",g,{capture:!0,passive:!0})))}const _=x=>{!x||x===l.current.element||(v(),l.current.element=x,l.current.scrollContainers=oL(x),y())};return RV(g,Boolean(n)),TV(m),R.useEffect(()=>{v(),y()},[n,g,m]),R.useEffect(()=>v,[]),[_,o,h]}function TV(t){R.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function RV(t,e){R.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function oL(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...oL(t.parentElement)]}const PV=["x","y","top","bottom","left","right","width","height"],BV=(t,e)=>PV.every(n=>t[n]===e[n]);var IV=Object.defineProperty,DV=Object.defineProperties,LV=Object.getOwnPropertyDescriptors,vT=Object.getOwnPropertySymbols,kV=Object.prototype.hasOwnProperty,FV=Object.prototype.propertyIsEnumerable,yT=(t,e,n)=>e in t?IV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xT=(t,e)=>{for(var n in e||(e={}))kV.call(e,n)&&yT(t,n,e[n]);if(vT)for(var n of vT(e))FV.call(e,n)&&yT(t,n,e[n]);return t},OV=(t,e)=>DV(t,LV(e));function aL(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=aL(r,e,n);if(i)return i;r=e?null:r.sibling}}function lL(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const _A=lL(R.createContext(null));class uL extends R.Component{render(){return R.createElement(_A.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:UV,ReactCurrentDispatcher:NV}=R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function zV(){const t=R.useContext(_A);if(!t)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=R.useId();return R.useMemo(()=>{var r;return(r=UV.current)!=null?r:aL(t,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[t,e])}function GV(){var t,e;const n=zV(),[r]=R.useState(()=>new Map);r.clear();let i=n;for(;i;){const s=(t=i.type)==null?void 0:t._context;s&&s!==_A&&!r.has(s)&&r.set(s,(e=NV.current)==null?void 0:e.readContext(lL(s))),i=i.return}return R.useMemo(()=>Array.from(r.keys()).reduce((s,o)=>a=>R.createElement(s,null,R.createElement(o.Provider,OV(xT({},a),{value:r.get(o)}))),s=>R.createElement(uL,xT({},s))),[r])}const Rx={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function HV(t){const{handlePointer:e}=hV(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Rx).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=Rx[o];n.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=Rx[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const VV=R.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=HV,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:f,legacy:h,orthographic:m,frameloop:g,dpr:v,performance:y,raycaster:_,camera:x,onPointerMissed:w,onCreated:b,...E},C){R.useMemo(()=>Ip(GD),[]);const P=GV(),[M,B]=CV({scroll:!0,debounce:{scroll:50,resize:0},...r}),D=R.useRef(null),k=R.useRef(null);R.useImperativeHandle(C,()=>D.current);const O=KD(w),[U,N]=R.useState(!1),[$,Q]=R.useState(!1);if(U)throw U;if($)throw $;const ie=R.useRef(null);Dp(()=>{const z=D.current;B.width>0&&B.height>0&&z&&(ie.current||(ie.current=bV(z)),ie.current.configure({gl:s,events:o,shadows:u,linear:c,flat:f,legacy:h,orthographic:m,frameloop:g,dpr:v,performance:y,raycaster:_,camera:x,size:B,onPointerMissed:(...j)=>O.current==null?void 0:O.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(a?oV(a)?a.current:a:k.current),l&&j.setEvents({compute:(H,G)=>{const Z=H[l+"X"],re=H[l+"Y"];G.pointer.set(Z/G.size.width*2-1,-(re/G.size.height)*2+1),G.raycaster.setFromCamera(G.pointer,G.camera)}}),b==null||b(j)}}),ie.current.render(R.createElement(P,null,R.createElement(YD,{set:Q},R.createElement(R.Suspense,{fallback:R.createElement(aV,{set:N})},e)))))}),R.useEffect(()=>{const z=D.current;if(z)return()=>sL(z)},[]);const F=a?"none":"auto";return R.createElement("div",rn({ref:k,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F,...i}},E),R.createElement("div",{ref:M,style:{width:"100%",height:"100%"}},R.createElement("canvas",{ref:D,style:{display:"block"}},n)))}),WV=R.forwardRef(function(e,n){return R.createElement(uL,null,R.createElement(VV,rn({},e,{ref:n})))}),Lp=new V,wA=new V,jV=new V;function $V(t,e,n){const r=Lp.setFromMatrixPosition(t.matrixWorld);r.project(e);const i=n.width/2,s=n.height/2;return[r.x*i+i,-(r.y*s)+s]}function JV(t,e){const n=Lp.setFromMatrixPosition(t.matrixWorld),r=wA.setFromMatrixPosition(e.matrixWorld),i=n.sub(r),s=e.getWorldDirection(jV);return i.angleTo(s)>Math.PI/2}function XV(t,e,n,r){const i=Lp.setFromMatrixPosition(t.matrixWorld),s=i.clone();s.project(e),n.setFromCamera(s,e);const o=n.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(n.ray.origin)<a}return!0}function KV(t,e){if(e instanceof ys)return e.zoom;if(e instanceof An){const n=Lp.setFromMatrixPosition(t.matrixWorld),r=wA.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=n.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function YV(t,e,n){if(e instanceof An||e instanceof ys){const r=Lp.setFromMatrixPosition(t.matrixWorld),i=wA.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(n[1]-n[0])/(e.far-e.near),a=n[1]-o*e.far;return Math.round(o*s+a)}}const Hw=t=>Math.abs(t)<1e-10?0:t;function cL(t,e,n=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=Hw(e[i]*t.elements[i])+(i!==15?",":")");return n+r}const QV=(t=>e=>cL(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),qV=(t=>(e,n)=>cL(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function ZV(t){return t&&typeof t=="object"&&"current"in t}const eW=R.forwardRef(({children:t,eps:e=.001,style:n,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:c=!1,occlude:f,onOcclude:h,castShadow:m,receiveShadow:g,material:v,geometry:y,zIndexRange:_=[16777271,0],calculatePosition:x=$V,as:w="div",wrapperClass:b,pointerEvents:E="auto",...C},P)=>{const{gl:M,camera:B,scene:D,size:k,raycaster:O,events:U,viewport:N}=Nn(),[$]=R.useState(()=>document.createElement(w)),Q=R.useRef(),ie=R.useRef(null),F=R.useRef(0),z=R.useRef([0,0]),j=R.useRef(null),H=R.useRef(null),G=(a==null?void 0:a.current)||U.connected||M.domElement.parentNode,Z=R.useRef(null),re=R.useRef(!1),se=R.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&ZV(f[0]),[f]);R.useLayoutEffect(()=>{const ve=M.domElement;f&&f==="blending"?(ve.style.zIndex=`${Math.floor(_[0]/2)}`,ve.style.position="absolute",ve.style.pointerEvents="none"):(ve.style.zIndex=null,ve.style.position=null,ve.style.pointerEvents=null)},[f]),R.useLayoutEffect(()=>{if(ie.current){const ve=Q.current=KB($);if(D.updateMatrixWorld(),c)$.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const xe=x(ie.current,B,k);$.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${xe[0]}px,${xe[1]}px,0);transform-origin:0 0;`}return G&&(i?G.prepend($):G.appendChild($)),()=>{G&&G.removeChild($),ve.unmount()}}},[G,c]),R.useLayoutEffect(()=>{b&&($.className=b)},[b]);const Y=R.useMemo(()=>c?{position:"absolute",top:0,left:0,width:k.width,height:k.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-k.height/2,left:-k.width/2,width:k.width,height:k.height},...n},[n,s,o,k,c]),ae=R.useMemo(()=>({position:"absolute",pointerEvents:E}),[E]);R.useLayoutEffect(()=>{if(re.current=!1,c){var ve;(ve=Q.current)==null||ve.render(R.createElement("div",{ref:j,style:Y},R.createElement("div",{ref:H,style:ae},R.createElement("div",{ref:P,className:r,style:n,children:t}))))}else{var xe;(xe=Q.current)==null||xe.render(R.createElement("div",{ref:P,style:Y,className:r,children:t}))}});const he=R.useRef(!0);jr(ve=>{if(ie.current){B.updateMatrixWorld(),ie.current.updateWorldMatrix(!0,!1);const xe=c?z.current:x(ie.current,B,k);if(c||Math.abs(F.current-B.zoom)>e||Math.abs(z.current[0]-xe[0])>e||Math.abs(z.current[1]-xe[1])>e){const ne=JV(ie.current,B);let le=!1;se&&(f!=="blending"?le=[D]:Array.isArray(f)&&(le=f.map(Ve=>Ve.current)));const Pe=he.current;if(le){const Ve=XV(ie.current,B,O,le);he.current=Ve&&!ne}else he.current=!ne;Pe!==he.current&&(h?h(!he.current):$.style.display=he.current?"block":"none");const ke=Math.floor(_[0]/2),Re=f?se?[_[0],ke]:[ke-1,0]:_;if($.style.zIndex=`${YV(ie.current,B,Re)}`,c){const[Ve,Me]=[k.width/2,k.height/2],Fe=B.projectionMatrix.elements[5]*Me,{isOrthographicCamera:ze,top:Ee,left:W,bottom:L,right:q}=B,fe=QV(B.matrixWorldInverse),Be=ze?`scale(${Fe})translate(${Hw(-(q+W)/2)}px,${Hw((Ee+L)/2)}px)`:`translateZ(${Fe}px)`;let Ie=ie.current.matrixWorld;u&&(Ie=B.matrixWorldInverse.clone().transpose().copyPosition(Ie).scale(ie.current.scale),Ie.elements[3]=Ie.elements[7]=Ie.elements[11]=0,Ie.elements[15]=1),$.style.width=k.width+"px",$.style.height=k.height+"px",$.style.perspective=ze?"":`${Fe}px`,j.current&&H.current&&(j.current.style.transform=`${Be}${fe}translate(${Ve}px,${Me}px)`,H.current.style.transform=qV(Ie,1/((l||10)/400)))}else{const Ve=l===void 0?1:KV(ie.current,B)*l;$.style.transform=`translate3d(${xe[0]}px,${xe[1]}px,0) scale(${Ve})`}z.current=xe,F.current=B.zoom}}if(!se&&Z.current&&!re.current)if(c){if(j.current){const xe=j.current.children[0];if(xe!=null&&xe.clientWidth&&xe!=null&&xe.clientHeight){const{isOrthographicCamera:ne}=B;if(ne||y)C.scale&&(Array.isArray(C.scale)?C.scale instanceof V?Z.current.scale.copy(C.scale.clone().divideScalar(1)):Z.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):Z.current.scale.setScalar(1/C.scale));else{const le=(l||10)/400,Pe=xe.clientWidth*le,ke=xe.clientHeight*le;Z.current.scale.set(Pe,ke,1)}re.current=!0}}}else{const xe=$.children[0];if(xe!=null&&xe.clientWidth&&xe!=null&&xe.clientHeight){const ne=1/N.factor,le=xe.clientWidth*ne,Pe=xe.clientHeight*ne;Z.current.scale.set(le,Pe,1),re.current=!0}Z.current.lookAt(ve.camera.position)}});const Ce=R.useMemo(()=>({vertexShader:c?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[c]);return R.createElement("group",rn({},C,{ref:ie}),f&&!se&&R.createElement("mesh",{castShadow:m,receiveShadow:g,ref:Z},y||R.createElement("planeGeometry",null),v||R.createElement("shaderMaterial",{side:wi,vertexShader:Ce.vertexShader,fragmentShader:Ce.fragmentShader})))});function tW(t){let e;const n=new Set,r=(u,c)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const h=e;e=c?f:Object.assign({},e,f),n.forEach(m=>m(e,h))}},i=()=>e,s=(u,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=c(e);function m(){const g=c(e);if(!f(h,g)){const v=h;u(h=g,v)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:i,subscribe:(u,c,f)=>c||f?s(u,c,f):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(r,i,l),l}const nW=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),_T=nW?R.useEffect:R.useLayoutEffect;function rW(t){const e=typeof t=="function"?tW(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=R.useReducer(y=>y+1,0),o=e.getState(),a=R.useRef(o),l=R.useRef(r),u=R.useRef(i),c=R.useRef(!1),f=R.useRef();f.current===void 0&&(f.current=r(o));let h,m=!1;(a.current!==o||l.current!==r||u.current!==i||c.current)&&(h=r(o),m=!i(f.current,h)),_T(()=>{m&&(f.current=h),a.current=o,l.current=r,u.current=i,c.current=!1});const g=R.useRef(o);_T(()=>{const y=()=>{try{const x=e.getState(),w=l.current(x);u.current(f.current,w)||(a.current=x,f.current=w,s())}catch{c.current=!0,s()}},_=e.subscribe(y);return e.getState()!==g.current&&y(),_},[]);const v=m?h:f.current;return R.useDebugValue(v),v};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}let Gd=0;const iW=rW(t=>(Kc.onStart=(e,n,r)=>{t({active:!0,item:e,loaded:n,total:r,progress:(n-Gd)/(r-Gd)*100})},Kc.onLoad=()=>{t({active:!1})},Kc.onError=e=>t(n=>({errors:[...n.errors,e]})),Kc.onProgress=(e,n,r)=>{n===r&&(Gd=r),t({active:!0,item:e,loaded:n,total:r,progress:(n-Gd)/(r-Gd)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function fL(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function sW(t,e,n){return Math.max(e,Math.min(t,n))}const Gr={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function wT(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function ST(t,e,n,r=.15){return r===0?sW(t,e,n):t<e?-wT(e-t,n-e,r)+e:t>n?+wT(t-n,n-e,r)+n:t}function oW(t,[e,n],[r,i]){const[[s,o],[a,l]]=t;return[ST(e,s,o,r),ST(n,a,l,i)]}function aW(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lW(t){var e=aW(t,"string");return typeof e=="symbol"?e:String(e)}function vi(t,e,n){return e=lW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bT(Object(n),!0).forEach(function(r){vi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const dL={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function AT(t){return t?t[0].toUpperCase()+t.slice(1):""}const uW=["enter","leave"];function cW(t=!1,e){return t&&!uW.includes(e)}function fW(t,e="",n=!1){const r=dL[t],i=r&&r[e]||e;return"on"+AT(t)+AT(i)+(cW(n,i)?"Capture":"")}const dW=["gotpointercapture","lostpointercapture"];function hW(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const r=dW.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:n}}function pW(t,e=""){const n=dL[t],r=n&&n[e]||e;return t+r}function uy(t){return"touches"in t}function hL(t){return uy(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function mW(t){return Array.from(t.touches).filter(e=>{var n,r;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,e.target))})}function gW(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function pL(t){return uy(t)?gW(t)[0]:t}function vW(t){return mW(t).map(e=>e.identifier)}function Px(t){const e=pL(t);return uy(t)?e.identifier:e.pointerId}function MT(t){const e=pL(t);return[e.clientX,e.clientY]}function yW(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s}=t;Object.assign(e,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s})}return e}function lv(t,...e){return typeof t=="function"?t(...e):t}function xW(){}function _W(...t){return t.length===0?xW:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function ET(t,e){return Object.assign({},e,t||{})}const wW=32;class SW{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:r,args:i}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?lv(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:r,shared:i}=this;n.args=this.args;let s=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,yW(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const C=n._delta.map(Math.abs);Gr.addTo(n._distance,C)}this.axisIntent&&this.axisIntent(e);const[o,a]=n._movement,[l,u]=r.threshold,{_step:c,values:f}=n;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&f[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&f[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),n.intentional=c[0]!==!1||c[1]!==!1,!n.intentional)return;const h=[0,0];if(r.hasCustomTransform){const[C,P]=f;h[0]=c[0]!==!1?C-c[0]:0,h[1]=c[1]!==!1?P-c[1]:0}else h[0]=c[0]!==!1?o-c[0]:0,h[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(h);const m=n.offset,g=n._active&&!n._blocked||n.active;g&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=lv(r.bounds,n)),this.setup&&this.setup()),n.movement=h,this.computeOffset()));const[v,y]=n.offset,[[_,x],[w,b]]=n._bounds;n.overflow=[v<_?-1:v>x?1:0,y<w?-1:y>b?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const E=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=oW(n._bounds,n.offset,E),n.delta=Gr.sub(n.offset,m),this.computeMovement(),g&&(!n.last||s>wW)){n.delta=Gr.sub(n.offset,m);const C=n.delta.map(Math.abs);Gr.addTo(n.distance,C),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&s>0&&(n.velocity=[C[0]/s,C[1]/s],n.timeDelta=s)}}emit(){const e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Dn(Dn(Dn({},n),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function bW([t,e],n){const r=Math.abs(t),i=Math.abs(e);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class AW extends SW{constructor(...e){super(...e),vi(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Gr.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Gr.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,r=this.config;if(!n.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[hL(e)]:r.axisThreshold;n.axis=bW(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const MW=t=>t,CT=.15,mL={enabled(t=!0){return t},eventOptions(t,e,n){return Dn(Dn({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[CT,CT];case!1:return[0,0];default:return Gr.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Gr.toVector(t)},transform(t,e,n){const r=t||n.shared.transform;return this.hasCustomTransform=!!r,r||MW},threshold(t){return Gr.toVector(t,0)}},EW=0,kp=Dn(Dn({},mL),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=EW){return t},bounds(t={}){if(typeof t=="function")return s=>kp.bounds(t(s));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=t;return[[e,n],[r,i]]}}),TT={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class CW extends AW{constructor(...e){super(...e),vi(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+e.offset[0],right:n.right-r.right+e.offset[0],top:n.top-r.top+e.offset[1],bottom:n.bottom-r.bottom+e.offset[1]};e._bounds=kp.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=Px(e),r._pointerActive=!0,this.computeValues(MT(e)),this.computeInitial(),n.preventScrollAxis&&hL(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,r=this.config;if(!n._pointerActive||n.type===e.type&&e.timeStamp===n.timeStamp)return;const i=Px(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;const s=MT(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=Gr.sub(s,n._values),this.computeValues(s)),Gr.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const i=Px(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=n._distance;if(n.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,l]=n._delta,[u,c]=n._movement,[f,h]=r.swipe.velocity,[m,g]=r.swipe.distance,v=r.swipe.duration;if(n.elapsedTime<v){const y=Math.abs(a/n.timeDelta),_=Math.abs(l/n.timeDelta);y>f&&Math.abs(u)>m&&(n.swipe[0]=Math.sign(a)),_>h&&Math.abs(c)>g&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,r=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,TW(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=TT[e.key];if(n){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,Gr.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in TT&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function TW(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const Fp=typeof window<"u"&&window.document&&window.document.createElement;function RW(){return Fp&&"ontouchstart"in window}function RT(){return RW()||Fp&&window.navigator.maxTouchPoints>1}function PW(){return Fp&&"onpointerdown"in window}function BW(){return Fp&&"exitPointerLock"in window.document}function IW(){try{return"constructor"in GestureEvent}catch{return!1}}const fs={isBrowser:Fp,gesture:IW(),touch:RT(),touchscreen:RT(),pointer:PW(),pointerLock:BW()},DW=250,LW=180,kW=.5,FW=50,OW=250,UW=10,PT={mouse:0,touch:0,pen:8},NW=Dn(Dn({},kp),{},{device(t,e,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&fs.pointerLock,fs.touch&&n?"touch":this.pointerLock?"mouse":fs.pointer&&!i?"pointer":fs.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?DW:void 0,!(!fs.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const s=Gr.toVector(t,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,s},swipe({velocity:t=kW,distance:e=FW,duration:n=OW}={}){return{velocity:this.transform(Gr.toVector(t)),distance:this.transform(Gr.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return LW;case!1:return 0;default:return t}},axisThreshold(t){return t?Dn(Dn({},PT),t):PT},keyboardDisplacement(t=UW){return t}});Dn(Dn({},mL),{},{device(t,e,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!fs.touch&&fs.gesture)return"gesture";if(fs.touch&&r)return"touch";if(fs.touchscreen){if(fs.pointer)return"pointer";if(fs.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:r={}}){const i=o=>{const a=ET(lv(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=ET(lv(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",Gr.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});Dn(Dn({},kp),{},{mouseOnly:(t=!0)=>t});Dn(Dn({},kp),{},{mouseOnly:(t=!0)=>t});const gL=new Map,Vw=new Map;function zW(t){gL.set(t.key,t.engine),Vw.set(t.key,t.resolver)}const GW={key:"drag",engine:CW,resolver:NW};function HW(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function VW(t,e){if(t==null)return{};var n=HW(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}const WW={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=fs.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},jW=["target","eventOptions","window","enabled","transform"];function M0(t={},e){const n={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":n[r]=i.call(n,t[r],r,t);break;case"object":n[r]=M0(t[r],i);break;case"boolean":i&&(n[r]=t[r]);break}return n}function $W(t,e,n={}){const r=t,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,u=VW(r,jW);if(n.shared=M0({target:i,eventOptions:s,window:o,enabled:a,transform:l},WW),e){const c=Vw.get(e);n[e]=M0(Dn({shared:n.shared},u),c)}else for(const c in u){const f=Vw.get(c);f&&(n[c]=M0(Dn({shared:n.shared},u[c]),f))}return n}class vL{constructor(e,n){vi(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,r,i,s){const o=this._listeners,a=pW(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=Dn(Dn({},l),s);e.addEventListener(a,i,u);const c=()=>{e.removeEventListener(a,i,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class JW{constructor(){vi(this,"_timeouts",new Map)}add(e,n,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...i))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class XW{constructor(e){vi(this,"gestures",new Set),vi(this,"_targetEventStore",new vL(this)),vi(this,"gestureEventStores",{}),vi(this,"gestureTimeoutStores",{}),vi(this,"handlers",{}),vi(this,"config",{}),vi(this,"pointerIds",new Set),vi(this,"touchIds",new Set),vi(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),KW(this,e)}setEventIds(e){if(uy(e))return this.touchIds=new Set(vW(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=$W(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=BT(r,a.eventOptions,!!i);if(a.enabled){const u=gL.get(o);new u(this,e,o).bind(l)}}const s=BT(r,n.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Dn(Dn({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=_W(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=hW(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function Mc(t,e){t.gestures.add(e),t.gestureEventStores[e]=new vL(t,e),t.gestureTimeoutStores[e]=new JW}function KW(t,e){e.drag&&Mc(t,"drag"),e.wheel&&Mc(t,"wheel"),e.scroll&&Mc(t,"scroll"),e.move&&Mc(t,"move"),e.pinch&&Mc(t,"pinch"),e.hover&&Mc(t,"hover")}const BT=(t,e,n)=>(r,i,s,o={},a=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(u=o.passive)!==null&&u!==void 0?u:e.passive;let h=a?r:fW(r,i,c);n&&f&&(h+="Passive"),t[h]=t[h]||[],t[h].push(s)};function YW(t,e={},n,r){const i=ee.useMemo(()=>new XW(t),[]);if(i.applyHandlers(t,r),i.applyConfig(e,n),ee.useEffect(i.effect.bind(i)),ee.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function QW(t,e){return zW(GW),YW({drag:t},e||{},"drag")}function IT(t,e){if(e===HI)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===nv||e===Db){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const r=n.count-2,i=[];if(n)if(e===nv)for(let o=1;o<=r;o++)i.push(n.getX(0)),i.push(n.getX(o)),i.push(n.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(n.getX(o)),i.push(n.getX(o+1)),i.push(n.getX(o+2))):(i.push(n.getX(o+2)),i.push(n.getX(o+1)),i.push(n.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}const qW=t=>t&&t.isCubeTexture;class ZW extends Mn{constructor(e,n){var r,i;const s=qW(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),u=Math.pow(2,l),c=3*Math.max(u,16*7),f=4*u,h=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/c}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,g=h.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,v={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},y=new Nf(1,16),_=new xn({uniforms:v,fragmentShader:g,vertexShader:m,side:wi});super(y,_)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var e7=Object.defineProperty,t7=(t,e,n)=>e in t?e7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,At=(t,e,n)=>(t7(t,typeof e!="symbol"?e+"":e,n),n);const DT=(t,e)=>(t%e+e)%e;let n7=class extends $i{constructor(e,n){super(),At(this,"object"),At(this,"domElement"),At(this,"enabled",!0),At(this,"target",new V),At(this,"minDistance",0),At(this,"maxDistance",1/0),At(this,"minZoom",0),At(this,"maxZoom",1/0),At(this,"minPolarAngle",0),At(this,"maxPolarAngle",Math.PI),At(this,"minAzimuthAngle",-1/0),At(this,"maxAzimuthAngle",1/0),At(this,"enableDamping",!1),At(this,"dampingFactor",.05),At(this,"enableZoom",!0),At(this,"zoomSpeed",1),At(this,"enableRotate",!0),At(this,"rotateSpeed",1),At(this,"enablePan",!0),At(this,"panSpeed",1),At(this,"screenSpacePanning",!0),At(this,"keyPanSpeed",7),At(this,"autoRotate",!1),At(this,"autoRotateSpeed",2),At(this,"reverseOrbit",!1),At(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),At(this,"mouseButtons",{LEFT:zl.ROTATE,MIDDLE:zl.DOLLY,RIGHT:zl.PAN}),At(this,"touches",{ONE:Gl.ROTATE,TWO:Gl.DOLLY_PAN}),At(this,"target0"),At(this,"position0"),At(this,"zoom0"),At(this,"_domElementKeyEvents",null),At(this,"getPolarAngle"),At(this,"getAzimuthalAngle"),At(this,"setPolarAngle"),At(this,"setAzimuthalAngle"),At(this,"getDistance"),At(this,"listenToKeyEvents"),At(this,"saveState"),At(this,"reset"),At(this,"update"),At(this,"connect"),At(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=K=>{let pe=DT(K,2*Math.PI),Se=c.phi;Se<0&&(Se+=2*Math.PI),pe<0&&(pe+=2*Math.PI);let Ae=Math.abs(pe-Se);2*Math.PI-Ae<Ae&&(pe<Se?pe+=2*Math.PI:Se+=2*Math.PI),f.phi=pe-Se,r.update()},this.setAzimuthalAngle=K=>{let pe=DT(K,2*Math.PI),Se=c.theta;Se<0&&(Se+=2*Math.PI),pe<0&&(pe+=2*Math.PI);let Ae=Math.abs(pe-Se);2*Math.PI-Ae<Ae&&(pe<Se?pe+=2*Math.PI:Se+=2*Math.PI),f.theta=pe-Se,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=K=>{K.addEventListener("keydown",q),this._domElementKeyEvents=K},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const K=new V,pe=new sr().setFromUnitVectors(e.up,new V(0,1,0)),Se=pe.clone().invert(),Ae=new V,Ge=new sr,et=2*Math.PI;return function(){const te=r.object.position;K.copy(te).sub(r.target),K.applyQuaternion(pe),c.setFromVector3(K),r.autoRotate&&l===a.NONE&&O(D()),r.enableDamping?(c.theta+=f.theta*r.dampingFactor,c.phi+=f.phi*r.dampingFactor):(c.theta+=f.theta,c.phi+=f.phi);let me=r.minAzimuthAngle,Oe=r.maxAzimuthAngle;return isFinite(me)&&isFinite(Oe)&&(me<-Math.PI?me+=et:me>Math.PI&&(me-=et),Oe<-Math.PI?Oe+=et:Oe>Math.PI&&(Oe-=et),me<=Oe?c.theta=Math.max(me,Math.min(Oe,c.theta)):c.theta=c.theta>(me+Oe)/2?Math.max(me,c.theta):Math.min(Oe,c.theta)),c.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=h,c.radius=Math.max(r.minDistance,Math.min(r.maxDistance,c.radius)),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),K.setFromSpherical(c),K.applyQuaternion(Se),te.copy(r.target).add(K),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),m.set(0,0,0)),h=1,g||Ae.distanceToSquared(r.object.position)>u||8*(1-Ge.dot(r.object.quaternion))>u?(r.dispatchEvent(i),Ae.copy(r.object.position),Ge.copy(r.object.quaternion),g=!1,!0):!1}})(),this.connect=K=>{K===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=K,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Ie),r.domElement.addEventListener("pointerdown",Ve),r.domElement.addEventListener("pointercancel",ze),r.domElement.addEventListener("wheel",L)},this.dispose=()=>{var K,pe,Se,Ae,Ge,et;(K=r.domElement)==null||K.removeEventListener("contextmenu",Ie),(pe=r.domElement)==null||pe.removeEventListener("pointerdown",Ve),(Se=r.domElement)==null||Se.removeEventListener("pointercancel",ze),(Ae=r.domElement)==null||Ae.removeEventListener("wheel",L),(Ge=r.domElement)==null||Ge.ownerDocument.removeEventListener("pointermove",Me),(et=r.domElement)==null||et.ownerDocument.removeEventListener("pointerup",Fe),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",q)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,c=new sv,f=new sv;let h=1;const m=new V;let g=!1;const v=new we,y=new we,_=new we,x=new we,w=new we,b=new we,E=new we,C=new we,P=new we,M=[],B={};function D(){return 2*Math.PI/60/60*r.autoRotateSpeed}function k(){return Math.pow(.95,r.zoomSpeed)}function O(K){r.reverseOrbit?f.theta+=K:f.theta-=K}function U(K){r.reverseOrbit?f.phi+=K:f.phi-=K}const N=(()=>{const K=new V;return function(Se,Ae){K.setFromMatrixColumn(Ae,0),K.multiplyScalar(-Se),m.add(K)}})(),$=(()=>{const K=new V;return function(Se,Ae){r.screenSpacePanning===!0?K.setFromMatrixColumn(Ae,1):(K.setFromMatrixColumn(Ae,0),K.crossVectors(r.object.up,K)),K.multiplyScalar(Se),m.add(K)}})(),Q=(()=>{const K=new V;return function(Se,Ae){const Ge=r.domElement;if(Ge&&r.object instanceof An&&r.object.isPerspectiveCamera){const et=r.object.position;K.copy(et).sub(r.target);let mt=K.length();mt*=Math.tan(r.object.fov/2*Math.PI/180),N(2*Se*mt/Ge.clientHeight,r.object.matrix),$(2*Ae*mt/Ge.clientHeight,r.object.matrix)}else Ge&&r.object instanceof ys&&r.object.isOrthographicCamera?(N(Se*(r.object.right-r.object.left)/r.object.zoom/Ge.clientWidth,r.object.matrix),$(Ae*(r.object.top-r.object.bottom)/r.object.zoom/Ge.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function ie(K){r.object instanceof An&&r.object.isPerspectiveCamera?h/=K:r.object instanceof ys&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*K)),r.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function F(K){r.object instanceof An&&r.object.isPerspectiveCamera?h*=K:r.object instanceof ys&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/K)),r.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function z(K){v.set(K.clientX,K.clientY)}function j(K){E.set(K.clientX,K.clientY)}function H(K){x.set(K.clientX,K.clientY)}function G(K){y.set(K.clientX,K.clientY),_.subVectors(y,v).multiplyScalar(r.rotateSpeed);const pe=r.domElement;pe&&(O(2*Math.PI*_.x/pe.clientHeight),U(2*Math.PI*_.y/pe.clientHeight)),v.copy(y),r.update()}function Z(K){C.set(K.clientX,K.clientY),P.subVectors(C,E),P.y>0?ie(k()):P.y<0&&F(k()),E.copy(C),r.update()}function re(K){w.set(K.clientX,K.clientY),b.subVectors(w,x).multiplyScalar(r.panSpeed),Q(b.x,b.y),x.copy(w),r.update()}function se(K){K.deltaY<0?F(k()):K.deltaY>0&&ie(k()),r.update()}function Y(K){let pe=!1;switch(K.code){case r.keys.UP:Q(0,r.keyPanSpeed),pe=!0;break;case r.keys.BOTTOM:Q(0,-r.keyPanSpeed),pe=!0;break;case r.keys.LEFT:Q(r.keyPanSpeed,0),pe=!0;break;case r.keys.RIGHT:Q(-r.keyPanSpeed,0),pe=!0;break}pe&&(K.preventDefault(),r.update())}function ae(){if(M.length==1)v.set(M[0].pageX,M[0].pageY);else{const K=.5*(M[0].pageX+M[1].pageX),pe=.5*(M[0].pageY+M[1].pageY);v.set(K,pe)}}function he(){if(M.length==1)x.set(M[0].pageX,M[0].pageY);else{const K=.5*(M[0].pageX+M[1].pageX),pe=.5*(M[0].pageY+M[1].pageY);x.set(K,pe)}}function Ce(){const K=M[0].pageX-M[1].pageX,pe=M[0].pageY-M[1].pageY,Se=Math.sqrt(K*K+pe*pe);E.set(0,Se)}function ve(){r.enableZoom&&Ce(),r.enablePan&&he()}function xe(){r.enableZoom&&Ce(),r.enableRotate&&ae()}function ne(K){if(M.length==1)y.set(K.pageX,K.pageY);else{const Se=We(K),Ae=.5*(K.pageX+Se.x),Ge=.5*(K.pageY+Se.y);y.set(Ae,Ge)}_.subVectors(y,v).multiplyScalar(r.rotateSpeed);const pe=r.domElement;pe&&(O(2*Math.PI*_.x/pe.clientHeight),U(2*Math.PI*_.y/pe.clientHeight)),v.copy(y)}function le(K){if(M.length==1)w.set(K.pageX,K.pageY);else{const pe=We(K),Se=.5*(K.pageX+pe.x),Ae=.5*(K.pageY+pe.y);w.set(Se,Ae)}b.subVectors(w,x).multiplyScalar(r.panSpeed),Q(b.x,b.y),x.copy(w)}function Pe(K){const pe=We(K),Se=K.pageX-pe.x,Ae=K.pageY-pe.y,Ge=Math.sqrt(Se*Se+Ae*Ae);C.set(0,Ge),P.set(0,Math.pow(C.y/E.y,r.zoomSpeed)),ie(P.y),E.copy(C)}function ke(K){r.enableZoom&&Pe(K),r.enablePan&&le(K)}function Re(K){r.enableZoom&&Pe(K),r.enableRotate&&ne(K)}function Ve(K){var pe,Se;r.enabled!==!1&&(M.length===0&&((pe=r.domElement)==null||pe.ownerDocument.addEventListener("pointermove",Me),(Se=r.domElement)==null||Se.ownerDocument.addEventListener("pointerup",Fe)),Ne(K),K.pointerType==="touch"?fe(K):Ee(K))}function Me(K){r.enabled!==!1&&(K.pointerType==="touch"?Be(K):W(K))}function Fe(K){var pe,Se,Ae;Ue(K),M.length===0&&((pe=r.domElement)==null||pe.releasePointerCapture(K.pointerId),(Se=r.domElement)==null||Se.ownerDocument.removeEventListener("pointermove",Me),(Ae=r.domElement)==null||Ae.ownerDocument.removeEventListener("pointerup",Fe)),r.dispatchEvent(o),l=a.NONE}function ze(K){Ue(K)}function Ee(K){let pe;switch(K.button){case 0:pe=r.mouseButtons.LEFT;break;case 1:pe=r.mouseButtons.MIDDLE;break;case 2:pe=r.mouseButtons.RIGHT;break;default:pe=-1}switch(pe){case zl.DOLLY:if(r.enableZoom===!1)return;j(K),l=a.DOLLY;break;case zl.ROTATE:if(K.ctrlKey||K.metaKey||K.shiftKey){if(r.enablePan===!1)return;H(K),l=a.PAN}else{if(r.enableRotate===!1)return;z(K),l=a.ROTATE}break;case zl.PAN:if(K.ctrlKey||K.metaKey||K.shiftKey){if(r.enableRotate===!1)return;z(K),l=a.ROTATE}else{if(r.enablePan===!1)return;H(K),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function W(K){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;G(K);break;case a.DOLLY:if(r.enableZoom===!1)return;Z(K);break;case a.PAN:if(r.enablePan===!1)return;re(K);break}}function L(K){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(K.preventDefault(),r.dispatchEvent(s),se(K),r.dispatchEvent(o))}function q(K){r.enabled===!1||r.enablePan===!1||Y(K)}function fe(K){switch(_e(K),M.length){case 1:switch(r.touches.ONE){case Gl.ROTATE:if(r.enableRotate===!1)return;ae(),l=a.TOUCH_ROTATE;break;case Gl.PAN:if(r.enablePan===!1)return;he(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Gl.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ve(),l=a.TOUCH_DOLLY_PAN;break;case Gl.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;xe(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Be(K){switch(_e(K),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;ne(K),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;le(K),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ke(K),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Re(K),r.update();break;default:l=a.NONE}}function Ie(K){r.enabled!==!1&&K.preventDefault()}function Ne(K){M.push(K)}function Ue(K){delete B[K.pointerId];for(let pe=0;pe<M.length;pe++)if(M[pe].pointerId==K.pointerId){M.splice(pe,1);return}}function _e(K){let pe=B[K.pointerId];pe===void 0&&(pe=new we,B[K.pointerId]=pe),pe.set(K.pageX,K.pageY)}function We(K){const pe=K.pointerId===M[0].pointerId?M[1]:M[0];return B[pe.pointerId]}n!==void 0&&this.connect(n),this.update()}};var r7=Object.defineProperty,i7=(t,e,n)=>e in t?r7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ru=(t,e,n)=>(i7(t,typeof e!="symbol"?e+"":e,n),n);let Op=class{constructor(){ru(this,"enabled",!0),ru(this,"needsSwap",!0),ru(this,"clear",!1),ru(this,"renderToScreen",!1)}setSize(e,n){}render(e,n,r,i,s){console.error("THREE.Pass: .render() must be implemented in derived pass.")}};class yL{constructor(e){ru(this,"camera",new ys(-1,1,1,-1,0,1)),ru(this,"geometry",new yo(2,2)),ru(this,"mesh"),this.mesh=new Mn(this.geometry,e)}get material(){return this.mesh.material}set material(e){this.mesh.material=e}dispose(){this.mesh.geometry.dispose()}render(e){e.render(this.mesh,this.camera)}}var s7=Object.defineProperty,o7=(t,e,n)=>e in t?s7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hg=(t,e,n)=>(o7(t,typeof e!="symbol"?e+"":e,n),n);class Ww extends Op{constructor(e,n="tDiffuse"){super(),Hg(this,"textureID"),Hg(this,"uniforms"),Hg(this,"material"),Hg(this,"fsQuad"),this.textureID=n,e instanceof xn?(this.uniforms=e.uniforms,this.material=e):(this.uniforms=bu.clone(e.uniforms),this.material=new xn({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new yL(this.material)}render(e,n,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}const jw={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)},a7={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new $e(0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	vec3 luma = vec3( 0.299, 0.587, 0.114 );","	float v = dot( texel.xyz, luma );","	vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","	float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","	gl_FragColor = mix( outputColor, texel, alpha );","}"].join(`
`)};var l7=Object.defineProperty,u7=(t,e,n)=>e in t?l7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xL=(t,e,n)=>(u7(t,typeof e!="symbol"?e+"":e,n),n);const $w=class extends Op{constructor(t,e,n,r){super(),this.strength=e!==void 0?e:1,this.radius=n,this.threshold=r,this.resolution=t!==void 0?new we(t.x,t.y):new we(256,256),this.clearColor=new $e(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let i=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new hn(i,s,{type:Nr}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let c=0;c<this.nMips;c++){const f=new hn(i,s,{type:Nr});f.texture.name="UnrealBloomPass.h"+c,f.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(f);const h=new hn(i,s,{type:Nr});h.texture.name="UnrealBloomPass.v"+c,h.texture.generateMipmaps=!1,this.renderTargetsVertical.push(h),i=Math.round(i/2),s=Math.round(s/2)}const o=a7;this.highPassUniforms=bu.clone(o.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new xn({uniforms:this.highPassUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const a=[3,5,7,9,11];i=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);for(let c=0;c<this.nMips;c++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(a[c])),this.separableBlurMaterials[c].uniforms.texSize.value=new we(i,s),i=Math.round(i/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=e,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;const l=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=l,this.bloomTintColors=[new V(1,1,1),new V(1,1,1),new V(1,1,1),new V(1,1,1),new V(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const u=jw;this.copyUniforms=bu.clone(u.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new xn({uniforms:this.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:Vh,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new $e,this.oldClearAlpha=1,this.basic=new si,this.fsQuad=new yL(null)}dispose(){for(let t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(let t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose();for(let t=0;t<this.separableBlurMaterials.length;t++)this.separableBlurMaterials[t].dispose();this.compositeMaterial.dispose(),this.materialCopy.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(t,e){let n=Math.round(t/2),r=Math.round(e/2);this.renderTargetBright.setSize(n,r);for(let i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(n,r),this.renderTargetsVertical[i].setSize(n,r),this.separableBlurMaterials[i].uniforms.texSize.value=new we(n,r),n=Math.round(n/2),r=Math.round(r/2)}render(t,e,n,r,i){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const s=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),i&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t);let o=this.renderTargetBright;for(let a=0;a<this.nMips;a++)this.fsQuad.material=this.separableBlurMaterials[a],this.separableBlurMaterials[a].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[a].uniforms.direction.value=$w.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[a]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[a].uniforms.colorTexture.value=this.renderTargetsHorizontal[a].texture,this.separableBlurMaterials[a].uniforms.direction.value=$w.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[a]),t.clear(),this.fsQuad.render(t),o=this.renderTargetsVertical[a];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(n),this.fsQuad.render(t)),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=s}getSeperableBlurMaterial(t){return new xn({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new we(.5,.5)},direction:{value:new we(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}
				void main() {
					vec2 invSize = 1.0 / texSize;
					float fSigma = float(SIGMA);
					float weightSum = gaussianPdf(0.0, fSigma);
					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianPdf(x, fSigma);
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(t){return new xn({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}};let SA=$w;xL(SA,"BlurDirectionX",new we(1,0));xL(SA,"BlurDirectionY",new we(0,1));var c7=Object.defineProperty,f7=(t,e,n)=>e in t?c7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bx=(t,e,n)=>(f7(t,typeof e!="symbol"?e+"":e,n),n);class LT extends Op{constructor(e,n){super(),Bx(this,"scene"),Bx(this,"camera"),Bx(this,"inverse"),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,r){const i=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),s.buffers.stencil.setFunc(i.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(i.EQUAL,1,4294967295),s.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),s.buffers.stencil.setLocked(!0)}}class d7 extends Op{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}var h7=Object.defineProperty,p7=(t,e,n)=>e in t?h7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ss=(t,e,n)=>(p7(t,typeof e!="symbol"?e+"":e,n),n);class m7{constructor(e,n){if(ss(this,"renderer"),ss(this,"_pixelRatio"),ss(this,"_width"),ss(this,"_height"),ss(this,"renderTarget1"),ss(this,"renderTarget2"),ss(this,"writeBuffer"),ss(this,"readBuffer"),ss(this,"renderToScreen"),ss(this,"passes",[]),ss(this,"copyPass"),ss(this,"clock"),this.renderer=e,n===void 0){const r={minFilter:Kt,magFilter:Kt,format:Ur},i=e.getSize(new we);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,n=new hn(this._width*this._pixelRatio,this._height*this._pixelRatio,r),n.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,jw===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),Ww===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Ww(jw),this.clock=new ly}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let r=!1;const i=this.passes.length;for(let s=0;s<i;s++){const o=this.passes[s];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(s),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),o.needsSwap){if(r){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}LT!==void 0&&(o instanceof LT?r=!0:o instanceof d7&&(r=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new we);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}var g7=Object.defineProperty,v7=(t,e,n)=>e in t?g7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kl=(t,e,n)=>(v7(t,typeof e!="symbol"?e+"":e,n),n);class y7 extends Op{constructor(e,n,r,i,s=0){super(),kl(this,"scene"),kl(this,"camera"),kl(this,"overrideMaterial"),kl(this,"clearColor"),kl(this,"clearAlpha"),kl(this,"clearDepth",!1),kl(this,"_oldClearColor",new $e),this.scene=e,this.camera=n,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=s,this.clear=!0,this.needsSwap=!1}render(e,n,r){let i=e.autoClear;e.autoClear=!1;let s,o=null;this.overrideMaterial!==void 0&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=o),e.autoClear=i}}class bA extends di{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new b7(n)}),this.register(function(n){return new B7(n)}),this.register(function(n){return new I7(n)}),this.register(function(n){return new D7(n)}),this.register(function(n){return new M7(n)}),this.register(function(n){return new E7(n)}),this.register(function(n){return new C7(n)}),this.register(function(n){return new T7(n)}),this.register(function(n){return new S7(n)}),this.register(function(n){return new R7(n)}),this.register(function(n){return new A7(n)}),this.register(function(n){return new P7(n)}),this.register(function(n){return new _7(n)}),this.register(function(n){return new L7(n)}),this.register(function(n){return new k7(n)})}load(e,n,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=po.extractUrlBase(e),this.manager.itemStart(e);const a=function(u){i?i(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Vi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(c){n(c),s.manager.itemEnd(e)},a)}catch(c){a(c)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(po.decodeText(new Uint8Array(e.slice(0,4)))===_L){try{o[zt.KHR_BINARY_GLTF]=new F7(e)}catch(c){i&&i(c);return}s=JSON.parse(o[zt.KHR_BINARY_GLTF].content)}else s=JSON.parse(po.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new K7(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const c=this.pluginCallbacks[u](l);a[c.name]=c,o[c.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const c=s.extensionsUsed[u],f=s.extensionsRequired||[];switch(c){case zt.KHR_MATERIALS_UNLIT:o[c]=new w7;break;case zt.KHR_DRACO_MESH_COMPRESSION:o[c]=new O7(s,this.dracoLoader);break;case zt.KHR_TEXTURE_TRANSFORM:o[c]=new U7;break;case zt.KHR_MESH_QUANTIZATION:o[c]=new N7;break;default:f.indexOf(c)>=0&&a[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,n){const r=this;return new Promise(function(i,s){r.parse(e,n,i,s)})}}function x7(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const zt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class _7{constructor(e){this.parser=e,this.name=zt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let r=0,i=n.length;r<i;r++){const s=n[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,r="light:"+e;let i=n.cache.get(r);if(i)return i;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const c=new $e(16777215);l.color!==void 0&&c.fromArray(l.color);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new fA(c),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new cA(c),u.distance=f;break;case"spot":u=new uA(c),u.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,ka(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=n.createUniqueName(l.name||"light_"+e),i=Promise.resolve(u),n.cache.add(r,i),i}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(n.cache,a,l)})}}class w7{constructor(){this.name=zt.KHR_MATERIALS_UNLIT}getMaterialType(){return si}extendParams(e,n,r){const i=[];e.color=new $e(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(i)}}class S7{constructor(e){this.parser=e,this.name=zt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class b7{constructor(e){this.parser=e,this.name=zt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new we(a,a)}return Promise.all(s)}}class A7{constructor(e){this.parser=e,this.name=zt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class M7{constructor(e){this.parser=e,this.name=zt.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new $e(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(n,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class E7{constructor(e){this.parser=e,this.name=zt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class C7{constructor(e){this.parser=e,this.name=zt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new $e(a[0],a[1],a[2]),Promise.all(s)}}class T7{constructor(e){this.parser=e,this.name=zt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class R7{constructor(e){this.parser=e,this.name=zt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new $e(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(n,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class P7{constructor(e){this.parser=e,this.name=zt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(n.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(n.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(n,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class B7{constructor(e){this.parser=e,this.name=zt.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}}class I7{constructor(e){this.parser=e,this.name=zt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class D7{constructor(e){this.parser=e,this.name=zt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class L7{constructor(e){this.name=zt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,r=n.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,u=i.byteLength||0,c=i.count,f=i.byteStride,h=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,f,h,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(c*f);return o.decodeGltfBuffer(new Uint8Array(m),c,f,h,i.mode,i.filter),m})})}else return null}}class k7{constructor(e){this.name=zt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=n.meshes[r.mesh];for(const u of i.primitives)if(u.mode!==os.TRIANGLES&&u.mode!==os.TRIANGLE_STRIP&&u.mode!==os.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(c=>(l[u]=c,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const c=u.pop(),f=c.isGroup?c.children:[c],h=u[0].count,m=[];for(const g of f){const v=new gt,y=new V,_=new sr,x=new V(1,1,1),w=new $b(g.geometry,g.material,h);for(let b=0;b<h;b++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,b),l.SCALE&&x.fromBufferAttribute(l.SCALE,b),w.setMatrixAt(b,v.compose(y,_,x));for(const b in l)b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&g.geometry.setAttribute(b,l[b]);Gt.prototype.copy.call(w,g),this.parser.assignFinalMaterial(w),m.push(w)}return c.isGroup?(c.clear(),c.add(...m),c):m[0]}))}}const _L="glTF",Hd=12,kT={JSON:1313821514,BIN:5130562};class F7{constructor(e){this.name=zt.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,Hd);if(this.header={magic:po.decodeText(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==_L)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Hd,i=new DataView(e,Hd);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===kT.JSON){const l=new Uint8Array(e,Hd+s,o);this.content=po.decodeText(l)}else if(a===kT.BIN){const l=Hd+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class O7{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=zt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const c in o){const f=Jw[c]||c.toLowerCase();a[f]=o[c]}for(const c in e.attributes){const f=Jw[c]||c.toLowerCase();if(o[c]!==void 0){const h=r.accessors[e.attributes[c]],m=af[h.componentType];u[f]=m.name,l[f]=h.normalized===!0}}return n.getDependency("bufferView",s).then(function(c){return new Promise(function(f){i.decodeDracoFile(c,function(h){for(const m in h.attributes){const g=h.attributes[m],v=l[m];v!==void 0&&(g.normalized=v)}f(h)},a,u)})})}}class U7{constructor(){this.name=zt.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class N7{constructor(){this.name=zt.KHR_MESH_QUANTIZATION}}class wL extends Hf{constructor(e,n,r,i){super(e,n,r,i)}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)n[o]=r[s+o];return n}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,c=i-n,f=(r-n)/c,h=f*f,m=h*f,g=e*u,v=g-u,y=-2*m+3*h,_=m-h,x=1-y,w=_-h+f;for(let b=0;b!==a;b++){const E=o[v+b+a],C=o[v+b+l]*c,P=o[g+b+a],M=o[g+b]*c;s[b]=x*E+w*C+y*P+_*M}return s}}const z7=new sr;class G7 extends wL{interpolate_(e,n,r,i){const s=super.interpolate_(e,n,r,i);return z7.fromArray(s).normalize().toArray(s),s}}const os={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},af={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},FT={9728:Sn,9729:Kt,9984:jh,9985:jv,9986:sf,9987:Hs},OT={33071:Sr,33648:xf,10497:rl},Ix={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Jw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Lu.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ca={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},H7={CUBICSPLINE:void 0,LINEAR:Su,STEP:_f},Dx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function V7(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new Bp({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Gs})),t.DefaultMaterial}function Fl(t,e,n){for(const r in n.extensions)t[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function ka(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function W7(t,e,n){let r=!1,i=!1,s=!1;for(let u=0,c=e.length;u<c;u++){const f=e[u];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let u=0,c=e.length;u<c;u++){const f=e[u];if(r){const h=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):t.attributes.position;o.push(h)}if(i){const h=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):t.attributes.normal;a.push(h)}if(s){const h=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):t.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const c=u[0],f=u[1],h=u[2];return r&&(t.morphAttributes.position=c),i&&(t.morphAttributes.normal=f),s&&(t.morphAttributes.color=h),t.morphTargetsRelative=!0,t})}function j7(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let r=0,i=n.length;r<i;r++)t.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function $7(t){let e;const n=t.extensions&&t.extensions[zt.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+Lx(n.attributes):e=t.indices+":"+Lx(t.attributes)+":"+t.mode,t.targets!==void 0)for(let r=0,i=t.targets.length;r<i;r++)e+=":"+Lx(t.targets[r]);return e}function Lx(t){let e="";const n=Object.keys(t).sort();for(let r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function Xw(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function J7(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const X7=new gt;class K7{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new x7,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new aA(this.options.manager):this.textureLoader=new FD(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Vi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};Fl(s,a,i),ka(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=n.length;i<s;i++){const o=n[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,r){if(e.refs[n]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,c]of o.children.entries())s(c,a.children[u])};return s(r,i),i.name+="_instance_"+e.uses[n]++,i}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const i=e(n[r]);if(i)return i}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let i=0;i<n.length;i++){const s=e(n[i]);s&&r.push(s)}return r}getDependency(e,n){const r=e+":"+n;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(n);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":i=this.loadAccessor(n);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":i=this.loadBuffer(n);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":i=this.loadSkin(n);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":i=this.loadCamera(n);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let n=this.cache.get(e);if(!n){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[zt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(po.resolveURL(n.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(r){const i=n.byteLength||0,s=n.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const n=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=Ix[i.type],a=af[i.componentType],l=i.normalized===!0,u=new a(i.count*o);return Promise.resolve(new Ut(u,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=Ix[i.type],u=af[i.componentType],c=u.BYTES_PER_ELEMENT,f=c*l,h=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let v,y;if(m&&m!==f){const _=Math.floor(h/m),x="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+_+":"+i.count;let w=n.cache.get(x);w||(v=new u(a,_*m,i.count*m/c),w=new yp(v,m/c),n.cache.add(x,w)),y=new il(w,l,h%m/c,g)}else a===null?v=new u(i.count*l):v=new u(a,h,i.count*l),y=new Ut(v,l,g);if(i.sparse!==void 0){const _=Ix.SCALAR,x=af[i.sparse.indices.componentType],w=i.sparse.indices.byteOffset||0,b=i.sparse.values.byteOffset||0,E=new x(o[1],w,i.sparse.count*_),C=new u(o[2],b,i.sparse.count*l);a!==null&&(y=new Ut(y.array.slice(),y.itemSize,y.normalized));for(let P=0,M=E.length;P<M;P++){const B=E[P];if(y.setX(B,C[P*l]),l>=2&&y.setY(B,C[P*l+1]),l>=3&&y.setZ(B,C[P*l+2]),l>=4&&y.setW(B,C[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const n=this.json,r=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,r){const i=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(n,r).then(function(c){c.flipY=!1,c.name=o.name||a.name||"",c.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(c.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return c.magFilter=FT[h.magFilter]||Kt,c.minFilter=FT[h.minFilter]||Hs,c.wrapS=OT[h.wrapS]||rl,c.wrapT=OT[h.wrapT]||rl,i.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,n){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(f){u=!0;const h=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(f){return new Promise(function(h,m){let g=h;n.isImageBitmapLoader===!0&&(g=function(v){const y=new an(v);y.needsUpdate=!0,h(y)}),n.load(po.resolveURL(f,s.path),g,void 0,m)})}).then(function(f){return u===!0&&a.revokeObjectURL(l),f.userData.mimeType=o.mimeType||J7(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=c,c}assignTexture(e,n,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[zt.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[zt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[zt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&("colorSpace"in o?o.colorSpace=i===3001?"srgb":"srgb-linear":o.encoding=i),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let r=e.material;const i=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new ny,zn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Wr,zn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return Bp}loadMaterial(e){const n=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[zt.KHR_MATERIALS_UNLIT]){const f=i[zt.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),u.push(f.extendParams(a,s,n))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new $e(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}f.baseColorTexture!==void 0&&u.push(n.assignTexture(a,"map",f.baseColorTexture,3001)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(n.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),u.push(n.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=wi);const c=s.alphaMode||Dx.OPAQUE;if(c===Dx.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===Dx.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==si&&(u.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new we(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return s.occlusionTexture!==void 0&&o!==si&&(u.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==si&&(a.emissive=new $e().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==si&&u.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(u).then(function(){const f=new o(a);return s.name&&(f.name=s.name),ka(f,s),n.associations.set(f,{materials:e}),s.extensions&&Fl(i,f,s),f})}createUniqueName(e){const n=jt.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[zt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return UT(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],c=$7(u),f=i[c];if(f)o.push(f.promise);else{let h;u.extensions&&u.extensions[zt.KHR_DRACO_MESH_COMPRESSION]?h=s(u):h=UT(new wt,u,n),i[c]={primitive:u,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const n=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const c=o[l].material===void 0?V7(this.cache):this.getDependency("material",o[l].material);a.push(c)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],f=[];for(let m=0,g=c.length;m<g;m++){const v=c[m],y=o[m];let _;const x=u[m];if(y.mode===os.TRIANGLES||y.mode===os.TRIANGLE_STRIP||y.mode===os.TRIANGLE_FAN||y.mode===void 0)_=s.isSkinnedMesh===!0?new jb(v,x):new Mn(v,x),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),y.mode===os.TRIANGLE_STRIP?_.geometry=IT(_.geometry,Db):y.mode===os.TRIANGLE_FAN&&(_.geometry=IT(_.geometry,nv));else if(y.mode===os.LINES)_=new js(v,x);else if(y.mode===os.LINE_STRIP)_=new na(v,x);else if(y.mode===os.LINE_LOOP)_=new Jb(v,x);else if(y.mode===os.POINTS)_=new Xb(v,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(_.geometry.morphAttributes).length>0&&j7(_,s),_.name=n.createUniqueName(s.name||"mesh_"+e),ka(_,s),y.extensions&&Fl(i,_,y),n.assignFinalMaterial(_),f.push(_)}for(let m=0,g=f.length;m<g;m++)n.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&Fl(i,f[0],s),f[0];const h=new Xo;s.extensions&&Fl(i,h,s),n.associations.set(h,{meshes:e});for(let m=0,g=f.length;m<g;m++)h.add(f[m]);return h})}loadCamera(e){let n;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new An(eu.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(n=new ys(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),ka(n,r),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],r=[];for(let i=0,s=n.joints.length;i<s;i++)r.push(this._loadNodeShallow(n.joints[i]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let u=0,c=o.length;u<c;u++){const f=o[u];if(f){a.push(f);const h=new gt;s!==null&&h.fromArray(s.array,u*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[u])}return new xp(a,l)})}loadAnimation(e){const r=this.json.animations[e],i=r.name?r.name:"animation_"+e,s=[],o=[],a=[],l=[],u=[];for(let c=0,f=r.channels.length;c<f;c++){const h=r.channels[c],m=r.samplers[h.sampler],g=h.target,v=g.node,y=r.parameters!==void 0?r.parameters[m.input]:m.input,_=r.parameters!==void 0?r.parameters[m.output]:m.output;g.node!==void 0&&(s.push(this.getDependency("node",v)),o.push(this.getDependency("accessor",y)),a.push(this.getDependency("accessor",_)),l.push(m),u.push(g))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(c){const f=c[0],h=c[1],m=c[2],g=c[3],v=c[4],y=[];for(let _=0,x=f.length;_<x;_++){const w=f[_],b=h[_],E=m[_],C=g[_],P=v[_];if(w===void 0)continue;w.updateMatrix();let M;switch(Ca[P.path]){case Ca.weights:M=bf;break;case Ca.rotation:M=sl;break;case Ca.position:case Ca.scale:default:M=Af;break}const B=w.name?w.name:w.uuid,D=C.interpolation!==void 0?H7[C.interpolation]:Su,k=[];Ca[P.path]===Ca.weights?w.traverse(function(U){U.morphTargetInfluences&&k.push(U.name?U.name:U.uuid)}):k.push(B);let O=E.array;if(E.normalized){const U=Xw(O.constructor),N=new Float32Array(O.length);for(let $=0,Q=O.length;$<Q;$++)N[$]=O[$]*U;O=N}for(let U=0,N=k.length;U<N;U++){const $=new M(k[U]+"."+Ca[P.path],b.array,O,D);C.interpolation==="CUBICSPLINE"&&($.createInterpolant=function(ie){const F=this instanceof sl?G7:wL;return new F(this.times,this.values,this.getValueSize()/3,ie)},$.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),y.push($)}}return new Mf(i,void 0,y)})}createNodeMesh(e){const n=this.json,r=this,i=n.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=i.weights.length;l<u;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const n=this.json,r=this,i=n.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let u=0,c=a.length;u<c;u++)o.push(r.getDependency("node",a[u]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const c=u[0],f=u[1],h=u[2];h!==null&&c.traverse(function(m){m.isSkinnedMesh&&m.bind(h,X7)});for(let m=0,g=f.length;m<g;m++)c.add(f[m]);return c})}_loadNodeShallow(e){const n=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(u){return i._getNodeRef(i.cameraCache,s.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let c;if(s.isBone===!0?c=new ty:u.length>1?c=new Xo:u.length===1?c=u[0]:c=new Gt,c!==u[0])for(let f=0,h=u.length;f<h;f++)c.add(u[f]);if(s.name&&(c.userData.name=s.name,c.name=o),ka(c,s),s.extensions&&Fl(r,c,s),s.matrix!==void 0){const f=new gt;f.fromArray(s.matrix),c.applyMatrix4(f)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return i.associations.has(c)||i.associations.set(c,{}),i.associations.get(c).nodes=e,c}),this.nodeCache[e]}loadScene(e){const n=this.extensions,r=this.json.scenes[e],i=this,s=new Xo;r.name&&(s.name=i.createUniqueName(r.name)),ka(s,r),r.extensions&&Fl(n,s,r);const o=r.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let c=0,f=l.length;c<f;c++)s.add(l[c]);const u=c=>{const f=new Map;for(const[h,m]of i.associations)(h instanceof zn||h instanceof an)&&f.set(h,m);return c.traverse(h=>{const m=i.associations.get(h);m!=null&&f.set(h,m)}),f};return i.associations=u(s),s})}}function Y7(t,e,n){const r=e.attributes,i=new vo;if(r.POSITION!==void 0){const a=n.json.accessors[r.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(i.set(new V(l[0],l[1],l[2]),new V(u[0],u[1],u[2])),a.normalized){const c=Xw(af[a.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new V,l=new V;for(let u=0,c=s.length;u<c;u++){const f=s[u];if(f.POSITION!==void 0){const h=n.json.accessors[f.POSITION],m=h.min,g=h.max;if(m!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),h.normalized){const v=Xw(af[h.componentType]);l.multiplyScalar(v)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}t.boundingBox=i;const o=new oa;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=o}function UT(t,e,n){const r=e.attributes,i=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in r){const a=Jw[o]||o.toLowerCase();a in t.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});i.push(o)}return ka(t,e),Y7(t,e,n),Promise.all(i).then(function(){return e.targets!==void 0?W7(t,e.targets,n):t})}const Q7={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 tex = texture2D( tDiffuse, vUv );","	gl_FragColor = LinearTosRGB( tex );","}"].join(`
`)};class q7 extends PD{constructor(e){super(e),this.type=Nr}parse(e){const a=function(w,b){switch(w){case 1:console.error("THREE.RGBELoader Read Error: "+(b||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(b||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(b||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(b||""))}return-1},f=`
`,h=function(w,b,E){b=b||1024;let P=w.pos,M=-1,B=0,D="",k=String.fromCharCode.apply(null,new Uint16Array(w.subarray(P,P+128)));for(;0>(M=k.indexOf(f))&&B<b&&P<w.byteLength;)D+=k,B+=k.length,P+=128,k+=String.fromCharCode.apply(null,new Uint16Array(w.subarray(P,P+128)));return-1<M?(E!==!1&&(w.pos+=B+M+1),D+k.slice(0,M)):!1},m=function(w){const b=/^#\?(\S+)/,E=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,C=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,P=/^\s*FORMAT=(\S+)\s*$/,M=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,B={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let D,k;if(w.pos>=w.byteLength||!(D=h(w)))return a(1,"no header found");if(!(k=D.match(b)))return a(3,"bad initial token");for(B.valid|=1,B.programtype=k[1],B.string+=D+`
`;D=h(w),D!==!1;){if(B.string+=D+`
`,D.charAt(0)==="#"){B.comments+=D+`
`;continue}if((k=D.match(E))&&(B.gamma=parseFloat(k[1])),(k=D.match(C))&&(B.exposure=parseFloat(k[1])),(k=D.match(P))&&(B.valid|=2,B.format=k[1]),(k=D.match(M))&&(B.valid|=4,B.height=parseInt(k[1],10),B.width=parseInt(k[2],10)),B.valid&2&&B.valid&4)break}return B.valid&2?B.valid&4?B:a(3,"missing image size specifier"):a(3,"missing format specifier")},g=function(w,b,E){const C=b;if(C<8||C>32767||w[0]!==2||w[1]!==2||w[2]&128)return new Uint8Array(w);if(C!==(w[2]<<8|w[3]))return a(3,"wrong scanline width");const P=new Uint8Array(4*b*E);if(!P.length)return a(4,"unable to allocate buffer space");let M=0,B=0;const D=4*C,k=new Uint8Array(4),O=new Uint8Array(D);let U=E;for(;U>0&&B<w.byteLength;){if(B+4>w.byteLength)return a(1);if(k[0]=w[B++],k[1]=w[B++],k[2]=w[B++],k[3]=w[B++],k[0]!=2||k[1]!=2||(k[2]<<8|k[3])!=C)return a(3,"bad rgbe scanline format");let N=0,$;for(;N<D&&B<w.byteLength;){$=w[B++];const ie=$>128;if(ie&&($-=128),$===0||N+$>D)return a(3,"bad scanline data");if(ie){const F=w[B++];for(let z=0;z<$;z++)O[N++]=F}else O.set(w.subarray(B,B+$),N),N+=$,B+=$}const Q=C;for(let ie=0;ie<Q;ie++){let F=0;P[M]=O[ie+F],F+=C,P[M+1]=O[ie+F],F+=C,P[M+2]=O[ie+F],F+=C,P[M+3]=O[ie+F],M+=4}U--}return P},v=function(w,b,E,C){const P=w[b+3],M=Math.pow(2,P-128)/255;E[C+0]=w[b+0]*M,E[C+1]=w[b+1]*M,E[C+2]=w[b+2]*M,E[C+3]=1},y=function(w,b,E,C){const P=w[b+3],M=Math.pow(2,P-128)/255;E[C+0]=nh.toHalfFloat(Math.min(w[b+0]*M,65504)),E[C+1]=nh.toHalfFloat(Math.min(w[b+1]*M,65504)),E[C+2]=nh.toHalfFloat(Math.min(w[b+2]*M,65504)),E[C+3]=nh.toHalfFloat(1)},_=new Uint8Array(e);_.pos=0;const x=m(_);if(x!==-1){const w=x.width,b=x.height,E=g(_.subarray(_.pos),w,b);if(E!==-1){let C,P,M;switch(this.type){case Ni:M=E.length/4;const B=new Float32Array(M*4);for(let k=0;k<M;k++)v(E,k*4,B,k*4);C=B,P=Ni;break;case Nr:M=E.length/4;const D=new Uint16Array(M*4);for(let k=0;k<M;k++)y(E,k*4,D,k*4);C=D,P=Nr;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:w,height:b,data:C,header:x.string,gamma:x.gamma,exposure:x.exposure,type:P}}}return null}setDataType(e){return this.type=e,this}load(e,n,r,i){function s(o,a){switch(o.type){case Ni:case Nr:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Kt,o.magFilter=Kt,o.generateMipmaps=!1,o.flipY=!0;break}n&&n(o,a)}return super.load(e,s,r,i)}}const kx=new WeakMap;class Z7 extends di{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,r,i){const s=new Vi(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(n).catch(i)},r,i)}decodeDracoFile(e,n,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){for(const l in n.attributeTypes){const u=n.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=u.name)}const r=JSON.stringify(n);if(kx.has(e)){const l=kx.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((u,c)=>{i._callbacks[s]={resolve:u,reject:c},i.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),kx.set(e,{key:r,promise:a}),a}_createGeometry(e){const n=new wt;e.index&&n.setIndex(new Ut(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;n.setAttribute(s,new Ut(o,a))}return n}_loadLibrary(e,n){const r=new Vi(this.manager);return r.setPath(this.decoderPath),r.setResponseType(n),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=ej.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=n,r._taskLoad+=n,r})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function ej(){let t,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(c){t.onModuleLoaded=function(f){c({draco:f})},DracoDecoderModule(t)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(c=>{const f=c.draco,h=new f.Decoder,m=new f.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const g=n(f,h,m,u),v=g.attributes.map(y=>y.array.buffer);g.index&&v.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},v)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{f.destroy(m),f.destroy(h)}});break}};function n(o,a,l,u){const c=u.attributeIDs,f=u.attributeTypes;let h,m;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)h=new o.Mesh,m=a.DecodeBufferToMesh(l,h);else if(g===o.POINT_CLOUD)h=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const v={index:null,attributes:[]};for(const y in c){const _=self[f[y]];let x,w;if(u.useUniqueIDs)w=c[y],x=a.GetAttributeByUniqueId(h,w);else{if(w=a.GetAttributeId(h,o[c[y]]),w===-1)continue;x=a.GetAttribute(h,w)}v.attributes.push(i(o,a,h,y,_,x))}return g===o.TRIANGULAR_MESH&&(v.index=r(o,a,h)),o.destroy(h),v}function r(o,a,l){const c=l.num_faces()*3,f=c*4,h=o._malloc(f);a.GetTrianglesUInt32Array(l,f,h);const m=new Uint32Array(o.HEAPF32.buffer,h,c).slice();return o._free(h),{array:m,itemSize:1}}function i(o,a,l,u,c,f){const h=f.num_components(),g=l.num_points()*h,v=g*c.BYTES_PER_ELEMENT,y=s(o,c),_=o._malloc(v);a.GetAttributeDataArrayForAllPoints(l,f,y,v,_);const x=new c(o.HEAPF32.buffer,_,g).slice();return o._free(_),{name:u,array:x,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Vg;const Fx=()=>{if(Vg)return Vg;const t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=t;WebAssembly.validate(n)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const h=new Uint8Array(f.length);for(let g=0;g<f.length;++g){const v=f.charCodeAt(g);h[g]=v>96?v-71:v>64?v-65:v>47?v+4:v>46?63:62}let m=0;for(let g=0;g<f.length;++g)h[m++]=h[g]<60?r[h[g]]:(h[g]-60)*64+h[++g];return h.buffer.slice(0,m)}function l(f,h,m,g,v,y){const _=s.exports.sbrk,x=m+3&-4,w=_(x*g),b=_(v.length),E=new Uint8Array(s.exports.memory.buffer);E.set(v,b);const C=f(w,m,g,b,v.length);if(C===0&&y&&y(w,x,g),h.set(E.subarray(w,w+m*g)),_(w-_(0)),C!==0)throw new Error(`Malformed buffer data: ${C}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Vg={ready:o,supported:!0,decodeVertexBuffer(f,h,m,g,v){l(s.exports.meshopt_decodeVertexBuffer,f,h,m,g,s.exports[u[v]])},decodeIndexBuffer(f,h,m,g){l(s.exports.meshopt_decodeIndexBuffer,f,h,m,g)},decodeIndexSequence(f,h,m,g){l(s.exports.meshopt_decodeIndexSequence,f,h,m,g)},decodeGltfBuffer(f,h,m,g,v,y){l(s.exports[c[v]],f,h,m,g,s.exports[u[y]])}},Vg};function tj(){var t=Object.create(null);function e(i,s){var o=i.id,a=i.name,l=i.dependencies;l===void 0&&(l=[]);var u=i.init;u===void 0&&(u=function(){});var c=i.getTransferables;if(c===void 0&&(c=null),!t[o])try{l=l.map(function(h){return h&&h.isWorkerModule&&(e(h,function(m){if(m instanceof Error)throw m}),h=t[h.id].value),h}),u=r("<"+a+">.init",u),c&&(c=r("<"+a+">.getTransferables",c));var f=null;typeof u=="function"?f=u.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[o]={id:o,value:f,getTransferables:c},s(f)}catch(h){h&&h.noLog||console.error(h),s(h)}}function n(i,s){var o,a=i.id,l=i.args;(!t[a]||typeof t[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var u=(o=t[a]).value.apply(o,l);u&&typeof u.then=="function"?u.then(c,function(f){return s(f instanceof Error?f:new Error(""+f))}):c(u)}catch(f){s(f)}function c(f){try{var h=t[a].getTransferables&&t[a].getTransferables(f);(!h||!Array.isArray(h)||!h.length)&&(h=void 0),s(f,h)}catch(m){console.error(m),s(m)}}}function r(i,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(i){var s=i.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(u){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof u=="function"}})}),a==="callModule"&&n(l,function(u,c){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:u},c||void 0)})}catch(u){postMessage({messageId:o,success:!1,error:u.stack})}})}function nj(t){var e=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,r=t.init;n=Array.isArray(n)?n.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var i=Promise.all(n).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return i},i},e}var SL=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return SL=function(){return t},t},rj=0,ij=0,Ox=!1,yh=Object.create(null),xh=Object.create(null),Kw=Object.create(null);function Up(t){if((!t||typeof t.init!="function")&&!Ox)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,r=t.getTransferables,i=t.workerId;if(!SL())return nj(t);i==null&&(i="#default");var s="workerModule"+ ++rj,o=t.name||s,a=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(Ox=!0,u=Up({workerId:i,name:"<"+o+"> function dependency: "+u.name,init:`function(){return (
`+E0(u)+`
)}`}),Ox=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function l(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(!a){a=NT(i,"registerModule",l.workerModuleData);var f=function(){a=null,xh[i].delete(f)};(xh[i]||(xh[i]=new Set)).add(f)}return a.then(function(h){var m=h.isCallable;if(m)return NT(i,"callModule",{id:s,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:E0(n),getTransferables:r&&E0(r)},l}function sj(t){xh[t]&&xh[t].forEach(function(e){e()}),yh[t]&&(yh[t].terminate(),delete yh[t])}function E0(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function oj(t){var e=yh[t];if(!e){var n=E0(tj);e=yh[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,s=i.messageId,o=Kw[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete Kw[s],o(i)}}return e}function NT(t,e,n){return new Promise(function(r,i){var s=++ij;Kw[s]=function(o){o.success?r(o.result):i(new Error("Error in worker "+e+" call: "+o.error))},oj(t).postMessage({messageId:s,action:e,data:n})})}function bL(){var t=function(e){function n(z,j,H,G,Z,re,se,Y){var ae=1-se;Y.x=ae*ae*z+2*ae*se*H+se*se*Z,Y.y=ae*ae*j+2*ae*se*G+se*se*re}function r(z,j,H,G,Z,re,se,Y,ae,he){var Ce=1-ae;he.x=Ce*Ce*Ce*z+3*Ce*Ce*ae*H+3*Ce*ae*ae*Z+ae*ae*ae*se,he.y=Ce*Ce*Ce*j+3*Ce*Ce*ae*G+3*Ce*ae*ae*re+ae*ae*ae*Y}function i(z,j){for(var H=/([MLQCZ])([^MLQCZ]*)/g,G,Z,re,se,Y;G=H.exec(z);){var ae=G[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(he){return parseFloat(he)});switch(G[1]){case"M":se=Z=ae[0],Y=re=ae[1];break;case"L":(ae[0]!==se||ae[1]!==Y)&&j("L",se,Y,se=ae[0],Y=ae[1]);break;case"Q":{j("Q",se,Y,se=ae[2],Y=ae[3],ae[0],ae[1]);break}case"C":{j("C",se,Y,se=ae[4],Y=ae[5],ae[0],ae[1],ae[2],ae[3]);break}case"Z":(se!==Z||Y!==re)&&j("L",se,Y,Z,re);break}}}function s(z,j,H){H===void 0&&(H=16);var G={x:0,y:0};i(z,function(Z,re,se,Y,ae,he,Ce,ve,xe){switch(Z){case"L":j(re,se,Y,ae);break;case"Q":{for(var ne=re,le=se,Pe=1;Pe<H;Pe++)n(re,se,he,Ce,Y,ae,Pe/(H-1),G),j(ne,le,G.x,G.y),ne=G.x,le=G.y;break}case"C":{for(var ke=re,Re=se,Ve=1;Ve<H;Ve++)r(re,se,he,Ce,ve,xe,Y,ae,Ve/(H-1),G),j(ke,Re,G.x,G.y),ke=G.x,Re=G.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function c(z,j){var H=z.getContext?z.getContext("webgl",u):z,G=l.get(H);if(!G){let ke=function(Ee){var W=re[Ee];if(!W&&(W=re[Ee]=H.getExtension(Ee),!W))throw new Error(Ee+" not supported");return W},Re=function(Ee,W){var L=H.createShader(W);return H.shaderSource(L,Ee),H.compileShader(L),L},Ve=function(Ee,W,L,q){if(!se[Ee]){var fe={},Be={},Ie=H.createProgram();H.attachShader(Ie,Re(W,H.VERTEX_SHADER)),H.attachShader(Ie,Re(L,H.FRAGMENT_SHADER)),H.linkProgram(Ie),se[Ee]={program:Ie,transaction:function(Ue){H.useProgram(Ie),Ue({setUniform:function(We,K){for(var pe=[],Se=arguments.length-2;Se-- >0;)pe[Se]=arguments[Se+2];var Ae=Be[K]||(Be[K]=H.getUniformLocation(Ie,K));H["uniform"+We].apply(H,[Ae].concat(pe))},setAttribute:function(We,K,pe,Se,Ae){var Ge=fe[We];Ge||(Ge=fe[We]={buf:H.createBuffer(),loc:H.getAttribLocation(Ie,We),data:null}),H.bindBuffer(H.ARRAY_BUFFER,Ge.buf),H.vertexAttribPointer(Ge.loc,K,H.FLOAT,!1,0,0),H.enableVertexAttribArray(Ge.loc),Z?H.vertexAttribDivisor(Ge.loc,Se):ke("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Ge.loc,Se),Ae!==Ge.data&&(H.bufferData(H.ARRAY_BUFFER,Ae,pe),Ge.data=Ae)}})}}}se[Ee].transaction(q)},Me=function(Ee,W){ae++;try{H.activeTexture(H.TEXTURE0+ae);var L=Y[Ee];L||(L=Y[Ee]=H.createTexture(),H.bindTexture(H.TEXTURE_2D,L),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,H.NEAREST),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,H.NEAREST)),H.bindTexture(H.TEXTURE_2D,L),W(L,ae)}finally{ae--}},Fe=function(Ee,W,L){var q=H.createFramebuffer();he.push(q),H.bindFramebuffer(H.FRAMEBUFFER,q),H.activeTexture(H.TEXTURE0+W),H.bindTexture(H.TEXTURE_2D,Ee),H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,Ee,0);try{L(q)}finally{H.deleteFramebuffer(q),H.bindFramebuffer(H.FRAMEBUFFER,he[--he.length-1]||null)}},ze=function(){re={},se={},Y={},ae=-1,he.length=0};var Ce=ke,ve=Re,xe=Ve,ne=Me,le=Fe,Pe=ze,Z=typeof WebGL2RenderingContext<"u"&&H instanceof WebGL2RenderingContext,re={},se={},Y={},ae=-1,he=[];H.canvas.addEventListener("webglcontextlost",function(Ee){ze(),Ee.preventDefault()},!1),l.set(H,G={gl:H,isWebGL2:Z,getExtension:ke,withProgram:Ve,withTexture:Me,withTextureFramebuffer:Fe,handleContextLoss:ze})}j(G)}function f(z,j,H,G,Z,re,se,Y){se===void 0&&(se=15),Y===void 0&&(Y=null),c(z,function(ae){var he=ae.gl,Ce=ae.withProgram,ve=ae.withTexture;ve("copy",function(xe,ne){he.texImage2D(he.TEXTURE_2D,0,he.RGBA,Z,re,0,he.RGBA,he.UNSIGNED_BYTE,j),Ce("copy",o,a,function(le){var Pe=le.setUniform,ke=le.setAttribute;ke("aUV",2,he.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Pe("1i","image",ne),he.bindFramebuffer(he.FRAMEBUFFER,Y||null),he.disable(he.BLEND),he.colorMask(se&8,se&4,se&2,se&1),he.viewport(H,G,Z,re),he.scissor(H,G,Z,re),he.drawArrays(he.TRIANGLES,0,3)})})})}function h(z,j,H){var G=z.width,Z=z.height;c(z,function(re){var se=re.gl,Y=new Uint8Array(G*Z*4);se.readPixels(0,0,G,Z,se.RGBA,se.UNSIGNED_BYTE,Y),z.width=j,z.height=H,f(se,Y,0,0,G,Z)})}var m=Object.freeze({__proto__:null,withWebGLContext:c,renderImageData:f,resizeWebGLCanvasWithoutClearing:h});function g(z,j,H,G,Z,re){re===void 0&&(re=1);var se=new Uint8Array(z*j),Y=G[2]-G[0],ae=G[3]-G[1],he=[];s(H,function(ke,Re,Ve,Me){he.push({x1:ke,y1:Re,x2:Ve,y2:Me,minX:Math.min(ke,Ve),minY:Math.min(Re,Me),maxX:Math.max(ke,Ve),maxY:Math.max(Re,Me)})}),he.sort(function(ke,Re){return ke.maxX-Re.maxX});for(var Ce=0;Ce<z;Ce++)for(var ve=0;ve<j;ve++){var xe=le(G[0]+Y*(Ce+.5)/z,G[1]+ae*(ve+.5)/j),ne=Math.pow(1-Math.abs(xe)/Z,re)/2;xe<0&&(ne=1-ne),ne=Math.max(0,Math.min(255,Math.round(ne*255))),se[ve*z+Ce]=ne}return se;function le(ke,Re){for(var Ve=1/0,Me=1/0,Fe=he.length;Fe--;){var ze=he[Fe];if(ze.maxX+Me<=ke)break;if(ke+Me>ze.minX&&Re-Me<ze.maxY&&Re+Me>ze.minY){var Ee=_(ke,Re,ze.x1,ze.y1,ze.x2,ze.y2);Ee<Ve&&(Ve=Ee,Me=Math.sqrt(Ve))}}return Pe(ke,Re)&&(Me=-Me),Me}function Pe(ke,Re){for(var Ve=0,Me=he.length;Me--;){var Fe=he[Me];if(Fe.maxX<=ke)break;var ze=Fe.y1>Re!=Fe.y2>Re&&ke<(Fe.x2-Fe.x1)*(Re-Fe.y1)/(Fe.y2-Fe.y1)+Fe.x1;ze&&(Ve+=Fe.y1<Fe.y2?1:-1)}return Ve!==0}}function v(z,j,H,G,Z,re,se,Y,ae,he){re===void 0&&(re=1),Y===void 0&&(Y=0),ae===void 0&&(ae=0),he===void 0&&(he=0),y(z,j,H,G,Z,re,se,null,Y,ae,he)}function y(z,j,H,G,Z,re,se,Y,ae,he,Ce){re===void 0&&(re=1),ae===void 0&&(ae=0),he===void 0&&(he=0),Ce===void 0&&(Ce=0);for(var ve=g(z,j,H,G,Z,re),xe=new Uint8Array(ve.length*4),ne=0;ne<ve.length;ne++)xe[ne*4+Ce]=ve[ne];f(se,xe,ae,he,z,j,1<<3-Ce,Y)}function _(z,j,H,G,Z,re){var se=Z-H,Y=re-G,ae=se*se+Y*Y,he=ae?Math.max(0,Math.min(1,((z-H)*se+(j-G)*Y)/ae)):0,Ce=z-(H+he*se),ve=j-(G+he*Y);return Ce*Ce+ve*ve}var x=Object.freeze({__proto__:null,generate:g,generateIntoCanvas:v,generateIntoFramebuffer:y}),w="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",b="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",E="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",C=new Float32Array([0,0,2,0,0,2]),P=null,M=!1,B={},D=new WeakMap;function k(z){if(!M&&!$(z))throw new Error("WebGL generation not supported")}function O(z,j,H,G,Z,re,se){if(re===void 0&&(re=1),se===void 0&&(se=null),!se&&(se=P,!se)){var Y=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!Y)throw new Error("OffscreenCanvas or DOM canvas not supported");se=P=Y.getContext("webgl",{depth:!1})}k(se);var ae=new Uint8Array(z*j*4);c(se,function(xe){var ne=xe.gl,le=xe.withTexture,Pe=xe.withTextureFramebuffer;le("readable",function(ke,Re){ne.texImage2D(ne.TEXTURE_2D,0,ne.RGBA,z,j,0,ne.RGBA,ne.UNSIGNED_BYTE,null),Pe(ke,Re,function(Ve){N(z,j,H,G,Z,re,ne,Ve,0,0,0),ne.readPixels(0,0,z,j,ne.RGBA,ne.UNSIGNED_BYTE,ae)})})});for(var he=new Uint8Array(z*j),Ce=0,ve=0;Ce<ae.length;Ce+=4)he[ve++]=ae[Ce];return he}function U(z,j,H,G,Z,re,se,Y,ae,he){re===void 0&&(re=1),Y===void 0&&(Y=0),ae===void 0&&(ae=0),he===void 0&&(he=0),N(z,j,H,G,Z,re,se,null,Y,ae,he)}function N(z,j,H,G,Z,re,se,Y,ae,he,Ce){re===void 0&&(re=1),ae===void 0&&(ae=0),he===void 0&&(he=0),Ce===void 0&&(Ce=0),k(se);var ve=[];s(H,function(xe,ne,le,Pe){ve.push(xe,ne,le,Pe)}),ve=new Float32Array(ve),c(se,function(xe){var ne=xe.gl,le=xe.isWebGL2,Pe=xe.getExtension,ke=xe.withProgram,Re=xe.withTexture,Ve=xe.withTextureFramebuffer,Me=xe.handleContextLoss;if(Re("rawDistances",function(Fe,ze){(z!==Fe._lastWidth||j!==Fe._lastHeight)&&ne.texImage2D(ne.TEXTURE_2D,0,ne.RGBA,Fe._lastWidth=z,Fe._lastHeight=j,0,ne.RGBA,ne.UNSIGNED_BYTE,null),ke("main",w,b,function(Ee){var W=Ee.setAttribute,L=Ee.setUniform,q=!le&&Pe("ANGLE_instanced_arrays"),fe=!le&&Pe("EXT_blend_minmax");W("aUV",2,ne.STATIC_DRAW,0,C),W("aLineSegment",4,ne.DYNAMIC_DRAW,1,ve),L.apply(void 0,["4f","uGlyphBounds"].concat(G)),L("1f","uMaxDistance",Z),L("1f","uExponent",re),Ve(Fe,ze,function(Be){ne.enable(ne.BLEND),ne.colorMask(!0,!0,!0,!0),ne.viewport(0,0,z,j),ne.scissor(0,0,z,j),ne.blendFunc(ne.ONE,ne.ONE),ne.blendEquationSeparate(ne.FUNC_ADD,le?ne.MAX:fe.MAX_EXT),ne.clear(ne.COLOR_BUFFER_BIT),le?ne.drawArraysInstanced(ne.TRIANGLES,0,3,ve.length/4):q.drawArraysInstancedANGLE(ne.TRIANGLES,0,3,ve.length/4)})}),ke("post",o,E,function(Ee){Ee.setAttribute("aUV",2,ne.STATIC_DRAW,0,C),Ee.setUniform("1i","tex",ze),ne.bindFramebuffer(ne.FRAMEBUFFER,Y),ne.disable(ne.BLEND),ne.colorMask(Ce===0,Ce===1,Ce===2,Ce===3),ne.viewport(ae,he,z,j),ne.scissor(ae,he,z,j),ne.drawArrays(ne.TRIANGLES,0,3)})}),ne.isContextLost())throw Me(),new Error("webgl context lost")})}function $(z){var j=!z||z===P?B:z.canvas||z,H=D.get(j);if(H===void 0){M=!0;var G=null;try{var Z=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],re=O(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,z);H=re&&Z.length===re.length&&re.every(function(se,Y){return se===Z[Y]}),H||(G="bad trial run results",console.info(Z,re))}catch(se){H=!1,G=se.message}G&&console.warn("WebGL SDF generation not supported:",G),M=!1,D.set(j,H)}return H}var Q=Object.freeze({__proto__:null,generate:O,generateIntoCanvas:U,generateIntoFramebuffer:N,isSupported:$});function ie(z,j,H,G,Z,re){Z===void 0&&(Z=Math.max(G[2]-G[0],G[3]-G[1])/2),re===void 0&&(re=1);try{return O.apply(Q,arguments)}catch(se){return console.info("WebGL SDF generation failed, falling back to JS",se),g.apply(x,arguments)}}function F(z,j,H,G,Z,re,se,Y,ae,he){Z===void 0&&(Z=Math.max(G[2]-G[0],G[3]-G[1])/2),re===void 0&&(re=1),Y===void 0&&(Y=0),ae===void 0&&(ae=0),he===void 0&&(he=0);try{return U.apply(Q,arguments)}catch(Ce){return console.info("WebGL SDF generation failed, falling back to JS",Ce),v.apply(x,arguments)}}return e.forEachPathCommand=i,e.generate=ie,e.generateIntoCanvas=F,e.javascript=x,e.pathToLineSegments=s,e.webgl=Q,e.webglUtils=m,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}function aj(){var t=function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(n).forEach(function(Me,Fe){r[Me]=1<<Fe+1,i[r[Me]]=Me}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,a=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,u=r.S|r.WS|r.B|s|r.PDI|l,c=null;function f(){if(!c){c=new Map;var Me=function(ze){if(n.hasOwnProperty(ze)){var Ee=0;n[ze].split(",").forEach(function(W){var L=W.split("+"),q=L[0],fe=L[1];q=parseInt(q,36),fe=fe?parseInt(fe,36):0,c.set(Ee+=q,r[ze]);for(var Be=0;Be<fe;Be++)c.set(++Ee,r[ze])})}};for(var Fe in n)Me(Fe)}}function h(Me){return f(),c.get(Me.codePointAt(0))||r.L}function m(Me){return i[h(Me)]}var g={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function v(Me,Fe){var ze=36,Ee=0,W=new Map,L=Fe&&new Map,q;return Me.split(",").forEach(function fe(Be){if(Be.indexOf("+")!==-1)for(var Ie=+Be;Ie--;)fe(q);else{q=Be;var Ne=Be.split(">"),Ue=Ne[0],_e=Ne[1];Ue=String.fromCodePoint(Ee+=parseInt(Ue,ze)),_e=String.fromCodePoint(Ee+=parseInt(_e,ze)),W.set(Ue,_e),Fe&&L.set(_e,Ue)}}),{map:W,reverseMap:L}}var y,_,x;function w(){if(!y){var Me=v(g.pairs,!0),Fe=Me.map,ze=Me.reverseMap;y=Fe,_=ze,x=v(g.canonical,!1).map}}function b(Me){return w(),y.get(Me)||null}function E(Me){return w(),_.get(Me)||null}function C(Me){return w(),x.get(Me)||null}var P=r.L,M=r.R,B=r.EN,D=r.ES,k=r.ET,O=r.AN,U=r.CS,N=r.B,$=r.S,Q=r.ON,ie=r.BN,F=r.NSM,z=r.AL,j=r.LRO,H=r.RLO,G=r.LRE,Z=r.RLE,re=r.PDF,se=r.LRI,Y=r.RLI,ae=r.FSI,he=r.PDI;function Ce(Me,Fe){for(var ze=125,Ee=new Uint32Array(Me.length),W=0;W<Me.length;W++)Ee[W]=h(Me[W]);var L=new Map;function q(Kn,ur){var cn=Ee[Kn];Ee[Kn]=ur,L.set(cn,L.get(cn)-1),cn&a&&L.set(a,L.get(a)-1),L.set(ur,(L.get(ur)||0)+1),ur&a&&L.set(a,(L.get(a)||0)+1)}for(var fe=new Uint8Array(Me.length),Be=new Map,Ie=[],Ne=null,Ue=0;Ue<Me.length;Ue++)Ne||Ie.push(Ne={start:Ue,end:Me.length-1,level:Fe==="rtl"?1:Fe==="ltr"?0:Xu(Ue,!1)}),Ee[Ue]&N&&(Ne.end=Ue,Ne=null);for(var _e=Z|G|H|j|s|he|re|N,We=function(Kn){return Kn+(Kn&1?1:2)},K=function(Kn){return Kn+(Kn&1?2:1)},pe=0;pe<Ie.length;pe++){Ne=Ie[pe];var Se=[{_level:Ne.level,_override:0,_isolate:0}],Ae=void 0,Ge=0,et=0,mt=0;L.clear();for(var te=Ne.start;te<=Ne.end;te++){var me=Ee[te];if(Ae=Se[Se.length-1],L.set(me,(L.get(me)||0)+1),me&a&&L.set(a,(L.get(a)||0)+1),me&_e)if(me&(Z|G)){fe[te]=Ae._level;var Oe=(me===Z?K:We)(Ae._level);Oe<=ze&&!Ge&&!et?Se.push({_level:Oe,_override:0,_isolate:0}):Ge||et++}else if(me&(H|j)){fe[te]=Ae._level;var Ke=(me===H?K:We)(Ae._level);Ke<=ze&&!Ge&&!et?Se.push({_level:Ke,_override:me&H?M:P,_isolate:0}):Ge||et++}else if(me&s){me&ae&&(me=Xu(te+1,!0)===1?Y:se),fe[te]=Ae._level,Ae._override&&q(te,Ae._override);var nt=(me===Y?K:We)(Ae._level);nt<=ze&&Ge===0&&et===0?(mt++,Se.push({_level:nt,_override:0,_isolate:1,_isolInitIndex:te})):Ge++}else if(me&he){if(Ge>0)Ge--;else if(mt>0){for(et=0;!Se[Se.length-1]._isolate;)Se.pop();var Mt=Se[Se.length-1]._isolInitIndex;Mt!=null&&(Be.set(Mt,te),Be.set(te,Mt)),Se.pop(),mt--}Ae=Se[Se.length-1],fe[te]=Ae._level,Ae._override&&q(te,Ae._override)}else me&re?(Ge===0&&(et>0?et--:!Ae._isolate&&Se.length>1&&(Se.pop(),Ae=Se[Se.length-1])),fe[te]=Ae._level):me&N&&(fe[te]=Ne.level);else fe[te]=Ae._level,Ae._override&&me!==ie&&q(te,Ae._override)}for(var Ht=[],Qt=null,Jt=Ne.start;Jt<=Ne.end;Jt++){var Xt=Ee[Jt];if(!(Xt&l)){var Vt=fe[Jt],Ot=Xt&s,Er=Xt===he;Qt&&Vt===Qt._level?(Qt._end=Jt,Qt._endsWithIsolInit=Ot):Ht.push(Qt={_start:Jt,_end:Jt,_level:Vt,_startsWithPDI:Er,_endsWithIsolInit:Ot})}}for(var gr=[],qt=0;qt<Ht.length;qt++){var Cn=Ht[qt];if(!Cn._startsWithPDI||Cn._startsWithPDI&&!Be.has(Cn._start)){for(var J=[Qt=Cn],de=void 0;Qt&&Qt._endsWithIsolInit&&(de=Be.get(Qt._end))!=null;)for(var be=qt+1;be<Ht.length;be++)if(Ht[be]._start===de){J.push(Qt=Ht[be]);break}for(var ce=[],Le=0;Le<J.length;Le++)for(var rt=J[Le],ft=rt._start;ft<=rt._end;ft++)ce.push(ft);for(var Et=fe[ce[0]],Ct=Ne.level,Rt=ce[0]-1;Rt>=0;Rt--)if(!(Ee[Rt]&l)){Ct=fe[Rt];break}var Pt=ce[ce.length-1],kt=fe[Pt],mn=Ne.level;if(!(Ee[Pt]&s)){for(var Xn=Pt+1;Xn<=Ne.end;Xn++)if(!(Ee[Xn]&l)){mn=fe[Xn];break}}gr.push({_seqIndices:ce,_sosType:Math.max(Ct,Et)%2?M:P,_eosType:Math.max(mn,kt)%2?M:P})}}for(var Jr=0;Jr<gr.length;Jr++){var Ci=gr[Jr],Je=Ci._seqIndices,vt=Ci._sosType,_o=Ci._eosType;if(L.get(F))for(var un=0;un<Je.length;un++){var Ki=Je[un];if(Ee[Ki]&F){for(var Ks=vt,vr=un-1;vr>=0;vr--)if(!(Ee[Je[vr]]&l)){Ks=Ee[Je[vr]];break}q(Ki,Ks&(s|he)?Q:Ks)}}if(L.get(B))for(var yr=0;yr<Je.length;yr++){var xt=Je[yr];if(Ee[xt]&B)for(var It=yr-1;It>=-1;It--){var Xr=It===-1?vt:Ee[Je[It]];if(Xr&o){Xr===z&&q(xt,O);break}}}if(L.get(z))for(var Wt=0;Wt<Je.length;Wt++){var Hn=Je[Wt];Ee[Hn]&z&&q(Hn,M)}if(L.get(D)||L.get(U))for(var Kr=1;Kr<Je.length-1;Kr++){var Ti=Je[Kr];if(Ee[Ti]&(D|U)){for(var Vn=0,ua=0,Gu=Kr-1;Gu>=0&&(Vn=Ee[Je[Gu]],!!(Vn&l));Gu--);for(var Hu=Kr+1;Hu<Je.length&&(ua=Ee[Je[Hu]],!!(ua&l));Hu++);Vn===ua&&(Ee[Ti]===D?Vn===B:Vn&(B|O))&&q(Ti,Vn)}}if(L.get(B))for(var Ys=0;Ys<Je.length;Ys++){var Xp=Je[Ys];if(Ee[Xp]&B){for(var Cr=Ys-1;Cr>=0&&Ee[Je[Cr]]&(k|l);Cr--)q(Je[Cr],B);for(var Vu=Ys+1;Vu<Je.length&&Ee[Je[Vu]]&(k|l);Vu++)q(Je[Vu],B)}}if(L.get(k)||L.get(D)||L.get(U))for(var hl=0;hl<Je.length;hl++){var Kp=Je[hl];if(Ee[Kp]&(k|D|U)){q(Kp,Q);for(var wo=hl-1;wo>=0&&Ee[Je[wo]]&l;wo--)q(Je[wo],Q);for(var So=hl+1;So<Je.length&&Ee[Je[So]]&l;So++)q(Je[So],Q)}}if(L.get(B))for(var bo=0,pl=vt;bo<Je.length;bo++){var Yp=Je[bo],Kf=Ee[Yp];Kf&B?pl===P&&q(Yp,P):Kf&o&&(pl=Kf)}if(L.get(a)){var Ao=M|B|O,Wu=Ao|P,Qs=[];{for(var ca=[],qs=0;qs<Je.length;qs++)if(Ee[Je[qs]]&a){var Ft=Me[Je[qs]],Yf=void 0;if(b(Ft)!==null)if(ca.length<63)ca.push({char:Ft,seqIndex:qs});else break;else if((Yf=E(Ft))!==null)for(var Mo=ca.length-1;Mo>=0;Mo--){var ju=ca[Mo].char;if(ju===Yf||ju===E(C(Ft))||b(C(ju))===Ft){Qs.push([ca[Mo].seqIndex,qs]),ca.length=Mo;break}}}Qs.sort(function(Kn,ur){return Kn[0]-ur[0]})}for(var Qf=0;Qf<Qs.length;Qf++){for(var Qp=Qs[Qf],_n=Qp[0],fa=Qp[1],qp=!1,Yr=0,qf=_n+1;qf<fa;qf++){var da=Je[qf];if(Ee[da]&Wu){qp=!0;var Ri=Ee[da]&Ao?M:P;if(Ri===eo(da)){Yr=Ri;break}}}if(qp&&!Yr){Yr=vt;for(var Zf=_n-1;Zf>=0;Zf--){var $u=Je[Zf];if(Ee[$u]&Wu){var Pi=Ee[$u]&Ao?M:P;Pi!==eo($u)?Yr=Pi:Yr=eo($u);break}}}if(Yr){if(Ee[Je[_n]]=Ee[Je[fa]]=Yr,Yr!==eo(Je[_n])){for(var Qr=_n+1;Qr<Je.length;Qr++)if(!(Ee[Je[Qr]]&l)){h(Me[Je[Qr]])&F&&(Ee[Je[Qr]]=Yr);break}}if(Yr!==eo(Je[fa])){for(var Zs=fa+1;Zs<Je.length;Zs++)if(!(Ee[Je[Zs]]&l)){h(Me[Je[Zs]])&F&&(Ee[Je[Zs]]=Yr);break}}}}for(var Yi=0;Yi<Je.length;Yi++)if(Ee[Je[Yi]]&a){for(var ed=Yi,td=Yi,hi=vt,ml=Yi-1;ml>=0;ml--)if(Ee[Je[ml]]&l)ed=ml;else{hi=Ee[Je[ml]]&Ao?M:P;break}for(var gl=_o,vl=Yi+1;vl<Je.length;vl++)if(Ee[Je[vl]]&(a|l))td=vl;else{gl=Ee[Je[vl]]&Ao?M:P;break}for(var Tr=ed;Tr<=td;Tr++)Ee[Je[Tr]]=hi===gl?hi:eo(Je[Tr]);Yi=td}}}for(var lr=Ne.start;lr<=Ne.end;lr++){var Ju=fe[lr],Ss=Ee[lr];if(Ju&1?Ss&(P|B|O)&&fe[lr]++:Ss&M?fe[lr]++:Ss&(O|B)&&(fe[lr]+=2),Ss&l&&(fe[lr]=lr===0?Ne.level:fe[lr-1]),lr===Ne.end||h(Me[lr])&($|N))for(var ha=lr;ha>=0&&h(Me[ha])&u;ha--)fe[ha]=Ne.level}}return{levels:fe,paragraphs:Ie};function Xu(Kn,ur){for(var cn=Kn;cn<Me.length;cn++){var er=Ee[cn];if(er&(M|z))return 1;if(er&(N|P)||ur&&er===he)return 0;if(er&s){var bs=Zp(cn);cn=bs===-1?Me.length:bs}}return 0}function Zp(Kn){for(var ur=1,cn=Kn+1;cn<Me.length;cn++){var er=Ee[cn];if(er&N)break;if(er&he){if(--ur===0)return cn}else er&s&&ur++}return-1}function eo(Kn){return fe[Kn]&1?M:P}}var ve="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",xe;function ne(){if(!xe){var Me=v(ve,!0),Fe=Me.map,ze=Me.reverseMap;ze.forEach(function(Ee,W){Fe.set(W,Ee)}),xe=Fe}}function le(Me){return ne(),xe.get(Me)||null}function Pe(Me,Fe,ze,Ee){var W=Me.length;ze=Math.max(0,ze==null?0:+ze),Ee=Math.min(W-1,Ee==null?W-1:+Ee);for(var L=new Map,q=ze;q<=Ee;q++)if(Fe[q]&1){var fe=le(Me[q]);fe!==null&&L.set(q,fe)}return L}function ke(Me,Fe,ze,Ee){var W=Me.length;ze=Math.max(0,ze==null?0:+ze),Ee=Math.min(W-1,Ee==null?W-1:+Ee);var L=[];return Fe.paragraphs.forEach(function(q){var fe=Math.max(ze,q.start),Be=Math.min(Ee,q.end);if(fe<Be){for(var Ie=Fe.levels.slice(fe,Be+1),Ne=Be;Ne>=fe&&h(Me[Ne])&u;Ne--)Ie[Ne]=q.level;for(var Ue=q.level,_e=1/0,We=0;We<Ie.length;We++){var K=Ie[We];K>Ue&&(Ue=K),K<_e&&(_e=K|1)}for(var pe=Ue;pe>=_e;pe--)for(var Se=0;Se<Ie.length;Se++)if(Ie[Se]>=pe){for(var Ae=Se;Se+1<Ie.length&&Ie[Se+1]>=pe;)Se++;Se>Ae&&L.push([Ae+ze,Se+ze])}}}),L}function Re(Me,Fe,ze,Ee){var W=Ve(Me,Fe,ze,Ee),L=[].concat(Me);return W.forEach(function(q,fe){L[fe]=(Fe.levels[q]&1?le(Me[q]):null)||Me[q]}),L.join("")}function Ve(Me,Fe,ze,Ee){for(var W=ke(Me,Fe,ze,Ee),L=[],q=0;q<Me.length;q++)L[q]=q;return W.forEach(function(fe){for(var Be=fe[0],Ie=fe[1],Ne=L.slice(Be,Ie+1),Ue=Ne.length;Ue--;)L[Ie-Ue]=Ne[Ue]}),L}return e.closingToOpeningBracket=E,e.getBidiCharType=h,e.getBidiCharTypeName=m,e.getCanonicalBracket=C,e.getEmbeddingLevels=Ce,e.getMirroredCharacter=le,e.getMirroredCharactersMap=Pe,e.getReorderSegments=ke,e.getReorderedIndices=Ve,e.getReorderedString=Re,e.openingToClosingBracket=b,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}const AL=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Yw(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(r,i){let s=Tt[i];return s?Yw(s):r}return t.replace(e,n)}const _r=[];for(let t=0;t<256;t++)_r[t]=(t<16?"0":"")+t.toString(16);function lj(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(_r[t&255]+_r[t>>8&255]+_r[t>>16&255]+_r[t>>24&255]+"-"+_r[e&255]+_r[e>>8&255]+"-"+_r[e>>16&15|64]+_r[e>>24&255]+"-"+_r[n&63|128]+_r[n>>8&255]+"-"+_r[n>>16&255]+_r[n>>24&255]+_r[r&255]+_r[r>>8&255]+_r[r>>16&255]+_r[r>>24&255]).toUpperCase()}const Ol=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let r=arguments[e];if(r)for(let i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t},uj=Date.now(),zT=new WeakMap,GT=new Map;let cj=1e10;function Qw(t,e){const n=pj(e);let r=zT.get(t);if(r||zT.set(t,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,s=function(u){t.onBeforeCompile.call(this,u);const c=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let f=GT[c];if(!f){const h=fj(u,e,n);f=GT[c]=h}u.vertexShader=f.vertexShader,u.fragmentShader=f.fragmentShader,Ol(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-uj}}),this[i]&&this[i](u)},o=function(){return a(e.chained?t:t.clone())},a=function(u){const c=Object.create(u,l);return Object.defineProperty(c,"baseMaterial",{value:t}),Object.defineProperty(c,"id",{value:cj++}),c.uuid=lj(),c.uniforms=Ol({},u.uniforms,e.uniforms),c.defines=Ol({},u.defines,e.defines),c.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",c.extensions=Ol({},u.extensions,e.extensions),c._listeners=void 0,c},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return s},set(u){this[i]=u}},copy:{writable:!0,configurable:!0,value:function(u){return t.copy.call(this,u),!t.isShaderMaterial&&!t.isDerivedMaterial&&(Ol(this.extensions,u.extensions),Ol(this.defines,u.defines),Ol(this.uniforms,bu.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new t.constructor;return a(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=Qw(t.isDerivedMaterial?t.getDepthMaterial():new Qv({depthPacking:Lb}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=Qw(t.isDerivedMaterial?t.getDistanceMaterial():new qv,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:c}=this;u&&u.dispose(),c&&c.dispose(),t.dispose.call(this)}}};return r[n]=o,new o}function fj({vertexShader:t,fragmentShader:e},n,r){let{vertexDefs:i,vertexMainIntro:s,vertexMainOutro:o,vertexTransform:a,fragmentDefs:l,fragmentMainIntro:u,fragmentMainOutro:c,fragmentColorTransform:f,customRewriter:h,timeUniform:m}=n;if(i=i||"",s=s||"",o=o||"",l=l||"",u=u||"",c=c||"",(a||h)&&(t=Yw(t)),(f||h)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=Yw(e)),h){let g=h({vertexShader:t,fragmentShader:e});t=g.vertexShader,e=g.fragmentShader}if(f){let g=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,v=>(g.push(v),"")),c=`${f}
${g.join(`
`)}
${c}`}if(m){const g=`
uniform float ${m};
`;i=g+i,l=g+l}return a&&(t=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${t}
`,i=`${i}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${a}
}
`,s=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${s}
`,t=t.replace(/\b(position|normal|uv)\b/g,(g,v,y,_)=>/\battribute\s+vec[23]\s+$/.test(_.substr(0,y))?v:`troika_${v}_${r}`)),t=HT(t,r,i,s,o),e=HT(e,r,l,u,c),{vertexShader:t,fragmentShader:e}}function HT(t,e,n,r,i){return(r||i||n)&&(t=t.replace(AL,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),t}function dj(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let hj=0;const VT=new Map;function pj(t){const e=JSON.stringify(t,dj);let n=VT.get(e);return n==null&&VT.set(e,n=++hj),n}function mj(t,e,n){const{defaultFontURL:r}=n,i=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",l=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function u(x,w){function b(){const E=C=>{console.error(`Failure loading font ${x}${x===r?"":"; trying fallback"}`,C),x!==r&&(x=r,b())};try{const C=new XMLHttpRequest;C.open("get",x,!0),C.responseType="arraybuffer",C.onload=function(){if(C.status>=400)E(new Error(C.statusText));else if(C.status>0)try{const P=t(C.response);w(P)}catch(P){E(P)}},C.onerror=E,C.send()}catch(C){E(C)}}b()}function c(x,w){x||(x=r);let b=i[x];b?b.pending?b.pending.push(w):w(b):(i[x]={pending:[w]},u(x,E=>{let C=i[x].pending;i[x]=E,C.forEach(P=>P(E))}))}function f({text:x="",font:w=r,sdfGlyphSize:b=64,fontSize:E=1,letterSpacing:C=0,lineHeight:P="normal",maxWidth:M=s,direction:B,textAlign:D="left",textIndent:k=0,whiteSpace:O="normal",overflowWrap:U="normal",anchorX:N=0,anchorY:$=0,includeCaretPositions:Q=!1,chunkedBoundsSize:ie=8192,colorRanges:F=null},z,j=!1){const H=v(),G={fontLoad:0,typesetting:0};x.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),x=x.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),E=+E,C=+C,M=+M,P=P||"normal",k=+k,c(w,Z=>{const re=isFinite(M);let se=null,Y=null,ae=null,he=null,Ce=null,ve=null,xe=null,ne=0,le=0,Pe=O!=="nowrap";const{ascender:ke,descender:Re,unitsPerEm:Ve,lineGap:Me,capHeight:Fe,xHeight:ze}=Z;G.fontLoad=v()-H;const Ee=v(),W=E/Ve;P==="normal"&&(P=(ke-Re+Me)/Ve),P=P*E;const L=(P-(ke-Re)*W)/2,q=-(ke*W+L),fe=Math.min(P,(ke-Re)*W),Be=(ke+Re)/2*W-fe/2;let Ie=k,Ne=new y;const Ue=[Ne];Z.forEachGlyph(x,E,C,(K,pe,Se)=>{const Ae=x.charAt(Se),Ge=K.advanceWidth*W,et=Ne.count;let mt;if("isEmpty"in K||(K.isWhitespace=!!Ae&&new RegExp(a).test(Ae),K.canBreakAfter=!!Ae&&l.test(Ae),K.isEmpty=K.xMin===K.xMax||K.yMin===K.yMax||o.test(Ae)),!K.isWhitespace&&!K.isEmpty&&le++,Pe&&re&&!K.isWhitespace&&pe+Ge+Ie>M&&et){if(Ne.glyphAt(et-1).glyphObj.canBreakAfter)mt=new y,Ie=-pe;else for(let me=et;me--;)if(me===0&&U==="break-word"){mt=new y,Ie=-pe;break}else if(Ne.glyphAt(me).glyphObj.canBreakAfter){mt=Ne.splitAt(me+1);const Oe=mt.glyphAt(0).x;Ie-=Oe;for(let Ke=mt.count;Ke--;)mt.glyphAt(Ke).x-=Oe;break}mt&&(Ne.isSoftWrapped=!0,Ne=mt,Ue.push(Ne),ne=M)}let te=Ne.glyphAt(Ne.count);te.glyphObj=K,te.x=pe+Ie,te.width=Ge,te.charIndex=Se,Ae===`
`&&(Ne=new y,Ue.push(Ne),Ie=-(pe+Ge+C*E)+k)}),Ue.forEach(K=>{for(let pe=K.count;pe--;){let{glyphObj:Se,x:Ae,width:Ge}=K.glyphAt(pe);if(!Se.isWhitespace){K.width=Ae+Ge,K.width>ne&&(ne=K.width);return}}});let _e=0,We=0;if(N&&(typeof N=="number"?_e=-N:typeof N=="string"&&(_e=-ne*(N==="left"?0:N==="center"?.5:N==="right"?1:m(N)))),$){if(typeof $=="number")We=-$;else if(typeof $=="string"){let K=Ue.length*P;We=$==="top"?0:$==="top-baseline"?-q:$==="top-cap"?-q-Fe*W:$==="top-ex"?-q-ze*W:$==="middle"?K/2:$==="bottom"?K:$==="bottom-baseline"?K-L+Re*W:m($)*K}}if(!j){const K=e.getEmbeddingLevels(x,B);se=new Uint16Array(le),Y=new Float32Array(le*2),ae={},ve=[s,s,-s,-s],xe=[];let pe=q;Q&&(Ce=new Float32Array(x.length*3)),F&&(he=new Uint8Array(le*3));let Se=0,Ae=-1,Ge=-1,et,mt;if(Ue.forEach((te,me)=>{let{count:Oe,width:Ke}=te;if(Oe>0){let nt=0;for(let Vt=Oe;Vt--&&te.glyphAt(Vt).glyphObj.isWhitespace;)nt++;let Mt=0,Ht=0;if(D==="center")Mt=(ne-Ke)/2;else if(D==="right")Mt=ne-Ke;else if(D==="justify"&&te.isSoftWrapped){let Vt=0;for(let Ot=Oe-nt;Ot--;)te.glyphAt(Ot).glyphObj.isWhitespace&&Vt++;Ht=(ne-Ke)/Vt}if(Ht||Mt){let Vt=0;for(let Ot=0;Ot<Oe;Ot++){let Er=te.glyphAt(Ot);const gr=Er.glyphObj;Er.x+=Mt+Vt,Ht!==0&&gr.isWhitespace&&Ot<Oe-nt&&(Vt+=Ht,Er.width+=Ht)}}const Qt=e.getReorderSegments(x,K,te.glyphAt(0).charIndex,te.glyphAt(te.count-1).charIndex);for(let Vt=0;Vt<Qt.length;Vt++){const[Ot,Er]=Qt[Vt];let gr=1/0,qt=-1/0;for(let Cn=0;Cn<Oe;Cn++)if(te.glyphAt(Cn).charIndex>=Ot){let J=Cn,de=Cn;for(;de<Oe;de++){let be=te.glyphAt(de);if(be.charIndex>Er)break;de<Oe-nt&&(gr=Math.min(gr,be.x),qt=Math.max(qt,be.x+be.width))}for(let be=J;be<de;be++){const ce=te.glyphAt(be);ce.x=qt-(ce.x+ce.width-gr)}break}}let Jt;const Xt=Vt=>Jt=Vt;for(let Vt=0;Vt<Oe;Vt++){let Ot=te.glyphAt(Vt);Jt=Ot.glyphObj;const Er=Jt.index,gr=K.levels[Ot.charIndex]&1;if(gr){const qt=e.getMirroredCharacter(x[Ot.charIndex]);qt&&Z.forEachGlyph(qt,0,0,Xt)}if(Q){const{charIndex:qt}=Ot,Cn=Ot.x+_e,J=Ot.x+Ot.width+_e;Ce[qt*3]=gr?J:Cn,Ce[qt*3+1]=gr?Cn:J,Ce[qt*3+2]=pe+Be+We;const de=qt-Ae;de>1&&g(Ce,Ae,de),Ae=qt}if(F){const{charIndex:qt}=Ot;for(;qt>Ge;)Ge++,F.hasOwnProperty(Ge)&&(mt=F[Ge])}if(!Jt.isWhitespace&&!Jt.isEmpty){const qt=Se++;ae[Er]||(ae[Er]={path:Jt.path,pathBounds:[Jt.xMin,Jt.yMin,Jt.xMax,Jt.yMax]});const Cn=Ot.x+_e,J=pe+We;Y[qt*2]=Cn,Y[qt*2+1]=J;const de=Cn+Jt.xMin*W,be=J+Jt.yMin*W,ce=Cn+Jt.xMax*W,Le=J+Jt.yMax*W;de<ve[0]&&(ve[0]=de),be<ve[1]&&(ve[1]=be),ce>ve[2]&&(ve[2]=ce),Le>ve[3]&&(ve[3]=Le),qt%ie===0&&(et={start:qt,end:qt,rect:[s,s,-s,-s]},xe.push(et)),et.end++;const rt=et.rect;if(de<rt[0]&&(rt[0]=de),be<rt[1]&&(rt[1]=be),ce>rt[2]&&(rt[2]=ce),Le>rt[3]&&(rt[3]=Le),se[qt]=Er,F){const ft=qt*3;he[ft]=mt>>16&255,he[ft+1]=mt>>8&255,he[ft+2]=mt&255}}}}pe-=P}),Ce){const te=x.length-Ae;te>1&&g(Ce,Ae,te)}}G.typesetting=v()-Ee,z({glyphIds:se,glyphPositions:Y,glyphData:ae,caretPositions:Ce,caretHeight:fe,glyphColors:he,chunkedBounds:xe,fontSize:E,unitsPerEm:Ve,ascender:ke*W,descender:Re*W,capHeight:Fe*W,xHeight:ze*W,lineHeight:P,topBaseline:q,blockBounds:[_e,We-Ue.length*P,_e+ne,We],visibleBounds:ve,timings:G})})}function h(x,w){f(x,b=>{const[E,C,P,M]=b.blockBounds;w({width:P-E,height:M-C})},{metricsOnly:!0})}function m(x){let w=x.match(/^([\d.]+)%$/),b=w?parseFloat(w[1]):NaN;return isNaN(b)?0:b/100}function g(x,w,b){const E=x[w*3],C=x[w*3+1],P=x[w*3+2],M=(C-E)/b;for(let B=0;B<b;B++){const D=(w+B)*3;x[D]=E+M*B,x[D+1]=E+M*(B+1),x[D+2]=P}}function v(){return(self.performance||Date).now()}function y(){this.data=[]}const _=["glyphObj","x","width","charIndex"];return y.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/_.length)},glyphAt(x){let w=y.flyweight;return w.data=this.data,w.index=x,w},splitAt(x){let w=new y;return w.data=this.data.splice(x*_.length),w}},y.flyweight=_.reduce((x,w,b,E)=>(Object.defineProperty(x,w,{get(){return this.data[this.index*_.length+b]},set(C){this.data[this.index*_.length+b]=C}}),x),{data:null,index:0}),{typeset:f,measure:h,loadFont:c}}const hu=()=>(self.performance||Date).now(),cy=bL();let WT;function gj(t,e,n,r,i,s,o,a,l,u,c=!0){return c?yj(t,e,n,r,i,s,o,a,l,u).then(null,f=>(WT||(console.warn("WebGL SDF generation failed, falling back to JS",f),WT=!0),$T(t,e,n,r,i,s,o,a,l,u))):$T(t,e,n,r,i,s,o,a,l,u)}const C0=[],vj=5;let qw=0;function ML(){const t=hu();for(;C0.length&&hu()-t<vj;)C0.shift()();qw=C0.length?setTimeout(ML,0):0}const yj=(...t)=>new Promise((e,n)=>{C0.push(()=>{const r=hu();try{cy.webgl.generateIntoCanvas(...t),e({timing:hu()-r})}catch(i){n(i)}}),qw||(qw=setTimeout(ML,0))}),xj=4,_j=2e3,jT={};let wj=0;function $T(t,e,n,r,i,s,o,a,l,u){const c="TroikaTextSDFGenerator_JS_"+wj++%xj;let f=jT[c];return f||(f=jT[c]={workerModule:Up({name:c,workerId:c,dependencies:[bL,hu],init(h,m){const g=h().javascript.generate;return function(...v){const y=m();return{textureData:g(...v),timing:m()-y}}},getTransferables(h){return[h.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(t,e,n,r,i,s).then(({textureData:h,timing:m})=>{const g=hu(),v=new Uint8Array(h.length*4);for(let y=0;y<h.length;y++)v[y*4+u]=h[y];return cy.webglUtils.renderImageData(o,v,a,l,t,e,1<<3-u),m+=hu()-g,--f.requests===0&&(f.idleTimer=setTimeout(()=>{sj(c)},_j)),{timing:m}})}function Sj(t){t._warm||(cy.webgl.isSupported(t),t._warm=!0)}const bj=cy.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Aj(){return typeof window>"u"&&(self.window=self),function(t){var e={parse:function(i){var s=e._bin,o=new Uint8Array(i);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var u=[],c=0;c<l;c++){var f=s.readUint(o,a);a+=4,u.push(e._readFont(o,f))}return u}return[e._readFont(o,0)]},_readFont:function(i,s){var o=e._bin,a=s;o.readFixed(i,s),s+=4;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],c={_data:i,_offset:a},f={},h=0;h<l;h++){var m=o.readASCII(i,s,4);s+=4,o.readUint(i,s),s+=4;var g=o.readUint(i,s);s+=4;var v=o.readUint(i,s);s+=4,f[m]={offset:g,length:v}}for(h=0;h<u.length;h++){var y=u[h];f[y]&&(c[y.trim()]=e[y.trim()].parse(i,f[y].offset,f[y].length,c))}return c},_tabOffset:function(i,s,o){for(var a=e._bin,l=a.readUshort(i,o+4),u=o+12,c=0;c<l;c++){var f=a.readASCII(i,u,4);u+=4,a.readUint(i,u),u+=4;var h=a.readUint(i,u);if(u+=4,a.readUint(i,u),u+=4,f==s)return h}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(i,s+2*l));return a},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},readUnicode:function(i,s,o){for(var a="",l=0;l<o;l++){var u=i[s++]<<8|i[s++];a+=String.fromCharCode(u)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,o){var a=e._bin._tdec;return a&&s==0&&o==i.length?a.decode(i):e._bin.readASCII(i,s,o)},readBytes:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(i[s+l]);return a},readASCIIArray:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(i[s+l]));return a},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,o,a,l){var u=e._bin,c={},f=s;u.readFixed(i,s),s+=4;var h=u.readUshort(i,s);s+=2;var m=u.readUshort(i,s);s+=2;var g=u.readUshort(i,s);return s+=2,c.scriptList=e._lctf.readScriptList(i,f+h),c.featureList=e._lctf.readFeatureList(i,f+m),c.lookupList=e._lctf.readLookupList(i,f+g,l),c},e._lctf.readLookupList=function(i,s,o){var a=e._bin,l=s,u=[],c=a.readUshort(i,s);s+=2;for(var f=0;f<c;f++){var h=a.readUshort(i,s);s+=2;var m=e._lctf.readLookupTable(i,l+h,o);u.push(m)}return u},e._lctf.readLookupTable=function(i,s,o){var a=e._bin,l=s,u={tabs:[]};u.ltype=a.readUshort(i,s),s+=2,u.flag=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2;for(var f=u.ltype,h=0;h<c;h++){var m=a.readUshort(i,s);s+=2;var g=o(i,f,l+m,u);u.tabs.push(g)}return u},e._lctf.numOfOnes=function(i){for(var s=0,o=0;o<32;o++)i>>>o&1&&s++;return s},e._lctf.readClassDef=function(i,s){var o=e._bin,a=[],l=o.readUshort(i,s);if(s+=2,l==1){var u=o.readUshort(i,s);s+=2;var c=o.readUshort(i,s);s+=2;for(var f=0;f<c;f++)a.push(u+f),a.push(u+f),a.push(o.readUshort(i,s)),s+=2}if(l==2){var h=o.readUshort(i,s);for(s+=2,f=0;f<h;f++)a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2}return a},e._lctf.getInterval=function(i,s){for(var o=0;o<i.length;o+=3){var a=i[o],l=i[o+1];if(i[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(i,s){var o=e._bin,a={};a.fmt=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(i,s,l)),a.fmt==2&&(a.tab=o.readUshorts(i,s,3*l)),a},e._lctf.coverageIndex=function(i,s){var o=i.tab;if(i.fmt==1)return o.indexOf(s);if(i.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readASCII(i,s,4);s+=4;var h=o.readUshort(i,s);s+=2;var m=e._lctf.readFeatureTable(i,a+h);m.tag=f.trim(),l.push(m)}return l},e._lctf.readFeatureTable=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2,u>0&&(l.featureParams=a+u);var c=o.readUshort(i,s);s+=2,l.tab=[];for(var f=0;f<c;f++)l.tab.push(o.readUshort(i,s+2*f));return l},e._lctf.readScriptList=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readASCII(i,s,4);s+=4;var h=o.readUshort(i,s);s+=2,l[f.trim()]=e._lctf.readScriptTable(i,a+h)}return l},e._lctf.readScriptTable=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2,l.default=e._lctf.readLangSysTable(i,a+u);var c=o.readUshort(i,s);s+=2;for(var f=0;f<c;f++){var h=o.readASCII(i,s,4);s+=4;var m=o.readUshort(i,s);s+=2,l[h.trim()]=e._lctf.readLangSysTable(i,a+m)}return l},e._lctf.readLangSysTable=function(i,s){var o=e._bin,a={};o.readUshort(i,s),s+=2,a.reqFeature=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.features=o.readUshorts(i,s,l),a},e.CFF={},e.CFF.parse=function(i,s,o){var a=e._bin;(i=new Uint8Array(i.buffer,s,o))[s=0],i[++s],i[++s],i[++s],s++;var l=[];s=e.CFF.readIndex(i,s,l);for(var u=[],c=0;c<l.length-1;c++)u.push(a.readASCII(i,s+l[c],l[c+1]-l[c]));s+=l[l.length-1];var f=[];s=e.CFF.readIndex(i,s,f);var h=[];for(c=0;c<f.length-1;c++)h.push(e.CFF.readDict(i,s+f[c],s+f[c+1]));s+=f[f.length-1];var m=h[0],g=[];s=e.CFF.readIndex(i,s,g);var v=[];for(c=0;c<g.length-1;c++)v.push(a.readASCII(i,s+g[c],g[c+1]-g[c]));if(s+=g[g.length-1],e.CFF.readSubrs(i,s,m),m.CharStrings){s=m.CharStrings,g=[],s=e.CFF.readIndex(i,s,g);var y=[];for(c=0;c<g.length-1;c++)y.push(a.readBytes(i,s+g[c],g[c+1]-g[c]));m.CharStrings=y}if(m.ROS){s=m.FDArray;var _=[];for(s=e.CFF.readIndex(i,s,_),m.FDArray=[],c=0;c<_.length-1;c++){var x=e.CFF.readDict(i,s+_[c],s+_[c+1]);e.CFF._readFDict(i,x,v),m.FDArray.push(x)}s+=_[_.length-1],s=m.FDSelect,m.FDSelect=[];var w=i[s];if(s++,w!=3)throw w;var b=a.readUshort(i,s);for(s+=2,c=0;c<b+1;c++)m.FDSelect.push(a.readUshort(i,s),i[s+2]),s+=3}return m.Encoding&&(m.Encoding=e.CFF.readEncoding(i,m.Encoding,m.CharStrings.length)),m.charset&&(m.charset=e.CFF.readCharset(i,m.charset,m.CharStrings.length)),e.CFF._readFDict(i,m,v),m},e.CFF._readFDict=function(i,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(i,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(i,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(i,s,l);var u,c=l.length;u=c<1240?107:c<33900?1131:32768,o.Bias=u,o.Subrs=[];for(var f=0;f<l.length-1;f++)o.Subrs.push(a.readBytes(i,s+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var o=0;o<i.charset.length;o++)if(i.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,o){e._bin;var a=[".notdef"],l=i[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var u=i[s];s++;for(var c=0;c<u;c++)a.push(i[s+c]);return a},e.CFF.readCharset=function(i,s,o){var a=e._bin,l=[".notdef"],u=i[s];if(s++,u==0)for(var c=0;c<o;c++){var f=a.readUshort(i,s);s+=2,l.push(f)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;l.length<o;){f=a.readUshort(i,s),s+=2;var h=0;for(u==1?(h=i[s],s++):(h=a.readUshort(i,s),s+=2),c=0;c<=h;c++)l.push(f),f++}}return l},e.CFF.readIndex=function(i,s,o){var a=e._bin,l=a.readUshort(i,s)+1,u=i[s+=2];if(s++,u==1)for(var c=0;c<l;c++)o.push(i[s+c]);else if(u==2)for(c=0;c<l;c++)o.push(a.readUshort(i,s+2*c));else if(u==3)for(c=0;c<l;c++)o.push(16777215&a.readUint(i,s+3*c-1));else if(l!=1)throw"unsupported offset size: "+u+", count: "+l;return(s+=l*u)-1},e.CFF.getCharString=function(i,s,o){var a=e._bin,l=i[s],u=i[s+1];i[s+2],i[s+3],i[s+4];var c=1,f=null,h=null;l<=20&&(f=l,c=1),l==12&&(f=100*l+u,c=2),21<=l&&l<=27&&(f=l,c=1),l==28&&(h=a.readShort(i,s+1),c=3),29<=l&&l<=31&&(f=l,c=1),32<=l&&l<=246&&(h=l-139,c=1),247<=l&&l<=250&&(h=256*(l-247)+u+108,c=2),251<=l&&l<=254&&(h=256*-(l-251)-u-108,c=2),l==255&&(h=a.readInt(i,s+1)/65535,c=5),o.val=h??"o"+f,o.size=c},e.CFF.readCharString=function(i,s,o){for(var a=s+o,l=e._bin,u=[];s<a;){var c=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var h=1,m=null,g=null;c<=20&&(m=c,h=1),c==12&&(m=100*c+f,h=2),c!=19&&c!=20||(m=c,h=2),21<=c&&c<=27&&(m=c,h=1),c==28&&(g=l.readShort(i,s+1),h=3),29<=c&&c<=31&&(m=c,h=1),32<=c&&c<=246&&(g=c-139,h=1),247<=c&&c<=250&&(g=256*(c-247)+f+108,h=2),251<=c&&c<=254&&(g=256*-(c-251)-f-108,h=2),c==255&&(g=l.readInt(i,s+1)/65535,h=5),u.push(g??"o"+m),s+=h}return u},e.CFF.readDict=function(i,s,o){for(var a=e._bin,l={},u=[];s<o;){var c=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var h=1,m=null,g=null;if(c==28&&(g=a.readShort(i,s+1),h=3),c==29&&(g=a.readInt(i,s+1),h=5),32<=c&&c<=246&&(g=c-139,h=1),247<=c&&c<=250&&(g=256*(c-247)+f+108,h=2),251<=c&&c<=254&&(g=256*-(c-251)-f-108,h=2),c==255)throw g=a.readInt(i,s+1)/65535,h=5,"unknown number";if(c==30){var v=[];for(h=1;;){var y=i[s+h];h++;var _=y>>4,x=15&y;if(_!=15&&v.push(_),x!=15&&v.push(x),x==15)break}for(var w="",b=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],E=0;E<v.length;E++)w+=b[v[E]];g=parseFloat(w)}c<=21&&(m=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][c],h=1,c==12&&(m=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],h=2)),m!=null?(l[m]=u.length==1?u[0]:u,u=[]):u.push(g),s+=h}return l},e.cmap={},e.cmap.parse=function(i,s,o){i=new Uint8Array(i.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2;var c=[];l.tables=[];for(var f=0;f<u;f++){var h=a.readUshort(i,s);s+=2;var m=a.readUshort(i,s);s+=2;var g=a.readUint(i,s);s+=4;var v="p"+h+"e"+m,y=c.indexOf(g);if(y==-1){var _;y=l.tables.length,c.push(g);var x=a.readUshort(i,g);x==0?_=e.cmap.parse0(i,g):x==4?_=e.cmap.parse4(i,g):x==6?_=e.cmap.parse6(i,g):x==12?_=e.cmap.parse12(i,g):console.debug("unknown format: "+x,h,m,g),l.tables.push(_)}if(l[v]!=null)throw"multiple tables for one platform+encoding";l[v]=y}return l},e.cmap.parse0=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,a.map=[];for(var u=0;u<l-6;u++)a.map.push(i[s+u]);return a},e.cmap.parse4=function(i,s){var o=e._bin,a=s,l={};l.format=o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2;var f=c/2;l.searchRange=o.readUshort(i,s),s+=2,l.entrySelector=o.readUshort(i,s),s+=2,l.rangeShift=o.readUshort(i,s),s+=2,l.endCount=o.readUshorts(i,s,f),s+=2*f,s+=2,l.startCount=o.readUshorts(i,s,f),s+=2*f,l.idDelta=[];for(var h=0;h<f;h++)l.idDelta.push(o.readShort(i,s)),s+=2;for(l.idRangeOffset=o.readUshorts(i,s,f),s+=2*f,l.glyphIdArray=[];s<a+u;)l.glyphIdArray.push(o.readUshort(i,s)),s+=2;return l},e.cmap.parse6=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,a.firstCode=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,a.glyphIdArray=[];for(var u=0;u<l;u++)a.glyphIdArray.push(o.readUshort(i,s)),s+=2;return a},e.cmap.parse12=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,s+=2,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4;var l=o.readUint(i,s);s+=4,a.groups=[];for(var u=0;u<l;u++){var c=s+12*u,f=o.readUint(i,c+0),h=o.readUint(i,c+4),m=o.readUint(i,c+8);a.groups.push([f,h,m])}return a},e.glyf={},e.glyf.parse=function(i,s,o,a){for(var l=[],u=0;u<a.maxp.numGlyphs;u++)l.push(null);return l},e.glyf._parseGlyf=function(i,s){var o=e._bin,a=i._data,l=e._tabOffset(a,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var u={};if(u.noc=o.readShort(a,l),l+=2,u.xMin=o.readShort(a,l),l+=2,u.yMin=o.readShort(a,l),l+=2,u.xMax=o.readShort(a,l),l+=2,u.yMax=o.readShort(a,l),l+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var c=0;c<u.noc;c++)u.endPts.push(o.readUshort(a,l)),l+=2;var f=o.readUshort(a,l);if(l+=2,a.length-l<f)return null;u.instructions=o.readBytes(a,l,f),l+=f;var h=u.endPts[u.noc-1]+1;for(u.flags=[],c=0;c<h;c++){var m=a[l];if(l++,u.flags.push(m),(8&m)!=0){var g=a[l];l++;for(var v=0;v<g;v++)u.flags.push(m),c++}}for(u.xs=[],c=0;c<h;c++){var y=(2&u.flags[c])!=0,_=(16&u.flags[c])!=0;y?(u.xs.push(_?a[l]:-a[l]),l++):_?u.xs.push(0):(u.xs.push(o.readShort(a,l)),l+=2)}for(u.ys=[],c=0;c<h;c++)y=(4&u.flags[c])!=0,_=(32&u.flags[c])!=0,y?(u.ys.push(_?a[l]:-a[l]),l++):_?u.ys.push(0):(u.ys.push(o.readShort(a,l)),l+=2);var x=0,w=0;for(c=0;c<h;c++)x+=u.xs[c],w+=u.ys[c],u.xs[c]=x,u.ys[c]=w}else{var b;u.parts=[];do{b=o.readUshort(a,l),l+=2;var E={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(E),E.glyphIndex=o.readUshort(a,l),l+=2,1&b){var C=o.readShort(a,l);l+=2;var P=o.readShort(a,l);l+=2}else C=o.readInt8(a,l),l++,P=o.readInt8(a,l),l++;2&b?(E.m.tx=C,E.m.ty=P):(E.p1=C,E.p2=P),8&b?(E.m.a=E.m.d=o.readF2dot14(a,l),l+=2):64&b?(E.m.a=o.readF2dot14(a,l),l+=2,E.m.d=o.readF2dot14(a,l),l+=2):128&b&&(E.m.a=o.readF2dot14(a,l),l+=2,E.m.b=o.readF2dot14(a,l),l+=2,E.m.c=o.readF2dot14(a,l),l+=2,E.m.d=o.readF2dot14(a,l),l+=2)}while(32&b);if(256&b){var M=o.readUshort(a,l);for(l+=2,u.instr=[],c=0;c<M;c++)u.instr.push(a[l]),l++}}return u},e.GPOS={},e.GPOS.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(i,s,o,a){var l=e._bin,u=o,c={};if(c.fmt=l.readUshort(i,o),o+=2,s==1||s==2||s==3||s==7||s==8&&c.fmt<=2){var f=l.readUshort(i,o);o+=2,c.coverage=e._lctf.readCoverage(i,f+u)}if(s==1&&c.fmt==1){var h=l.readUshort(i,o);o+=2;var m=e._lctf.numOfOnes(h);h!=0&&(c.pos=e.GPOS.readValueRecord(i,o,h))}else if(s==2&&c.fmt>=1&&c.fmt<=2){h=l.readUshort(i,o),o+=2;var g=l.readUshort(i,o);o+=2,m=e._lctf.numOfOnes(h);var v=e._lctf.numOfOnes(g);if(c.fmt==1){c.pairsets=[];var y=l.readUshort(i,o);o+=2;for(var _=0;_<y;_++){var x=u+l.readUshort(i,o);o+=2;var w=l.readUshort(i,x);x+=2;for(var b=[],E=0;E<w;E++){var C=l.readUshort(i,x);x+=2,h!=0&&(O=e.GPOS.readValueRecord(i,x,h),x+=2*m),g!=0&&(U=e.GPOS.readValueRecord(i,x,g),x+=2*v),b.push({gid2:C,val1:O,val2:U})}c.pairsets.push(b)}}if(c.fmt==2){var P=l.readUshort(i,o);o+=2;var M=l.readUshort(i,o);o+=2;var B=l.readUshort(i,o);o+=2;var D=l.readUshort(i,o);for(o+=2,c.classDef1=e._lctf.readClassDef(i,u+P),c.classDef2=e._lctf.readClassDef(i,u+M),c.matrix=[],_=0;_<B;_++){var k=[];for(E=0;E<D;E++){var O=null,U=null;h!=0&&(O=e.GPOS.readValueRecord(i,o,h),o+=2*m),g!=0&&(U=e.GPOS.readValueRecord(i,o,g),o+=2*v),k.push({val1:O,val2:U})}c.matrix.push(k)}}}else{if(s==9&&c.fmt==1){var N=l.readUshort(i,o);o+=2;var $=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=N;else if(a.ltype!=N)throw"invalid extension substitution";return e.GPOS.subt(i,a.ltype,u+$)}console.debug("unsupported GPOS table LookupType",s,"format",c.fmt)}return c},e.GPOS.readValueRecord=function(i,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(i,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(i,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(i,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(i,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(i,s,o,a){var l=e._bin,u=o,c={};if(c.fmt=l.readUshort(i,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&c.fmt<=2||s==6&&c.fmt<=2){var f=l.readUshort(i,o);o+=2,c.coverage=e._lctf.readCoverage(i,u+f)}if(s==1&&c.fmt>=1&&c.fmt<=2){if(c.fmt==1)c.delta=l.readShort(i,o),o+=2;else if(c.fmt==2){var h=l.readUshort(i,o);o+=2,c.newg=l.readUshorts(i,o,h),o+=2*c.newg.length}}else if(s==4){c.vals=[],h=l.readUshort(i,o),o+=2;for(var m=0;m<h;m++){var g=l.readUshort(i,o);o+=2,c.vals.push(e.GSUB.readLigatureSet(i,u+g))}}else if(s==5&&c.fmt==2){if(c.fmt==2){var v=l.readUshort(i,o);o+=2,c.cDef=e._lctf.readClassDef(i,u+v),c.scset=[];var y=l.readUshort(i,o);for(o+=2,m=0;m<y;m++){var _=l.readUshort(i,o);o+=2,c.scset.push(_==0?null:e.GSUB.readSubClassSet(i,u+_))}}}else if(s==6&&c.fmt==3){if(c.fmt==3){for(m=0;m<3;m++){h=l.readUshort(i,o),o+=2;for(var x=[],w=0;w<h;w++)x.push(e._lctf.readCoverage(i,u+l.readUshort(i,o+2*w)));o+=2*h,m==0&&(c.backCvg=x),m==1&&(c.inptCvg=x),m==2&&(c.ahedCvg=x)}h=l.readUshort(i,o),o+=2,c.lookupRec=e.GSUB.readSubstLookupRecords(i,o,h)}}else{if(s==7&&c.fmt==1){var b=l.readUshort(i,o);o+=2;var E=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=b;else if(a.ltype!=b)throw"invalid extension substitution";return e.GSUB.subt(i,a.ltype,u+E)}console.debug("unsupported GSUB table LookupType",s,"format",c.fmt)}return c},e.GSUB.readSubClassSet=function(i,s){var o=e._bin.readUshort,a=s,l=[],u=o(i,s);s+=2;for(var c=0;c<u;c++){var f=o(i,s);s+=2,l.push(e.GSUB.readSubClassRule(i,a+f))}return l},e.GSUB.readSubClassRule=function(i,s){var o=e._bin.readUshort,a={},l=o(i,s),u=o(i,s+=2);s+=2,a.input=[];for(var c=0;c<l-1;c++)a.input.push(o(i,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,u),a},e.GSUB.readSubstLookupRecords=function(i,s,o){for(var a=e._bin.readUshort,l=[],u=0;u<o;u++)l.push(a(i,s),a(i,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readUshort(i,s);s+=2,l.push(e.GSUB.readChainSubClassRule(i,a+f))}return l},e.GSUB.readChainSubClassRule=function(i,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],u=0;u<l.length;u++){var c=o.readUshort(i,s);s+=2,u==1&&c--,a[l[u]]=o.readUshorts(i,s,c),s+=2*a[l[u]].length}return c=o.readUshort(i,s),s+=2,a.subst=o.readUshorts(i,s,2*c),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readUshort(i,s);s+=2,l.push(e.GSUB.readLigature(i,a+f))}return l},e.GSUB.readLigature=function(i,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2;for(var u=0;u<l-1;u++)a.chain.push(o.readUshort(i,s)),s+=2;return a},e.head={},e.head.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.fontRevision=a.readFixed(i,s),s+=4,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4,l.flags=a.readUshort(i,s),s+=2,l.unitsPerEm=a.readUshort(i,s),s+=2,l.created=a.readUint64(i,s),s+=8,l.modified=a.readUint64(i,s),s+=8,l.xMin=a.readShort(i,s),s+=2,l.yMin=a.readShort(i,s),s+=2,l.xMax=a.readShort(i,s),s+=2,l.yMax=a.readShort(i,s),s+=2,l.macStyle=a.readUshort(i,s),s+=2,l.lowestRecPPEM=a.readUshort(i,s),s+=2,l.fontDirectionHint=a.readShort(i,s),s+=2,l.indexToLocFormat=a.readShort(i,s),s+=2,l.glyphDataFormat=a.readShort(i,s),s+=2,l},e.hhea={},e.hhea.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.ascender=a.readShort(i,s),s+=2,l.descender=a.readShort(i,s),s+=2,l.lineGap=a.readShort(i,s),s+=2,l.advanceWidthMax=a.readUshort(i,s),s+=2,l.minLeftSideBearing=a.readShort(i,s),s+=2,l.minRightSideBearing=a.readShort(i,s),s+=2,l.xMaxExtent=a.readShort(i,s),s+=2,l.caretSlopeRise=a.readShort(i,s),s+=2,l.caretSlopeRun=a.readShort(i,s),s+=2,l.caretOffset=a.readShort(i,s),s+=2,s+=8,l.metricDataFormat=a.readShort(i,s),s+=2,l.numberOfHMetrics=a.readUshort(i,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(i,s,o,a){for(var l=e._bin,u={aWidth:[],lsBearing:[]},c=0,f=0,h=0;h<a.maxp.numGlyphs;h++)h<a.hhea.numberOfHMetrics&&(c=l.readUshort(i,s),s+=2,f=l.readShort(i,s),s+=2),u.aWidth.push(c),u.lsBearing.push(f);return u},e.kern={},e.kern.parse=function(i,s,o,a){var l=e._bin,u=l.readUshort(i,s);if(s+=2,u==1)return e.kern.parseV1(i,s-2,o,a);var c=l.readUshort(i,s);s+=2;for(var f={glyph1:[],rval:[]},h=0;h<c;h++){s+=2,o=l.readUshort(i,s),s+=2;var m=l.readUshort(i,s);s+=2;var g=m>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;s=e.kern.readFormat0(i,s,f)}return f},e.kern.parseV1=function(i,s,o,a){var l=e._bin;l.readFixed(i,s),s+=4;var u=l.readUint(i,s);s+=4;for(var c={glyph1:[],rval:[]},f=0;f<u;f++){l.readUint(i,s),s+=4;var h=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2;var m=h>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;s=e.kern.readFormat0(i,s,c)}return c},e.kern.readFormat0=function(i,s,o){var a=e._bin,l=-1,u=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var c=0;c<u;c++){var f=a.readUshort(i,s);s+=2;var h=a.readUshort(i,s);s+=2;var m=a.readShort(i,s);s+=2,f!=l&&(o.glyph1.push(f),o.rval.push({glyph2:[],vals:[]}));var g=o.rval[o.rval.length-1];g.glyph2.push(h),g.vals.push(m),l=f}return s},e.loca={},e.loca.parse=function(i,s,o,a){var l=e._bin,u=[],c=a.head.indexToLocFormat,f=a.maxp.numGlyphs+1;if(c==0)for(var h=0;h<f;h++)u.push(l.readUshort(i,s+(h<<1))<<1);if(c==1)for(h=0;h<f;h++)u.push(l.readUint(i,s+(h<<2)));return u},e.maxp={},e.maxp.parse=function(i,s,o){var a=e._bin,l={},u=a.readUint(i,s);return s+=4,l.numGlyphs=a.readUshort(i,s),s+=2,u==65536&&(l.maxPoints=a.readUshort(i,s),s+=2,l.maxContours=a.readUshort(i,s),s+=2,l.maxCompositePoints=a.readUshort(i,s),s+=2,l.maxCompositeContours=a.readUshort(i,s),s+=2,l.maxZones=a.readUshort(i,s),s+=2,l.maxTwilightPoints=a.readUshort(i,s),s+=2,l.maxStorage=a.readUshort(i,s),s+=2,l.maxFunctionDefs=a.readUshort(i,s),s+=2,l.maxInstructionDefs=a.readUshort(i,s),s+=2,l.maxStackElements=a.readUshort(i,s),s+=2,l.maxSizeOfInstructions=a.readUshort(i,s),s+=2,l.maxComponentElements=a.readUshort(i,s),s+=2,l.maxComponentDepth=a.readUshort(i,s),s+=2),l},e.name={},e.name.parse=function(i,s,o){var a=e._bin,l={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2,a.readUshort(i,s);for(var c,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=s+=2,m=0;m<u;m++){var g=a.readUshort(i,s);s+=2;var v=a.readUshort(i,s);s+=2;var y=a.readUshort(i,s);s+=2;var _=a.readUshort(i,s);s+=2;var x=a.readUshort(i,s);s+=2;var w=a.readUshort(i,s);s+=2;var b,E=f[_],C=h+12*u+w;if(g==0)b=a.readUnicode(i,C,x/2);else if(g==3&&v==0)b=a.readUnicode(i,C,x/2);else if(v==0)b=a.readASCII(i,C,x);else if(v==1)b=a.readUnicode(i,C,x/2);else if(v==3)b=a.readUnicode(i,C,x/2);else{if(g!=1)throw"unknown encoding "+v+", platformID: "+g;b=a.readASCII(i,C,x),console.debug("reading unknown MAC encoding "+v+" as ASCII")}var P="p"+g+","+y.toString(16);l[P]==null&&(l[P]={}),l[P][E!==void 0?E:_]=b,l[P]._lang=y}for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==1033)return l[M];for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==0)return l[M];for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==3084)return l[M];for(var M in l)if(l[M].postScriptName!=null)return l[M];for(var M in l){c=M;break}return console.debug("returning name table with languageID "+l[c]._lang),l[c]},e["OS/2"]={},e["OS/2"].parse=function(i,s,o){var a=e._bin.readUshort(i,s);s+=2;var l={};if(a==0)e["OS/2"].version0(i,s,l);else if(a==1)e["OS/2"].version1(i,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(i,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(i,s,l)}return l},e["OS/2"].version0=function(i,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(i,s),s+=2,o.usWeightClass=a.readUshort(i,s),s+=2,o.usWidthClass=a.readUshort(i,s),s+=2,o.fsType=a.readUshort(i,s),s+=2,o.ySubscriptXSize=a.readShort(i,s),s+=2,o.ySubscriptYSize=a.readShort(i,s),s+=2,o.ySubscriptXOffset=a.readShort(i,s),s+=2,o.ySubscriptYOffset=a.readShort(i,s),s+=2,o.ySuperscriptXSize=a.readShort(i,s),s+=2,o.ySuperscriptYSize=a.readShort(i,s),s+=2,o.ySuperscriptXOffset=a.readShort(i,s),s+=2,o.ySuperscriptYOffset=a.readShort(i,s),s+=2,o.yStrikeoutSize=a.readShort(i,s),s+=2,o.yStrikeoutPosition=a.readShort(i,s),s+=2,o.sFamilyClass=a.readShort(i,s),s+=2,o.panose=a.readBytes(i,s,10),s+=10,o.ulUnicodeRange1=a.readUint(i,s),s+=4,o.ulUnicodeRange2=a.readUint(i,s),s+=4,o.ulUnicodeRange3=a.readUint(i,s),s+=4,o.ulUnicodeRange4=a.readUint(i,s),s+=4,o.achVendID=[a.readInt8(i,s),a.readInt8(i,s+1),a.readInt8(i,s+2),a.readInt8(i,s+3)],s+=4,o.fsSelection=a.readUshort(i,s),s+=2,o.usFirstCharIndex=a.readUshort(i,s),s+=2,o.usLastCharIndex=a.readUshort(i,s),s+=2,o.sTypoAscender=a.readShort(i,s),s+=2,o.sTypoDescender=a.readShort(i,s),s+=2,o.sTypoLineGap=a.readShort(i,s),s+=2,o.usWinAscent=a.readUshort(i,s),s+=2,o.usWinDescent=a.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,o){var a=e._bin;return s=e["OS/2"].version0(i,s,o),o.ulCodePageRange1=a.readUint(i,s),s+=4,o.ulCodePageRange2=a.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,o){var a=e._bin;return s=e["OS/2"].version1(i,s,o),o.sxHeight=a.readShort(i,s),s+=2,o.sCapHeight=a.readShort(i,s),s+=2,o.usDefault=a.readUshort(i,s),s+=2,o.usBreak=a.readUshort(i,s),s+=2,o.usMaxContext=a.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,o){var a=e._bin;return s=e["OS/2"].version2(i,s,o),o.usLowerOpticalPointSize=a.readUshort(i,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,o){var a=e._bin,l={};return l.version=a.readFixed(i,s),s+=4,l.italicAngle=a.readFixed(i,s),s+=4,l.underlinePosition=a.readShort(i,s),s+=2,l.underlineThickness=a.readShort(i,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var o=i.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var u=-1,c=0;c<l.endCount.length;c++)if(s<=l.endCount[c]){u=c;break}return u==-1||l.startCount[u]>s?0:65535&(l.idRangeOffset[u]!=0?l.glyphIdArray[s-l.startCount[u]+(l.idRangeOffset[u]>>1)-(l.idRangeOffset.length-u)]:s+l.idDelta[u])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(c=0;c<l.groups.length;c++){var f=l.groups[c];if(f[0]<=s&&s<=f[1])return f[2]+(s-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,s){var o={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var a=i.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),i.SVG.entries[s]=a),a)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},u=i.CFF,c=i.CFF.Private;if(u.ROS){for(var f=0;u.FDSelect[f+2]<=s;)f+=2;c=u.FDArray[u.FDSelect[f+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],l,u,c,o)}else i.glyf&&e.U._drawGlyf(s,i,o);return o},e.U._drawGlyf=function(i,s,o){var a=s.glyf[i];a==null&&(a=s.glyf[i]=e.glyf._parseGlyf(s,i)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(i,s){for(var o=0;o<i.noc;o++){for(var a=o==0?0:i.endPts[o-1]+1,l=i.endPts[o],u=a;u<=l;u++){var c=u==a?l:u-1,f=u==l?a:u+1,h=1&i.flags[u],m=1&i.flags[c],g=1&i.flags[f],v=i.xs[u],y=i.ys[u];if(u==a)if(h){if(!m){e.U.P.moveTo(s,v,y);continue}e.U.P.moveTo(s,i.xs[c],i.ys[c])}else m?e.U.P.moveTo(s,i.xs[c],i.ys[c]):e.U.P.moveTo(s,(i.xs[c]+v)/2,(i.ys[c]+y)/2);h?m&&e.U.P.lineTo(s,v,y):g?e.U.P.qcurveTo(s,v,y,i.xs[f],i.ys[f]):e.U.P.qcurveTo(s,v,y,(v+i.xs[f])/2,(y+i.ys[f])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,o){for(var a=0;a<i.parts.length;a++){var l={cmds:[],crds:[]},u=i.parts[a];e.U._drawGlyf(u.glyphIndex,s,l);for(var c=u.m,f=0;f<l.crds.length;f+=2){var h=l.crds[f],m=l.crds[f+1];o.crds.push(h*c.a+m*c.b+c.tx),o.crds.push(h*c.c+m*c.d+c.ty)}for(f=0;f<l.cmds.length;f++)o.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(i,s){var o=e._lctf.getInterval(s,i);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(i,s,o){var a=!1;if(i.GPOS)for(var l=i.GPOS,u=l.lookupList,c=l.featureList,f=[],h=0;h<c.length;h++){var m=c[h];if(m.tag=="kern"){a=!0;for(var g=0;g<m.tab.length;g++)if(!f[m.tab[g]]){f[m.tab[g]]=!0;for(var v=u[m.tab[g]],y=0;y<v.tabs.length;y++)if(v.tabs[y]!=null){var _,x=v.tabs[y];if((!x.coverage||(_=e._lctf.coverageIndex(x.coverage,s))!=-1)&&v.ltype!=1){if(v.ltype==2){var w=null;if(x.fmt==1){var b=x.pairsets[_];for(h=0;h<b.length;h++)b[h].gid2==o&&(w=b[h])}else if(x.fmt==2){var E=e.U._getGlyphClass(s,x.classDef1),C=e.U._getGlyphClass(o,x.classDef2);w=x.matrix[E][C]}if(w){var P=0;return w.val1&&w.val1[2]&&(P+=w.val1[2]),w.val2&&w.val2[0]&&(P+=w.val2[0]),P}}}}}}}if(i.kern&&!a){var M=i.kern.glyph1.indexOf(s);if(M!=-1){var B=i.kern.rval[M].glyph2.indexOf(o);if(B!=-1)return i.kern.rval[M].vals[B]}}return 0},e.U._applySubs=function(i,s,o,a){for(var l=i.length-s-1,u=0;u<o.tabs.length;u++)if(o.tabs[u]!=null){var c,f=o.tabs[u];if(!f.coverage||(c=e._lctf.coverageIndex(f.coverage,i[s]))!=-1){if(o.ltype==1)i[s],f.fmt==1?i[s]=i[s]+f.delta:i[s]=f.newg[c];else if(o.ltype==4)for(var h=f.vals[c],m=0;m<h.length;m++){var g=h[m],v=g.chain.length;if(!(v>l)){for(var y=!0,_=0,x=0;x<v;x++){for(;i[s+_+(1+x)]==-1;)_++;g.chain[x]!=i[s+_+(1+x)]&&(y=!1)}if(y){for(i[s]=g.nglyph,x=0;x<v+_;x++)i[s+x+1]=-1;break}}}else if(o.ltype==5&&f.fmt==2)for(var w=e._lctf.getInterval(f.cDef,i[s]),b=f.cDef[w+2],E=f.scset[b],C=0;C<E.length;C++){var P=E[C],M=P.input;if(!(M.length>l)){for(y=!0,x=0;x<M.length;x++){var B=e._lctf.getInterval(f.cDef,i[s+1+x]);if(w==-1&&f.cDef[B+2]!=M[x]){y=!1;break}}if(y){var D=P.substLookupRecords;for(m=0;m<D.length;m+=2)D[m],D[m+1]}}}else if(o.ltype==6&&f.fmt==3){if(!e.U._glsCovered(i,f.backCvg,s-f.backCvg.length)||!e.U._glsCovered(i,f.inptCvg,s)||!e.U._glsCovered(i,f.ahedCvg,s+f.inptCvg.length))continue;var k=f.lookupRec;for(C=0;C<k.length;C+=2){w=k[C];var O=a[k[C+1]];e.U._applySubs(i,s+w,O,a)}}}}},e.U._glsCovered=function(i,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],i[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,o){for(var a={cmds:[],crds:[]},l=0,u=0;u<s.length;u++){var c=s[u];if(c!=-1){for(var f=u<s.length-1&&s[u+1]!=-1?s[u+1]:0,h=e.U.glyphToPath(i,c),m=0;m<h.crds.length;m+=2)a.crds.push(h.crds[m]+l),a.crds.push(h.crds[m+1]);for(o&&a.cmds.push(o),m=0;m<h.cmds.length;m++)a.cmds.push(h.cmds[m]);o&&a.cmds.push("X"),l+=i.hmtx.aWidth[c],u<s.length-1&&(l+=e.U.getPairAdjustment(i,c,f))}}return a},e.U.P={},e.U.P.moveTo=function(i,s,o){i.cmds.push("M"),i.crds.push(s,o)},e.U.P.lineTo=function(i,s,o){i.cmds.push("L"),i.crds.push(s,o)},e.U.P.curveTo=function(i,s,o,a,l,u,c){i.cmds.push("C"),i.crds.push(s,o,a,l,u,c)},e.U.P.qcurveTo=function(i,s,o,a,l){i.cmds.push("Q"),i.crds.push(s,o,a,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,o,a,l){for(var u=s.stack,c=s.nStems,f=s.haveWidth,h=s.width,m=s.open,g=0,v=s.x,y=s.y,_=0,x=0,w=0,b=0,E=0,C=0,P=0,M=0,B=0,D=0,k={val:0,size:0};g<i.length;){e.CFF.getCharString(i,g,k);var O=k.val;if(g+=k.size,O=="o1"||O=="o18")u.length%2!=0&&!f&&(h=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0;else if(O=="o3"||O=="o23")u.length%2!=0&&!f&&(h=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0;else if(O=="o4")u.length>1&&!f&&(h=u.shift()+a.nominalWidthX,f=!0),m&&e.U.P.closePath(l),y+=u.pop(),e.U.P.moveTo(l,v,y),m=!0;else if(O=="o5")for(;u.length>0;)v+=u.shift(),y+=u.shift(),e.U.P.lineTo(l,v,y);else if(O=="o6"||O=="o7")for(var U=u.length,N=O=="o6",$=0;$<U;$++){var Q=u.shift();N?v+=Q:y+=Q,N=!N,e.U.P.lineTo(l,v,y)}else if(O=="o8"||O=="o24"){U=u.length;for(var ie=0;ie+6<=U;)_=v+u.shift(),x=y+u.shift(),w=_+u.shift(),b=x+u.shift(),v=w+u.shift(),y=b+u.shift(),e.U.P.curveTo(l,_,x,w,b,v,y),ie+=6;O=="o24"&&(v+=u.shift(),y+=u.shift(),e.U.P.lineTo(l,v,y))}else{if(O=="o11")break;if(O=="o1234"||O=="o1235"||O=="o1236"||O=="o1237")O=="o1234"&&(x=y,w=(_=v+u.shift())+u.shift(),D=b=x+u.shift(),C=b,M=y,v=(P=(E=(B=w+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(l,_,x,w,b,B,D),e.U.P.curveTo(l,E,C,P,M,v,y)),O=="o1235"&&(_=v+u.shift(),x=y+u.shift(),w=_+u.shift(),b=x+u.shift(),B=w+u.shift(),D=b+u.shift(),E=B+u.shift(),C=D+u.shift(),P=E+u.shift(),M=C+u.shift(),v=P+u.shift(),y=M+u.shift(),u.shift(),e.U.P.curveTo(l,_,x,w,b,B,D),e.U.P.curveTo(l,E,C,P,M,v,y)),O=="o1236"&&(_=v+u.shift(),x=y+u.shift(),w=_+u.shift(),D=b=x+u.shift(),C=b,P=(E=(B=w+u.shift())+u.shift())+u.shift(),M=C+u.shift(),v=P+u.shift(),e.U.P.curveTo(l,_,x,w,b,B,D),e.U.P.curveTo(l,E,C,P,M,v,y)),O=="o1237"&&(_=v+u.shift(),x=y+u.shift(),w=_+u.shift(),b=x+u.shift(),B=w+u.shift(),D=b+u.shift(),E=B+u.shift(),C=D+u.shift(),P=E+u.shift(),M=C+u.shift(),Math.abs(P-v)>Math.abs(M-y)?v=P+u.shift():y=M+u.shift(),e.U.P.curveTo(l,_,x,w,b,B,D),e.U.P.curveTo(l,E,C,P,M,v,y));else if(O=="o14"){if(u.length>0&&!f&&(h=u.shift()+o.nominalWidthX,f=!0),u.length==4){var F=u.shift(),z=u.shift(),j=u.shift(),H=u.shift(),G=e.CFF.glyphBySE(o,j),Z=e.CFF.glyphBySE(o,H);e.U._drawCFF(o.CharStrings[G],s,o,a,l),s.x=F,s.y=z,e.U._drawCFF(o.CharStrings[Z],s,o,a,l)}m&&(e.U.P.closePath(l),m=!1)}else if(O=="o19"||O=="o20")u.length%2!=0&&!f&&(h=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0,g+=c+7>>3;else if(O=="o21")u.length>2&&!f&&(h=u.shift()+a.nominalWidthX,f=!0),y+=u.pop(),v+=u.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,v,y),m=!0;else if(O=="o22")u.length>1&&!f&&(h=u.shift()+a.nominalWidthX,f=!0),v+=u.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,v,y),m=!0;else if(O=="o25"){for(;u.length>6;)v+=u.shift(),y+=u.shift(),e.U.P.lineTo(l,v,y);_=v+u.shift(),x=y+u.shift(),w=_+u.shift(),b=x+u.shift(),v=w+u.shift(),y=b+u.shift(),e.U.P.curveTo(l,_,x,w,b,v,y)}else if(O=="o26")for(u.length%2&&(v+=u.shift());u.length>0;)_=v,x=y+u.shift(),v=w=_+u.shift(),y=(b=x+u.shift())+u.shift(),e.U.P.curveTo(l,_,x,w,b,v,y);else if(O=="o27")for(u.length%2&&(y+=u.shift());u.length>0;)x=y,w=(_=v+u.shift())+u.shift(),b=x+u.shift(),v=w+u.shift(),y=b,e.U.P.curveTo(l,_,x,w,b,v,y);else if(O=="o10"||O=="o29"){var re=O=="o10"?a:o;if(u.length==0)console.debug("error: empty stack");else{var se=u.pop(),Y=re.Subrs[se+re.Bias];s.x=v,s.y=y,s.nStems=c,s.haveWidth=f,s.width=h,s.open=m,e.U._drawCFF(Y,s,o,a,l),v=s.x,y=s.y,c=s.nStems,f=s.haveWidth,h=s.width,m=s.open}}else if(O=="o30"||O=="o31"){var ae=u.length,he=(ie=0,O=="o31");for(ie+=ae-(U=-3&ae);ie<U;)he?(x=y,w=(_=v+u.shift())+u.shift(),y=(b=x+u.shift())+u.shift(),U-ie==5?(v=w+u.shift(),ie++):v=w,he=!1):(_=v,x=y+u.shift(),w=_+u.shift(),b=x+u.shift(),v=w+u.shift(),U-ie==5?(y=b+u.shift(),ie++):y=b,he=!0),e.U.P.curveTo(l,_,x,w,b,v,y),ie+=4}else{if((O+"").charAt(0)=="o")throw console.debug("Unknown operation: "+O,i),O;u.push(O)}}}s.x=v,s.y=y,s.nStems=c,s.haveWidth=f,s.width=h,s.open=m};var n=e,r={Typr:n};return t.Typr=n,t.default=r,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Mj(){return function(t){var e=Uint8Array,n=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(O,U){for(var N=new n(31),$=0;$<31;++$)N[$]=U+=1<<O[$-1];var Q=new r(N[30]);for($=1;$<30;++$)for(var ie=N[$];ie<N[$+1];++ie)Q[ie]=ie-N[$]<<5|$;return[N,Q]},l=a(i,2),u=l[0],c=l[1];u[28]=258,c[258]=28;for(var f=a(s,0)[0],h=new n(32768),m=0;m<32768;++m){var g=(43690&m)>>>1|(21845&m)<<1;g=(61680&(g=(52428&g)>>>2|(13107&g)<<2))>>>4|(3855&g)<<4,h[m]=((65280&g)>>>8|(255&g)<<8)>>>1}var v=function(O,U,N){for(var $=O.length,Q=0,ie=new n(U);Q<$;++Q)++ie[O[Q]-1];var F,z=new n(U);for(Q=0;Q<U;++Q)z[Q]=z[Q-1]+ie[Q-1]<<1;if(N){F=new n(1<<U);var j=15-U;for(Q=0;Q<$;++Q)if(O[Q])for(var H=Q<<4|O[Q],G=U-O[Q],Z=z[O[Q]-1]++<<G,re=Z|(1<<G)-1;Z<=re;++Z)F[h[Z]>>>j]=H}else for(F=new n($),Q=0;Q<$;++Q)O[Q]&&(F[Q]=h[z[O[Q]-1]++]>>>15-O[Q]);return F},y=new e(288);for(m=0;m<144;++m)y[m]=8;for(m=144;m<256;++m)y[m]=9;for(m=256;m<280;++m)y[m]=7;for(m=280;m<288;++m)y[m]=8;var _=new e(32);for(m=0;m<32;++m)_[m]=5;var x=v(y,9,1),w=v(_,5,1),b=function(O){for(var U=O[0],N=1;N<O.length;++N)O[N]>U&&(U=O[N]);return U},E=function(O,U,N){var $=U/8|0;return(O[$]|O[$+1]<<8)>>(7&U)&N},C=function(O,U){var N=U/8|0;return(O[N]|O[N+1]<<8|O[N+2]<<16)>>(7&U)},P=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(O,U,N){var $=new Error(U||P[O]);if($.code=O,Error.captureStackTrace&&Error.captureStackTrace($,M),!N)throw $;return $},B=function(O,U,N){var $=O.length;if(!$||N&&!N.l&&$<5)return U||new e(0);var Q=!U||N,ie=!N||N.i;N||(N={}),U||(U=new e(3*$));var F,z=function(Ae){var Ge=U.length;if(Ae>Ge){var et=new e(Math.max(2*Ge,Ae));et.set(U),U=et}},j=N.f||0,H=N.p||0,G=N.b||0,Z=N.l,re=N.d,se=N.m,Y=N.n,ae=8*$;do{if(!Z){N.f=j=E(O,H,1);var he=E(O,H+1,3);if(H+=3,!he){var Ce=O[(ze=((F=H)/8|0)+(7&F&&1)+4)-4]|O[ze-3]<<8,ve=ze+Ce;if(ve>$){ie&&M(0);break}Q&&z(G+Ce),U.set(O.subarray(ze,ve),G),N.b=G+=Ce,N.p=H=8*ve;continue}if(he==1)Z=x,re=w,se=9,Y=5;else if(he==2){var xe=E(O,H,31)+257,ne=E(O,H+10,15)+4,le=xe+E(O,H+5,31)+1;H+=14;for(var Pe=new e(le),ke=new e(19),Re=0;Re<ne;++Re)ke[o[Re]]=E(O,H+3*Re,7);H+=3*ne;var Ve=b(ke),Me=(1<<Ve)-1,Fe=v(ke,Ve,1);for(Re=0;Re<le;){var ze,Ee=Fe[E(O,H,Me)];if(H+=15&Ee,(ze=Ee>>>4)<16)Pe[Re++]=ze;else{var W=0,L=0;for(ze==16?(L=3+E(O,H,3),H+=2,W=Pe[Re-1]):ze==17?(L=3+E(O,H,7),H+=3):ze==18&&(L=11+E(O,H,127),H+=7);L--;)Pe[Re++]=W}}var q=Pe.subarray(0,xe),fe=Pe.subarray(xe);se=b(q),Y=b(fe),Z=v(q,se,1),re=v(fe,Y,1)}else M(1);if(H>ae){ie&&M(0);break}}Q&&z(G+131072);for(var Be=(1<<se)-1,Ie=(1<<Y)-1,Ne=H;;Ne=H){var Ue=(W=Z[C(O,H)&Be])>>>4;if((H+=15&W)>ae){ie&&M(0);break}if(W||M(2),Ue<256)U[G++]=Ue;else{if(Ue==256){Ne=H,Z=null;break}var _e=Ue-254;if(Ue>264){var We=i[Re=Ue-257];_e=E(O,H,(1<<We)-1)+u[Re],H+=We}var K=re[C(O,H)&Ie],pe=K>>>4;if(K||M(3),H+=15&K,fe=f[pe],pe>3&&(We=s[pe],fe+=C(O,H)&(1<<We)-1,H+=We),H>ae){ie&&M(0);break}Q&&z(G+131072);for(var Se=G+_e;G<Se;G+=4)U[G]=U[G-fe],U[G+1]=U[G+1-fe],U[G+2]=U[G+2-fe],U[G+3]=U[G+3-fe];G=Se}}N.l=Z,N.p=Ne,N.b=G,Z&&(j=1,N.m=se,N.d=re,N.n=Y)}while(!j);return G==U.length?U:function(Ae,Ge,et){(Ge==null||Ge<0)&&(Ge=0),(et==null||et>Ae.length)&&(et=Ae.length);var mt=new(Ae instanceof n?n:Ae instanceof r?r:e)(et-Ge);return mt.set(Ae.subarray(Ge,et)),mt}(U,0,G)},D=new e(0),k=typeof TextDecoder<"u"&&new TextDecoder;try{k.decode(D,{stream:!0})}catch{}return t.convert_streams=function(O){var U=new DataView(O),N=0;function $(){var xe=U.getUint16(N);return N+=2,xe}function Q(){var xe=U.getUint32(N);return N+=4,xe}function ie(xe){Ce.setUint16(ve,xe),ve+=2}function F(xe){Ce.setUint32(ve,xe),ve+=4}for(var z={signature:Q(),flavor:Q(),length:Q(),numTables:$(),reserved:$(),totalSfntSize:Q(),majorVersion:$(),minorVersion:$(),metaOffset:Q(),metaLength:Q(),metaOrigLength:Q(),privOffset:Q(),privLength:Q()},j=0;Math.pow(2,j)<=z.numTables;)j++;j--;for(var H=16*Math.pow(2,j),G=16*z.numTables-H,Z=12,re=[],se=0;se<z.numTables;se++)re.push({tag:Q(),offset:Q(),compLength:Q(),origLength:Q(),origChecksum:Q()}),Z+=16;var Y,ae=new Uint8Array(12+16*re.length+re.reduce(function(xe,ne){return xe+ne.origLength+4},0)),he=ae.buffer,Ce=new DataView(he),ve=0;return F(z.flavor),ie(z.numTables),ie(H),ie(j),ie(G),re.forEach(function(xe){F(xe.tag),F(xe.origChecksum),F(Z),F(xe.origLength),xe.outOffset=Z,(Z+=xe.origLength)%4!=0&&(Z+=4-Z%4)}),re.forEach(function(xe){var ne,le=O.slice(xe.offset,xe.offset+xe.compLength);if(xe.compLength!=xe.origLength){var Pe=new Uint8Array(xe.origLength);ne=new Uint8Array(le,2),B(ne,Pe)}else Pe=new Uint8Array(le);ae.set(Pe,xe.outOffset);var ke=0;(Z=xe.outOffset+xe.origLength)%4!=0&&(ke=4-Z%4),ae.set(new Uint8Array(ke).buffer,xe.outOffset+xe.origLength),Y=Z+ke}),he.slice(0,Y)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams}function Ej(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,o=4,a=8,l=16,u=32;let c;function f(E){if(!c){const C={R:s,L:i,D:o,C:l,U:u,T:a};c=new Map;for(let P in r){let M=0;r[P].split(",").forEach(B=>{let[D,k]=B.split("+");D=parseInt(D,36),k=k?parseInt(k,36):0,c.set(M+=D,C[P]);for(let O=k;O--;)c.set(++M,C[P])})}}return c.get(E)||u}const h=1,m=2,g=3,v=4,y=[null,"isol","init","fina","medi"];function _(E){const C=new Uint8Array(E.length);let P=u,M=h,B=-1;for(let D=0;D<E.length;D++){const k=E.codePointAt(D);let O=f(k)|0,U=h;O&a||(P&(i|o|l)?O&(s|o|l)?(U=g,(M===h||M===g)&&C[B]++):O&(i|u)&&(M===m||M===v)&&C[B]--:P&(s|u)&&(M===m||M===v)&&C[B]--,M=C[D]=U,P=O,B=D,k>65535&&D++)}return C}function x(E,C){const P=[];for(let B=0;B<C.length;B++){const D=C.codePointAt(B);D>65535&&B++,P.push(t.U.codeToGlyph(E,D))}const M=E.GSUB;if(M){const{lookupList:B,featureList:D}=M;let k;const O=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,U=[];D.forEach(N=>{if(O.test(N.tag))for(let $=0;$<N.tab.length;$++){if(U[N.tab[$]])continue;U[N.tab[$]]=!0;const Q=B[N.tab[$]],ie=/^(isol|init|fina|medi)$/.test(N.tag);ie&&!k&&(k=_(C));for(let F=0;F<P.length;F++)(!k||!ie||y[k[F]]===N.tag)&&t.U._applySubs(P,F,Q,B)}})}return P}function w(...E){for(let C=0;C<E.length;C++)if(typeof E[C]=="number")return E[C]}function b(E){const C=Object.create(null),P=E["OS/2"],M=E.hhea,B=E.head.unitsPerEm,D=w(P&&P.sTypoAscender,M&&M.ascender,B),k={unitsPerEm:B,ascender:D,descender:w(P&&P.sTypoDescender,M&&M.descender,0),capHeight:w(P&&P.sCapHeight,D),xHeight:w(P&&P.sxHeight,D),lineGap:w(P&&P.sTypoLineGap,M&&M.lineGap),forEachGlyph(O,U,N,$){let Q=0;const ie=1/k.unitsPerEm*U,F=x(E,O);let z=0,j=-1;return F.forEach((H,G)=>{if(H!==-1){let Z=C[H];if(!Z){const{cmds:re,crds:se}=t.U.glyphToPath(E,H);let Y="",ae=0;for(let ne=0,le=re.length;ne<le;ne++){const Pe=n[re[ne]];Y+=re[ne];for(let ke=1;ke<=Pe;ke++)Y+=(ke>1?",":"")+se[ae++]}let he,Ce,ve,xe;if(se.length){he=Ce=1/0,ve=xe=-1/0;for(let ne=0,le=se.length;ne<le;ne+=2){let Pe=se[ne],ke=se[ne+1];Pe<he&&(he=Pe),ke<Ce&&(Ce=ke),Pe>ve&&(ve=Pe),ke>xe&&(xe=ke)}}else he=ve=Ce=xe=0;Z=C[H]={index:H,advanceWidth:E.hmtx.aWidth[H],xMin:he,yMin:Ce,xMax:ve,yMax:xe,path:Y,pathCommandCount:re.length}}j!==-1&&(Q+=t.U.getPairAdjustment(E,j,H)*ie),$.call(null,Z,Q,z),Z.advanceWidth&&(Q+=Z.advanceWidth*ie),N&&(Q+=N*U),j=H}z+=O.codePointAt(z)>65535?2:1}),Q}};return k}return function(C){const P=new Uint8Array(C,0,4),M=t._bin.readASCII(P,0,4);if(M==="wOFF")C=e(C);else if(M==="wOF2")throw new Error("woff2 fonts not supported");return b(t.parse(C)[0])}}const Cj=Up({name:"Typr Font Parser",dependencies:[Aj,Mj,Ej],init(t,e,n){const r=t(),i=e();return n(r,i)}}),Yc={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Tj=new $e;function Ec(){return(self.performance||Date).now()}const JT=Object.create(null);function EL(t,e){t=Bj({},t);const n=Ec();if(t.font=Ij(t.font||Yc.defaultFontURL),t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||Yc.sdfGlyphSize,t.colorRanges!=null){let f={};for(let h in t.colorRanges)if(t.colorRanges.hasOwnProperty(h)){let m=t.colorRanges[h];typeof m!="number"&&(m=Tj.set(m).getHex()),f[h]=m}t.colorRanges=f}Object.freeze(t);const{textureWidth:r,sdfExponent:i}=Yc,{sdfGlyphSize:s}=t,o=r/s*4;let a=JT[s];if(!a){const f=document.createElement("canvas");f.width=r,f.height=s*256/o,a=JT[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:f,sdfTexture:new an(f,void 0,void 0,void 0,Kt,Kt),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,Rj(a)}const{sdfTexture:l,sdfCanvas:u}=a;let c=a.glyphsByFont.get(t.font);c||a.glyphsByFont.set(t.font,c=new Map),Lj(t).then(f=>{const{glyphIds:h,glyphPositions:m,fontSize:g,unitsPerEm:v,timings:y}=f,_=[],x=new Float32Array(h.length*4),w=g/v;let b=0,E=0;const C=Ec();h.forEach((k,O)=>{let U=c.get(k);if(!U){const{path:ie,pathBounds:F}=f.glyphData[k],z=Math.max(F[2]-F[0],F[3]-F[1])/s*(Yc.sdfMargin*s+.5),j=a.glyphCount++,H=[F[0]-z,F[1]-z,F[2]+z,F[3]+z];c.set(k,U={path:ie,atlasIndex:j,sdfViewBox:H}),_.push(U)}const{sdfViewBox:N}=U,$=m[E++],Q=m[E++];x[b++]=$+N[0]*w,x[b++]=Q+N[1]*w,x[b++]=$+N[2]*w,x[b++]=Q+N[3]*w,h[O]=U.atlasIndex}),y.quads=(y.quads||0)+(Ec()-C);const P=Ec();y.sdf={};const M=u.height,B=Math.ceil(a.glyphCount/o),D=Math.pow(2,Math.ceil(Math.log2(B*s)));D>M&&(console.info(`Increasing SDF texture size ${M}->${D}`),bj(u,r,D),l.dispose()),Promise.all(_.map(k=>CL(k,a,t.gpuAccelerateSDF).then(({timing:O})=>{y.sdf[k.atlasIndex]=O}))).then(()=>{_.length&&!a.contextLost&&(TL(a),l.needsUpdate=!0),y.sdfTotal=Ec()-P,y.total=Ec()-n,e(Object.freeze({parameters:t,sdfTexture:l,sdfGlyphSize:s,sdfExponent:i,glyphBounds:x,glyphAtlasIndices:h,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,capHeight:f.capHeight,xHeight:f.xHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings}))})}),Promise.resolve().then(()=>{a.contextLost||Sj(u)})}function CL({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=Yc,u=Math.max(n[2]-n[0],n[3]-n[1]),c=Math.floor(e/4),f=c%(a/r)*r,h=Math.floor(c/(a/r))*r,m=e%4;return gj(r,r,t,n,u,l,i,f,h,m,o)}function Rj(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const r=[];t.glyphsByFont.forEach(i=>{i.forEach(s=>{r.push(CL(s,t,!0))})}),Promise.all(r).then(()=>{TL(t),t.sdfTexture.needsUpdate=!0})})}function Pj({font:t,characters:e,sdfGlyphSize:n},r){let i=Array.isArray(e)?e.join(`
`):""+e;EL({font:t,sdfGlyphSize:n,text:i},r)}function Bj(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let Wg;function Ij(t){return Wg||(Wg=typeof document>"u"?{}:document.createElement("a")),Wg.href=t,Wg.href}function TL(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:r,height:i}=e,s=t.sdfCanvas.getContext("webgl");let o=n.image.data;(!o||o.length!==r*i*4)&&(o=new Uint8Array(r*i*4),n.image={width:r,height:i,data:o},n.flipY=!1,n.isDataTexture=!0),s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,o)}}const Dj=Up({name:"Typesetter",dependencies:[Yc,Cj,mj,aj],init(t,e,n,r){const{defaultFontURL:i}=t;return n(e,r(),{defaultFontURL:i})}}),Lj=Up({name:"Typesetter",dependencies:[Dj],init(t){return function(e){return new Promise(n=>{t.typeset(e,n)})}},getTransferables(t){const e=[t.glyphPositions.buffer,t.glyphIds.buffer];return t.caretPositions&&e.push(t.caretPositions.buffer),t.glyphColors&&e.push(t.glyphColors.buffer),e}}),XT={};function kj(t){let e=XT[t];if(!e){const n=new yo(1,1,t,t),r=n.clone(),i=n.attributes,s=r.attributes,o=new wt,a=i.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new at([...i[l].array,...s[l].array],i[l].itemSize))}),o.setIndex([...n.index.array,...r.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=XT[t]=o}return e}const Fj="aTroikaGlyphBounds",KT="aTroikaGlyphIndex",Oj="aTroikaGlyphColor";class Uj extends dA{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new oa,this.boundingBox=new vo}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const n=this.getIndex().count;this.setDrawRange(e===Hr?n/2:0,e===wi?n:n/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=kj(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=n.attributes[r].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,r,i,s){Ux(this,Fj,e,4),Ux(this,KT,n,1),Ux(this,Oj,s,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:r}=this;if(n){const{PI:i,floor:s,min:o,max:a,sin:l,cos:u}=Math,c=i/2,f=i*2,h=Math.abs(n),m=e[0]/h,g=e[2]/h,v=s((m+c)/f)!==s((g+c)/f)?-h:o(l(m)*h,l(g)*h),y=s((m-c)/f)!==s((g-c)/f)?h:a(l(m)*h,l(g)*h),_=s((m+i)/f)!==s((g+i)/f)?h*2:a(h-u(m)*h,h-u(g)*h);r.min.set(v,e[1],n<0?-_:0),r.max.set(y,e[3],n<0?0:_)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(KT).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){n=r[i].end;let s=r[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=n}}function Ux(t,e,n,r){const i=t.getAttribute(e);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(t.setAttribute(e,new Mu(n,r)),delete t._maxInstanceCount,t.dispose()):i&&t.deleteAttribute(e)}const Nj=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,zj=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,Gj=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Hj=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function Vj(t){const e=Qw(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new we},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new $t(0,0,0,0)},uTroikaClipRect:{value:new $t(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new we},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new $e},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new zr},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Nj,vertexTransform:zj,fragmentDefs:Gj,fragmentColorTransform:Hj,customRewriter({vertexShader:n,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(n)||(n=n.replace(AL,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const AA=new si({color:16777215,side:wi,transparent:!0}),YT=8421504,QT=new gt,jg=new V,Nx=new V,Vd=[],Wj=new V,zx="+x+y";function qT(t){return Array.isArray(t)?t[0]:t}let RL=()=>{const t=new Mn(new yo(1,1),AA);return RL=()=>t,t},PL=()=>{const t=new Mn(new yo(1,1,32,1),AA);return PL=()=>t,t};const jj={type:"syncstart"},$j={type:"synccomplete"},BL=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Jj=BL.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let IL=class extends Mn{constructor(){const e=new Uj;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=YT,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=zx,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(jj),EL({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent($j),e&&e()})))}onBeforeRender(e,n,r,i,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=Gs}onAfterRender(e,n,r,i,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=AA.clone());if((!e||e.baseMaterial!==n)&&(e=this._derivedMaterial=Vj(n),n.addEventListener("dispose",function r(){n.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return qT(this.material).getDepthMaterial()}get customDistanceMaterial(){return qT(this.material).getDistanceMaterial()}_prepareForRender(e){const n=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:a,blockBounds:l}=i;r.uTroikaSDFTexture.value=a,r.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!n&&!!i.glyphColors;let u=0,c=0,f=0,h,m,g,v=0,y=0;if(n){let{outlineWidth:x,outlineOffsetX:w,outlineOffsetY:b,outlineBlur:E,outlineOpacity:C}=this;u=this._parsePercent(x)||0,c=Math.max(0,this._parsePercent(E)||0),h=C,v=this._parsePercent(w)||0,y=this._parsePercent(b)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(g=this.strokeColor,r.uTroikaStrokeColor.value.set(g??YT),m=this.strokeOpacity,m==null&&(m=1)),h=this.fillOpacity;r.uTroikaDistanceOffset.value=u,r.uTroikaPositionOffset.value.set(v,y),r.uTroikaBlurRadius.value=c,r.uTroikaStrokeWidth.value=f,r.uTroikaStrokeOpacity.value=m,r.uTroikaFillOpacity.value=h??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let _=this.clipRect;if(_&&Array.isArray(_)&&_.length===4)r.uTroikaClipRect.value.fromArray(_);else{const x=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-x,l[1]-x,l[2]+x,l[3]+x)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=n?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new $e;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||zx;if(o!==e._orientation){let a=r.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==zx&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,u,c,f,h]=l;jg.set(0,0,0)[c]=u==="-"?1:-1,Nx.set(0,0,0)[h]=f==="-"?-1:1,QT.lookAt(Wj,jg.cross(Nx),Nx),a.setFromMatrix4(QT)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),r=n?parseFloat(n[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new we){n.copy(e);const r=this.curveRadius;return r&&(n.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),n}worldPositionToTextCoords(e,n=new we){return jg.copy(e),this.localPositionToTextCoords(this.worldToLocal(jg),n)}raycast(e,n){const{textRenderInfo:r,curveRadius:i}=this;if(r){const s=r.blockBounds,o=i?PL():RL(),a=o.geometry,{position:l,uv:u}=a.attributes;for(let c=0;c<u.count;c++){let f=s[0]+u.getX(c)*(s[2]-s[0]);const h=s[1]+u.getY(c)*(s[3]-s[1]);let m=0;i&&(m=i-Math.cos(f/i)*i,f=Math.sin(f/i)*i),l.setXYZ(c,f,h,m)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,Vd.length=0,o.raycast(e,Vd);for(let c=0;c<Vd.length;c++)Vd[c].object=this,n.push(Vd[c])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,Jj.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};BL.forEach(t=>{const e="_private_"+t;Object.defineProperty(IL.prototype,t,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});const ZT=R.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:n="middle",font:r,fontSize:i=1,children:s,characters:o,onSync:a,...l},u)=>{const c=Nn(({invalidate:g})=>g),[f]=R.useState(()=>new IL),[h,m]=R.useMemo(()=>{const g=[];let v="";return R.Children.forEach(s,y=>{typeof y=="string"||typeof y=="number"?v+=y:g.push(y)}),[g,v]},[s]);return $D(()=>new Promise(g=>Pj({font:r,characters:o},g)),["troika-text",r,o]),R.useLayoutEffect(()=>void f.sync(()=>{c(),a&&a(f)})),R.useEffect(()=>()=>f.dispose(),[f]),R.createElement("primitive",rn({object:f,ref:u,font:r,text:m,anchorX:e,anchorY:n,fontSize:i,sdfGlyphSize:t},l),h)}),Xj=R.forwardRef(({children:t,multisamping:e=8,renderIndex:n=1,disableRender:r,disableGamma:i,disableRenderPass:s,depthBuffer:o=!0,stencilBuffer:a=!1,anisotropy:l=1,encoding:u,type:c,...f},h)=>{R.useMemo(()=>Ip({EffectComposer:m7,RenderPass:y7,ShaderPass:Ww}),[]);const m=R.useRef(),{scene:g,camera:v,gl:y,size:_,viewport:x}=Nn(),[w]=R.useState(()=>{const E=new hn(_.width,_.height,{type:c||Nr,format:Ur,depthBuffer:o,stencilBuffer:a,anisotropy:l});return c===Ei&&u!=null&&("colorSpace"in E?E.texture.colorSpace=u:E.texture.encoding=u),E.samples=e,E});R.useEffect(()=>{var E,C;(E=m.current)==null||E.setSize(_.width,_.height),(C=m.current)==null||C.setPixelRatio(x.dpr)},[y,_,x.dpr]),jr(()=>{var E;r||(E=m.current)==null||E.render()},n);const b=[];return s||b.push(R.createElement("renderPass",{key:"renderpass",attach:`passes-${b.length}`,args:[g,v]})),i||b.push(R.createElement("shaderPass",{attach:`passes-${b.length}`,key:"gammapass",args:[Q7]})),R.Children.forEach(t,E=>{E&&b.push(R.cloneElement(E,{key:b.length,attach:`passes-${b.length}`}))}),R.createElement("effectComposer",rn({ref:fL([h,m]),args:[y,w]},f),b)});function Kj(t,e,n,r){const i=class extends xn{constructor(o={}){const a=Object.entries(t);super({uniforms:a.reduce((l,[u,c])=>{const f=bu.clone({[u]:{value:c}});return{...l,...f}},{}),vertexShader:e,fragmentShader:n}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:u=>this.uniforms[l].value=u})),Object.assign(this,o),r&&r(this)}};return i.key=eu.generateUUID(),i}let $g=null;function DL(t,e,n){return r=>{n&&n(r),t&&($g||($g=new Z7),$g.setDecoderPath(typeof t=="string"?t:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),r.setDRACOLoader($g)),e&&r.setMeshoptDecoder(typeof Fx=="function"?Fx():Fx)}}function En(t,e=!0,n=!0,r){return Nu(bA,t,DL(e,n,r))}En.preload=(t,e=!0,n=!0,r)=>Nu.preload(bA,t,DL(e,n,r));En.clear=t=>Nu.clear(bA,t);function Yj(t,e,n){const r=Nn(h=>h.size),i=Nn(h=>h.viewport),s=typeof t=="number"?t:r.width*i.dpr,o=typeof e=="number"?e:r.height*i.dpr,a=(typeof t=="number"?n:t)||{},{samples:l=0,depth:u,...c}=a,f=R.useMemo(()=>{const h=new hn(s,o,{minFilter:Kt,magFilter:Kt,type:Nr,...c});return u&&(h.depthTexture=new Hb(s,o,Ni)),h.samples=l,h},[]);return R.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),R.useEffect(()=>()=>f.dispose(),[]),f}const Qj=t=>typeof t=="function",qj=R.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:r,children:i,...s},o)=>{const a=Nn(({set:y})=>y),l=Nn(({camera:y})=>y),u=Nn(({size:y})=>y),c=R.useRef(null),f=R.useRef(null),h=Yj(e);R.useLayoutEffect(()=>{s.manual||(c.current.aspect=u.width/u.height)},[u,s]),R.useLayoutEffect(()=>{c.current.updateProjectionMatrix()});let m=0,g=null;const v=Qj(i);return jr(y=>{v&&(n===1/0||m<n)&&(f.current.visible=!1,y.gl.setRenderTarget(h),g=y.scene.background,t&&(y.scene.background=t),y.gl.render(y.scene,c.current),y.scene.background=g,y.gl.setRenderTarget(null),f.current.visible=!0,m++)}),R.useLayoutEffect(()=>{if(r){const y=l;return a(()=>({camera:c.current})),()=>a(()=>({camera:y}))}},[c,r,a]),R.createElement(R.Fragment,null,R.createElement("perspectiveCamera",rn({ref:fL([c,o])},s),!v&&i),R.createElement("group",{ref:f},v&&i(h.texture)))}),Zj=R.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},c)=>{const f=Nn(C=>C.invalidate),h=Nn(C=>C.camera),m=Nn(C=>C.gl),g=Nn(C=>C.events),v=Nn(C=>C.setEvents),y=Nn(C=>C.set),_=Nn(C=>C.get),x=Nn(C=>C.performance),w=e||h,b=r||g.connected||m.domElement,E=R.useMemo(()=>new n7(w),[w]);return jr(()=>{E.enabled&&E.update()},-1),R.useEffect(()=>(s&&E.connect(s===!0?b:s),E.connect(b),()=>void E.dispose()),[s,b,n,E,f]),R.useEffect(()=>{const C=B=>{f(),n&&x.regress(),o&&o(B)},P=B=>{a&&a(B)},M=B=>{l&&l(B)};return E.addEventListener("change",C),E.addEventListener("start",P),E.addEventListener("end",M),()=>{E.removeEventListener("start",P),E.removeEventListener("end",M),E.removeEventListener("change",C)}},[o,a,l,E,f,v]),R.useEffect(()=>{if(t){const C=_().controls;return y({controls:E}),()=>y({controls:C})}},[t,E]),R.createElement("primitive",rn({ref:c,object:E,enableDamping:i},u))});function LL(t,e){const n=R.useRef(),[r]=R.useState(()=>e?e instanceof Gt?{current:e}:e:n),[i]=R.useState(()=>new ND(void 0));R.useLayoutEffect(()=>void(i._root=r.current),[i,e]);const s=R.useRef({}),[o]=R.useState(()=>{const a={};return t.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(r.current)return s.current[l.name]||(s.current[l.name]=i.clipAction(l,r.current))},configurable:!0})),{ref:r,clips:t,actions:a,names:t.map(l=>l.name),mixer:i}});return jr((a,l)=>i.update(l)),R.useEffect(()=>{const a=r.current;return()=>{s.current={},Object.values(o.actions).forEach(l=>{a&&i.uncacheAction(l,a)})}},[t]),R.useEffect(()=>()=>{i.stopAllAction()},[i]),o}function kL(t,e){const n=t+"Geometry";return R.forwardRef(({args:r,children:i,...s},o)=>{const a=R.useRef(null);return R.useImperativeHandle(o,()=>a.current),R.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),R.createElement("mesh",rn({ref:a},s),R.createElement(n,{attach:"geometry",args:r}),i)})}const e$=kL("sphere"),t$=kL("plane"),Cc=t=>t&&t.isOrthographicCamera,n$=t=>t&&t.isBox3,FL=R.createContext(null);function r$({children:t,damping:e=6,fit:n,clip:r,observe:i,margin:s=1.2,eps:o=.01,onFit:a}){const l=R.useRef(null),{camera:u,invalidate:c,size:f,controls:h}=Nn(),m=h,g=R.useRef(a);g.current=a;function v(C,P){return Math.abs(C.x-P.x)<o&&Math.abs(C.y-P.y)<o&&Math.abs(C.z-P.z)<o}function y(C,P,M,B){C.x=eu.damp(C.x,P.x,M,B),C.y=eu.damp(C.y,P.y,M,B),C.z=eu.damp(C.z,P.z,M,B)}const[_]=R.useState(()=>({animating:!1,focus:new V,camera:new V,zoom:1})),[x]=R.useState(()=>({focus:new V,camera:new V,zoom:1})),[w]=R.useState(()=>new vo),b=R.useMemo(()=>{function C(){const P=w.getSize(new V),M=w.getCenter(new V),B=Math.max(P.x,P.y,P.z),D=Cc(u)?B*4:B/(2*Math.atan(Math.PI*u.fov/360)),k=Cc(u)?B*4:D/u.aspect,O=s*Math.max(D,k);return{box:w,size:P,center:M,distance:O}}return{getSize:C,refresh(P){if(n$(P))w.copy(P);else{const M=P||l.current;M.updateWorldMatrix(!0,!0),w.setFromObject(M)}if(w.isEmpty()){const M=u.position.length()||10;w.setFromCenterAndSize(new V,new V(M,M,M))}if((m==null?void 0:m.constructor.name)==="OrthographicTrackballControls"){const{distance:M}=C(),B=u.position.clone().sub(m.target).normalize().multiplyScalar(M),D=m.target.clone().add(B);u.position.copy(D)}return this},clip(){const{distance:P}=C();return m&&(m.maxDistance=P*10),u.near=P/100,u.far=P*100,u.updateProjectionMatrix(),m&&m.update(),c(),this},to({position:P,target:M}){_.camera.copy(u.position);const{center:B}=C();return x.camera.set(...P),M?x.focus.set(...M):x.focus.copy(B),e?_.animating=!0:u.position.set(...P),this},fit(){_.camera.copy(u.position),m&&_.focus.copy(m.target);const{center:P,distance:M}=C(),B=P.clone().sub(u.position).normalize().multiplyScalar(M);if(x.camera.copy(P).sub(B),x.focus.copy(P),Cc(u)){_.zoom=u.zoom;let D=0,k=0;const O=[new V(w.min.x,w.min.y,w.min.z),new V(w.min.x,w.max.y,w.min.z),new V(w.min.x,w.min.y,w.max.z),new V(w.min.x,w.max.y,w.max.z),new V(w.max.x,w.max.y,w.max.z),new V(w.max.x,w.max.y,w.min.z),new V(w.max.x,w.min.y,w.max.z),new V(w.max.x,w.min.y,w.min.z)];P.applyMatrix4(u.matrixWorldInverse);for(const $ of O)$.applyMatrix4(u.matrixWorldInverse),D=Math.max(D,Math.abs($.y-P.y)),k=Math.max(k,Math.abs($.x-P.x));D*=2,k*=2;const U=(u.top-u.bottom)/D,N=(u.right-u.left)/k;x.zoom=Math.min(U,N)/s,e||(u.zoom=x.zoom,u.updateProjectionMatrix())}return e?_.animating=!0:(u.position.copy(x.camera),u.lookAt(x.focus),m&&(m.target.copy(x.focus),m.update())),g.current&&g.current(this.getSize()),c(),this}}},[w,u,m,s,e,c]);R.useLayoutEffect(()=>{if(m){const C=()=>_.animating=!1;return m.addEventListener("start",C),()=>m.removeEventListener("start",C)}},[m]);const E=R.useRef(0);return R.useLayoutEffect(()=>{(i||E.current++===0)&&(b.refresh(),n&&b.fit(),r&&b.clip())},[f,r,n,i,u,m]),jr((C,P)=>{if(_.animating){if(y(_.focus,x.focus,e,P),y(_.camera,x.camera,e,P),_.zoom=eu.damp(_.zoom,x.zoom,e,P),u.position.copy(_.camera),Cc(u)&&(u.zoom=_.zoom,u.updateProjectionMatrix()),m?(m.target.copy(_.focus),m.update()):u.lookAt(_.focus),c(),Cc(u)&&!(Math.abs(_.zoom-x.zoom)<o)||!Cc(u)&&!v(_.camera,x.camera)||m&&!v(_.focus,x.focus))return;_.animating=!1}}),R.createElement("group",{ref:l},R.createElement(FL.Provider,{value:b},t))}function i$(){return R.useContext(FL)}const Gx={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},s$="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/";function OL({files:t=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:n=void 0,encoding:r=void 0,extensions:i}={}){if(n){if(!(n in Gx))throw new Error("Preset must be one of: "+Object.keys(Gx).join(", "));t=Gx[n],e=s$}const s=Array.isArray(t),a=Nu(s?RD:q7,s?[t]:t,u=>{u.setPath(e),i&&i(u)}),l=s?a[0]:a;return l.mapping=s?ta:yf,l.encoding=r??s?Lt:mo,l}const o$=t=>t.current&&t.current.isScene,a$=t=>o$(t)?t.current:t;function MA(t,e,n,r,i=0){const s=a$(e||n),o=s.background,a=s.environment,l=s.backgroundBlurriness||0;return t!=="only"&&(s.environment=r),t&&(s.background=r),t&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=i),()=>{t!=="only"&&(s.environment=a),t&&(s.background=o),t&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=l)}}function EA({scene:t,background:e=!1,blur:n,map:r}){const i=Nn(s=>s.scene);return R.useLayoutEffect(()=>{if(r)return MA(e,t,i,r,n)},[i,t,r,e,n]),null}function UL({background:t=!1,scene:e,blur:n,...r}){const i=OL(r),s=Nn(o=>o.scene);return R.useLayoutEffect(()=>MA(t,e,s,i,n),[i,t,e,s,n]),null}function l$({children:t,near:e=1,far:n=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,scene:l,files:u,path:c,preset:f=void 0,extensions:h}){const m=Nn(w=>w.gl),g=Nn(w=>w.scene),v=R.useRef(null),[y]=R.useState(()=>new Au),_=R.useMemo(()=>{const w=new zb(r);return w.texture.type=Nr,w},[r]);R.useLayoutEffect(()=>(i===1&&v.current.update(m,y),MA(o,l,g,_.texture,a)),[t,y,_.texture,l,g,o,i,m]);let x=1;return jr(()=>{(i===1/0||x<i)&&(v.current.update(m,y),x++)}),R.createElement(R.Fragment,null,MV(R.createElement(R.Fragment,null,t,R.createElement("cubeCamera",{ref:v,args:[e,n,_]}),u||f?R.createElement(UL,{background:!0,files:u,preset:f,path:c,extensions:h}):s?R.createElement(EA,{background:!0,map:s,extensions:h}):null),y))}function u$(t){var e,n,r,i;const s=OL(t),o=t.map||s;R.useMemo(()=>Ip({GroundProjectedEnvImpl:ZW}),[]);const a=R.useMemo(()=>[o],[o]),l=(e=t.ground)==null?void 0:e.height,u=(n=t.ground)==null?void 0:n.radius,c=(r=(i=t.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return R.createElement(R.Fragment,null,R.createElement(EA,rn({},t,{map:o})),R.createElement("groundProjectedEnvImpl",{args:a,scale:c,height:l,radius:u}))}function e3(t){return t.ground?R.createElement(u$,t):t.map?R.createElement(EA,t):t.children?R.createElement(l$,t):R.createElement(UL,t)}class c$ extends xn{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}const f$=t=>new V().setFromSpherical(new sv(t,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),d$=R.forwardRef(({radius:t=100,depth:e=50,count:n=5e3,saturation:r=0,factor:i=4,fade:s=!1,speed:o=1},a)=>{const l=R.useRef(),[u,c,f]=R.useMemo(()=>{const m=[],g=[],v=Array.from({length:n},()=>(.5+.5*Math.random())*i),y=new $e;let _=t+e;const x=e/n;for(let w=0;w<n;w++)_-=x*Math.random(),m.push(...f$(_).toArray()),y.setHSL(w/n,r,.9),g.push(y.r,y.g,y.b);return[new Float32Array(m),new Float32Array(g),new Float32Array(v)]},[n,e,i,t,r]);jr(m=>l.current&&(l.current.uniforms.time.value=m.clock.getElapsedTime()*o));const[h]=R.useState(()=>new c$);return R.createElement("points",{ref:a},R.createElement("bufferGeometry",null,R.createElement("bufferAttribute",{attach:"attributes-position",args:[u,3]}),R.createElement("bufferAttribute",{attach:"attributes-color",args:[c,3]}),R.createElement("bufferAttribute",{attach:"attributes-size",args:[f,1]})),R.createElement("primitive",{ref:l,object:h,attach:"material",blending:Vh,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))});var on={},h$={get exports(){return on},set exports(t){on=t}},p$="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",m$=p$,g$=m$;function NL(){}function zL(){}zL.resetWarningCache=NL;var v$=function(){function t(r,i,s,o,a,l){if(l!==g$){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:zL,resetWarningCache:NL};return n.PropTypes=n,n};h$.exports=v$();/**
 * postprocessing v6.30.2 build Fri Mar 31 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var y$=`#include <packing>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
uniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}`,CA="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",x$=class extends xn{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{THREE_REVISION:Lu.replace(/\D+/g,""),MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new lt(null),luminanceBuffer1:new lt(null),minLuminance:new lt(.01),deltaTime:new lt(0),tau:new lt(1)},extensions:{shaderTextureLOD:!0},blending:ui,depthWrite:!1,depthTest:!1,fragmentShader:y$,vertexShader:CA}),this.toneMapped=!1}set luminanceBuffer0(t){this.uniforms.luminanceBuffer0.value=t}setLuminanceBuffer0(t){this.uniforms.luminanceBuffer0.value=t}set luminanceBuffer1(t){this.uniforms.luminanceBuffer1.value=t}setLuminanceBuffer1(t){this.uniforms.luminanceBuffer1.value=t}set mipLevel1x1(t){this.defines.MIP_LEVEL_1X1=t.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(t){this.mipLevel1x1=t}set deltaTime(t){this.uniforms.deltaTime.value=t}setDeltaTime(t){this.uniforms.deltaTime.value=t}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(t){this.uniforms.minLuminance.value=t}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(t){this.uniforms.minLuminance.value=t}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(t){this.uniforms.tau.value=t}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(t){this.uniforms.tau.value=t}},yt={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},GL={NONE:0,DEPTH:1,CONVOLUTION:2},Vf={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Oo={REINHARD:0,REINHARD2:1,REINHARD2_ADAPTIVE:2,OPTIMIZED_CINEON:3,ACES_FILMIC:4},Jg={DEFAULT:0,ESKIL:1},_$=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,w$="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",S$=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],HL=class extends xn{constructor(t=new $t){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new lt(null),texelSize:new lt(new $t),scale:new lt(1),kernel:new lt(0)},blending:ui,depthWrite:!1,depthTest:!1,fragmentShader:_$,vertexShader:w$}),this.toneMapped=!1,this.setTexelSize(t.x,t.y),this.kernelSize=Vf.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return S$[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,t*.5,e*.5)}setSize(t,e){const n=1/t,r=1/e;this.uniforms.texelSize.value.set(n,r,n*.5,r*.5)}},b$=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,VL=class extends xn{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new lt(null),opacity:new lt(1)},blending:ui,depthWrite:!1,depthTest:!1,fragmentShader:b$,vertexShader:CA}),this.toneMapped=!1}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},A$=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <encodings_fragment>
}`,M$="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",E$=class extends xn{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new lt(null),texelSize:new lt(new we)},blending:ui,depthWrite:!1,depthTest:!1,fragmentShader:A$,vertexShader:M$}),this.toneMapped=!1}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},C$=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,T$=class extends xn{constructor(t=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Lu.replace(/\D+/g,"")},uniforms:{inputBuffer:new lt(null),threshold:new lt(0),smoothing:new lt(1),range:new lt(null)},blending:ui,depthWrite:!1,depthTest:!1,fragmentShader:C$,vertexShader:CA}),this.toneMapped=!1,this.colorOutput=t,this.luminanceRange=e}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return this.luminanceRange!==null}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){t!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},R$=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec4 maskParams;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;float linearGradientMask(const in float x){return smoothstep(maskParams.x,maskParams.y,x)-smoothstep(maskParams.w,maskParams.z,x);}void main(){vec2 dUv=vOffset*(1.0-linearGradientMask(vUv2.y));vec4 sum=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y-dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y-dUv.y));gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,P$="uniform vec4 texelSize;uniform float kernel;uniform float scale;uniform float aspect;uniform vec2 rotation;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;void main(){vec2 uv=position.xy*0.5+0.5;vUv=uv;vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));vOffset=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;gl_Position=vec4(position.xy,1.0,1.0);}",B$=class extends HL{constructor({kernelSize:t=Vf.MEDIUM,offset:e=0,rotation:n=0,focusArea:r=.4,feather:i=.3}={}){super(),this.fragmentShader=R$,this.vertexShader=P$,this.kernelSize=t,this.uniforms.aspect=new lt(1),this.uniforms.rotation=new lt(new we),this.uniforms.maskParams=new lt(new $t),this._offset=e,this._focusArea=r,this._feather=i,this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.maskParams.value,e=Math.max(this.focusArea,0),n=Math.max(e-this.feather,0);t.set(this.offset-e,this.offset-n,this.offset+e,this.offset+n)}get rotation(){return Math.acos(this.uniforms.rotation.value.x)}set rotation(t){this.uniforms.rotation.value.set(Math.cos(t),Math.sin(t))}get offset(){return this._offset}set offset(t){this._offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.updateParams()}setSize(t,e){super.setSize(t,e),this.uniforms.aspect.value=t/e}},I$=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <encodings_fragment>
}`,D$="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",L$=class extends xn{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new lt(null),supportBuffer:new lt(null),texelSize:new lt(new we),radius:new lt(.85)},blending:ui,depthWrite:!1,depthTest:!1,fragmentShader:I$,vertexShader:D$}),this.toneMapped=!1}set inputBuffer(t){this.uniforms.inputBuffer.value=t}set supportBuffer(t){this.uniforms.supportBuffer.value=t}get radius(){return this.uniforms.radius.value}set radius(t){this.uniforms.radius.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},k$=new Ff,Ta=null;function F$(){if(Ta===null){const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Ta=new wt,Ta.setAttribute!==void 0?(Ta.setAttribute("position",new Ut(t,3)),Ta.setAttribute("uv",new Ut(e,2))):(Ta.addAttribute("position",new Ut(t,3)),Ta.addAttribute("uv",new Ut(e,2)))}return Ta}var zu=class{constructor(t="Pass",e=new Au,n=k$){this.name=t,this.renderer=null,this.scene=e,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;e!==null?e.material=t:(e=new Mn(F$(),t),e.frustumCulled=!1,this.scene===null&&(this.scene=new Au),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=Jv){}render(t,e,n,r,i){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof hn||e instanceof zn||e instanceof an||e instanceof zu)&&this[t].dispose()}}},O$=class extends zu{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new VL,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new hn(1,1,{minFilter:Kt,magFilter:Kt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,r,i){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==Ei?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":t.outputEncoding===Lt&&(this.renderTarget.texture.encoding=Lt))}},U$=class extends zu{constructor(t,{minLuminance:e=.01,adaptationRate:n=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new x$,this.needsSwap=!1,this.renderTargetPrevious=new hn(1,1,{minFilter:Sn,magFilter:Sn,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const r=this.fullscreenMaterial;r.luminanceBuffer0=this.renderTargetPrevious.texture,r.luminanceBuffer1=t,r.minLuminance=e,r.adaptationRate=n,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new O$(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(t){this.fullscreenMaterial.mipLevel1x1=t}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(t){this.fullscreenMaterial.adaptationRate=t}render(t,e,n,r,i){this.fullscreenMaterial.deltaTime=r,t.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),t.render(this.scene,this.camera),this.copyPass.render(t,this.renderTargetAdapted)}};new $e;var Ra=-1,oi=class extends $i{constructor(t,e=Ra,n=Ra,r=1){super(),this.resizable=t,this.baseSize=new we(1,1),this.preferredSize=new we(e,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new we,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,n=this.effectiveSize,r=this.scale;e.width!==Ra?n.width=e.width:e.height!==Ra?n.width=Math.round(e.height*(t.width/Math.max(t.height,1))):n.width=Math.round(t.width*r),e.height!==Ra?n.height=e.height:e.width!==Ra?n.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):n.height=Math.round(t.height*r)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(Ra),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Ra}},WL=class extends zu{constructor({kernelSize:t=Vf.MEDIUM,resolutionScale:e=.5,width:n=oi.AUTO_SIZE,height:r=oi.AUTO_SIZE,resolutionX:i=n,resolutionY:s=r}={}){super("KawaseBlurPass"),this.renderTargetA=new hn(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new oi(this,i,s,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new HL,this._blurMaterial.kernelSize=t,this.copyMaterial=new VL}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,c=u.kernelSequence;let f=e;this.fullscreenMaterial=u;for(let h=0,m=c.length;h<m;++h){const g=h&1?l:a;u.kernel=c[h],u.inputBuffer=f.texture,t.setRenderTarget(g),t.render(s,o),f=g}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=f.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(s,o)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==Ei?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):t.outputEncoding===Lt&&(this.renderTargetA.texture.encoding=Lt,this.renderTargetB.texture.encoding=Lt))}static get AUTO_SIZE(){return oi.AUTO_SIZE}},jL=class extends zu{constructor({renderTarget:t,luminanceRange:e,colorOutput:n,resolutionScale:r=1,width:i=oi.AUTO_SIZE,height:s=oi.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("LuminancePass"),this.fullscreenMaterial=new T$(n,e),this.needsSwap=!1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new hn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new oi(this,o,a,r);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,e,n,r,i){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}initialize(t,e,n){n!==void 0&&n!==Ei&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},N$=class extends zu{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new hn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new E$,this.upsamplingMaterial=new L$,this.resolution=new we}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(t){if(this.levels!==t){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let n=0;n<t;++n){const r=e.clone();r.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(e);for(let n=1,r=t-1;n<r;++n){const i=e.clone();i.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(t){this.upsamplingMaterial.radius=t}render(t,e,n,r,i){const{scene:s,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:u,upsamplingMipmaps:c}=this;let f=e;this.fullscreenMaterial=a;for(let h=0,m=u.length;h<m;++h){const g=u[h];a.setSize(f.width,f.height),a.inputBuffer=f.texture,t.setRenderTarget(g),t.render(s,o),f=g}this.fullscreenMaterial=l;for(let h=c.length-1;h>=0;--h){const m=c[h];l.setSize(f.width,f.height),l.inputBuffer=f.texture,l.supportBuffer=u[h].texture,t.setRenderTarget(m),t.render(s,o),f=m}}setSize(t,e){const n=this.resolution;n.set(t,e);let r=n.width,i=n.height;for(let s=0,o=this.downsamplingMipmaps.length;s<o;++s)r=Math.round(r*.5),i=Math.round(i*.5),this.downsamplingMipmaps[s].setSize(r,i),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(r,i)}initialize(t,e,n){if(n!==void 0){const r=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of r)i.texture.type=n;if(n!==Ei)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(t.outputEncoding===Lt)for(const i of r)i.texture.encoding=Lt}}dispose(){super.dispose();for(const t of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))t.dispose()}},z$=class extends WL{constructor({offset:t=0,rotation:e=0,focusArea:n=.4,feather:r=.3,kernelSize:i=Vf.MEDIUM,resolutionScale:s=.5,resolutionX:o=oi.AUTO_SIZE,resolutionY:a=oi.AUTO_SIZE}={}){super({kernelSize:i,resolutionScale:s,resolutionX:o,resolutionY:a}),this.blurMaterial=new B$({kernelSize:i,offset:t,rotation:e,focusArea:n,feather:r})}},G$="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",H$="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",V$="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",W$="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",j$="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",$$="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",J$="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",X$="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",K$="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",Y$="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",Q$="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",q$="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Z$="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",eJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",tJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",nJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",rJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",iJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",sJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",oJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",aJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",lJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",uJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",cJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",fJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",dJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",hJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",pJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",mJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",gJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",vJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",yJ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",xJ=new Map([[yt.ADD,G$],[yt.ALPHA,H$],[yt.AVERAGE,V$],[yt.COLOR,W$],[yt.COLOR_BURN,j$],[yt.COLOR_DODGE,$$],[yt.DARKEN,J$],[yt.DIFFERENCE,X$],[yt.DIVIDE,K$],[yt.DST,null],[yt.EXCLUSION,Y$],[yt.HARD_LIGHT,Q$],[yt.HARD_MIX,q$],[yt.HUE,Z$],[yt.INVERT,eJ],[yt.INVERT_RGB,tJ],[yt.LIGHTEN,nJ],[yt.LINEAR_BURN,rJ],[yt.LINEAR_DODGE,iJ],[yt.LINEAR_LIGHT,sJ],[yt.LUMINOSITY,oJ],[yt.MULTIPLY,aJ],[yt.NEGATION,lJ],[yt.NORMAL,uJ],[yt.OVERLAY,cJ],[yt.PIN_LIGHT,fJ],[yt.REFLECT,dJ],[yt.SATURATION,hJ],[yt.SCREEN,pJ],[yt.SOFT_LIGHT,mJ],[yt.SRC,gJ],[yt.SUBTRACT,vJ],[yt.VIVID_LIGHT,yJ]]),_J=class extends $i{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new lt(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return xJ.get(this.blendFunction)}},Ji=class extends $i{constructor(t,e,{attributes:n=GL.NONE,blendFunction:r=yt.NORMAL,defines:i=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=a,this.defines=i,this.uniforms=s,this.extensions=o,this.blendMode=new _J(r),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=mo,this._outputColorSpace=null}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=Jv){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof hn||e instanceof zn||e instanceof an||e instanceof zu)&&this[t].dispose()}}},wJ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,SJ=class extends Ji{constructor({blendFunction:t=yt.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:n=.025,mipmapBlur:r=!1,intensity:i=1,radius:s=.85,levels:o=8,kernelSize:a=Vf.LARGE,resolutionScale:l=.5,width:u=oi.AUTO_SIZE,height:c=oi.AUTO_SIZE,resolutionX:f=u,resolutionY:h=c}={}){super("BloomEffect",wJ,{blendFunction:t,uniforms:new Map([["map",new lt(null)],["intensity",new lt(i)]])}),this.renderTarget=new hn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new WL({kernelSize:a}),this.luminancePass=new jL({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new N$,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const m=this.resolution=new oi(this,f,h,l);m.addEventListener("change",g=>this.setSize(m.baseWidth,m.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,e,n){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(t,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,i.renderTarget):this.blurPass.render(t,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,e):this.blurPass.render(t,e,r)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(t,e),this.mipmapBlurPass.setSize(t,e)}initialize(t,e,n){this.blurPass.initialize(t,e,n),this.luminancePass.initialize(t,e,n),this.mipmapBlurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,t.outputEncoding===Lt&&(this.renderTarget.texture.encoding=Lt))}},bJ="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}",AJ=class extends Ji{constructor({blendFunction:t=yt.SRC,brightness:e=0,contrast:n=0}={}){super("BrightnessContrastEffect",bJ,{blendFunction:t,uniforms:new Map([["brightness",new lt(e)],["contrast",new lt(n)]])}),this.inputColorSpace=Lt}get brightness(){return this.uniforms.get("brightness").value}set brightness(t){this.uniforms.get("brightness").value=t}getBrightness(t){return this.brightness}setBrightness(t){this.brightness=t}get contrast(){return this.uniforms.get("contrast").value}set contrast(t){this.uniforms.get("contrast").value=t}getContrast(t){return this.contrast}setContrast(t){this.contrast=t}},MJ="uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",EJ=class extends Ji{constructor({blendFunction:t,bits:e=16}={}){super("ColorDepthEffect",MJ,{blendFunction:t,uniforms:new Map([["factor",new lt(1)]])}),this.bits=0,this.bitDepth=e}get bitDepth(){return this.bits}set bitDepth(t){this.bits=t,this.uniforms.get("factor").value=Math.pow(2,t/3)}getBitDepth(){return this.bitDepth}setBitDepth(t){this.bitDepth=t}},CJ=`void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){
#ifdef INVERTED
vec3 color=vec3(1.0-depth);
#else
vec3 color=vec3(depth);
#endif
outputColor=vec4(color,inputColor.a);}`,TJ=class extends Ji{constructor({blendFunction:t=yt.SRC,inverted:e=!1}={}){super("DepthEffect",CJ,{blendFunction:t,attributes:GL.DEPTH}),this.inverted=e}get inverted(){return this.defines.has("INVERTED")}set inverted(t){this.inverted!==t&&(t?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED"),this.setChanged())}isInverted(){return this.inverted}setInverted(t){this.inverted=t}},RJ="uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",PJ=class extends Ji{constructor({blendFunction:t,angle:e=Math.PI*.5,scale:n=1}={}){super("DotScreenEffect",RJ,{blendFunction:t,uniforms:new Map([["angle",new lt(new we)],["scale",new lt(n)]])}),this.angle=e}get angle(){return Math.acos(this.uniforms.get("angle").value.y)}set angle(t){this.uniforms.get("angle").value.set(Math.sin(t),Math.cos(t))}getAngle(){return this.angle}setAngle(t){this.angle=t}get scale(){return this.uniforms.get("scale").value}set scale(t){this.uniforms.get("scale").value=t}};new V;new gt;var BJ="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",IJ=class extends Ji{constructor({blendFunction:t=yt.SRC,hue:e=0,saturation:n=0}={}){super("HueSaturationEffect",BJ,{blendFunction:t,uniforms:new Map([["hue",new lt(new V)],["saturation",new lt(n)]])}),this.hue=e}get saturation(){return this.uniforms.get("saturation").value}set saturation(t){this.uniforms.get("saturation").value=t}getSaturation(){return this.saturation}setSaturation(t){this.saturation=t}get hue(){const t=this.uniforms.get("hue").value;return Math.acos((t.x*3-1)/2)}set hue(t){const e=Math.sin(t),n=Math.cos(t);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3)}getHue(){return this.hue}setHue(t){this.hue=t}};new $e;var DJ=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,LJ=class extends Ji{constructor({blendFunction:t=yt.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",DJ,{blendFunction:t}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(t){this.premultiply!==t&&(t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(t){this.premultiply=t}},kJ=`uniform float count;
#ifdef SCROLL
uniform float scrollSpeed;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float y=uv.y;
#ifdef SCROLL
y+=time*scrollSpeed;
#endif
vec2 sl=vec2(sin(y*count),cos(y*count));outputColor=vec4(sl.xyx,inputColor.a);}`,FJ=class extends Ji{constructor({blendFunction:t=yt.OVERLAY,density:e=1.25,scrollSpeed:n=0}={}){super("ScanlineEffect",kJ,{blendFunction:t,uniforms:new Map([["count",new lt(0)],["scrollSpeed",new lt(0)]])}),this.resolution=new we,this.d=e,this.scrollSpeed=n}get density(){return this.d}set density(t){this.d=t,this.setSize(this.resolution.width,this.resolution.height)}getDensity(){return this.density}setDensity(t){this.density=t}get scrollSpeed(){return this.uniforms.get("scrollSpeed").value}set scrollSpeed(t){this.uniforms.get("scrollSpeed").value=t,t===0?this.defines.delete("SCROLL")&&this.setChanged():this.defines.has("SCROLL")||(this.defines.set("SCROLL","1"),this.setChanged())}setSize(t,e){this.resolution.set(t,e),this.uniforms.get("count").value=Math.round(e*this.density)}},OJ="uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",UJ="uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",NJ=Math.PI*.5,Wd=new V,t3=new V,zJ=class extends Ji{constructor(t,e=new V,{speed:n=2,maxRadius:r=1,waveSize:i=.2,amplitude:s=.05}={}){super("ShockWaveEffect",OJ,{vertexShader:UJ,uniforms:new Map([["active",new lt(!1)],["center",new lt(new we(.5,.5))],["cameraDistance",new lt(1)],["size",new lt(1)],["radius",new lt(-i)],["maxRadius",new lt(r)],["waveSize",new lt(i)],["amplitude",new lt(s)]])}),this.position=e,this.speed=n,this.camera=t,this.screenPosition=this.uniforms.get("center").value,this.time=0,this.active=!1}set mainCamera(t){this.camera=t}get amplitude(){return this.uniforms.get("amplitude").value}set amplitude(t){this.uniforms.get("amplitude").value=t}get waveSize(){return this.uniforms.get("waveSize").value}set waveSize(t){this.uniforms.get("waveSize").value=t}get maxRadius(){return this.uniforms.get("maxRadius").value}set maxRadius(t){this.uniforms.get("maxRadius").value=t}get epicenter(){return this.position}set epicenter(t){this.position=t}getPosition(){return this.position}setPosition(t){this.position=t}getSpeed(){return this.speed}setSpeed(t){this.speed=t}explode(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}update(t,e,n){const r=this.position,i=this.camera,s=this.uniforms,o=s.get("active");if(this.active){const a=s.get("waveSize").value;i.getWorldDirection(Wd),t3.copy(i.position).sub(r),o.value=Wd.angleTo(t3)>NJ,o.value&&(s.get("cameraDistance").value=i.position.distanceTo(r),Wd.copy(r).project(i),this.screenPosition.set((Wd.x+1)*.5,(Wd.y+1)*.5)),this.time+=n*this.speed;const l=this.time-a;s.get("radius").value=l,l>=(s.get("maxRadius").value+a)*2&&(this.active=!1,o.value=!1)}}},GJ="uniform vec3 weightsR;uniform vec3 weightsG;uniform vec3 weightsB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,weightsR),dot(inputColor.rgb,weightsG),dot(inputColor.rgb,weightsB));outputColor=vec4(color,inputColor.a);}",HJ=class extends Ji{constructor({blendFunction:t,intensity:e=1}={}){super("SepiaEffect",GJ,{blendFunction:t,uniforms:new Map([["weightsR",new lt(new V(.393,.769,.189))],["weightsG",new lt(new V(.349,.686,.168))],["weightsB",new lt(new V(.272,.534,.131))]])})}get intensity(){return this.blendMode.opacity.value}set intensity(t){this.blendMode.opacity.value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}get weightsR(){return this.uniforms.get("weightsR").value}get weightsG(){return this.uniforms.get("weightsG").value}get weightsB(){return this.uniforms.get("weightsB").value}},VJ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform vec2 maskParams;varying vec2 vUv2;float linearGradientMask(const in float x){return step(maskParams.x,x)-step(maskParams.y,x);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float mask=linearGradientMask(vUv2.y);vec4 texel=texture2D(map,uv);outputColor=mix(texel,inputColor,mask);}`,WJ="uniform vec2 rotation;varying vec2 vUv2;void mainSupport(const in vec2 uv){vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));}",jJ=class extends Ji{constructor({blendFunction:t,offset:e=0,rotation:n=0,focusArea:r=.4,feather:i=.3,kernelSize:s=Vf.MEDIUM,resolutionScale:o=.5,resolutionX:a=oi.AUTO_SIZE,resolutionY:l=oi.AUTO_SIZE}={}){super("TiltShiftEffect",VJ,{vertexShader:WJ,blendFunction:t,uniforms:new Map([["rotation",new lt(new we)],["maskParams",new lt(new we)],["map",new lt(null)]])}),this._offset=e,this._focusArea=r,this._feather=i,this.renderTarget=new hn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="TiltShift.Target",this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new z$({kernelSize:s,resolutionScale:o,resolutionX:a,resolutionY:l,offset:e,rotation:n,focusArea:r,feather:i});const u=this.resolution=new oi(this,a,l,o);u.addEventListener("change",c=>this.setSize(u.baseWidth,u.baseHeight)),this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.get("maskParams").value,e=Math.max(this.focusArea-this.feather,0);t.set(this.offset-e,this.offset+e)}get rotation(){return Math.acos(this.uniforms.get("rotation").value.x)}set rotation(t){this.uniforms.get("rotation").value.set(Math.cos(t),Math.sin(t)),this.blurPass.blurMaterial.rotation=t}get offset(){return this._offset}set offset(t){this._offset=t,this.blurPass.blurMaterial.offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.blurPass.blurMaterial.focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.blurPass.blurMaterial.feather=t,this.updateParams()}get bias(){return 0}set bias(t){}update(t,e,n){this.blurPass.render(t,e,this.renderTarget)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n)}initialize(t,e,n){this.blurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,t.outputEncoding===Lt&&(this.renderTarget.texture.encoding=Lt))}},$J=`#include <tonemapping_pars_fragment>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
uniform lowp sampler2D luminanceBuffer;uniform float whitePoint;uniform float middleGrey;
#if TONE_MAPPING_MODE != 2
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);
#if TONE_MAPPING_MODE == 2
float lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#if TONE_MAPPING_MODE == 1 || TONE_MAPPING_MODE == 2
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,JJ=class extends Ji{constructor({blendFunction:t=yt.SRC,adaptive:e=!0,mode:n=e?Oo.REINHARD2_ADAPTIVE:Oo.REINHARD2,resolution:r=256,maxLuminance:i=16,whitePoint:s=i,middleGrey:o=.6,minLuminance:a=.01,averageLuminance:l=1,adaptationRate:u=1}={}){super("ToneMappingEffect",$J,{blendFunction:t,uniforms:new Map([["luminanceBuffer",new lt(null)],["maxLuminance",new lt(i)],["whitePoint",new lt(s)],["middleGrey",new lt(o)],["averageLuminance",new lt(l)]])}),this.renderTargetLuminance=new hn(1,1,{minFilter:Hs,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new jL({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new U$(this.luminancePass.texture,{minLuminance:a,adaptationRate:u}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=r,this.mode=n}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(t){if(this.mode!==t){switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",t.toFixed(0)),t){case Oo.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case Oo.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)","OptimizedCineonToneMapping(texel)");break;case Oo.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}this.adaptiveLuminancePass.enabled=t===Oo.REINHARD2_ADAPTIVE,this.setChanged()}}getMode(){return this.mode}setMode(t){this.mode=t}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(t){this.uniforms.get("whitePoint").value=t}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(t){this.uniforms.get("middleGrey").value=t}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(t){this.uniforms.get("averageLuminance").value=t}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(t){const e=Math.max(0,Math.ceil(Math.log2(t))),n=Math.pow(2,e);this.luminancePass.resolution.setPreferredSize(n,n),this.adaptiveLuminanceMaterial.mipLevel1x1=e}getResolution(){return this.resolution}setResolution(t){this.resolution=t}get adaptive(){return this.mode===Oo.REINHARD2_ADAPTIVE}set adaptive(t){this.mode=t?Oo.REINHARD2_ADAPTIVE:Oo.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(t){this.adaptiveLuminanceMaterial.adaptationRate=t}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(t){console.warn(this.name,"distinction was removed.")}update(t,e,n){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(t,e),this.adaptiveLuminancePass.render(t,null,null,n))}initialize(t,e,n){this.adaptiveLuminancePass.initialize(t,e,n)}},XJ=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,KJ=class extends Ji{constructor({blendFunction:t,technique:e=Jg.DEFAULT,eskil:n=!1,offset:r=.5,darkness:i=.5}={}){super("VignetteEffect",XJ,{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new lt(r)],["darkness",new lt(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Jg.ESKIL}set eskil(t){this.technique=t?Jg.ESKIL:Jg.DEFAULT}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}};const Xi=function(t,e){return e===void 0&&(e=yt.NORMAL),R.forwardRef(function(r,i){let{blendFunction:s,opacity:o,...a}=r;const l=Nn(c=>c.invalidate),u=R.useMemo(()=>new t(a),[a]);return R.useLayoutEffect(()=>{u.blendMode.blendFunction=!s&&s!==0?e:s,o!==void 0&&(u.blendMode.opacity.value=o),l()},[s,u.blendMode,o]),ee.createElement("primitive",{ref:i,object:u,dispose:null})})};Xi(SJ,yt.ADD);Xi(AJ);Xi(EJ);Xi(TJ);Xi(PJ);Xi(IJ);Xi(LJ,yt.COLOR_DODGE);Xi(FJ,yt.OVERLAY);Xi(HJ);Xi(JJ);const YJ=Xi(KJ);Xi(zJ);Xi(jJ,yt.ADD);var TA=zp(),_t=t=>Np(t,TA),RA=zp();_t.write=t=>Np(t,RA);var fy=zp();_t.onStart=t=>Np(t,fy);var PA=zp();_t.onFrame=t=>Np(t,PA);var BA=zp();_t.onFinish=t=>Np(t,BA);var lf=[];_t.setTimeout=(t,e)=>{let n=_t.now()+e,r=()=>{let s=lf.findIndex(o=>o.cancel==r);~s&&lf.splice(s,1),Va-=~s?1:0},i={time:n,handler:t,cancel:r};return lf.splice($L(n),0,i),Va+=1,JL(),i};var $L=t=>~(~lf.findIndex(e=>e.time>t)||~lf.length);_t.cancel=t=>{fy.delete(t),PA.delete(t),BA.delete(t),TA.delete(t),RA.delete(t)};_t.sync=t=>{Zw=!0,_t.batchedUpdates(t),Zw=!1};_t.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,_t.onStart(n)}return r.handler=t,r.cancel=()=>{fy.delete(n),e=null},r};var IA=typeof window<"u"?window.requestAnimationFrame:()=>{};_t.use=t=>IA=t;_t.now=typeof performance<"u"?()=>performance.now():Date.now;_t.batchedUpdates=t=>t();_t.catch=console.error;_t.frameLoop="always";_t.advance=()=>{_t.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):KL()};var Ha=-1,Va=0,Zw=!1;function Np(t,e){Zw?(e.delete(t),t(0)):(e.add(t),JL())}function JL(){Ha<0&&(Ha=0,_t.frameLoop!=="demand"&&IA(XL))}function QJ(){Ha=-1}function XL(){~Ha&&(IA(XL),_t.batchedUpdates(KL))}function KL(){let t=Ha;Ha=_t.now();let e=$L(Ha);if(e&&(YL(lf.splice(0,e),n=>n.handler()),Va-=e),!Va){QJ();return}fy.flush(),TA.flush(t?Math.min(64,Ha-t):16.667),PA.flush(),RA.flush(),BA.flush()}function zp(){let t=new Set,e=t;return{add(n){Va+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Va-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Va-=e.size,YL(e,r=>r(n)&&t.add(r)),Va+=t.size,e=t)}}}function YL(t,e){t.forEach(n=>{try{e(n)}catch(r){_t.catch(r)}})}var qJ=Object.defineProperty,ZJ=(t,e)=>{for(var n in e)qJ(t,n,{get:e[n],enumerable:!0})},Vs={};ZJ(Vs,{assign:()=>tX,colors:()=>Za,createStringInterpolator:()=>LA,skipAnimation:()=>qL,to:()=>QL,willAdvance:()=>kA});function eS(){}var eX=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Xe={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function zo(t,e){if(Xe.arr(t)){if(!Xe.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var tn=(t,e)=>t.forEach(e);function ra(t,e,n){if(Xe.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(let r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var ms=t=>Xe.und(t)?[]:Xe.arr(t)?t:[t];function _h(t,e){if(t.size){let n=Array.from(t);t.clear(),tn(n,e)}}var rh=(t,...e)=>_h(t,n=>n(...e)),DA=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),LA,QL,Za=null,qL=!1,kA=eS,tX=t=>{t.to&&(QL=t.to),t.now&&(_t.now=t.now),t.colors!==void 0&&(Za=t.colors),t.skipAnimation!=null&&(qL=t.skipAnimation),t.createStringInterpolator&&(LA=t.createStringInterpolator),t.requestAnimationFrame&&_t.use(t.requestAnimationFrame),t.batchedUpdates&&(_t.batchedUpdates=t.batchedUpdates),t.willAdvance&&(kA=t.willAdvance),t.frameLoop&&(_t.frameLoop=t.frameLoop)},wh=new Set,hs=[],Hx=[],uv=0,dy={get idle(){return!wh.size&&!hs.length},start(t){uv>t.priority?(wh.add(t),_t.onStart(nX)):(ZL(t),_t(tS))},advance:tS,sort(t){if(uv)_t.onFrame(()=>dy.sort(t));else{let e=hs.indexOf(t);~e&&(hs.splice(e,1),ek(t))}},clear(){hs=[],wh.clear()}};function nX(){wh.forEach(ZL),wh.clear(),_t(tS)}function ZL(t){hs.includes(t)||ek(t)}function ek(t){hs.splice(rX(hs,e=>e.priority>t.priority),0,t)}function tS(t){let e=Hx;for(let n=0;n<hs.length;n++){let r=hs[n];uv=r.priority,r.idle||(kA(r),r.advance(t),r.idle||e.push(r))}return uv=0,Hx=hs,Hx.length=0,hs=e,hs.length>0}function rX(t,e){let n=t.findIndex(e);return n<0?t.length:n}var iX=(t,e,n)=>Math.min(Math.max(n,t),e),sX={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ks="[-+]?\\d*\\.?\\d+",cv=ks+"%";function hy(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var oX=new RegExp("rgb"+hy(ks,ks,ks)),aX=new RegExp("rgba"+hy(ks,ks,ks,ks)),lX=new RegExp("hsl"+hy(ks,cv,cv)),uX=new RegExp("hsla"+hy(ks,cv,cv,ks)),cX=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,fX=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,dX=/^#([0-9a-fA-F]{6})$/,hX=/^#([0-9a-fA-F]{8})$/;function pX(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=dX.exec(t))?parseInt(e[1]+"ff",16)>>>0:Za&&Za[t]!==void 0?Za[t]:(e=oX.exec(t))?(Tc(e[1])<<24|Tc(e[2])<<16|Tc(e[3])<<8|255)>>>0:(e=aX.exec(t))?(Tc(e[1])<<24|Tc(e[2])<<16|Tc(e[3])<<8|i3(e[4]))>>>0:(e=cX.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=hX.exec(t))?parseInt(e[1],16)>>>0:(e=fX.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=lX.exec(t))?(n3(r3(e[1]),Xg(e[2]),Xg(e[3]))|255)>>>0:(e=uX.exec(t))?(n3(r3(e[1]),Xg(e[2]),Xg(e[3]))|i3(e[4]))>>>0:null}function Vx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function n3(t,e,n){let r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=Vx(i,r,t+1/3),o=Vx(i,r,t),a=Vx(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Tc(t){let e=parseInt(t,10);return e<0?0:e>255?255:e}function r3(t){return(parseFloat(t)%360+360)%360/360}function i3(t){let e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Xg(t){let e=parseFloat(t);return e<0?0:e>100?1:e/100}function s3(t){let e=pX(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var np=(t,e,n)=>{if(Xe.fun(t))return t;if(Xe.arr(t))return np({range:t,output:e,extrapolate:n});if(Xe.str(t.output[0]))return LA(t);let r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{let c=gX(u,s);return mX(u,s[c],s[c+1],i[c],i[c+1],l,o,a,r.map)}};function mX(t,e,n,r,i,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),r===-1/0?u=-u:i===1/0?u=u+r:u=u*(i-r)+r,u)}function gX(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var vX=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);let r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return iX(0,1,i/t)},fv=1.70158,Kg=fv*1.525,o3=fv+1,a3=2*Math.PI/3,l3=2*Math.PI/4.5,Yg=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,yX={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>o3*t*t*t-fv*t*t,easeOutBack:t=>1+o3*Math.pow(t-1,3)+fv*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Kg+1)*2*t-Kg)/2:(Math.pow(2*t-2,2)*((Kg+1)*(t*2-2)+Kg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*a3),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*a3)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*l3))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*l3)/2+1,easeInBounce:t=>1-Yg(1-t),easeOutBounce:Yg,easeInOutBounce:t=>t<.5?(1-Yg(1-2*t))/2:(1+Yg(2*t-1))/2,steps:vX},Cf=Symbol.for("FluidValue.get"),Tu=Symbol.for("FluidValue.observers"),lo=t=>!!(t&&t[Cf]),ls=t=>t&&t[Cf]?t[Cf]():t,u3=t=>t[Tu]||null;function xX(t,e){t.eventObserved?t.eventObserved(e):t(e)}function dv(t,e){let n=t[Tu];n&&n.forEach(r=>{xX(r,e)})}var ire,sre,zR,_X=(zR=class{constructor(t){st(this,ire);st(this,sre);if(!t&&!(t=this.get))throw Error("Unknown getter");wX(this,t)}},ire=Cf,sre=Tu,zR),wX=(t,e)=>tk(t,Cf,e);function Gp(t,e){if(t[Cf]){let n=t[Tu];n||tk(t,Tu,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function hv(t,e){let n=t[Tu];if(n&&n.has(e)){let r=n.size-1;r?n.delete(e):t[Tu]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var tk=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),T0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,SX=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,c3=new RegExp(`(${T0.source})(%|[a-z]+)`,"i"),bX=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,py=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,nk=t=>{let[e,n]=AX(t);if(!e||DA())return t;let r=window.getComputedStyle(document.documentElement).getPropertyValue(e);return r?r.trim():n&&n.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(n)||t:n&&py.test(n)?nk(n):n||t},AX=t=>{let e=py.exec(t);if(!e)return[,];let[,n,r]=e;return[n,r]},Wx,MX=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,rk=t=>{Wx||(Wx=Za?new RegExp(`(${Object.keys(Za).join("|")})(?!\\w)`,"g"):/^\b$/);let e=t.output.map(i=>ls(i).replace(py,nk).replace(SX,s3).replace(Wx,s3)),n=e.map(i=>i.match(T0).map(Number)),r=n[0].map((i,s)=>n.map(o=>{if(!(s in o))throw Error('The arity of each "output" value must be equal');return o[s]})).map(i=>np({...t,output:i}));return i=>{var a;let s=!c3.test(e[0])&&((a=e.find(l=>c3.test(l)))==null?void 0:a.replace(T0,"")),o=0;return e[0].replace(T0,()=>`${r[o++](i)}${s||""}`).replace(bX,MX)}},FA="react-spring: ",ik=t=>{let e=t,n=!1;if(typeof e!="function")throw new TypeError(`${FA}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},EX=ik(console.warn);function CX(){EX(`${FA}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var TX=ik(console.warn);function RX(){TX(`${FA}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function my(t){return Xe.str(t)&&(t[0]=="#"||/\d/.test(t)||!DA()&&py.test(t)||t in(Za||{}))}var OA=DA()?R.useEffect:R.useLayoutEffect,PX=()=>{let t=R.useRef(!1);return OA(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function sk(){let t=R.useState()[1],e=PX();return()=>{e.current&&t(Math.random())}}function BX(t,e){let[n]=R.useState(()=>({inputs:e,result:t()})),r=R.useRef(),i=r.current,s=i;return s?e&&s.inputs&&IX(e,s.inputs)||(s={inputs:e,result:t()}):s=n,R.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function IX(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var ok=t=>R.useEffect(t,DX),DX=[];function f3(t){let e=R.useRef();return R.useEffect(()=>{e.current=t}),e.current}var rp=Symbol.for("Animated:node"),LX=t=>!!t&&t[rp]===t,ao=t=>t&&t[rp],UA=(t,e)=>eX(t,rp,e),gy=t=>t&&t[rp]&&t[rp].getPayload(),ak=class{constructor(){st(this,"payload");UA(this,this)}getPayload(){return this.payload||[]}},Hp=class extends ak{constructor(n){super();st(this,"done",!0);st(this,"elapsedTime");st(this,"lastPosition");st(this,"lastVelocity");st(this,"v0");st(this,"durationProgress",0);this._value=n,Xe.num(this._value)&&(this.lastPosition=this._value)}static create(n){return new Hp(n)}getPayload(){return[this]}getValue(){return this._value}setValue(n,r){return Xe.num(n)&&(this.lastPosition=n,r&&(n=Math.round(n/r)*r,this.done&&(this.lastPosition=n))),this._value===n?!1:(this._value=n,!0)}reset(){let{done:n}=this;this.done=!1,Xe.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,n&&(this.lastVelocity=null),this.v0=null)}},ip=class extends Hp{constructor(n){super(0);st(this,"_string",null);st(this,"_toString");this._toString=np({output:[n,n]})}static create(n){return new ip(n)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(n){if(Xe.str(n)){if(n==this._string)return!1;this._string=n,this._value=1}else if(super.setValue(n))this._string=null;else return!1;return!0}reset(n){n&&(this._toString=np({output:[this.getValue(),n]})),this._value=0,super.reset()}},pv={dependencies:null},NA=class extends ak{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){let n={};return ra(this.source,(r,i)=>{LX(r)?n[i]=r.getValue(e):lo(r)?n[i]=ls(r):e||(n[i]=r)}),n}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&tn(this.payload,e=>e.reset())}_makePayload(e){if(e){let n=new Set;return ra(e,this._addToPayload,n),Array.from(n)}}_addToPayload(e){pv.dependencies&&lo(e)&&pv.dependencies.add(e);let n=gy(e);n&&tn(n,r=>this.add(r))}},lk=class extends NA{constructor(e){super(e)}static create(e){return new lk(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){let n=this.getPayload();return e.length==n.length?n.map((r,i)=>r.setValue(e[i])).some(Boolean):(super.setValue(e.map(kX)),!0)}};function kX(t){return(my(t)?ip:Hp).create(t)}function nS(t){let e=ao(t);return e?e.constructor:Xe.arr(t)?lk:my(t)?ip:Hp}var d3=(t,e)=>{let n=!Xe.fun(t)||t.prototype&&t.prototype.isReactComponent;return R.forwardRef((r,i)=>{let s=R.useRef(null),o=n&&R.useCallback(g=>{s.current=UX(i,g)},[i]),[a,l]=OX(r,e),u=sk(),c=()=>{let g=s.current;n&&!g||(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&u()},f=new FX(c,l),h=R.useRef();OA(()=>(h.current=f,tn(l,g=>Gp(g,f)),()=>{h.current&&(tn(h.current.deps,g=>hv(g,h.current)),_t.cancel(h.current.update))})),R.useEffect(c,[]),ok(()=>()=>{let g=h.current;tn(g.deps,v=>hv(v,g))});let m=e.getComponentProps(a.getValue());return R.createElement(t,{...m,ref:o})})},FX=class{constructor(e,n){this.update=e,this.deps=n}eventObserved(e){e.type=="change"&&_t.write(this.update)}};function OX(t,e){let n=new Set;return pv.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new NA(t),pv.dependencies=null,[t,n]}function UX(t,e){return t&&(Xe.fun(t)?t(e):t.current=e),e}var h3=Symbol.for("AnimatedComponent"),NX=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new NA(i),getComponentProps:r=i=>i}={})=>{let i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{let a=p3(o)||"Anonymous";return Xe.str(o)?o=s[o]||(s[o]=d3(o,i)):o=o[h3]||(o[h3]=d3(o,i)),o.displayName=`Animated(${a})`,o};return ra(t,(o,a)=>{Xe.arr(t)&&(a=p3(o)),s[a]=s(o)}),{animated:s}},p3=t=>Xe.str(t)?t:t&&Xe.str(t.displayName)?t.displayName:Xe.fun(t)&&t.name||null;function Jl(t,...e){return Xe.fun(t)?t(...e):t}var Sh=(t,e)=>t===!0||!!(e&&t&&(Xe.fun(t)?t(e):ms(t).includes(e))),uk=(t,e)=>Xe.obj(t)?e&&t[e]:t,ck=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,zX=t=>t,zA=(t,e=zX)=>{let n=GX;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));let r={};for(let i of n){let s=e(t[i],i);Xe.und(s)||(r[i]=s)}return r},GX=["config","onProps","onStart","onChange","onPause","onResume","onRest"],HX={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function VX(t){let e={},n=0;if(ra(t,(r,i)=>{HX[i]||(e[i]=r,n++)}),n)return e}function fk(t){let e=VX(t);if(e){let n={to:e};return ra(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function sp(t){return t=ls(t),Xe.arr(t)?t.map(sp):my(t)?Vs.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function WX(t){for(let e in t)return!0;return!1}function rS(t){return Xe.fun(t)||Xe.arr(t)&&Xe.obj(t[0])}function jX(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function $X(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var Tf={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},iS={...Tf.default,mass:1,damping:1,easing:yX.linear,clamp:!1},JX=class{constructor(){st(this,"tension");st(this,"friction");st(this,"frequency");st(this,"damping");st(this,"mass");st(this,"velocity",0);st(this,"restVelocity");st(this,"precision");st(this,"progress");st(this,"duration");st(this,"easing");st(this,"clamp");st(this,"bounce");st(this,"decay");st(this,"round");Object.assign(this,iS)}};function XX(t,e,n){n&&(n={...n},m3(n,e),e={...n,...e}),m3(t,e),Object.assign(t,e);for(let o in iS)t[o]==null&&(t[o]=iS[o]);let{frequency:r,damping:i}=t,{mass:s}=t;return Xe.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function m3(t,e){if(!Xe.und(e.decay))t.duration=void 0;else{let n=!Xe.und(e.tension)||!Xe.und(e.friction);(n||!Xe.und(e.frequency)||!Xe.und(e.damping)||!Xe.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var g3=[],KX=class{constructor(){st(this,"changed",!1);st(this,"values",g3);st(this,"toValues",null);st(this,"fromValues",g3);st(this,"to");st(this,"from");st(this,"config",new JX);st(this,"immediate",!1)}};function dk(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,u,c=Sh(n.cancel??(r==null?void 0:r.cancel),e);if(c)m();else{Xe.und(n.pause)||(i.paused=Sh(n.pause,e));let g=r==null?void 0:r.pause;g!==!0&&(g=i.paused||Sh(g,e)),l=Jl(n.delay||0,e),g?(i.resumeQueue.add(h),s.pause()):(s.resume(),h())}function f(){i.resumeQueue.add(h),i.timeouts.delete(u),u.cancel(),l=u.time-_t.now()}function h(){l>0&&!Vs.skipAnimation?(i.delayed=!0,u=_t.setTimeout(m,l),i.pauseQueue.add(f),i.timeouts.add(u)):m()}function m(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(f),i.timeouts.delete(u),t<=(i.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(g){a(g)}}})}var GA=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?uf(t.get()):e.every(n=>n.noop)?hk(t.get()):Ls(t.get(),e.every(n=>n.finished)),hk=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Ls=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),uf=t=>({value:t,cancelled:!0,finished:!1});function pk(t,e,n,r){let{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;let u=zA(e,(y,_)=>_==="onRest"?void 0:y),c,f,h=new Promise((y,_)=>(c=y,f=_)),m=y=>{let _=i<=(n.cancelId||0)&&uf(r)||i!==n.asyncId&&Ls(r,!1);if(_)throw y.result=_,f(y),y},g=(y,_)=>{let x=new v3,w=new y3;return(async()=>{if(Vs.skipAnimation)throw op(n),w.result=Ls(r,!1),f(w),w;m(x);let b=Xe.obj(y)?{...y}:{..._,to:y};b.parentId=i,ra(u,(C,P)=>{Xe.und(b[P])&&(b[P]=C)});let E=await r.start(b);return m(x),n.paused&&await new Promise(C=>{n.resumeQueue.add(C)}),E})()},v;if(Vs.skipAnimation)return op(n),Ls(r,!1);try{let y;Xe.arr(t)?y=(async _=>{for(let x of _)await g(x)})(t):y=Promise.resolve(t(g,r.stop.bind(r))),await Promise.all([y.then(c),h]),v=Ls(r.get(),!0,!1)}catch(y){if(y instanceof v3)v=y.result;else if(y instanceof y3)v=y.result;else throw y}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return Xe.fun(o)&&_t.batchedUpdates(()=>{o(v,r,r.item)}),v})()}function op(t,e){_h(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var v3=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.");st(this,"result")}},y3=class extends Error{constructor(){super("SkipAnimationSignal");st(this,"result")}},sS=t=>t instanceof HA,YX=1,HA=class extends _X{constructor(){super(...arguments);st(this,"id",YX++);st(this,"_priority",0)}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){let e=ao(this);return e&&e.getValue()}to(...e){return Vs.to(this,e)}interpolate(...e){return CX(),Vs.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,n=!1){dv(this,{type:"change",parent:this,value:e,idle:n})}_onPriorityChange(e){this.idle||dy.sort(this),dv(this,{type:"priority",parent:this,priority:e})}},Ru=Symbol.for("SpringPhase"),mk=1,oS=2,aS=4,jx=t=>(t[Ru]&mk)>0,Pa=t=>(t[Ru]&oS)>0,jd=t=>(t[Ru]&aS)>0,x3=(t,e)=>e?t[Ru]|=oS|mk:t[Ru]&=~oS,_3=(t,e)=>e?t[Ru]|=aS:t[Ru]&=~aS,QX=class extends HA{constructor(e,n){super();st(this,"key");st(this,"animation",new KX);st(this,"queue");st(this,"defaultProps",{});st(this,"_state",{paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});st(this,"_pendingCalls",new Set);st(this,"_lastCallId",0);st(this,"_lastToId",0);st(this,"_memoizedDuration",0);if(!Xe.und(e)||!Xe.und(n)){let r=Xe.obj(e)?{...e}:{...n,from:e};Xe.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(Pa(this)||this._state.asyncTo)||jd(this)}get goal(){return ls(this.animation.to)}get velocity(){let e=ao(this);return e instanceof Hp?e.lastVelocity||0:e.getPayload().map(n=>n.lastVelocity||0)}get hasAnimated(){return jx(this)}get isAnimating(){return Pa(this)}get isPaused(){return jd(this)}get isDelayed(){return this._state.delayed}advance(e){let n=!0,r=!1,i=this.animation,{toValues:s}=i,{config:o}=i,a=gy(i.to);!a&&lo(i.to)&&(s=ms(ls(i.to))),i.values.forEach((c,f)=>{if(c.done)return;let h=c.constructor==ip?1:a?a[f].lastPosition:s[f],m=i.immediate,g=h;if(!m){if(g=c.lastPosition,o.tension<=0){c.done=!0;return}let v=c.elapsedTime+=e,y=i.fromValues[f],_=c.v0!=null?c.v0:c.v0=Xe.arr(o.velocity)?o.velocity[f]:o.velocity,x,w=o.precision||(y==h?.005:Math.min(1,Math.abs(h-y)*.001));if(Xe.und(o.duration))if(o.decay){let b=o.decay===!0?.998:o.decay,E=Math.exp(-(1-b)*v);g=y+_/(1-b)*(1-E),m=Math.abs(c.lastPosition-g)<=w,x=_*E}else{x=c.lastVelocity==null?_:c.lastVelocity;let b=o.restVelocity||w/10,E=o.clamp?0:o.bounce,C=!Xe.und(E),P=y==h?c.v0>0:y<h,M,B=!1,D=1,k=Math.ceil(e/D);for(let O=0;O<k&&(M=Math.abs(x)>b,!(!M&&(m=Math.abs(h-g)<=w,m)));++O){C&&(B=g==h||g>h==P,B&&(x=-x*E,g=h));let U=-o.tension*1e-6*(g-h),N=-o.friction*.001*x,$=(U+N)/o.mass;x=x+$*D,g=g+x*D}}else{let b=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,c.durationProgress>0&&(c.elapsedTime=o.duration*c.durationProgress,v=c.elapsedTime+=e)),b=(o.progress||0)+v/this._memoizedDuration,b=b>1?1:b<0?0:b,c.durationProgress=b),g=y+o.easing(b)*(h-y),x=(g-c.lastPosition)/e,m=b==1}c.lastVelocity=x,Number.isNaN(g)&&(console.warn("Got NaN while animating:",this),m=!0)}a&&!a[f].done&&(m=!1),m?c.done=!0:n=!1,c.setValue(g,o.round)&&(r=!0)});let l=ao(this),u=l.getValue();if(n){let c=ls(i.to);(u!==c||r)&&!o.decay?(l.setValue(c),this._onChange(c)):r&&o.decay&&this._onChange(u),this._stop()}else r&&this._onChange(u)}set(e){return _t.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Pa(this)){let{to:e,config:n}=this.animation;_t.batchedUpdates(()=>{this._onStart(),n.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,n){let r;return Xe.und(e)?(r=this.queue||[],this.queue=[]):r=[Xe.obj(e)?e:{...n,to:e}],Promise.all(r.map(i=>this._update(i))).then(i=>GA(this,i))}stop(e){let{to:n}=this.animation;return this._focus(this.get()),op(this._state,e&&this._lastCallId),_t.batchedUpdates(()=>this._stop(n,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){let n=this.key||"",{to:r,from:i}=e;r=Xe.obj(r)?r[n]:r,(r==null||rS(r))&&(r=void 0),i=Xe.obj(i)?i[n]:i,i==null&&(i=void 0);let s={to:r,from:i};return jx(this)||(e.reverse&&([r,i]=[i,r]),i=ls(i),Xe.und(i)?ao(this)||this._set(r):this._set(i)),s}_update({...e},n){let{key:r,defaultProps:i}=this;e.default&&Object.assign(i,zA(e,(a,l)=>/^on/.test(l)?uk(a,r):a)),S3(this,e,"onProps"),Jd(this,"onProps",e,this);let s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let o=this._state;return dk(++this._lastCallId,{key:r,props:e,defaultProps:i,state:o,actions:{pause:()=>{jd(this)||(_3(this,!0),rh(o.pauseQueue),Jd(this,"onPause",Ls(this,$d(this,this.animation.to)),this))},resume:()=>{jd(this)&&(_3(this,!1),Pa(this)&&this._resume(),rh(o.resumeQueue),Jd(this,"onResume",Ls(this,$d(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(a=>{if(e.loop&&a.finished&&!(n&&a.noop)){let l=gk(e);if(l)return this._update(l,!0)}return a})}_merge(e,n,r){if(n.cancel)return this.stop(!0),r(uf(this));let i=!Xe.und(e.to),s=!Xe.und(e.from);if(i||s)if(n.callId>this._lastToId)this._lastToId=n.callId;else return r(uf(this));let{key:o,defaultProps:a,animation:l}=this,{to:u,from:c}=l,{to:f=u,from:h=c}=e;s&&!i&&(!n.default||Xe.und(f))&&(f=h),n.reverse&&([f,h]=[h,f]);let m=!zo(h,c);m&&(l.from=h),h=ls(h);let g=!zo(f,u);g&&this._focus(f);let v=rS(n.to),{config:y}=l,{decay:_,velocity:x}=y;(i||s)&&(y.velocity=0),n.config&&!v&&XX(y,Jl(n.config,o),n.config!==a.config?Jl(a.config,o):void 0);let w=ao(this);if(!w||Xe.und(f))return r(Ls(this,!0));let b=Xe.und(n.reset)?s&&!n.default:!Xe.und(h)&&Sh(n.reset,o),E=b?h:this.get(),C=sp(f),P=Xe.num(C)||Xe.arr(C)||my(C),M=!v&&(!P||Sh(a.immediate||n.immediate,o));if(g){let O=nS(f);if(O!==w.constructor)if(M)w=this._set(C);else throw Error(`Cannot animate between ${w.constructor.name} and ${O.name}, as the "to" prop suggests`)}let B=w.constructor,D=lo(f),k=!1;if(!D){let O=b||!jx(this)&&m;(g||O)&&(k=zo(sp(E),C),D=!k),(!zo(l.immediate,M)&&!M||!zo(y.decay,_)||!zo(y.velocity,x))&&(D=!0)}if(k&&Pa(this)&&(l.changed&&!b?D=!0:D||this._stop(u)),!v&&((D||lo(u))&&(l.values=w.getPayload(),l.toValues=lo(f)?null:B==ip?[1]:ms(C)),l.immediate!=M&&(l.immediate=M,!M&&!b&&this._set(u)),D)){let{onRest:O}=l;tn(ZX,N=>S3(this,n,N));let U=Ls(this,$d(this,u));rh(this._pendingCalls,U),this._pendingCalls.add(r),l.changed&&_t.batchedUpdates(()=>{var N;l.changed=!b,O==null||O(U,this),b?Jl(a.onRest,U):(N=l.onStart)==null||N.call(l,U,this)})}b&&this._set(E),v?r(pk(n.to,n,this._state,this)):D?this._start():Pa(this)&&!g?this._pendingCalls.add(r):r(hk(E))}_focus(e){let n=this.animation;e!==n.to&&(u3(this)&&this._detach(),n.to=e,u3(this)&&this._attach())}_attach(){let e=0,{to:n}=this.animation;lo(n)&&(Gp(n,this),sS(n)&&(e=n.priority+1)),this.priority=e}_detach(){let{to:e}=this.animation;lo(e)&&hv(e,this)}_set(e,n=!0){let r=ls(e);if(!Xe.und(r)){let i=ao(this);if(!i||!zo(r,i.getValue())){let s=nS(r);!i||i.constructor!=s?UA(this,s.create(r)):i.setValue(r),i&&_t.batchedUpdates(()=>{this._onChange(r,n)})}}return ao(this)}_onStart(){let e=this.animation;e.changed||(e.changed=!0,Jd(this,"onStart",Ls(this,$d(this,e.to)),this))}_onChange(e,n){n||(this._onStart(),Jl(this.animation.onChange,e,this)),Jl(this.defaultProps.onChange,e,this),super._onChange(e,n)}_start(){let e=this.animation;ao(this).reset(ls(e.to)),e.immediate||(e.fromValues=e.values.map(n=>n.lastPosition)),Pa(this)||(x3(this,!0),jd(this)||this._resume())}_resume(){Vs.skipAnimation?this.finish():dy.start(this)}_stop(e,n){if(Pa(this)){x3(this,!1);let r=this.animation;tn(r.values,s=>{s.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),dv(this,{type:"idle",parent:this});let i=n?uf(this.get()):Ls(this.get(),$d(this,e??r.to));rh(this._pendingCalls,i),r.changed&&(r.changed=!1,Jd(this,"onRest",i,this))}}};function $d(t,e){let n=sp(e),r=sp(t.get());return zo(r,n)}function gk(t,e=t.loop,n=t.to){let r=Jl(e);if(r){let i=r!==!0&&fk(r),s=(i||t).reverse,o=!i||i.reset;return ap({...t,loop:e,default:!1,pause:void 0,to:!s||rS(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function ap(t){let{to:e,from:n}=t=fk(t),r=new Set;return Xe.obj(e)&&w3(e,r),Xe.obj(n)&&w3(n,r),t.keys=r.size?Array.from(r):null,t}function qX(t){let e=ap(t);return Xe.und(e.default)&&(e.default=zA(e)),e}function w3(t,e){ra(t,(n,r)=>n!=null&&e.add(r))}var ZX=["onStart","onRest","onChange","onPause","onResume"];function S3(t,e,n){t.animation[n]=e[n]!==ck(e,n)?uk(e[n],t.key):void 0}function Jd(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var eK=["onStart","onChange","onRest"],tK=1,nK=class{constructor(t,e){st(this,"id",tK++);st(this,"springs",{});st(this,"queue",[]);st(this,"ref");st(this,"_flush");st(this,"_initialProps");st(this,"_lastAsyncId",0);st(this,"_active",new Set);st(this,"_changed",new Set);st(this,"_started",!1);st(this,"_item");st(this,"_state",{paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});st(this,"_events",{onStart:new Map,onChange:new Map,onRest:new Map});this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){let t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(let e in t){let n=t[e];Xe.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(ap(t)),this}start(t){let{queue:e}=this;return t?e=ms(t).map(ap):this.queue=[],this._flush?this._flush(this,e):(wk(this,e),lS(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){let n=this.springs;tn(ms(e),r=>n[r].stop(!!t))}else op(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(Xe.und(t))this.start({pause:!0});else{let e=this.springs;tn(ms(t),n=>e[n].pause())}return this}resume(t){if(Xe.und(t))this.start({pause:!1});else{let e=this.springs;tn(ms(t),n=>e[n].resume())}return this}each(t){ra(this.springs,t)}_onFrame(){let{onStart:t,onChange:e,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,_h(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));let s=!r&&this._started,o=i||s&&n.size?this.get():null;i&&e.size&&_h(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,_h(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;_t.onFrame(this._onFrame)}};function lS(t,e){return Promise.all(e.map(n=>vk(t,n))).then(n=>GA(t,n))}async function vk(t,e,n){let{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:l}=e,u=Xe.obj(e.default)&&e.default;o&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);let c=Xe.arr(i)||Xe.fun(i)?i:void 0;c?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):tn(eK,v=>{let y=e[v];if(Xe.fun(y)){let _=t._events[v];e[v]=({finished:x,cancelled:w})=>{let b=_.get(y);b?(x||(b.finished=!1),w&&(b.cancelled=!0)):_.set(y,{value:null,finished:x||!1,cancelled:w||!1})},u&&(u[v]=e[v])}});let f=t._state;e.pause===!f.paused?(f.paused=e.pause,rh(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);let h=(r||Object.keys(t.springs)).map(v=>t.springs[v].start(e)),m=e.cancel===!0||ck(e,"cancel")===!0;(c||m&&f.asyncId)&&h.push(dk(++t._lastAsyncId,{props:e,state:f,actions:{pause:eS,resume:eS,start(v,y){m?(op(f,t._lastAsyncId),y(uf(t))):(v.onRest=a,y(pk(c,v,f,t)))}}})),f.paused&&await new Promise(v=>{f.resumeQueue.add(v)});let g=GA(t,await Promise.all(h));if(o&&g.finished&&!(n&&g.noop)){let v=gk(e,o,i);if(v)return wk(t,[v]),vk(t,v,!0)}return l&&_t.batchedUpdates(()=>l(g,t,t.item)),g}function b3(t,e){let n={...t.springs};return e&&tn(ms(e),r=>{Xe.und(r.keys)&&(r=ap(r)),Xe.obj(r.to)||(r={...r,to:void 0}),_k(n,r,i=>xk(i))}),yk(t,n),n}function yk(t,e){ra(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,Gp(n,t))})}function xk(t,e){let n=new QX;return n.key=t,e&&Gp(n,e),n}function _k(t,e,n){e.keys&&tn(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function wk(t,e){tn(e,n=>{_k(t.springs,n,r=>xk(r,t))})}var vy=({children:t,...e})=>{let n=R.useContext(mv),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=BX(()=>({pause:r,immediate:i}),[r,i]);let{Provider:s}=mv;return R.createElement(s,{value:e},t)},mv=rK(vy,{});vy.Provider=mv.Provider;vy.Consumer=mv.Consumer;function rK(t,e){return Object.assign(t,R.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var iK=()=>{let t=[],e=function(r){RX();let i=[];return tn(t,(s,o)=>{if(Xe.und(r))i.push(s.start());else{let a=n(r,s,o);a&&i.push(s.start(a))}}),i};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){let i=t.indexOf(r);~i&&t.splice(i,1)},e.pause=function(){return tn(t,r=>r.pause(...arguments)),this},e.resume=function(){return tn(t,r=>r.resume(...arguments)),this},e.set=function(r){tn(t,(i,s)=>{let o=Xe.fun(r)?r(s,i):r;o&&i.set(o)})},e.start=function(r){let i=[];return tn(t,(s,o)=>{if(Xe.und(r))i.push(s.start());else{let a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},e.stop=function(){return tn(t,r=>r.stop(...arguments)),this},e.update=function(r){return tn(t,(i,s)=>i.update(this._getProps(r,i,s))),this};let n=function(r,i,s){return Xe.fun(r)?r(s,i):r};return e._getProps=n,e};function sK(t,e,n){let r=Xe.fun(e)&&e;r&&!n&&(n=[]);let i=R.useMemo(()=>r||arguments.length==3?iK():void 0,[]),s=R.useRef(0),o=sk(),a=R.useMemo(()=>({ctrls:[],queue:[],flush(_,x){let w=b3(_,x);return s.current>0&&!a.queue.length&&!Object.keys(w).some(b=>!_.springs[b])?lS(_,x):new Promise(b=>{yk(_,w),a.queue.push(()=>{b(lS(_,x))}),o()})}}),[]),l=R.useRef([...a.ctrls]),u=[],c=f3(t)||0;R.useMemo(()=>{tn(l.current.slice(t,c),_=>{jX(_,i),_.stop(!0)}),l.current.length=t,f(c,t)},[t]),R.useMemo(()=>{f(0,Math.min(c,t))},n);function f(_,x){for(let w=_;w<x;w++){let b=l.current[w]||(l.current[w]=new nK(null,a.flush)),E=r?r(w,b):e[w];E&&(u[w]=qX(E))}}let h=l.current.map((_,x)=>b3(_,u[x])),m=R.useContext(vy),g=f3(m),v=m!==g&&WX(m);OA(()=>{s.current++,a.ctrls=l.current;let{queue:_}=a;_.length&&(a.queue=[],tn(_,x=>x())),tn(l.current,(x,w)=>{i==null||i.add(x),v&&x.start({default:m});let b=u[w];b&&($X(x,b.ref),x.ref?x.queue.push(b):x.start(b))})}),ok(()=>()=>{tn(a.ctrls,_=>_.stop(!0))});let y=h.map(_=>({..._}));return i?[y,i]:y}function Pu(t,e){let n=Xe.fun(t),[[r],i]=sK(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[r,i]:r}var oK=class extends HA{constructor(n,r){super();st(this,"key");st(this,"idle",!0);st(this,"calc");st(this,"_active",new Set);this.source=n,this.calc=np(...r);let i=this._get(),s=nS(i);UA(this,s.create(i))}advance(n){let r=this._get(),i=this.get();zo(r,i)||(ao(this).setValue(r),this._onChange(r,this.idle)),!this.idle&&A3(this._active)&&$x(this)}_get(){let n=Xe.arr(this.source)?this.source.map(ls):ms(ls(this.source));return this.calc(...n)}_start(){this.idle&&!A3(this._active)&&(this.idle=!1,tn(gy(this),n=>{n.done=!1}),Vs.skipAnimation?(_t.batchedUpdates(()=>this.advance()),$x(this)):dy.start(this))}_attach(){let n=1;tn(ms(this.source),r=>{lo(r)&&Gp(r,this),sS(r)&&(r.idle||this._active.add(r),n=Math.max(n,r.priority+1))}),this.priority=n,this._start()}_detach(){tn(ms(this.source),n=>{lo(n)&&hv(n,this)}),this._active.clear(),$x(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=ms(this.source).reduce((r,i)=>Math.max(r,(sS(i)?i.priority:0)+1),0))}};function aK(t){return t.idle!==!1}function A3(t){return!t.size||Array.from(t).every(aK)}function $x(t){t.idle||(t.idle=!0,tn(gy(t),e=>{e.done=!0}),dv(t,{type:"idle",parent:t}))}Vs.assign({createStringInterpolator:rk,to:(t,e)=>new oK(t,e)});var lK=["primitive"].concat(Object.keys(GD).filter(t=>/^[A-Z]/.test(t)).map(t=>t[0].toLowerCase()+t.slice(1)));Vs.assign({createStringInterpolator:rk,colors:sX,frameLoop:"demand"});xV(()=>{_t.advance()});var uK=NX(lK,{applyAnimatedValues:Vl}),br=uK.animated;const cK=50;function fK(){return this}function dK(t){let e=0;return{next(){if(++e>cK)throw new Error("useMultipleRefs: reached more than 50 refs. This hook can be used exclusively with the array destructuring syntax.");return{done:!1,value:R.useRef(t)}},[Symbol.iterator]:fK}}En.preload("./models/lights/lights_v1.glb");En.preload("./models/iconography/INCONOGRAPHY_source_v1.glb");En.preload("./models/iconography/INCONOGRAPHY_support_v6.glb");function hK(t){const e=R.useRef(),{nodes:n,materials:r,animations:i}=En("./models/iconography/INCONOGRAPHY_smartTech_v3.glb"),{actions:s}=LL(i,e);return R.useEffect(()=>{s["codeCubeAction.001"].play(),s.wifiSpinAction.play(),s.wifi_1_1Action.play(),s.wifi_1_2Action.play(),s.wifi_1_3Action.play(),s.wifi_2_1Action.play(),s.wifi_2_2Action.play(),s.wifi_2_3Action.play()},[]),ge.jsx("group",{ref:e,...t,dispose:null,children:ge.jsxs("group",{name:"Scene",children:[ge.jsxs("group",{name:"wifiSpin",children:[ge.jsx("mesh",{name:"wifi_1",castShadow:!0,receiveShadow:!0,geometry:n.wifi_1.geometry,material:r["Hireco - Wifi .005"],scale:.75}),ge.jsx("mesh",{name:"wifi_2",castShadow:!0,receiveShadow:!0,geometry:n.wifi_2.geometry,material:r["Hireco - Wifi .004"],scale:.78}),ge.jsx("mesh",{name:"wifi_3",castShadow:!0,receiveShadow:!0,geometry:n.wifi_3.geometry,material:r["Hireco - Wifi .006"],scale:.74}),ge.jsx("mesh",{name:"wifi_4",castShadow:!0,receiveShadow:!0,geometry:n.wifi_4.geometry,material:r["Hireco - Wifi .003"],scale:.78}),ge.jsx("mesh",{name:"wifi_5",castShadow:!0,receiveShadow:!0,geometry:n.wifi_5.geometry,material:r["Hireco - Wifi .002"],scale:.75}),ge.jsx("mesh",{name:"wifi_6",castShadow:!0,receiveShadow:!0,geometry:n.wifi_6.geometry,material:r["Hireco - Wifi .001"],scale:.74})]}),ge.jsxs("group",{name:"codeCube",scale:0,children:[ge.jsx("mesh",{name:"codeCube_1",castShadow:!0,receiveShadow:!0,geometry:n.codeCube_1.geometry,material:r["Hireco - codeCube .001"],rotation:[Math.PI/2,0,0],scale:.3}),ge.jsx("mesh",{name:"codeCube_2",castShadow:!0,receiveShadow:!0,geometry:n.codeCube_2.geometry,material:r["Hireco - codeCube .002"],rotation:[Math.PI/2,0,0],scale:.29})]})]})})}En.preload("./models/iconography/INCONOGRAPHY_smartTech_v3.glb");const M3=t=>{let e;const n=new Set,r=(l,u)=>{const c=typeof l=="function"?l(e):l;if(!Object.is(c,e)){const f=e;e=u??typeof c!="object"?c:Object.assign({},e,c),n.forEach(h=>h(e,f))}},i=()=>e,a={setState:r,getState:i,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{var l;((l={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0})==null?void 0:l.MODE)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return e=t(r,i,a),a},pK=t=>t?M3(t):M3;var uS={},mK={get exports(){return uS},set exports(t){uS=t}},Sk={},cS={},gK={get exports(){return cS},set exports(t){cS=t}},bk={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rf=R;function vK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yK=typeof Object.is=="function"?Object.is:vK,xK=Rf.useState,_K=Rf.useEffect,wK=Rf.useLayoutEffect,SK=Rf.useDebugValue;function bK(t,e){var n=e(),r=xK({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return wK(function(){i.value=n,i.getSnapshot=e,Jx(i)&&s({inst:i})},[t,n,e]),_K(function(){return Jx(i)&&s({inst:i}),t(function(){Jx(i)&&s({inst:i})})},[t]),SK(n),n}function Jx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yK(t,n)}catch{return!0}}function AK(t,e){return e()}var MK=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?AK:bK;bk.useSyncExternalStore=Rf.useSyncExternalStore!==void 0?Rf.useSyncExternalStore:MK;(function(t){t.exports=bk})(gK);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy=R,EK=cS;function CK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var TK=typeof Object.is=="function"?Object.is:CK,RK=EK.useSyncExternalStore,PK=yy.useRef,BK=yy.useEffect,IK=yy.useMemo,DK=yy.useDebugValue;Sk.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=PK(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=IK(function(){function l(m){if(!u){if(u=!0,c=m,m=r(m),i!==void 0&&o.hasValue){var g=o.value;if(i(g,m))return f=g}return f=m}if(g=f,TK(c,m))return g;var v=r(m);return i!==void 0&&i(g,v)?g:(c=m,f=v)}var u=!1,c,f,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,i]);var a=RK(t,s[0],s[1]);return BK(function(){o.hasValue=!0,o.value=a},[a]),DK(a),a};(function(t){t.exports=Sk})(mK);const LK=Ev(uS),{useSyncExternalStoreWithSelector:kK}=LK;function FK(t,e=t.getState,n){const r=kK(t.subscribe,t.getState,t.getServerState||t.getState,e,n);return R.useDebugValue(r),r}const E3=t=>{var e;((e={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0})==null?void 0:e.MODE)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof t=="function"?pK(t):t,r=(i,s)=>FK(n,i,s);return Object.assign(r,n),r},OK=t=>t?E3(t):E3,fS=new Map,Qg=t=>{const e=fS.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},UK=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=fS.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return fS.set(n.name,i),{type:"tracked",store:t,...i}},NK=(t,e={})=>(n,r,i)=>{var s,o;const{enabled:a,anonymousActionType:l,store:u,...c}=e;let f;try{f=(a??((s={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0})==null?void 0:s.MODE)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!f)return((o={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0})==null?void 0:o.MODE)!=="production"&&a&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(n,r,i);const{connection:h,...m}=UK(u,f,c);let g=!0;i.setState=(_,x,w)=>{const b=n(_,x);if(!g)return b;const E=w===void 0?{type:l||"anonymous"}:typeof w=="string"?{type:w}:w;return u===void 0?(h==null||h.send(E,r()),b):(h==null||h.send({...E,type:`${u}/${E.type}`},{...Qg(c.name),[u]:i.getState()}),b)};const v=(..._)=>{const x=g;g=!1,n(..._),g=x},y=t(i.setState,r,i);if(m.type==="untracked"?h==null||h.init(y):(m.stores[m.store]=i,h==null||h.init(Object.fromEntries(Object.entries(m.stores).map(([_,x])=>[_,_===m.store?y:x.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let _=!1;const x=i.dispatch;i.dispatch=(...w)=>{var b;((b={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0})==null?void 0:b.MODE)!=="production"&&w[0].type==="__setState"&&!_&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),_=!0),x(...w)}}return h.subscribe(_=>{var x;switch(_.type){case"ACTION":if(typeof _.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Xx(_.payload,w=>{if(w.type==="__setState"){if(u===void 0){v(w.state);return}Object.keys(w.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const b=w.state[u];if(b==null)return;JSON.stringify(i.getState())!==JSON.stringify(b)&&v(b);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(w)});case"DISPATCH":switch(_.payload.type){case"RESET":return v(y),u===void 0?h==null?void 0:h.init(i.getState()):h==null?void 0:h.init(Qg(c.name));case"COMMIT":if(u===void 0){h==null||h.init(i.getState());return}return h==null?void 0:h.init(Qg(c.name));case"ROLLBACK":return Xx(_.state,w=>{if(u===void 0){v(w),h==null||h.init(i.getState());return}v(w[u]),h==null||h.init(Qg(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Xx(_.state,w=>{if(u===void 0){v(w);return}JSON.stringify(i.getState())!==JSON.stringify(w[u])&&v(w[u])});case"IMPORT_STATE":{const{nextLiftedState:w}=_.payload,b=(x=w.computedStates.slice(-1)[0])==null?void 0:x.state;if(!b)return;v(u===void 0?b:b[u]),h==null||h.send(null,w);return}case"PAUSE_RECORDING":return g=!g}return}}),y},zK=NK,Xx=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)},GK={ring_2:"Experts",ring_3:"Source",ring_4:"Support",ring_5:"Technology",ring_6:"Welfare"},HK={Welfare:{subTitle:"Environment + Park",description:"Meet the experts that deliver your total transport solution, request a meeting with them here today or when suits you."},Support:{subTitle:"Fleet Maintenance + Customer Portal",description:"Meet the experts that deliver your total transport solution, request a meeting with them here today or when suits you."},Experts:{subTitle:"The Team",description:"Meet the experts that deliver your total transport solution, request a meeting with them here today or when suits you."},Technology:{subTitle:"Smart + Tyres",description:"Meet the experts that deliver your total transport solution, request a meeting with them here today or when suits you."},Source:{subTitle:"Assets + Finance",description:"Meet the experts that deliver your total transport solution, request a meeting with them here today or when suits you."},Experts:{subTitle:"The Team",description:"Meet the experts that deliver your total transport solution, request a meeting with them here today or when suits you."}},Kx=[{Category:"Experts",Title:"JAMES SMITH",Subtitle:"CEO",Description:"James Smith, CEO of Hireco, is a seasoned professional with over 30 years of experience in the transport industry. He started his career at the age of 18 and has worked at several rental businesses before joining Hireco as Managing Director at the age of 30. Under his leadership, Hireco has seen significant growth, increasing their assets from 1000 to 8000 since 2006. Today, the company has a turnover of over 60m and is transforming the way transport companies lease assets. James' expertise and leadership have played a crucial role in the company's success, and his vision for the future continues to drive Hireco forward.",CTA:"Linkedin, email, send message?","Image/Videos":"EXPERTS_JAMES SMITH.jpg","Comments (Not extracted)":`KF/LG to film w/c 12.6 latest
Still to be used for now`},{Category:"Experts",Title:"Tim Gibson",Subtitle:"Sales Director",Description:`Tim Gibson is a well-respected sales director who has spent the last 17 years of his career at Hireco, a leading asset and equipment sourcing company. Throughout his time at Hireco, Tim has been instrumental in driving the company's growth and success, helping to establish it as a leading provider of cost-effective and efficient asset solutions for businesses.

Tim's career in sales spans over 25 years, and he has built a reputation as a highly skilled and knowledgeable professional in his field. He has a wealth of experience in sales strategy, account management, and customer service, and has worked with a diverse range of clients across various industries.

At Hireco, Tim has been responsible for managing the sales team and driving revenue growth for the company. He has a proven track record of successfully identifying new business opportunities and building strong relationships with clients, helping to establish Hireco as a trusted partner in the asset and equipment sourcing industry.

Tim's dedication to his work and his commitment to providing exceptional customer service have earned him the respect and admiration of his colleagues and clients alike. He is known for his strategic thinking, attention to detail, and ability to deliver results, and has been a key contributor to Hireco's continued success.

In conclusion, Tim Gibson is a sales director with over 25 years of experience in his field, and has spent the last 17 years at Hireco helping to drive the company's growth and success. His expertise and dedication to his work have earned him a reputation as a highly skilled and respected professional in his field, and he is a valuable asset to Hireco and its clients.
`,CTA:"Linkedin, email, whatsapp message? request meeting?","Image/Videos":"EXPERTS_TIM GIBSON.jpg","Comments (Not extracted)":`KF/LG to film w/c 12.6 latest
Still to be used for now`},{Category:"Experts",Title:"Jason Chipchase",Subtitle:"UK Contracts Manager",Description:`Jason Chipchase recently joined Hireco from Krone trailer manufacturing as our senior contracts manager. His experience in both the military and transport industry has provided him with a unique skill set that enables him to effectively manage contracts and provide tailored solutions for his clients. At Hireco, he is able to use his expertise to help businesses find the right assets and transportation solutions to meet their specific needs. With his commitment to customer satisfaction and attention to detail, Jason is a valuable asset to the Hireco team.

`,CTA:"Linkedin, email, Watsapp message? request meeting?","Image/Videos":"EXPERTS_JASON CHIPCHASE.jpg","Comments (Not extracted)":`KF/LG to film w/c 12.6 latest
Still to be used for now`},{Category:"Experts",Title:"Paul Jeferry",Subtitle:"UK Operations  Manager",Description:`Paul Jeffery is an experienced operations manager at Hireco, With over 15 years of experience in the logistics and transportation industry, Paul has a proven track record of delivering exceptional results through his strong leadership, strategic planning, and operational excellence.

As the UK operations manager at Hireco, Paul is responsible for overseeing the day-to-day operations of the company's fleet of commercial vehicles across multiple locations in the UK. His role involves managing a team providing excellent customer service to clients.

Paul's expertise in logistics and transportation has been integral to Hireco's success in the UK market. He has a deep understanding of the complexities of the industry, including regulations, compliance, and safety requirements. This knowledge has allowed him to develop and implement effective operational processes that ensure Hireco's fleet is always operating at peak efficiency.

In addition to his operational responsibilities, Paul is also a key member of Hireco's management team. He works closely with other senior leaders in the company to develop and execute strategic initiatives that drive growth and increase profitability. His ability to think strategically and his strong business acumen have helped Hireco stay ahead of the competition and continue to expand its market share in the UK.

Overall, Paul Jeffery is a highly skilled and experienced operations manager who brings a wealth of expertise to Hireco. His leadership, strategic vision, and operational excellence have been instrumental in the company's success, and he is highly respected within the logistics and transportation industry in the UK.

`,CTA:"Linkedin, email, whatsapp message? request meeting?","Image/Videos":"EXPERTS_PAUL JEFFERY.jpg","Comments (Not extracted)":`KF/LG to film w/c 12.6 latest
Still to be used for now`},{Category:"",Title:"",Subtitle:"",Description:"",CTA:"","Image/Videos":"","Comments (Not extracted)":""},{Category:"Experts",Title:"Tim McCarthy",Subtitle:"Financial Director",Description:`Tim McCarthy is the finance director of Hireco. With over 15 years of experience in the financial services industry, Tim is exceptionally qualified to oversee the companys financial operations.

Tim began his career as an accountant for a large international bank, where he was quickly promoted to financial analyst and then financial controller. After several years at the bank, Tim joined Hireco as the head of finance.

At Hireco, Tim has had a major impact, helping to lead the company through various financial times. He has been instrumental in developing innovative strategies to reduce costs and increase efficiency. He has also successfully negotiated multiple bank loan agreements and successfully overseen the companys large-scale expansion.

Tim is passionate about helping Hireco succeed and is always looking for new ways to optimize the companys operations. With his expertise and dedication, Tim is the driving force behind Hirecos financial success.
`,CTA:"Linkedin, email, whatsapp message? request meeting?","Image/Videos":"EXPERTS_TIM MCARTHY.jpg","Comments (Not extracted)":`KF/LG to film w/c 12.6 latest
Still to be used for now`},{Category:"Experts",Title:`SCOTT McMINIGLE

`,Subtitle:"Head of New Fleet UK",Description:`Scott McMinigle started out renting cars and vans, he made moved into truck and trailer in the 90s. With over 30 years of experience in the transport industry, Scott brings a wealth of knowledge and expertise to Hireco. His attention to detail and ability to match assets with clients' requirements has been instrumental in the company's growth and success. Scott's role in the new fleet department is critical to ensuring that Hireco continues to provide high-quality assets to their clients, and his contributions have helped to establish Hireco as a leading player in the industry.

`,CTA:"Linkedin, email, whatsapp message? request meeting?","Image/Videos":"EXPERTS_SCOTT MCMINIGLE.jpg","Comments (Not extracted)":`KF/LG to film w/c 12.6 latest
Still to be used for now`},{Category:"Experts",Title:"Karen McChesney",Subtitle:"Head of Credit & Commercial Finance",Description:"Karen McChesney is a highly skilled professional with a wealth of knowledge and experience in finance. Karen's attention to detail and analytical skills have been instrumental in ensuring accuracy and efficiency in financial reporting and budget management. Karen's dedication and commitment to Hireco and its clients is a big contribution to our success.",CTA:"Linkedin, email, whatsapp message? request meeting?","Image/Videos":"EXPERTS_KAREN McCHESNEY.jpg","Comments (Not extracted)":`KF/LG to film w/c 12.6 latest
Still to be used for now`},{Category:"Experts",Title:"Tim Attwood",Subtitle:"Head of Engineering & Compliance",Description:`Strong attributes in communications with both clients and staff, complimented by a natural character of being a self-starter with good initiative and awareness.

A seasoned professional who balances decision making with day-to-day operational concerns

Possessing a demonstrated talent for building team work ,also motivating and developing people to improve the efficiency and profitability of the company

Successful history managing fast business growth whilst maintaining operational excellence

Specialties: A highly motivated individual possessing a unique blend of expertise and experience in Client relations, Operations, Engineering and Senior Management. Results oriented with strong leadership skills, underpinned by a clear understanding of strategic, organisational and people issues gained through prior senior client focused roles. An excellent communicator at all levels. I am a reliable, trustworthy facilitator who will deliver tangible benefits and drive change.

CORE EXECUTIVE MANAGEMENT SKILLS
 
 Managing fast business growth whilst maintaining operational excellence 
 Demonstrate initiatives with supply chain cost reductions whilst maintaining service.
 Strategic planning and implementation
 Finance, budgeting, cash flow management and Administration
 Exceeding goals and objectives and implementing department KPIs
 Building and maintaining professional relationships
 Team development and training and implementing Individual Key objectives.
`,CTA:"Linkedin, email, whatsapp message? request meeting?","Image/Videos":"","Comments (Not extracted)":`KF/LG to film w/c 12.6 latest
Still to be used for now`},{Category:"Experts",Title:"Paul Jackson",Subtitle:"MD Used Trailers",Description:`Paul Jackson is an experienced Asset Disposal Manager at Hireco with over 30 years of experience in the industry. He is a highly skilled and knowledgeable professional who is dedicated to helping businesses dispose of their assets in the most efficient and cost-effective way possible.

Paul has a deep understanding of the asset disposal process, and he knows how to navigate the complexities of the industry to ensure that his clients get the best possible outcomes. He has a proven track record of success, having helped Hireco dispose of their assets in a way that maximizes their return on investment.

In his role as Asset Disposal Manager, Paul is responsible for overseeing all aspects of the asset disposal process, from initial assessment and valuation to final sale and disposal. He works closely with clients to understand their unique needs and objectives, and he develops customized disposal strategies that are tailored to each client's specific requirements.


In addition to his expertise in asset disposal, Paul is also a highly skilled communicator and team leader. He is able to build strong relationships with clients, colleagues, and stakeholders, and he is committed to delivering outstanding customer service and support.

Overall, Paul is a highly respected and trusted asset disposal professional who is dedicated to helping businesses achieve their goals. His extensive experience, deep knowledge, and commitment to excellence make him an invaluable asset to Hireco and its clients.

`,CTA:"Linkedin, email, whatsapp message? request meeting?","Image/Videos":"","Comments (Not extracted)":`KF/LG to film w/c 12.6 latest
Still to be used for now`},{Category:"Experts",Title:"Tom Baker",Subtitle:"Asset Performance Manager",Description:"Experienced Sales Manager with a demonstrated history of working in the transportation and haulage industry. Strong sales professional with a Bachelors Degree focused in Motorsports Engineering and Technology from Staffordshire University.",CTA:"Linkedin, email, whatsapp message? request meeting?","Image/Videos":"","Comments (Not extracted)":`KF/LG to film w/c 12.6 latest
Still to be used for now`},{Category:"Experts",Title:"Chris Heather",Subtitle:"UK Rentals Manager",Description:`Chris Heather is an experienced professional in the rental industry, having started his career in the field straight out of school. With years of expertise under his belt, Chris is an expert in rental and runs our rental fleet, ensuring that our clients' short-term needs are met with the right stock levels.

Chris is passionate about his work and has a deep understanding of the rental industry. He is well-versed in the needs of clients across various industries and works tirelessly to ensure that our rental fleet is equipped with the right equipment to meet their needs.

One of Chris's key strengths is his ability to match clients' short-term rental needs with the right stock levels. He understands that every client's needs are unique, and works closely with them to ensure that the rental equipment they need is available when they need it.

Chris's dedication to his work and his commitment to providing exceptional customer service have earned him the respect and admiration of his colleagues and clients alike. He is known for his attention to detail, his ability to deliver results, and his willingness to go above and beyond to meet his clients' needs.

In conclusion, Chris Heather is an expert in rental with years of experience in the field. He is passionate about his work and has a deep understanding of the industry and the needs of his clients. He is a valuable asset to our rental fleet, and his dedication to providing exceptional customer service makes him an invaluable partner for any business in need of short-term rental equipment.
`,CTA:"Linkedin, email, whatsapp message? request meeting?","Image/Videos":"","Comments (Not extracted)":"Still to be used for nowThese can be clicked as well as the actual CTA for TRAILER, TRUCK ETC. BUT these specific images will give you the detail on that specific model of asset - nothing heavy, just name, model, manufacturer otpiion and as always the ability to bespoke build/customise to your fleets needs"},{Category:"Source",Title:"TRAILER",Subtitle:"",Description:`We are the trailer experts  the largest purchaser of trailers in the UK. But we go beyond the trailer. 

Every trailer is fitted with the latest smart technology, allowing us to be your digital transport manager.

Ultimately we want to deliver real time reporting through and one cost for your PPK.

Whatever your sector or specialism, we can customise trailers to suit your business from the latest TK Advancer Fridges to Skels and Curtainsiders. From the best brands in the business, Dennison, Krone, SDC and beyond. 

Want to know more? Click here to Contact us now for a meeting with one of our experts today, or whenever suits you.`,CTA:`> TRUCK
> VAN
> FINANCE`,"Image/Videos":"","Comments (Not extracted)":"Pics (one or two pics of key trailers tbc) and testimonial (RS SMITH? or Woodlands) video to follow"},{Category:"Source",Title:"TRUCK",Subtitle:"",Description:`The Smart Choice. 

Keep your fleet up to date with the latest innovations from the greatest brands. 

Every Hireco truck is equipped with the latest smart tech, helping you maximise uptime. Especially when coupled with our service and maintenance packages, giving you the very best and latest tech coupled with the best engineering expertise the industry has to offer.

Want to know more? Click here to Contact us now for a meeting with one of our experts today, or whenever suits you.`,CTA:`(click through options)
> TRAILER
> VAN
> FINANCE`,"Image/Videos":"","Comments (Not extracted)":""},{Category:"Source",Title:"VAN or LCV",Subtitle:"",Description:"Hireco delivers industry leading light commercial vehicle hire. VW, Mercedes, MAN, Peugeot. Construction, Utilities or education. Whatever your LCV requirements, we can source a single van or an entire fleet - bespoke to your precise specs.    The right van solution for you. We understand the landscape is changing within the LCV market and we want to help your business adapt to those changes. We have the expertise to source any vehicle, in any number with flexible financing to match - including fixed monthly payments which allow you to manage your fleet costs effectively. Talk to Hireco to find out how we are helping companies across the UK change for the better.",CTA:`(click through options)
> TRAILER
> TRUCK
> FINANCE`,"Image/Videos":"MULTIPLE VANS.MP4, WELFARE VAN ","Comments (Not extracted)":"Video loop of WELFARE VAN walk around edited & MULTIPLE VANS.MP4"},{Category:"Source",Title:"FINANCE",Subtitle:"Your expert, flexible financial partner",Description:`Fixed or flexible? The assets you need financed in a way that works for your business. Yes, we provide the asset your business needs. But we can also manage their effective utilisation, maximising performance, uptime and value. We can then replace an asset at the right time before it becomes outdated, obsolete or an expensive drain on your business's finances and ambitions.

Our expert funders are happy to talk to you about finance on assets you are purchasing or leasing from Hireco. Hireco are also experts in sale and leaseback schemes allowing your business to free up cash tied up in assets. We can lease back your fleet inclusive of maintenance allowing you to do what you do best.   Talk to one of our experts today.`,CTA:`(click through options)
> TRAILER
> TRUCK
> VAN.  Talk to one of our finance experts today > Tim MCCarthy.   > Karen McChesney`,"Image/Videos":"","Comments (Not extracted)":""},{Category:"",Title:"",Subtitle:"",Description:"",CTA:"","Image/Videos":"","Comments (Not extracted)":""},{Category:"Technology",Title:"Technology",Subtitle:"Smarter technology",Description:"",CTA:"","Image/Videos":"230203 - 2024 READY - v6.mp4, 221106 - Hireco Deal Social Posts_v2.mp4, Hireco - Brand Film & Tracking System Films Combined (H.264).mp4","Comments (Not extracted)":"These CTA with the EBPMS etc, we need to have the detail appear in another window, like an in-video? that shows the explanation and benefits of the Acronym, but without going to another page everytime - maybe scrolling info???"},{Category:"Technology",Title:"EBPMS, TPMS, DTC, TELEMATICS TRACKING",Subtitle:"",Description:`IMPROVE THE PERFORMANCE, SAFETY AND COST-EFFICIENCY OF YOUR FLEET

Through our next-generation digital transport solution you can:

        Reduce your brake test requirements by up to 75%
        Decrease downtime and increase MPG with real-time tyre updates
        Fix HGV faults without requiring roadside assistance
        Actively monitor the location and performance of your vehicles and drivers

Heres how


ELECTRONIC BRAKING PERFORMANCE MONITORING SYSTEM (EBPMS) 

Reduce your brake test requirements by up to 75%

What is it and how does it work? 
The EBPMS monitors the stopping energy and amount of braking pressure applied to a vehicle. In doing so it can build up performance analytics and reports.

What happens? 
The reports replace traditional brake tests, reducing them from being required four times per year to just once per year. 

Benefits 
- More time on the road
- Less downtime and fewer breakdowns
- Improved vehicle and driver safety 
- Fully verified and approved by the Driver and Vehicle Standards Agency


TYRE PRESSURE MONITORING SYSTEM (TPMS)

Decrease downtime and increase MPG with real-time tyre performance updates

What is it and how does it work? 
A sensor is installed in each tyre that measures pressure, temperature and location. This data is fed back to provide real-time performance updates.

What happens? 
The sensors alert the user to any issues as they occur. For example, an underinflated trailer tyre will give a yellow warning at 115 psi and red warning at 108 psi. 

Benefits
- More time on the road
- Save money on tyre recharges
- Improved MPG 


DIAGNOSTIC TROUBLE CODES (DTC) 

Fix trailer ECU faults without requiring roadside assistance

What is it and how does it work? 
DTC actively monitors red and amber ABS warning lights on the dashboard of HGVs, to identify system errors and suggest self-repair fixes. The technology is already successfully used on Haldex Trailers.

What happens? 
Vehicle performance is checked at all stages of its journey, so faults can be highlighted, along with solutions to address the issue. As a high number of faults are caused by the EBS Suzie Cable or Connector, the information provided often includes self-repair recommendations, meaning the problem can be solved without the need for an engineer.

Benefits
Fault codes are easily diagnosed without requiring roadside assistance. This allows for quick fixes, less downtime and cost savings.


TELEMATICS TRACKING

Actively monitor the location and performance of your vehicles and drivers

What is it and how does it work? 
Using tools including tracking systems, geozone reporting, trip history and speed analysis, telematics tracks data to improve productivity and operational efficiency.

What happens? 
Telematics transmits data such as speed, location, time, driver information and vehicle identification. This provides a number of insights and outputs, including the real-time location of vehicles, speeding alerts, time on the road v time in depot, maintenance reminders, vehicle weight reporting and average response time.
 
Benefits
- Live tracking
- More efficient vehicle and driver planning
- Interactive safety alerts
- Reduced business costs



For friendly, expert advice contact: 

0330 124 5651 
info@hireco.co.uk 
hireco.co.uk 
`,CTA:"","Image/Videos":"","Comments (Not extracted)":""},{Category:"Support",Title:"Support",Subtitle:"Fleet Maintenance",Description:"Our fleet maintenance offering is second to none, from the smart technology we employ to the first class engineers we deploy. Our digital transport solution gives you a 360 degree, preventative support network, which doesn't wait for your fleet to be in trouble before answering your call, it monitors it and pro-actively makes a call to help prevent those small issues becoming big problems. But when you do need us to react quickly and around the clock you can count on us with our 24/7 smart portal and 24/7 response and breakdown cover. full 24/7 tyre management, quick, efficient and quality repairs by engineering experts, all industry complaint to DVSA standards,    Basically we deliver for you, maximum uptime, all of the time.",CTA:"Talk to our Fleet Maintenance expert today: Tim Attwood","Image/Videos":"","Comments (Not extracted)":"Fleet maintenance Belfast trip footage to edit and use here... w/c 1.6."},{Category:"Case Studies ",Title:"",Subtitle:"",Description:"",CTA:"","Image/Videos":"CASE STUDIES","Comments (Not extracted)":"Case studies link to it's own page should be on every page as an option to view... showcasing 3-4 case studies - video and still/copy"}],Qe=OK(zK(t=>({started:!1,activeSlide:0,activeRing:"none",focusRing:"none",numPages:4,activePage:null,activePageNumber:null,currentView:"main",isAnimating:!1,universeStores:null,cameraRefInfo:null,activeCameraAnchor:null,cameraOrbitPoints:C3(1.1,7,.6),returnCameraToOrigin:null,forcePageUpdate:!1,cameraControlsMouseButtons:{left:1,middle:8,right:2,wheel:8},dimensions:{width:window.innerWidth,height:window.innerHeight},scrollControlsInitiated:!1,activeTile:null,activeTileInfo:null,cameraControlsref:null,activeTileRef:null,focusElementRef:null,updateBounds:null,setActiveSlide:e=>t(n=>({activeSlide:e})),setActiveRing:e=>t(n=>({activeRing:e})),setFocusRing:e=>t(n=>({focusRing:e})),setNumPages:e=>t(n=>({numPages:e})),setActivePage:e=>t(n=>({activePage:e})),setActivePageNumber:e=>t(n=>({activePageNumber:e})),setCurrentView:e=>t(n=>({currentView:e})),setIsAnimating:e=>t(n=>({isAnimating:e})),setStarted:e=>t(n=>({started:e})),setUniverseStores:e=>t(n=>({universeStores:e})),setCameraRefInfo:e=>t(n=>({cameraRefInfo:e})),setActiveCameraAnchor:e=>t(n=>({activeCameraAnchor:e})),setCameraOrbitPoints:e=>t(n=>({cameraOrbitPoints:e})),setReturnCameraToOrigin:e=>t(n=>({returnCameraToOrigin:e})),setForcePageUpdate:e=>t(n=>({forcePageUpdate:e})),setCameraControlsMouseButtons:e=>t(n=>({cameraControlsMouseButtons:e})),setDimensions:e=>t(n=>({dimensions:e})),setScrollControlsInitiated:e=>t(n=>({scrollControlsInitiated:e})),setActiveTile:e=>t(n=>({activeTile:e})),setCameraControlsref:e=>t(n=>({cameraControlsref:e})),setActiveTileInfo:e=>t(n=>({activeTileInfo:e})),setActiveTileRef:e=>t(n=>({activeTileRef:e})),setFocusElementRef:e=>t(n=>({focusElementRef:e})),setUpdateBounds:e=>t(n=>({updateBounds:e})),ringNames:GK,sectionContent:e=>Kx.filter(n=>n.Category==e),sectionCopy:e=>HK[e],allContent:Kx,getContentByTitle:e=>Kx.filter(n=>n.Title===e),generateCirclePoints:(e,n,r)=>C3(e,n,r),getUniverseStores:()=>VK()})));function C3(t,e,n=0){const r=[];for(let i=0;i<e;i++){const s=i/e*Math.PI*2;let o=new V(Math.cos(s)*t,n,Math.sin(s)*t);r.push(o)}return r}const VK=()=>{let t=[],e=[.831,.25,.007];for(let s=0;s<15;s++){let o=[];o.push(e[0]*s),o.push(e[1]*s),o.push(e[2]*s),t.push(o)}const n={},i=(()=>{const{nodes:s,materials:o}=En("./models/hireco_3DScene_sectLocation-v3.glb");let a={};return Object.keys(s).forEach(l=>{let u=s[l];u.name=u.name.replace("_location",""),u.type=="Mesh"&&(a[u.name]=u.position)}),a})();return{colorValues:t,universeMultipliers:n,sectionPositions:i}};En.preload("./models/hireco_3DScene_sectLocation-v3.glb");function WK(t){const e=R.useRef(),n=R.useRef(),{nodes:r,materials:i,animations:s}=En("./models/iconography/INCONOGRAPHY_Expert_v16.glb"),{actions:o}=LL(s,e),a=Qe(c=>c.activeRing),[l,u]=R.useState([5,5,5]);return jr((c,f)=>{const m=c.clock.getElapsedTime();let g=.8;a!="none"&&(g=2),u([1.5*g+Math.cos(m)/10*3,1.5*g+Math.cos(m)/10*3,1.5*g+Math.cos(m)/10*3])}),new $e(2,2,2),R.useEffect(()=>{o.bulb_boltSpin_Action.play(),o.bulb_mainSpin_Action.play(),o.pound_mainSpin_Action.play(),o.powerStation_bar1_Action.play(),o.powerStation_bar2_Action.play(),o.powerStation_bar3_Action.play(),o.powerStation_boltSpin_Action.play(),o.powerStation_mainSpin_Action.play()},[o]),ge.jsx("group",{ref:e,...t,dispose:null,children:ge.jsxs("group",{name:"Scene",children:[ge.jsxs("group",{name:"bulb",children:[ge.jsx("mesh",{name:"BULB_BOLT",castShadow:!0,receiveShadow:!0,geometry:r.BULB_BOLT.geometry,material:i.EMMISION,position:[0,.11,0],scale:1.05,children:ge.jsx("meshBasicMaterial",{emissiveIntensity:2,toneMapped:!1,position:[0,1,0],color:l,ref:n})}),ge.jsx("mesh",{name:"BULB_BOTTOM",castShadow:!0,receiveShadow:!0,geometry:r.BULB_BOTTOM.geometry,material:i["Hireco - White Metal - Light Bulb 2"],position:[0,.11,0],scale:[.13,.04,.13]}),ge.jsx("mesh",{name:"BULB_MIDDLE",castShadow:!0,receiveShadow:!0,geometry:r.BULB_MIDDLE.geometry,material:i["Hireco - White Metal - Light Bulb 1"],position:[0,.11,0],rotation:[-.02,0,0],scale:[.13,.03,.13]}),ge.jsx("mesh",{name:"BULB",castShadow:!0,receiveShadow:!0,geometry:r.BULB.geometry,material:i["Hireco - White Glass.001"],position:[0,.11,0],scale:[.13,.03,.13]})]}),ge.jsx("group",{name:"poundSymbol",scale:0,children:ge.jsx("mesh",{name:"POUND_SYMBOL",castShadow:!0,receiveShadow:!0,geometry:r.POUND_SYMBOL.geometry,material:i["Hireco-whiteMetal-poundSymbol-1"],position:[-.01,-.07,0]})}),ge.jsxs("group",{name:"powerStation",scale:0,children:[ge.jsxs("group",{name:"POWER_STATION",scale:1.18,children:[ge.jsx("mesh",{name:"POWER_BAR002",castShadow:!0,receiveShadow:!0,geometry:r.POWER_BAR002.geometry,material:i.EMMISION,position:[0,-.26,0],scale:0}),ge.jsx("mesh",{name:"POWER_BAR001",castShadow:!0,receiveShadow:!0,geometry:r.POWER_BAR001.geometry,material:i.EMMISION,position:[0,-.35,0],scale:0}),ge.jsx("mesh",{name:"POWER_BAR003",castShadow:!0,receiveShadow:!0,geometry:r.POWER_BAR003.geometry,material:i.EMMISION,position:[0,-.17,0],scale:0}),ge.jsx("mesh",{name:"BOLT001",castShadow:!0,receiveShadow:!0,geometry:r.BOLT001.geometry,material:i.EMMISION,position:[0,.01,0],scale:.34}),ge.jsx("mesh",{name:"PLUG_LEFT_",castShadow:!0,receiveShadow:!0,geometry:r.PLUG_LEFT_.geometry,material:i["Hireco - White Metal - Power Station 2"],position:[.16,.03,0],rotation:[Math.PI,0,0],scale:-.65}),ge.jsx("mesh",{name:"PLUG_RIGHT",castShadow:!0,receiveShadow:!0,geometry:r.PLUG_RIGHT.geometry,material:i["Hireco - White Metal - Light Bulb 3"],position:[-.17,.03,0],scale:.65}),ge.jsx("mesh",{name:"POWERSTATION_STATION",castShadow:!0,receiveShadow:!0,geometry:r.POWERSTATION_STATION.geometry,material:i["Hireco - White Metal - Power Station 1"]})]}),ge.jsx("mesh",{name:"PLUGS",castShadow:!0,receiveShadow:!0,geometry:r.PLUGS.geometry,material:i["Hireco - White Metal - Light Bulb 4"],scale:1.18})]})]})})}En.preload("./models/iconography/INCONOGRAPHY_Expert_v16.glb");En.preload("./models/iconography/INCONOGRAPHY_welfare_v1.glb");function jK(t,e){switch(t){case"ring_5":return ge.jsx(ge.Fragment,{children:ge.jsx(hK,{index:e})});default:return ge.jsx(ge.Fragment,{children:ge.jsx(WK,{index:e})})}}function $K(t){const{index:e,position:n,nodeName:r}=t,i=Qe(h=>h.activeRing,xi),s=Qe(h=>h.setActiveRing);Qe(h=>h.focusRing),Qe(h=>h.setFocusRing);const o=Qe(h=>h.currentView),[a,l]=R.useState(JK(e)),[u,c]=R.useState(!1);Pu({scale:u?a*1.5:a});const f=R.useRef();return jr(h=>{f.current.rotation.y+=.0033;const m=h.clock.getElapsedTime();let g=1.5+Math.sin(m*2)/10;i==r&&(f.current.scale.x=g,f.current.scale.y=g,f.current.scale.z=g)}),R.useEffect(()=>{},[i]),ge.jsxs("group",{onClick:()=>{o!="page"&&s(r)},ref:f,visible:o!="page"||o=="page"&&i!=r,onPointerEnter:()=>{},children:[ge.jsx(e$,{scale:.7,children:ge.jsx("meshStandardMaterial",{color:"black",transparent:!0,opacity:.1,side:Hr})}),jK(r,e)]})}function JK(t){let e=.4;return t=t+4,e=e/t,e}function XK(t){return R.useRef(),ge.jsxs(ge.Fragment,{children:[ge.jsx(KK,{}),ge.jsx(QK,{})]})}const KK=t=>{Qe(h=>h.focusRing),Qe(h=>h.activeRing);const e=Qe(h=>h.currentView);Qe(h=>h.universeStores),Qe(h=>h.getUniverseStores)();const r=R.useRef();R.useRef(),R.useRef(),R.useRef();const i=R.useRef(),{nodes:s,materials:o}=En("./models/hireco_3DScene_v16.glb"),{nodes:a,materials:l}=En("./models/universe/hireco_3DScene_ringR-v1-forGLTF.glb");En("./models/universe/hireco_3DScene_ringRAndO-v1-forGLTF.glb");const u=Object.values(a).filter(h=>h.type=="Mesh"),c=Object.values(s).filter(h=>h.type=="Mesh");u.forEach(h=>{h.name=h.name.split("-")[0]});const f={opacity:0,depthTest:!1};return jr(h=>{}),ge.jsx(ge.Fragment,{children:ge.jsx("group",{ref:r,children:ge.jsx("group",{ref:i,children:c.map((h,m)=>{R.useRef(),R.useRef();const{name:g}=h;if(g=="ring_1")return ge.jsx(ge.Fragment,{});Qe(w=>w.focusRing);const v=Qe(w=>w.activeRing),{translateYActive:y,emissiveIntensity:_,ringOpacity:x}=Pu({translateYActive:(v==g,0),translateYHidden:(e=="focus"&&v!=g,0),emissiveIntensity:e=="focus"||e=="page"?0:2,ringOpacity:e!="page"||e=="page"&&v==g?1:0,config:f.gentle});return ge.jsx(br.mesh,{children:ge.jsx(br.mesh,{"position-y":y,children:ge.jsx(YK,{nodeName:g,index:m})})},"flatGroupMesh"+g)})})})})};function YK(t){const{index:e,nodeName:n,rotationAmount:r}=t;if(n.includes("H_")||n=="ring_1")return null;const i=Qe(U=>U.getUniverseStores),{sectionPositions:s}=i(),o=s[n],a=Qe(U=>U.setFocusRing),l=Qe(U=>U.focusRing),u=Qe(U=>U.activeRing),c=Qe(U=>U.setActiveRing),f=Qe(U=>U.currentView),h=Qe(U=>U.setCurrentView),m=Qe(U=>U.setUniverseStores);Qe(U=>U.universeStores),R.useEffect(()=>{m(i())},[]);const g=R.useRef(),v=R.useRef(),[y,_]=R.useState(C(e)),{iconScale:x,initialTextScale:w,focusTextScale:b}=Pu({iconScale:l==n?y*1.25:y,initialTextScale:f=="focus"?0:1,focusTextScale:f=="focus"?1:0,config:Tf.gentle});if(n=="ring_1")return ge.jsx(ge.Fragment,{});let E={ring_6:{title:"WELFARE",subTitle:"ENVIRONMENT + PARK"},ring_5:{title:"TECHNOLOGY",subTitle:"SMART + ASSET"},ring_4:{title:"SUPPORT",subTitle:"MAINTAIN + FINANCE"},ring_3:{title:"SOURCE",subTitle:"ASSETS + FINANCE"},ring_2:{title:"EXPERTS",subTitle:"THE TEAM"}};jr(({camera:U})=>{g.current.lookAt(U.position)});function C(U){let N=25;return U=U+3,N=N/U,N}function P(){a(n)}function M(){a("none")}const{iconScalar:B,groupPositionY:D,iconElevationActive:k,iconPageScaler:O}=Pu({iconScalar:u==n?1.2:.8,groupPositionY:u==n?.1:0,translateYHidden:f=="focus"&&u!=n?-.05:0,iconElevationActive:u==n?.1:.05,iconPageScaler:f=="page"?.33:1,config:Tf.gentle});return Qe(U=>U.setIsAnimating),ge.jsx(ge.Fragment,{children:ge.jsx(br.mesh,{"position-y":k,children:ge.jsxs("group",{ref:v,onPointerOver:()=>{P(),document.body.style.cursor="pointer"},onPointerOut:()=>{M(),document.body.style.cursor="default"},"position-y":.02,children:[ge.jsx("group",{visible:f!="page"&&f!="focus"||f=="focus"&&u==n,children:ge.jsx(br.mesh,{scale:w,children:ge.jsxs("group",{position:[0,25/(e+3),0],children:[ge.jsx(ZT,{font:"./fonts/Eveleth Clean Thin.otf",anchorX:"center",anchorY:"middle",position:o,fontSize:0,outlineOffsetX:0,outlineOffsetY:0,outlineBlur:.025,color:16777215,opacity:2}),ge.jsx(ZT,{font:"./fonts/Eveleth Clean Regular.otf",anchorX:"center",anchorY:"middle",position:o,fontSize:[5,3,2,2,2,15][e],outlineOffsetX:0,outlineOffsetY:0,outlineBlur:.025,opacity:2,ref:g,color:16777215,children:E[n].title})]})})}),ge.jsx("group",{children:ge.jsx(br.mesh,{scale:x,position:o,onClick:()=>{c(n),h("page")},children:ge.jsx("group",{children:ge.jsx(br.mesh,{scale:O,children:ge.jsx(br.mesh,{scale:B,children:ge.jsx($K,{position:o,index:e,nodeName:n})})})})})})]})})})}function QK(t){const{nodes:e,materials:n}=En("./models/universe/universe_gradient_v5.glb"),r=Qe(u=>u.getUniverseStores),i=Qe(u=>u.activeTile),{colorValues:s}=r();let o=new $e(...s[1]);Object.keys(n).forEach(u=>{let c=2;n[u].emissive=new $e(.0831*c,.25*c,.007*c),n[u].transparent=!0,n[u].alpha=!0,n[u].emissiveIntensity=10,n[u].color=o,n[u].toneMapped=!1});const{activeTileOpacity:a}=Pu({activeTileOpacity:i?.7:1,config:Tf.gentle}),l=R.useRef();return R.useRef(),ge.jsx(ge.Fragment,{children:ge.jsxs("group",{...t,dispose:null,"scale-y":1,children:[ge.jsx("mesh",{geometry:e.ring_6.geometry,material:n["RING.006"],ref:l,children:ge.jsx(br.meshBasicMaterial,{...n["RING.006"],opacity:a})}),ge.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.ring_5.geometry,material:n["RING.006"],children:ge.jsx(br.meshBasicMaterial,{...n["RING.006"],opacity:a})}),ge.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.ring_3.geometry,material:n.RINGS,children:ge.jsx(br.meshBasicMaterial,{...n.RINGS,opacity:a})}),ge.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.ring_4.geometry,material:n["RINGS.002"],children:ge.jsx(br.meshBasicMaterial,{...n["RINGS.002"],opacity:a})}),ge.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.ring_2.geometry,material:n["RINGS.001"],children:ge.jsx(br.meshBasicMaterial,{...n["RINGS.001"],opacity:a})})]})})}En.preload("./models/universe/universe_gradient_v5.glb");En.preload("./models/hireco_3DScene_v16.glb");En.preload("./models/universe/hireco_3DScene_ringR-v1-forGLTF.glb");En.preload("./models/universe/hireco_3DScene_ringRAndO-v1-forGLTF.glb");En.preload("./models/hireco_3DScene_sectLocation-v1.glb");En.preload("./models/iconography/INCONOGRAPHY_source_van_v1.glb");En.preload("./models/universe/ICONOGRAPHY__HMiddle_v2.glb");En.preload("./models/misc/INCONOGRAPHY_arrow_v1.glb");function qK(){const t=Qe(o=>o.activeRing),e=Qe(o=>o.currentView),n=Qe(o=>o.activePage),r=Qe(o=>o.activeTile),i=Qe(o=>o.scrollControlsInitiated,xi);let s={};return s.activeRing=t,s.currentView=e,s.activePage=n,s.scrollControlsInitiated=i,s.activeTile=r,R.useEffect(()=>{console.table(s)},[s]),ge.jsx(ge.Fragment,{})}const ZK=`precision mediump float;
#define GLSLIFY 1
varying vec2 vUv;varying float vWave;uniform float uTime;vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}void main(){vUv=uv;vec3 pos=position;float noiseFreq=0.2;float noiseAmp=0.14;vec3 noisePos=vec3(pos.x*noiseFreq+uTime/10.0,pos.y,pos.z);pos.z+=snoise(noisePos)*noiseAmp;vWave=pos.z;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.0);}`,eY=`precision mediump float;
#define GLSLIFY 1
uniform vec3 uColor;uniform float uTime;uniform float uOpacity;uniform sampler2D uTexture;varying vec2 vUv;varying float vWave;void main(){float wave=-tan(vWave*0.8)*1.0;vec3 texture=texture2D(uTexture,vUv+wave).rgb;gl_FragColor=vec4(texture,uOpacity);}`,tY=Kj({transparent:!0,uTime:0,uOpacity:.2,uColor:new $e(0,0,0),uTexture:new an},ZK,eY);Ip({WaveShaderMaterial:tY});const nY=t=>{const{imageSrc:e,title:n,subtitle:r,description:i,cta:s,id:o,planeArgs:a,activeCameraPosition:l,position:u}=t,c=Qe(B=>B.activeTile),f=Qe(B=>B.setActiveTile),h=Qe(B=>B.activeTileRef),m=Qe(B=>B.setActiveTileRef);R.useRef();const g=R.useRef(),v=R.useRef();jr(B=>{}),R.useEffect(()=>{c==o&&M(v)},[c]);let _=`./images/${e}`;_.includes("EXPERTS")||(_="./images/1.jpg");const[x]=Nu(aA,[_]),{activeScale:w,groupScale:b,activeOpacity:E,activeRenderOrder:C,depthTestBoolean:P}=Pu({activeScale:c===o?2:1,activeRenderOrder:c===o?100:-5,groupScale:c&&c!=o?.7:1,depthTestBoolean:c===o,activeOpacity:c===o?1:.2,config:Tf.gentle});R.useEffect(()=>{},[h]),Qe(B=>B.focusElementRef,xi);const M=Qe(B=>B.setFocusElementRef,xi);return ge.jsx(br.mesh,{scale:b,children:ge.jsx(br.mesh,{scale:w,children:ge.jsxs("group",{ref:v,children:[c==o?ge.jsx(ge.Fragment,{children:ge.jsx("group",{"position-x":1,"rotation-y":-.2,children:ge.jsx(eW,{transform:!0,style:{opacity:c==o?1:0,transform:`scale(${c==o?1:.25})`,pointerEvents:"none"},children:ge.jsx(rY,{})})})}):ge.jsx(ge.Fragment,{}),ge.jsxs("mesh",{ref:g,onClick:()=>{console.log("tileClick"),f(o),m(g)},onPointerOver:()=>{document.body.style.cursor="pointer"},onPointerOut:()=>{document.body.style.cursor="default"},depthTest:!1,renderOrder:10,children:[ge.jsx("planeGeometry",{attach:"geometry",args:[.65,.65]}),ge.jsx(br.meshBasicMaterial,{attach:"material",map:x,transparent:!0,opacity:E,depthTest:P})]}),ge.jsx(t$,{args:[.05,.05],"position-x":.3,children:ge.jsx("meshStandardMaterial",{transparent:!0,opacity:0,alpha:!0,depthTest:!1})})]})})})};function rY(t){const e=Qe(y=>y.activeTile,xi),n=Qe(y=>y.sectionContent),r=Qe(y=>y.sectionCopy),i=Qe(y=>y.getContentByTitle),s=Qe(y=>y.activeRing,xi),a=Qe(y=>y.ringNames)[s];n(a);const l=r(a),[u,c]=R.useState(null),{subTitle:f,description:h}=l;let m,g,v;return R.useEffect(()=>{if(!e)return c(null);const y=i(e);c(...y)},[e]),u?(m=e,g=u.Subtitle,v=u.Description):(m=a,g=f,v=h),ge.jsx(ge.Fragment,{children:ge.jsxs("div",{className:"max-w-[50px] pointer-events-none  text-white bg-black p-[1px] bg-opacity-50 ",children:[ge.jsx("h1",{className:"text-[4px] leading-[5px] text-[#d19a41] font-[600]",children:m}),ge.jsx("h2",{className:"text-[1.1px] leading-[4px]",children:g}),ge.jsx("p",{className:"text-[1px] leading-tight",children:v})]})})}const iY=[{position:{x:.39827128845574944,y:.34516304304660034,z:.7791881275473871},rotation:{isEuler:!0,_x:-.41699894003192645,_y:.4371768409181672,_z:.18539576602152652,_order:"XYZ"},quaternion:{isQuaternion:!0,_x:-.1815608744710534,_y:.22994887686459087,_z:.04371162882843928,_w:.9551169857117946},target:{x:0,y:0,z:0}},{position:{x:.7977129887390735,y:.12429882190203861,z:-.4827996210385167},rotation:{isEuler:!0,_x:-2.8970583607087033,_y:.9521652238755133,_z:2.9410417236806166,_order:"XYZ"},quaternion:{isQuaternion:!0,_x:-.03269617278202813,_y:.8833260696632678,_z:.06231873545176898,_w:.4634462106332774},target:{x:.0480165757642825,y:-.004904414631124843,z:.03499110239659832}},{position:{x:.6654720925691784,y:.010766819112096343,z:.49894107339242855},rotation:{_x:-.32611480197472004,_y:.9740991950392149,_z:.2727760239055629,_order:"XYZ"},quaternion:{isQuaternion:!0,_x:-.07933617123718667,_y:.4770294711231334,_z:.0432904137289411,_w:.8742279998333299},target:{x:-.015152511943905156,y:-.13735318121386988,z:.06096189399714853}},{position:{x:-.2997864838610931,y:.4009729030388054,z:-.4621390826902493},rotation:{_x:-2.389051406695402,_y:-.18702109159762004,_z:-2.969221377202601,_order:"XYZ"},quaternion:{isQuaternion:!0,_x:.04552378819196901,_y:.925494696266657,_z:.3570159891721083,_w:-.11801158996641807},target:{x:-.1483606995415511,y:-.14596753926007547,z:.12197779476110159}}],R0={focus:{none:{position:{x:.39827128845574944,y:.34516304304660034,z:.7791881275473871},target:{x:0,y:0,z:0}},ring_2:{position:{x:-.16889552656980575,y:.31964320304166,z:.4459106111912658},target:{x:-.1715270695290439,y:.0479547823954331,z:-.02668329578756707}},ring_3:{position:{x:-.17644193149280857,y:.25819029134269683,z:.34138439733652953},target:{x:.08021711021845156,y:.19551296708981508,z:.1333549839433993}},ring_4:{position:{x:-.20462185661013035,y:.363107027837123,z:.3209640793400608},target:{x:-.013476335805394575,y:.3026277593842572,z:.10220837782360441}},ring_5:{position:{x:.35842946911277546,y:.2907658174598742,z:.4518979276816969},target:{x:.5822137135423633,y:.09224383093258962,z:.027012510706524325}},ring_6:{position:{x:-.11283537933468893,y:.23378727815581074,z:.6781843424274799},target:{x:-.3271261642291787,y:.26887598819940306,z:.011133352834251051}},pageSection:{position:{x:.6367764799058464,y:.02575067199102174,z:.8197320773716226},rotation:{isEuler:!0,_x:.2958178557573598,_y:.5678515229569016,_z:-.1624619456530673,_order:"XYZ"},quaternion:{isQuaternion:!0,_x:.11852174376106969,_y:.28763329671625587,_z:-.035896367448952596,_w:.949700549478594},target:{x:.23306836128254418,y:.21023451620411804,z:.21439031135463676}}},normal:{}},sY=t=>{R.useState([]);const e=R.useRef(),n=R.useRef(),r=Qe(c=>c.activeRing),i=Qe(c=>c.getUniverseStores),s=Qe(c=>c.currentView);Qe(c=>c.sectionContent);const o=Qe(c=>c.allContent);Qe(c=>c.activeTile),Qe(c=>c.setActiveTile);const{sectionPositions:a}=i();jr(({camera:c})=>{e.current});const[l,u]=R.useState(["Experts","Source","Support","Technology","Welfare"]);return ge.jsx(ge.Fragment,{children:ge.jsx(br.mesh,{visible:s=="page",ref:e,children:l.map((c,f)=>{let m="ring_"+(f+2);const g=a[m],v=o.filter(y=>y.Category==c);return ge.jsx("group",{position:g,visible:r===m,children:ge.jsx("group",{ref:n,children:ge.jsx(oY,{visible:r===m,content:v})})},"sectionGroup"+f)})})})};function oY({content:t,position:e,visible:n}){const r=Qe(l=>l.activeRing),i=Qe(l=>l.ringNames),s=Qe(l=>l.currentView);Qe(l=>l.activeTile),R.useState(i[r]);const[o,a]=R.useState(R0.focus[r].position);if(t)return t.map((l,u)=>{const{Title:c,Subtitle:f,Description:h,CTA:m}=l;let g;g=l["Image/Videos"].split(","),g[0].length<1&&(g=["1.jpg"]);const v=R.useRef();let y=Math.floor(Math.random()*(2-1+1)+1),_=[[7,4],[4,9]];const x=R.useRef();jr(({camera:C})=>{const P=new V(C.position.x,C.position.y,C.position.z);v.current.lookAt(P)});const[w,b]=R.useState({x:Yx(-2,2),y:Yx(-2,2),z:Yx(-2,2)}),{contentPosition:E}=Pu({contentPosition:s=="page"?[w.x,w.y,w.z]:[0,0,0],config:Tf.gentle});return ge.jsx(ge.Fragment,{children:ge.jsx("group",{ref:x,children:ge.jsx(br.mesh,{visible:s=="page",position:E,children:ge.jsx("group",{ref:v,position:[0,2,0],children:ge.jsx(nY,{id:c,planeArgs:[..._[y-1],5,5],imageSrc:g[0],title:c,subtitle:f,description:h,cta:m,activeCameraPosition:o,visible:n})})},"tile - "+u)})})})}(function(){const t=new V,e=new kf,n=new sr,r=new V;return function(i){t.x=Math.random()*40-20,t.y=Math.random()*40-20,t.z=Math.random()*40-20,e.x=Math.random()*2*Math.PI,e.y=Math.random()*2*Math.PI,e.z=Math.random()*2*Math.PI,n.setFromEuler(e),r.x=r.y=r.z=Math.random()*1,i.compose(t,n,r)}})();function Yx(t,e){let n=Math.random()*(e-t)+t;return n<.075&&n>-.075&&(n=n*1.5),n}function aY(t){return new Promise(e=>{setTimeout(()=>{e("resolved")},t*100)})}async function lY(t){await aY(t)}function uY(...t){return e=>t.forEach(n=>function(r,i){typeof r=="function"?r(i):r!=null&&(r.current=i)}(n,e))}const Ak=R.forwardRef((t,e)=>{const{children:n,...r}=t;return R.Children.toArray(n).some(T3)?R.createElement(R.Fragment,null,R.Children.map(n,i=>T3(i)?R.createElement(dS,rn({},r,{ref:e}),i.props.children):i)):R.createElement(dS,rn({},r,{ref:e}),n)});Ak.displayName="Slot";const dS=R.forwardRef((t,e)=>{const{children:n,...r}=t;return R.isValidElement(n)?R.cloneElement(n,{...fY(r,n.props),ref:uY(e,n.ref)}):R.Children.count(n)>1?R.Children.only(null):null});dS.displayName="SlotClone";const cY=({children:t})=>R.createElement(R.Fragment,null,t);function T3(t){return R.isValidElement(t)&&t.type===cY}function fY(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?n[r]=(...o)=>{s==null||s(...o),i==null||i(...o)}:r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}const dY=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((t,e)=>({...t,[e]:R.forwardRef((n,r)=>{const{asChild:i,...s}=n,o=i?Ak:e;return R.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),R.createElement(o,rn({},s,{ref:r}))})}),{}),hY=Boolean(globalThis==null?void 0:globalThis.document)?R.useLayoutEffect:()=>{},pY=R.forwardRef((t,e)=>{var n,r;const{containerRef:i,style:s,...o}=t,a=(n=i==null?void 0:i.current)!==null&&n!==void 0?n:globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,[,l]=R.useState({});return hY(()=>{l({})},[]),a?Cb.createPortal(R.createElement(dY.div,rn({"data-radix-portal":""},o,{ref:e,style:a===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...s}:void 0})),a):null}),mY=pY;var R3=Object.prototype.hasOwnProperty;function lp(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&lp(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(R3.call(t,n)&&++r&&!R3.call(e,n)||!(n in e)||!lp(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function Vp(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}var xy=function(e,n,r,i){this.name=e,this.fn=n,this.args=r,this.modifiers=i};xy.prototype._test=function(e){var n=this.fn;try{cf(this.modifiers.slice(),n,this)(e)}catch{n=function(){return!1}}try{return cf(this.modifiers.slice(),n,this)(e)}catch{return!1}};xy.prototype._check=function(e){try{cf(this.modifiers.slice(),this.fn,this)(e)}catch{if(cf(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!cf(this.modifiers.slice(),this.fn,this)(e))throw null};xy.prototype._testAsync=function(e){var n=this;return new Promise(function(r,i){Ek(n.modifiers.slice(),n.fn,n)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function Mk(t,e){return e===void 0&&(e="simple"),typeof t=="object"?t[e]:t}function cf(t,e,n){if(t.length){var r=t.shift(),i=cf(t,e,n);return r.perform(i,n)}else return Mk(e)}function Ek(t,e,n){if(t.length){var r=t.shift(),i=Ek(t,e,n);return r.performAsync(i,n)}else return function(s){return Promise.resolve(Mk(e,"async")(s))}}var gY=function(e,n,r){this.name=e,this.perform=n,this.performAsync=r},VA=function(t){function e(n,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];t.call(this,o),t.captureStackTrace&&t.captureStackTrace(this,e),this.rule=n,this.value=r,this.cause=i,this.target=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),go=function(e,n){e===void 0&&(e=[]),n===void 0&&(n=[]),this.chain=e,this.nextRuleModifiers=n};go.prototype._applyRule=function(e,n){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new xy(n,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};go.prototype._applyModifier=function(e,n){return this.nextRuleModifiers.push(new gY(n,e.simple,e.async)),this};go.prototype._clone=function(){return new go(this.chain.slice(),this.nextRuleModifiers.slice())};go.prototype.test=function(e){return this.chain.every(function(n){return n._test(e)})};go.prototype.testAll=function(e){var n=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){n.push(new VA(r,e,i))}}),n};go.prototype.check=function(e){this.chain.forEach(function(n){try{n._check(e)}catch(r){throw new VA(n,e,r)}})};go.prototype.testAsync=function(e){var n=this;return new Promise(function(r,i){Ck(e,n.chain.slice(),r,i)})};function Ck(t,e,n,r){if(e.length){var i=e.shift();i._testAsync(t).then(function(){Ck(t,e,n,r)},function(s){r(new VA(i,t,s))})}else n(t)}var P3=function(t,e){return e&&typeof t=="string"&&t.trim().length===0?!0:t==null};function vY(t,e){return e===void 0&&(e=!1),{simple:function(n){return P3(n,e)||t.check(n)===void 0},async:function(n){return P3(n,e)||t.testAsync(n)}}}function Si(){return typeof Proxy<"u"?Tk(new go):hS(new go)}var up={};Si.extend=function(t){Object.assign(up,t)};Si.clearCustomRules=function(){up={}};function Tk(t){return new Proxy(t,{get:function(n,r){if(r in n)return n[r];var i=Tk(t._clone());if(r in gv)return i._applyModifier(gv[r],r);if(r in up)return i._applyRule(up[r],r);if(r in pS)return i._applyRule(pS[r],r)}})}function hS(t){var e=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var u=hS(s._clone()),c=u._applyRule(i[o],o).apply(void 0,a);return c}}),s},n=e(pS,t),r=e(up,n);return Object.keys(gv).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=hS(r._clone());return s._applyModifier(gv[i],i)}})}),r}var gv={not:{simple:function(t){return function(e){return!t(e)}},async:function(t){return function(e){return Promise.resolve(t(e)).then(function(n){return!n}).catch(function(){return!0})}}},some:{simple:function(t){return function(e){return qg(e).some(function(n){try{return t(n)}catch{return!1}})}},async:function(t){return function(e){return Promise.all(qg(e).map(function(n){try{return t(n).catch(function(){return!1})}catch{return!1}})).then(function(n){return n.some(Boolean)})}}},every:{simple:function(t){return function(e){return e!==!1&&qg(e).every(t)}},async:function(t){return function(e){return Promise.all(qg(e).map(t)).then(function(n){return n.every(Boolean)})}}},strict:{simple:function(t,e){return function(n){return B3(e)&&n&&typeof n=="object"?Object.keys(e.args[0]).length===Object.keys(n).length&&t(n):t(n)}},async:function(t,e){return function(n){return Promise.resolve(t(n)).then(function(r){return B3(e)&&n&&typeof n=="object"?Object.keys(e.args[0]).length===Object.keys(n).length&&r:r}).catch(function(){return!1})}}}};function B3(t){return t&&t.name==="schema"&&t.args.length>0&&typeof t.args[0]=="object"}function qg(t){return typeof t=="string"?t.split(""):t}var pS={equal:function(t){return function(e){return e==t}},exact:function(t){return function(e){return e===t}},number:function(t){return t===void 0&&(t=!0),function(e){return typeof e=="number"&&(t||isFinite(e))}},integer:function(){return function(t){var e=Number.isInteger||yY;return e(t)}},numeric:function(){return function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},string:function(){return Rc("string")},boolean:function(){return Rc("boolean")},undefined:function(){return Rc("undefined")},null:function(){return Rc("null")},array:function(){return Rc("array")},object:function(){return Rc("object")},instanceOf:function(t){return function(e){return e instanceof t}},pattern:function(t){return function(e){return t.test(e)}},lowercase:function(){return function(t){return typeof t=="boolean"||t===t.toLowerCase()&&t.trim()!==""}},uppercase:function(){return function(t){return t===t.toUpperCase()&&t.trim()!==""}},vowel:function(){return function(t){return/^[aeiou]+$/i.test(t)}},consonant:function(){return function(t){return/^(?=[^aeiou])([a-z]+)$/i.test(t)}},first:function(t){return function(e){return e[0]==t}},last:function(t){return function(e){return e[e.length-1]==t}},empty:function(){return function(t){return t.length===0}},length:function(t,e){return function(n){return n.length>=t&&n.length<=(e||t)}},minLength:function(t){return function(e){return e.length>=t}},maxLength:function(t){return function(e){return e.length<=t}},negative:function(){return function(t){return t<0}},positive:function(){return function(t){return t>=0}},between:function(t,e){return function(n){return n>=t&&n<=e}},range:function(t,e){return function(n){return n>=t&&n<=e}},lessThan:function(t){return function(e){return e<t}},lessThanOrEqual:function(t){return function(e){return e<=t}},greaterThan:function(t){return function(e){return e>t}},greaterThanOrEqual:function(t){return function(e){return e>=t}},even:function(){return function(t){return t%2===0}},odd:function(){return function(t){return t%2!==0}},includes:function(t){return function(e){return~e.indexOf(t)}},schema:function(t){return xY(t)},passesAnyOf:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(n){return t.some(function(r){return r.test(n)})}},optional:vY};function Rc(t){return function(e){return Array.isArray(e)&&t==="array"||e===null&&t==="null"||typeof e===t}}function yY(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function xY(t){return{simple:function(e){var n=[];if(Object.keys(t).forEach(function(r){var i=t[r];try{i.check((e||{})[r])}catch(s){s.target=r,n.push(s)}}),n.length>0)throw n;return!0},async:function(e){var n=[],r=Object.keys(t).map(function(i){var s=t[i];return s.testAsync((e||{})[i]).catch(function(o){o.target=i,n.push(o)})});return Promise.all(r).then(function(){if(n.length>0)throw n;return!0})}}}var sn="colors",ti="sizes",ot="space",_Y={gap:ot,gridGap:ot,columnGap:ot,gridColumnGap:ot,rowGap:ot,gridRowGap:ot,inset:ot,insetBlock:ot,insetBlockEnd:ot,insetBlockStart:ot,insetInline:ot,insetInlineEnd:ot,insetInlineStart:ot,margin:ot,marginTop:ot,marginRight:ot,marginBottom:ot,marginLeft:ot,marginBlock:ot,marginBlockEnd:ot,marginBlockStart:ot,marginInline:ot,marginInlineEnd:ot,marginInlineStart:ot,padding:ot,paddingTop:ot,paddingRight:ot,paddingBottom:ot,paddingLeft:ot,paddingBlock:ot,paddingBlockEnd:ot,paddingBlockStart:ot,paddingInline:ot,paddingInlineEnd:ot,paddingInlineStart:ot,top:ot,right:ot,bottom:ot,left:ot,scrollMargin:ot,scrollMarginTop:ot,scrollMarginRight:ot,scrollMarginBottom:ot,scrollMarginLeft:ot,scrollMarginX:ot,scrollMarginY:ot,scrollMarginBlock:ot,scrollMarginBlockEnd:ot,scrollMarginBlockStart:ot,scrollMarginInline:ot,scrollMarginInlineEnd:ot,scrollMarginInlineStart:ot,scrollPadding:ot,scrollPaddingTop:ot,scrollPaddingRight:ot,scrollPaddingBottom:ot,scrollPaddingLeft:ot,scrollPaddingX:ot,scrollPaddingY:ot,scrollPaddingBlock:ot,scrollPaddingBlockEnd:ot,scrollPaddingBlockStart:ot,scrollPaddingInline:ot,scrollPaddingInlineEnd:ot,scrollPaddingInlineStart:ot,fontSize:"fontSizes",background:sn,backgroundColor:sn,backgroundImage:sn,borderImage:sn,border:sn,borderBlock:sn,borderBlockEnd:sn,borderBlockStart:sn,borderBottom:sn,borderBottomColor:sn,borderColor:sn,borderInline:sn,borderInlineEnd:sn,borderInlineStart:sn,borderLeft:sn,borderLeftColor:sn,borderRight:sn,borderRightColor:sn,borderTop:sn,borderTopColor:sn,caretColor:sn,color:sn,columnRuleColor:sn,fill:sn,outline:sn,outlineColor:sn,stroke:sn,textDecorationColor:sn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:ti,minBlockSize:ti,maxBlockSize:ti,inlineSize:ti,minInlineSize:ti,maxInlineSize:ti,width:ti,minWidth:ti,maxWidth:ti,height:ti,minHeight:ti,maxHeight:ti,flexBasis:ti,gridTemplateColumns:ti,gridTemplateRows:ti,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},wY=(t,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Wf=()=>{const t=Object.create(null);return(e,n,...r)=>{const i=(s=>JSON.stringify(s,wY))(e);return i in t?t[i]:t[i]=n(e,...r)}},pu=Symbol.for("sxs.internal"),WA=(t,e)=>Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)),I3=t=>{for(const e in t)return!0;return!1},{hasOwnProperty:SY}=Object.prototype,mS=t=>t.includes("-")?t:t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),bY=/\s+(?![^()]*\))/,Pc=t=>e=>t(...typeof e=="string"?String(e).split(bY):[e]),D3={appearance:t=>({WebkitAppearance:t,appearance:t}),backfaceVisibility:t=>({WebkitBackfaceVisibility:t,backfaceVisibility:t}),backdropFilter:t=>({WebkitBackdropFilter:t,backdropFilter:t}),backgroundClip:t=>({WebkitBackgroundClip:t,backgroundClip:t}),boxDecorationBreak:t=>({WebkitBoxDecorationBreak:t,boxDecorationBreak:t}),clipPath:t=>({WebkitClipPath:t,clipPath:t}),content:t=>({content:t.includes('"')||t.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(t)?t:`"${t}"`}),hyphens:t=>({WebkitHyphens:t,hyphens:t}),maskImage:t=>({WebkitMaskImage:t,maskImage:t}),maskSize:t=>({WebkitMaskSize:t,maskSize:t}),tabSize:t=>({MozTabSize:t,tabSize:t}),textSizeAdjust:t=>({WebkitTextSizeAdjust:t,textSizeAdjust:t}),userSelect:t=>({WebkitUserSelect:t,userSelect:t}),marginBlock:Pc((t,e)=>({marginBlockStart:t,marginBlockEnd:e||t})),marginInline:Pc((t,e)=>({marginInlineStart:t,marginInlineEnd:e||t})),maxSize:Pc((t,e)=>({maxBlockSize:t,maxInlineSize:e||t})),minSize:Pc((t,e)=>({minBlockSize:t,minInlineSize:e||t})),paddingBlock:Pc((t,e)=>({paddingBlockStart:t,paddingBlockEnd:e||t})),paddingInline:Pc((t,e)=>({paddingInlineStart:t,paddingInlineEnd:e||t}))},Qx=/([\d.]+)([^]*)/,AY=(t,e)=>t.length?t.reduce((n,r)=>(n.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),n),[]):e,MY=(t,e)=>t in EY&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(n,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${mS(t)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${mS(t)}:${r}fit-content`)+s):String(e),EY={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},ia=t=>t?t+"-":"",Rk=(t,e,n)=>t.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?ia(e)+(a.includes("$")?"":ia(n))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),CY=/\s*,\s*(?![^()]*\))/,TY=Object.prototype.toString,Qc=(t,e,n,r,i)=>{let s,o,a;const l=(u,c,f)=>{let h,m;const g=v=>{for(h in v){const x=h.charCodeAt(0)===64,w=x&&Array.isArray(v[h])?v[h]:[v[h]];for(m of w){const b=/[A-Z]/.test(_=h)?_:_.replace(/-[^]/g,C=>C[1].toUpperCase()),E=typeof m=="object"&&m&&m.toString===TY&&(!r.utils[b]||!c.length);if(b in r.utils&&!E){const C=r.utils[b];if(C!==o){o=C,g(C(m)),o=null;continue}}else if(b in D3){const C=D3[b];if(C!==a){a=C,g(C(m)),a=null;continue}}if(x&&(y=h.slice(1)in r.media?"@media "+r.media[h.slice(1)]:h,h=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(C,P,M,B,D,k)=>{const O=Qx.test(P),U=.0625*(O?-1:1),[N,$]=O?[B,P]:[P,B];return"("+(M[0]==="="?"":M[0]===">"===O?"max-":"min-")+N+":"+(M[0]!=="="&&M.length===1?$.replace(Qx,(Q,ie,F)=>Number(ie)+U*(M===">"?1:-1)+F):$)+(D?") and ("+(D[0]===">"?"min-":"max-")+N+":"+(D.length===1?k.replace(Qx,(Q,ie,F)=>Number(ie)+U*(D===">"?-1:1)+F):k):"")+")"})),E){const C=x?f.concat(h):[...f],P=x?[...c]:AY(c,h.split(CY));s!==void 0&&i(L3(...s)),s=void 0,l(m,P,C)}else s===void 0&&(s=[[],c,f]),h=x||h.charCodeAt(0)!==36?h:`--${ia(r.prefix)}${h.slice(1).replace(/\$/g,"-")}`,m=E?m:typeof m=="number"?m&&b in RY?String(m)+"px":String(m):Rk(MY(b,m??""),r.prefix,r.themeMap[b]),s[0].push(`${x?`${h} `:`${mS(h)}:`}${m}`)}}var y,_};g(u),s!==void 0&&i(L3(...s)),s=void 0};l(t,e,n)},L3=(t,e,n)=>`${n.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${t.join(";")}${e.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,RY={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},k3=t=>String.fromCharCode(t+(t>25?39:97)),mu=t=>(e=>{let n,r="";for(n=Math.abs(e);n>52;n=n/52|0)r=k3(n%52)+r;return k3(n%52)+r})(((e,n)=>{let r=n.length;for(;r;)e=33*e^n.charCodeAt(--r);return e})(5381,JSON.stringify(t))>>>0),ih=["themed","global","styled","onevar","resonevar","allvar","inline"],PY=t=>{if(t.href&&!t.href.startsWith(location.origin))return!1;try{return!!t.cssRules}catch{return!1}},BY=t=>{let e;const n=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===s)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in a)delete a[u]}const i=Object(t).styleSheets||[];for(const a of i)if(PY(a)){for(let l=0,u=a.cssRules;u[l];++l){const c=Object(u[l]);if(c.type!==1)continue;const f=Object(u[l+1]);if(f.type!==4)continue;++l;const{cssText:h}=c;if(!h.startsWith("--sxs"))continue;const m=h.slice(14,-3).trim().split(/\s+/),g=ih[m[0]];g&&(e||(e={sheet:a,reset:r,rules:{},toString:n}),e.rules[g]={group:f,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,u)=>({type:u,cssRules:[],insertRule(c,f){this.cssRules.splice(f,0,a(c,{import:3,undefined:1}[(c.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,c=>c.cssText).join("")}}`:l}});e={sheet:t?(t.head||t).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:n}}const{sheet:s,rules:o}=e;for(let a=ih.length-1;a>=0;--a){const l=ih[a];if(!o[l]){const u=ih[a+1],c=o[u]?o[u].index:s.cssRules.length;s.insertRule("@media{}",c),s.insertRule(`--sxs{--sxs:${a}}`,c),o[l]={group:s.cssRules[c+1],index:c,cache:new Set([a])}}IY(o[l])}};return r(),e},IY=t=>{const e=t.group;let n=e.cssRules.length;t.apply=r=>{try{e.insertRule(r,n),++n}catch{}}},Xd=Symbol(),DY=Wf(),F3=(t,e)=>DY(t,()=>(...n)=>{let r={type:null,composers:new Set};for(const i of n)if(i!=null)if(i[pu]){r.type==null&&(r.type=i[pu].type);for(const s of i[pu].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(LY(i,t));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),kY(t,r,e)}),LY=({variants:t,compoundVariants:e,defaultVariants:n,...r},i)=>{const s=`${ia(i.prefix)}c-${mu(r)}`,o=[],a=[],l=Object.create(null),u=[];for(const h in n)l[h]=String(n[h]);if(typeof t=="object"&&t)for(const h in t){c=l,f=h,SY.call(c,f)||(l[h]="undefined");const m=t[h];for(const g in m){const v={[h]:String(g)};String(g)==="undefined"&&u.push(h);const y=m[g],_=[v,y,!I3(y)];o.push(_)}}var c,f;if(typeof e=="object"&&e)for(const h of e){let{css:m,...g}=h;m=typeof m=="object"&&m||{};for(const y in g)g[y]=String(g[y]);const v=[g,m,!I3(m)];a.push(v)}return[s,r,o,a,l,u]},kY=(t,e,n)=>{const[r,i,s,o]=FY(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function h(){for(let m=0;m<h[Xd].length;m++){const[g,v]=h[Xd][m];f.rules[g].apply(v)}return h[Xd]=[],null}return h[Xd]=[],h.rules={},ih.forEach(m=>h.rules[m]={apply:g=>h[Xd].push([m,g])}),h})(n):null,l=(a||n).rules,u=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,c=f=>{f=typeof f=="object"&&f||OY;const{css:h,...m}=f,g={};for(const _ in s)if(delete m[_],_ in f){let x=f[_];typeof x=="object"&&x?g[_]={"@initial":s[_],...x}:(x=String(x),g[_]=x!=="undefined"||o.has(_)?x:s[_])}else g[_]=s[_];const v=new Set([...i]);for(const[_,x,w,b]of e.composers){n.rules.styled.cache.has(_)||(n.rules.styled.cache.add(_),Qc(x,[`.${_}`],[],t,P=>{l.styled.apply(P)}));const E=O3(w,g,t.media),C=O3(b,g,t.media,!0);for(const P of E)if(P!==void 0)for(const[M,B,D]of P){const k=`${_}-${mu(B)}-${M}`;v.add(k);const O=(D?n.rules.resonevar:n.rules.onevar).cache,U=D?l.resonevar:l.onevar;O.has(k)||(O.add(k),Qc(B,[`.${k}`],[],t,N=>{U.apply(N)}))}for(const P of C)if(P!==void 0)for(const[M,B]of P){const D=`${_}-${mu(B)}-${M}`;v.add(D),n.rules.allvar.cache.has(D)||(n.rules.allvar.cache.add(D),Qc(B,[`.${D}`],[],t,k=>{l.allvar.apply(k)}))}}if(typeof h=="object"&&h){const _=`${r}-i${mu(h)}-css`;v.add(_),n.rules.inline.cache.has(_)||(n.rules.inline.cache.add(_),Qc(h,[`.${_}`],[],t,x=>{l.inline.apply(x)}))}for(const _ of String(f.className||"").trim().split(/\s+/))_&&v.add(_);const y=m.className=[...v].join(" ");return{type:e.type,className:y,selector:u,props:m,toString:()=>y,deferredInjector:a}};return WA(c,{className:r,selector:u,[pu]:e,toString:()=>(n.rules.styled.cache.has(r)||c(),r)})},FY=t=>{let e="";const n=[],r={},i=[];for(const[s,,,,o,a]of t){e===""&&(e=s),n.push(s),i.push(...a);for(const l in o){const u=o[l];(r[l]===void 0||u!=="undefined"||a.includes(u))&&(r[l]=u)}}return[e,n,r,new Set(i)]},O3=(t,e,n,r)=>{const i=[];e:for(let[s,o,a]of t){if(a)continue;let l,u=0,c=!1;for(l in s){const f=s[l];let h=e[l];if(h!==f){if(typeof h!="object"||!h)continue e;{let m,g,v=0;for(const y in h){if(f===String(h[y])){if(y!=="@initial"){const _=y.slice(1);(g=g||[]).push(_ in n?n[_]:y.replace(/^@media ?/,"")),c=!0}u+=v,m=!0}++v}if(g&&g.length&&(o={["@media "+g.join(", ")]:o}),!m)continue e}}}(i[u]=i[u]||[]).push([r?"cv":`${l}-${s[l]}`,o,c])}return i},OY={},UY=Wf(),NY=(t,e)=>UY(t,()=>(...n)=>{const r=()=>{for(let i of n){i=typeof i=="object"&&i||{};let s=mu(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}Qc(i,[],[],t,o=>{e.rules.global.apply(o)})}}return""};return WA(r,{toString:r})}),zY=Wf(),GY=(t,e)=>zY(t,()=>n=>{const r=`${ia(t.prefix)}k-${mu(n)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];Qc(n,[],[],t,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return WA(i,{get name(){return i()},toString:i})}),HY=class{constructor(t,e,n,r){this.token=t==null?"":String(t),this.value=e==null?"":String(e),this.scale=n==null?"":String(n),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+ia(this.prefix)+ia(this.scale)+this.token}toString(){return this.computedValue}},VY=Wf(),WY=(t,e)=>VY(t,()=>(n,r)=>{r=typeof n=="object"&&n||Object(r);const i=`.${n=(n=typeof n=="string"?n:"")||`${ia(t.prefix)}t-${mu(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const u in r[l]){const c=`--${ia(t.prefix)}${l}-${u}`,f=Rk(String(r[l][u]),t.prefix,l);s[l][u]=new HY(u,f,l,t.prefix),o.push(`${c}:${f}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(n)){e.rules.themed.cache.add(n);const l=`${r===t.theme?":root,":""}.${n}{${o.join(";")}}`;e.rules.themed.apply(l)}return n};return{...s,get className(){return a()},selector:i,toString:a}}),jY=Wf(),$Y=Wf(),JY=t=>{const e=(n=>{let r=!1;const i=jY(n,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,u=typeof s.theme=="object"&&s.theme||{},c={prefix:o,media:a,theme:u,themeMap:typeof s.themeMap=="object"&&s.themeMap||{..._Y},utils:typeof s.utils=="object"&&s.utils||{}},f=BY(l),h={css:F3(c,f),globalCss:NY(c,f),keyframes:GY(c,f),createTheme:WY(c,f),reset(){f.reset(),h.theme.toString()},theme:{},sheet:f,config:c,prefix:o,getCssText:f.toString,toString:f.toString};return String(h.theme=h.createTheme(u)),h});return r||i.reset(),i})(t);return e.styled=(({config:n,sheet:r})=>$Y(n,()=>{const i=F3(n,r);return(...s)=>{const o=i(...s),a=o[pu].type,l=ee.forwardRef((u,c)=>{const f=u&&u.as||a,{props:h,deferredInjector:m}=o(u);return delete h.as,h.ref=c,m?ee.createElement(ee.Fragment,null,ee.createElement(f,h),ee.createElement(m,null)):ee.createElement(f,h)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[pu]=o[pu],l}}))(e),e};const XY=Boolean(globalThis==null?void 0:globalThis.document)?R.useLayoutEffect:()=>{},KY=VO["useId".toString()]||(()=>{});let YY=0;function QY(t){const[e,n]=R.useState(KY());return XY(()=>{t||n(r=>r??String(YY++))},[t]),t||(e?`radix-${e}`:"")}function Pk(...t){return e=>t.forEach(n=>function(r,i){typeof r=="function"?r(i):r!=null&&(r.current=i)}(n,e))}function jA(...t){return R.useCallback(Pk(...t),t)}const Bk=R.forwardRef((t,e)=>{const{children:n,...r}=t;return R.Children.toArray(n).some(U3)?R.createElement(R.Fragment,null,R.Children.map(n,i=>U3(i)?R.createElement(gS,rn({},r,{ref:e}),i.props.children):i)):R.createElement(gS,rn({},r,{ref:e}),n)});Bk.displayName="Slot";const gS=R.forwardRef((t,e)=>{const{children:n,...r}=t;return R.isValidElement(n)?R.cloneElement(n,{...qY(r,n.props),ref:Pk(e,n.ref)}):R.Children.count(n)>1?R.Children.only(null):null});gS.displayName="SlotClone";const Ik=({children:t})=>R.createElement(R.Fragment,null,t);function U3(t){return R.isValidElement(t)&&t.type===Ik}function qY(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?n[r]=(...o)=>{s==null||s(...o),i==null||i(...o)}:r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}const jf=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((t,e)=>({...t,[e]:R.forwardRef((n,r)=>{const{asChild:i,...s}=n,o=i?Bk:e;return R.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),n.as&&console.error(ZY),R.createElement(o,rn({},s,{ref:r}))})}),{}),ZY="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",eQ=R.forwardRef((t,e)=>R.createElement(jf.span,rn({},t,{ref:e,style:{...t.style,position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}}))),tQ=eQ,nQ=Boolean(globalThis==null?void 0:globalThis.document)?R.useLayoutEffect:()=>{},rQ=R.forwardRef((t,e)=>{var n,r;const{containerRef:i,style:s,...o}=t,a=(n=i==null?void 0:i.current)!==null&&n!==void 0?n:globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,[,l]=R.useState({});return nQ(()=>{l({})},[]),a?Cb.createPortal(R.createElement(jf.div,rn({"data-radix-portal":""},o,{ref:e,style:a===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...s}:void 0})),a):null}),iQ=R.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return R.createElement(jf.svg,rn({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),t.asChild?n:R.createElement("polygon",{points:"0,0 30,0 15,10"}))}),sQ=iQ;function N3(t){const[e,n]=R.useState(void 0);return R.useEffect(()=>{if(t){const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else{const l=t.getBoundingClientRect();o=l.width,a=l.height}n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>{n(void 0),r.unobserve(t)}}},[t]),e}function oQ(t,e){const n=Wl.get(t);return n===void 0?(Wl.set(t,{rect:{},callbacks:[e]}),Wl.size===1&&(vS=requestAnimationFrame(Dk))):(n.callbacks.push(e),e(t.getBoundingClientRect())),()=>{const r=Wl.get(t);if(r===void 0)return;const i=r.callbacks.indexOf(e);i>-1&&r.callbacks.splice(i,1),r.callbacks.length===0&&(Wl.delete(t),Wl.size===0&&cancelAnimationFrame(vS))}}let vS;const Wl=new Map;function Dk(){const t=[];Wl.forEach((e,n)=>{const r=n.getBoundingClientRect();var i,s;i=e.rect,s=r,(i.width!==s.width||i.height!==s.height||i.top!==s.top||i.right!==s.right||i.bottom!==s.bottom||i.left!==s.left)&&(e.rect=r,t.push(e))}),t.forEach(e=>{e.callbacks.forEach(n=>n(e.rect))}),vS=requestAnimationFrame(Dk)}function Lk(t){const[e,n]=R.useState();return R.useEffect(()=>{if(t){const r=oQ(t,n);return()=>{n(void 0),r()}}},[t]),e}function kk(t,e=[]){let n=[];const r=()=>{const i=n.map(s=>R.createContext(s));return function(s){const o=(s==null?void 0:s[t])||i;return R.useMemo(()=>({[`__scope${t}`]:{...s,[t]:o}}),[s,o])}};return r.scopeName=t,[function(i,s){const o=R.createContext(s),a=n.length;function l(u){const{scope:c,children:f,...h}=u,m=(c==null?void 0:c[t][a])||o,g=R.useMemo(()=>h,Object.values(h));return R.createElement(m.Provider,{value:g},f)}return n=[...n,s],l.displayName=i+"Provider",[l,function(u,c){const f=(c==null?void 0:c[t][a])||o,h=R.useContext(f);if(h)return h;if(s!==void 0)return s;throw new Error(`\`${u}\` must be used within \`${i}\``)}]},aQ(r,...e)]}function aQ(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(i){const s=r.reduce((o,{useScope:a,scopeName:l})=>({...o,...a(i)[`__scope${l}`]}),{});return R.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function lQ({anchorRect:t,popperSize:e,arrowSize:n,arrowOffset:r=0,side:i,sideOffset:s=0,align:o,alignOffset:a=0,shouldAvoidCollisions:l=!0,collisionBoundariesRect:u,collisionTolerance:c=0}){if(!t||!e||!u)return{popperStyles:uQ,arrowStyles:qx};const f=function(P,M,B=0,D=0,k){const O=k?k.height:0,U=z3(M,P,"x"),N=z3(M,P,"y"),$=N.before-B-O,Q=N.after+B+O,ie=U.before-B-O,F=U.after+B+O;return{top:{start:{x:U.start+D,y:$},center:{x:U.center,y:$},end:{x:U.end-D,y:$}},right:{start:{x:F,y:N.start+D},center:{x:F,y:N.center},end:{x:F,y:N.end-D}},bottom:{start:{x:U.start+D,y:Q},center:{x:U.center,y:Q},end:{x:U.end-D,y:Q}},left:{start:{x:ie,y:N.start+D},center:{x:ie,y:N.center},end:{x:ie,y:N.end-D}}}}(e,t,s,a,n),h=f[i][o];if(l===!1){const P=G3(h);let M=qx;return n&&(M=V3({popperSize:e,arrowSize:n,arrowOffset:r,side:i,align:o})),{popperStyles:{...P,"--radix-popper-transform-origin":H3(e,i,o,r,n)},arrowStyles:M,placedSide:i,placedAlign:o}}const m=DOMRect.fromRect({...e,...h}),g=(v=u,y=c,DOMRect.fromRect({width:v.width-2*y,height:v.height-2*y,x:v.left+y,y:v.top+y}));var v,y;const _=j3(m,g),x=f[W3(i)][o],w=function(P,M,B){const D=W3(P);return M[P]&&!B[D]?D:P}(i,_,j3(DOMRect.fromRect({...e,...x}),g)),b=function(P,M,B,D,k){const O=B==="top"||B==="bottom",U=O?"left":"top",N=O?"right":"bottom",$=O?"width":"height",Q=M[$]>P[$];return(D==="start"||D==="center")&&(k[U]&&Q||k[N]&&!Q)?"end":(D==="end"||D==="center")&&(k[N]&&Q||k[U]&&!Q)?"start":D}(e,t,i,o,_),E=G3(f[w][b]);let C=qx;return n&&(C=V3({popperSize:e,arrowSize:n,arrowOffset:r,side:w,align:b})),{popperStyles:{...E,"--radix-popper-transform-origin":H3(e,w,b,r,n)},arrowStyles:C,placedSide:w,placedAlign:b}}function z3(t,e,n){const r=t[n==="x"?"left":"top"],i=n==="x"?"width":"height",s=t[i],o=e[i];return{before:r-o,start:r,center:r+(s-o)/2,end:r+s-o,after:r+s}}function G3(t){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:`translate3d(${Math.round(t.x+window.scrollX)}px, ${Math.round(t.y+window.scrollY)}px, 0)`}}function H3(t,e,n,r,i){const s=e==="top"||e==="bottom",o=i?i.width:0,a=i?i.height:0,l=o/2+r;let u="",c="";return s?(u={start:`${l}px`,center:"center",end:t.width-l+"px"}[n],c=e==="top"?`${t.height+a}px`:-a+"px"):(u=e==="left"?`${t.width+a}px`:-a+"px",c={start:`${l}px`,center:"center",end:t.height-l+"px"}[n]),`${u} ${c}`}const uQ={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},qx={position:"absolute",opacity:0};function V3({popperSize:t,arrowSize:e,arrowOffset:n,side:r,align:i}){const s=(t.width-e.width)/2,o=(t.height-e.width)/2,a={top:0,right:90,bottom:180,left:-90}[r],l=Math.max(e.width,e.height),u={width:`${l}px`,height:`${l}px`,transform:`rotate(${a}deg)`,willChange:"transform",position:"absolute",[r]:"100%",direction:cQ(r,i)};return r!=="top"&&r!=="bottom"||(i==="start"&&(u.left=`${n}px`),i==="center"&&(u.left=`${s}px`),i==="end"&&(u.right=`${n}px`)),r!=="left"&&r!=="right"||(i==="start"&&(u.top=`${n}px`),i==="center"&&(u.top=`${o}px`),i==="end"&&(u.bottom=`${n}px`)),u}function cQ(t,e){return(t!=="top"&&t!=="right"||e!=="end")&&(t!=="bottom"&&t!=="left"||e==="end")?"ltr":"rtl"}function W3(t){return{top:"bottom",right:"left",bottom:"top",left:"right"}[t]}function j3(t,e){return{top:t.top<e.top,right:t.right>e.right,bottom:t.bottom>e.bottom,left:t.left<e.left}}const[Fk,Ok]=kk("Popper"),[fQ,Uk]=Fk("Popper"),dQ=t=>{const{__scopePopper:e,children:n}=t,[r,i]=R.useState(null);return R.createElement(fQ,{scope:e,anchor:r,onAnchorChange:i},n)},hQ=R.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=Uk("PopperAnchor",n),o=R.useRef(null),a=jA(e,o);return R.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:R.createElement(jf.div,rn({},i,{ref:a}))}),[pQ,mQ]=Fk("PopperContent"),gQ=R.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i,align:s="center",alignOffset:o,collisionTolerance:a,avoidCollisions:l=!0,...u}=t,c=Uk("PopperContent",n),[f,h]=R.useState(),m=Lk(c.anchor),[g,v]=R.useState(null),y=N3(g),[_,x]=R.useState(null),w=N3(_),b=jA(e,O=>v(O)),E=function(){const[O,U]=R.useState(void 0);return R.useEffect(()=>{let N;function $(){U({width:window.innerWidth,height:window.innerHeight})}function Q(){window.clearTimeout(N),N=window.setTimeout($,100)}return $(),window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]),O}(),C=E?DOMRect.fromRect({...E,x:0,y:0}):void 0,{popperStyles:P,arrowStyles:M,placedSide:B,placedAlign:D}=lQ({anchorRect:m,popperSize:y,arrowSize:w,arrowOffset:f,side:r,sideOffset:i,align:s,alignOffset:o,shouldAvoidCollisions:l,collisionBoundariesRect:C,collisionTolerance:a}),k=B!==void 0;return R.createElement("div",{style:P,"data-radix-popper-content-wrapper":""},R.createElement(pQ,{scope:n,arrowStyles:M,onArrowChange:x,onArrowOffsetChange:h},R.createElement(jf.div,rn({"data-side":B,"data-align":D},u,{style:{...u.style,animation:k?void 0:"none"},ref:b}))))}),vQ=R.forwardRef(function(t,e){const{__scopePopper:n,offset:r,...i}=t,s=mQ("PopperArrow",n),{onArrowOffsetChange:o}=s;return R.useEffect(()=>o(r),[o,r]),R.createElement("span",{style:{...s.arrowStyles,pointerEvents:"none"}},R.createElement("span",{ref:s.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},R.createElement(sQ,rn({},i,{ref:e,style:{...i.style,display:"block"}}))))}),yQ=dQ,xQ=hQ,_Q=gQ,wQ=vQ,$3=Boolean(globalThis==null?void 0:globalThis.document)?R.useLayoutEffect:()=>{};function SQ(...t){return e=>t.forEach(n=>function(r,i){typeof r=="function"?r(i):r!=null&&(r.current=i)}(n,e))}function bQ(...t){return R.useCallback(SQ(...t),t)}const Nk=t=>{const{present:e,children:n}=t,r=function(o){const[a,l]=R.useState(),u=R.useRef({}),c=R.useRef(o),f=R.useRef("none"),h=o?"mounted":"unmounted",[m,g]=function(v,y){return R.useReducer((_,x)=>{const w=y[_][x];return w??_},v)}(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const v=Zg(u.current);f.current=m==="mounted"?v:"none"},[m]),$3(()=>{const v=u.current,y=c.current;if(y!==o){const _=f.current,x=Zg(v);o?g("MOUNT"):x==="none"||(v==null?void 0:v.display)==="none"?g("UNMOUNT"):g(y&&_!==x?"ANIMATION_OUT":"UNMOUNT"),c.current=o}},[o,g]),$3(()=>{if(a){const v=_=>{const x=Zg(u.current).includes(_.animationName);_.target===a&&x&&g("ANIMATION_END")},y=_=>{_.target===a&&(f.current=Zg(u.current))};return a.addEventListener("animationstart",y),a.addEventListener("animationcancel",v),a.addEventListener("animationend",v),()=>{a.removeEventListener("animationstart",y),a.removeEventListener("animationcancel",v),a.removeEventListener("animationend",v)}}},[a,g]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:R.useCallback(v=>{v&&(u.current=getComputedStyle(v)),l(v)},[])}}(e),i=typeof n=="function"?n({present:r.isPresent}):R.Children.only(n),s=bQ(r.ref,i.ref);return typeof n=="function"||r.isPresent?R.cloneElement(i,{ref:s}):null};function Zg(t){return(t==null?void 0:t.animationName)||"none"}Nk.displayName="Presence";function J3(t){const e=R.useRef(t);return R.useEffect(()=>{e.current=t},[t]),e.current}function AQ(t){const e=R.useRef(t);return R.useEffect(()=>{e.current=t}),R.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function MQ(t){const e=AQ(t);R.useEffect(()=>{const n=r=>{r.key==="Escape"&&e(r)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[e])}function X3(t){const e=R.useRef(t);return R.useEffect(()=>{e.current=t}),R.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function EQ({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=function({defaultProp:l,onChange:u}){const c=R.useState(l),[f]=c,h=R.useRef(f),m=X3(u);return R.useEffect(()=>{h.current!==f&&(m(f),h.current=f)},[f,h,m]),c}({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=X3(n);return[o,R.useCallback(l=>{if(s){const u=l,c=typeof l=="function"?u(t):l;c!==t&&a(c)}else i(l)},[s,t,i,a])]}function Bc(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}const[zk,Mre]=kk("Tooltip",[Ok]),_y=Ok(),CQ=700,[Ere,TQ]=zk("TooltipProvider",{isOpenDelayed:!0,delayDuration:CQ,onOpen:()=>{},onClose:()=>{}}),[RQ,wy]=zk("Tooltip"),PQ=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i=!1,onOpenChange:s,delayDuration:o}=t,a=TQ("Tooltip",e),l=_y(e),[u,c]=R.useState(null),f=QY(),h=R.useRef(0),m=o??a.delayDuration,g=R.useRef(!1),{onOpen:v,onClose:y}=a,[_=!1,x]=EQ({prop:r,defaultProp:i,onChange:C=>{C&&(document.dispatchEvent(new CustomEvent("tooltip.open")),v()),s==null||s(C)}}),w=R.useMemo(()=>_?g.current?"delayed-open":"instant-open":"closed",[_]),b=R.useCallback(()=>{window.clearTimeout(h.current),g.current=!1,x(!0)},[x]),E=R.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{g.current=!0,x(!0)},m)},[m,x]);return R.useEffect(()=>()=>window.clearTimeout(h.current),[]),R.createElement(yQ,l,R.createElement(RQ,{scope:e,contentId:f,open:_,stateAttribute:w,trigger:u,onTriggerChange:c,onTriggerEnter:R.useCallback(()=>{a.isOpenDelayed?E():b()},[a.isOpenDelayed,E,b]),onOpen:R.useCallback(b,[b]),onClose:R.useCallback(()=>{window.clearTimeout(h.current),x(!1),y()},[x,y])},n))},BQ=R.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=wy("TooltipTrigger",n),s=_y(n),o=jA(e,i.onTriggerChange),a=R.useRef(!1),l=R.useCallback(()=>a.current=!1,[]);return R.useEffect(()=>()=>document.removeEventListener("mouseup",l),[l]),R.createElement(xQ,rn({asChild:!0},s),R.createElement(jf.button,rn({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:o,onMouseEnter:Bc(t.onMouseEnter,i.onTriggerEnter),onMouseLeave:Bc(t.onMouseLeave,i.onClose),onMouseDown:Bc(t.onMouseDown,()=>{i.onClose(),a.current=!0,document.addEventListener("mouseup",l,{once:!0})}),onFocus:Bc(t.onFocus,()=>{a.current||i.onOpen()}),onBlur:Bc(t.onBlur,i.onClose),onClick:Bc(t.onClick,i.onClose)})))}),IQ=R.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=wy("TooltipContent",t.__scopeTooltip);return R.createElement(Nk,{present:n||i.open},R.createElement(DQ,rn({ref:e},r)))}),DQ=R.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,portalled:s=!0,...o}=t,a=wy("TooltipContent",n),l=_y(n),u=s?rQ:R.Fragment,{onClose:c}=a;return MQ(()=>c()),R.useEffect(()=>(document.addEventListener("tooltip.open",c),()=>document.removeEventListener("tooltip.open",c)),[c]),R.createElement(u,null,R.createElement(kQ,{__scopeTooltip:n}),R.createElement(_Q,rn({"data-state":a.stateAttribute},l,o,{ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)"}}),R.createElement(Ik,null,r),R.createElement(tQ,{id:a.contentId,role:"tooltip"},i||r)))}),LQ=R.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=_y(n);return R.createElement(wQ,rn({},i,r,{ref:e}))});function kQ(t){const{__scopeTooltip:e}=t,n=wy("CheckTriggerMoved",e),r=Lk(n.trigger),i=r==null?void 0:r.left,s=J3(i),o=r==null?void 0:r.top,a=J3(o),l=n.onClose;return R.useEffect(()=>{(s!==void 0&&s!==i||a!==void 0&&a!==o)&&l()},[l,s,a,i,o]),null}const FQ=PQ,OQ=BQ,UQ=IQ,NQ=LQ;function zQ(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ln(t,e){if(t==null)return{};var n=zQ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}let Pn;(function(t){t[t.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",t[t.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",t[t.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",t[t.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",t[t.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",t[t.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",t[t.THEME_ERROR=6]="THEME_ERROR",t[t.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",t[t.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",t[t.EMPTY_KEY=9]="EMPTY_KEY"})(Pn||(Pn={}));const GQ={[Pn.UNSUPPORTED_INPUT]:(t,e)=>[`An input with type \`${t}\` input was found at path \`${e}\` but it's not supported yet.`],[Pn.NO_COMPONENT_FOR_TYPE]:(t,e)=>[`Type \`${t}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Pn.UNKNOWN_INPUT]:(t,e)=>[`input at path \`${t}\` is not recognized.`,e],[Pn.DUPLICATE_KEYS]:(t,e,n)=>[`Key \`${t}\` of path \`${e}\` already exists at path \`${n}\`. Even nested keys need to be unique. Rename one of the keys.`],[Pn.ALREADY_REGISTERED_TYPE]:t=>[`Type ${t} has already been registered. You can't register a component with the same type.`],[Pn.CLIPBOARD_ERROR]:t=>["Error copying the value",t],[Pn.THEME_ERROR]:(t,e)=>[`Error accessing the theme \`${t}.${e}\` value.`],[Pn.PATH_DOESNT_EXIST]:t=>[`Error getting the value at path \`${t}\`. There is probably an error in your \`render\` function.`],[Pn.PATH_DOESNT_EXIST]:t=>[`Error accessing the value at path \`${t}\``],[Pn.INPUT_TYPE_OVERRIDE]:(t,e,n)=>[`Input at path \`${t}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${n}\`.`],[Pn.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function Gk(t,e,...n){const[r,...i]=GQ[e](...n);console[t]("LEVA: "+r,...i)}const Wo=Gk.bind(null,"warn"),HQ=Gk.bind(null,"log"),VQ=["value"],WQ=["schema"],jQ=["value"],Hk=[],Bu={};function K3(t){let{value:e}=t,n=ln(t,VQ);for(let r of Hk){const i=r(e,n);if(i)return i}}function la(t,e){let{schema:n}=e,r=ln(e,WQ);if(t in Bu){Wo(Pn.ALREADY_REGISTERED_TYPE,t);return}Hk.push((i,s)=>n(i,s)&&t),Bu[t]=r}function Zx(t,e,n,r){const{normalize:i}=Bu[t];if(i)return i(e,n,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=ln(e,jQ);return{value:s,settings:o}}function $Q(t,e,n,r,i,s){const{sanitize:o}=Bu[t];return o?o(e,n,r,i,s):e}function Y3(t,e,n){const{format:r}=Bu[t];return r?r(e,n):e}function JQ(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q3(Object(n),!0).forEach(function(r){JQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const ol=(t,e,n)=>t>n?n:t<e?e:t,XQ=t=>{if(t===""||typeof t=="number")return t;try{const e=Ba(t);if(!isNaN(e))return e}catch{}return parseFloat(t)},KQ=Math.log(10);function q3(t){let e=Math.abs(+String(t).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const n=Math.floor(Math.log(e)/KQ)+1,r=Math.floor(Math.log10(Math.abs(t))),i=Math.pow(10,r-n);return Math.max(i,.001)}const vv=(t,e,n)=>n===e?0:(ol(t,e,n)-e)/(n-e),yv=(t,e,n)=>t*(n-e)+e,YQ=()=>"_"+Math.random().toString(36).substr(2,9),Z3=/\(([0-9+\-*/^ .]+)\)/,eR=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,tR=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,nR=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,rR=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,iR=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Ba(t){if(isNaN(Number(t)))if(Z3.test(t)){const e=t.replace(Z3,(n,r)=>String(Ba(r)));return Ba(e)}else if(eR.test(t)){const e=t.replace(eR,(n,r,i)=>String(Math.pow(Number(r),Number(i))));return Ba(e)}else if(tR.test(t)){const e=t.replace(tR,(n,r,i)=>String(Number(r)*Number(i)));return Ba(e)}else if(nR.test(t)){const e=t.replace(nR,(n,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return Ba(e)}else if(rR.test(t)){const e=t.replace(rR,(n,r,i)=>String(Number(r)+Number(i)));return Ba(e)}else if(iR.test(t)){const e=t.replace(iR,(n,r,i)=>String(Number(r)-Number(i)));return Ba(e)}else return Number(t);return Number(t)}function QQ(t,e){return e.reduce((n,r)=>(t&&t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}function qQ(t,e){const n=pt({},t);return e.forEach(r=>r in t&&delete n[r]),n}function ZQ(t,e){return t.reduce((n,r,i)=>Object.assign(n,{[e[i]]:r}),{})}function Vk(t){return Object.prototype.toString.call(t)==="[object Object]"}const eq=t=>Vk(t)&&Object.keys(t).length===0;let Ns;(function(t){t.BUTTON="BUTTON",t.BUTTON_GROUP="BUTTON_GROUP",t.MONITOR="MONITOR",t.FOLDER="FOLDER"})(Ns||(Ns={}));let Ws;(function(t){t.SELECT="SELECT",t.IMAGE="IMAGE",t.NUMBER="NUMBER",t.COLOR="COLOR",t.STRING="STRING",t.BOOLEAN="BOOLEAN",t.INTERVAL="INTERVAL",t.VECTOR3D="VECTOR3D",t.VECTOR2D="VECTOR2D"})(Ws||(Ws={}));const tq=["type","__customInput"],nq=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],rq=["type"];function Wk(t,e,n={},r){var i,s;if(typeof t!="object"||Array.isArray(t))return{type:r,input:t,options:pt({key:e,label:e,optional:!1,disabled:!1,order:0},n)};if("__customInput"in t){const{type:E,__customInput:C}=t,P=ln(t,tq);return Wk(C,e,P,E)}const{render:o,label:a,optional:l,order:u=0,disabled:c,hint:f,onChange:h,onEditStart:m,onEditEnd:g,transient:v}=t,y=ln(t,nq),_=pt({render:o,key:e,label:a??e,hint:f,transient:v??!!h,onEditStart:m,onEditEnd:g,disabled:c,optional:l,order:u},n);let{type:x}=y,w=ln(y,rq);if(x=r??x,x in Ns)return{type:x,input:w,options:_};let b;return r&&Vk(w)&&"value"in w?b=w.value:b=eq(w)?void 0:w,{type:x,input:b,options:pt(pt({},_),{},{onChange:h,optional:(i=_.optional)!==null&&i!==void 0?i:!1,disabled:(s=_.disabled)!==null&&s!==void 0?s:!1})}}function iq(t,e,n,r){const i=Wk(t,e),{type:s,input:o,options:a}=i;if(s)return s in Ns?i:{type:s,input:Zx(s,o,n,r),options:a};let l=K3(o);return l?{type:l,input:Zx(l,o,n,r),options:a}:(l=K3({value:o}),l?{type:l,input:Zx(l,{value:o},n,r),options:a}:!1)}function sR(t,e,n,r,i){const{value:s,type:o,settings:a}=t;t.value=jk({type:o,value:s,settings:a},e,n,r),t.fromPanel=i}const sq=function(e,n,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=n,this.error=r};function jk({type:t,value:e,settings:n},r,i,s){const o=t!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=$Q(t,o,n,e,i,s)}catch(l){throw new sq(`The value \`${r}\` did not result in a correct value.`,e,l)}return lp(a,e)?e:a}const $k=(t,e,n=!1)=>{let r=0;return function(){const i=arguments,s=n&&!r,o=()=>t.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),s&&o()}},Jk=t=>t.shiftKey?5:t.altKey?1/5:1;function oq(t,e){const n=console.error;console.error=()=>{},Cb.render(t,e),console.error=n}const aq=["value"],lq=["min","max"],uq=t=>{if(typeof t=="number")return!0;if(typeof t=="string"){const e=parseFloat(t);return isNaN(e)?!1:t.substring((""+e).length).trim().length<4}return!1},Xk=(t,{min:e=-1/0,max:n=1/0,suffix:r})=>{const i=parseFloat(t);if(t===""||isNaN(i))throw Error("Invalid number");const s=ol(i,e,n);return r?s+r:s},cq=(t,{pad:e=0,suffix:n})=>{const r=parseFloat(t).toFixed(e);return n?r+n:r},Kk=t=>{let{value:e}=t,n=ln(t,aq);const{min:r=-1/0,max:i=1/0}=n,s=ln(n,lq);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=ol(o,r,i);let l=n.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const u=l?q3(l)*10:q3(o);l=l||u/10;const c=Math.round(ol(Math.log10(1/u),0,2));return{value:a?o+a:o,settings:pt({initialValue:o,step:l,pad:c,min:r,max:i,suffix:a},s)}},Yk=(t,{step:e,initialValue:n})=>{const r=Math.round((t-n)/e);return n+r*e};var Qk=Object.freeze({__proto__:null,schema:uq,sanitize:Xk,format:cq,normalize:Kk,sanitizeStep:Yk});function Gn(){return Gn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gn.apply(this,arguments)}const qk=R.createContext({});function $r(){return R.useContext(qk)}const $A=R.createContext(null),Zk=R.createContext(null),eF=R.createContext(null);function Wp(){return R.useContext(Zk)}function fq(){return R.useContext(eF)}const tF=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function e0(t,e){const[n,r]=t.split(" "),i={};return n!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${n!=="default"&&n||e.borderColor}`),r&&(i.backgroundColor=r),i}const Kd={$inputStyle:()=>t=>e0(t,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>t=>e0(t,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>t=>e0(t,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>t=>e0(t,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:ht,css:Cre,createTheme:dq,globalCss:hq,keyframes:Tre}=JY({prefix:"leva",theme:tF(),utils:pt(pt({},Kd),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:t=>({"&:focus":Kd.$focusStyle()(t)}),$focusWithin:t=>({"&:focus-within":Kd.$focusStyle()(t)}),$hover:t=>({"&:hover":Kd.$hoverStyle()(t)}),$active:t=>({"&:active":Kd.$activeStyle()(t)})})}),pq=hq({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function mq(t){const e=tF();if(!t)return{theme:e,className:""};Object.keys(t).forEach(r=>{Object.assign(e[r],t[r])});const n=dq(e);return{theme:e,className:n.className}}function Yo(t,e){const{theme:n}=R.useContext($A);if(!(t in n)||!(e in n[t]))return Wo(Pn.THEME_ERROR,t,e),"";let r=e;for(;;){let i=n[t][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const nF=ht("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),rF=ht("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${nF}`]:{paddingLeft:0}}),gq=ht(rF,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),vq=ht("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),yq=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],xq=["onUpdate"];function JA(t){let{innerLabel:e,value:n,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:l="text",rows:u=0}=t,c=ln(t,yq);const{id:f,emitOnEditStart:h,emitOnEditEnd:m,disabled:g}=$r(),v=a||f,y=R.useRef(null),_=u>0,x=_?"textarea":"input",w=R.useCallback(C=>P=>{const M=P.currentTarget.value;C(M)},[]);ee.useEffect(()=>{const C=y.current,P=w(M=>{r(M),m()});return C==null||C.addEventListener("blur",P),()=>C==null?void 0:C.removeEventListener("blur",P)},[w,r,m]);const b=R.useCallback(C=>{C.key==="Enter"&&w(r)(C)},[w,r]),E=Object.assign({as:x},_?{rows:u}:{},c);return ee.createElement(vq,{textArea:_},e&&typeof e=="string"?ee.createElement(rF,null,e):e,ee.createElement(nF,Gn({levaType:o,ref:y,id:v,type:l,autoComplete:"off",spellCheck:"false",value:n,onChange:w(i),onFocus:()=>h(),onKeyPress:b,onKeyDown:s,disabled:g},E)))}function _q(t){let{onUpdate:e}=t,n=ln(t,xq);const r=R.useCallback(s=>e(XQ(s)),[e]),i=R.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return ee.createElement(JA,Gn({},n,{onUpdate:r,onKeyDown:i,type:"number"}))}const xv=ht("div",{}),yS=ht("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),wq=ht("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${yS}::after`]:{opacity:.6},[`${xv}:hover > & + ${yS}::after`]:{opacity:.6},[`${xv}:hover > & > svg`]:{opacity:1}}),iF=ht("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${xv}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),sF=ht("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${iF} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),oF=ht(sF,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),Sq=ht("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),bq=ht("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),xS=ht("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),Aq=ht("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${xS}`]:{pointerEvents:"auto"}}}}}),aF=ht("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),Mq=ht("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),Eq=ht(NQ,{fill:"$toolTipBackground"});function XA({children:t}){const{className:e}=R.useContext($A);return ee.createElement(mY,{className:e},t)}const Cq=["align"];function Tq(){const{id:t,disable:e,disabled:n}=$r();return ee.createElement(ee.Fragment,null,ee.createElement(bq,{id:t+"__disable",type:"checkbox",checked:!n,onChange:()=>e(!n)}),ee.createElement("label",{htmlFor:t+"__disable"}))}function Rq(t){const{id:e,optional:n,hint:r}=$r(),i=t.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof t.children=="string"?{title:t.children}:null;return ee.createElement(ee.Fragment,null,n&&ee.createElement(Tq,null),r!==void 0?ee.createElement(FQ,null,ee.createElement(OQ,{asChild:!0},ee.createElement(xS,Gn({},i,t))),ee.createElement(UQ,{side:"top",sideOffset:2},ee.createElement(Mq,null,r,ee.createElement(Eq,null)))):ee.createElement(xS,Gn({},i,s,t)))}function Xs(t){let{align:e}=t,n=ln(t,Cq);const{value:r,label:i,key:s,disabled:o}=$r(),{hideCopyButton:a}=fq(),l=!a&&s!==void 0,[u,c]=R.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),c(!0)}catch{Wo(Pn.CLIPBOARD_ERROR,{[s]:r})}};return ee.createElement(Sq,{align:e,onPointerLeave:()=>c(!1)},ee.createElement(Rq,n),l&&!o&&ee.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},u?ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ee.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),ee.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):ee.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ee.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),ee.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const Pq=["toggled"],Bq=ht("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function KA(t){let{toggled:e}=t,n=ln(t,Pq);return ee.createElement(Bq,Gn({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},n),ee.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const Iq=["input"];function ws(t){let{input:e}=t,n=ln(t,Iq);return e?ee.createElement(oF,n):ee.createElement(sF,n)}function lF({value:t,type:e,settings:n,setValue:r}){const[i,s]=R.useState(Y3(e,t,n)),o=R.useRef(t),a=R.useRef(n);a.current=n;const l=R.useCallback(c=>s(Y3(e,c,a.current)),[e]),u=R.useCallback(c=>{try{r(c)}catch(f){const{type:h,previousValue:m}=f;if(h!=="LEVA_ERROR")throw f;l(m)}},[l,r]);return R.useEffect(()=>{lp(t,o.current)||l(t),o.current=t},[t,l]),{displayValue:i,onChange:s,onUpdate:u}}function jp(t,e){const{emitOnEditStart:n,emitOnEditEnd:r}=$r();return QW(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),n==null||n());const s=t(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function Dq(t){const e=R.useRef(null),n=R.useRef(null),r=R.useRef(!1);return R.useEffect(()=>{const i=$k(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,t(e.current,n.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[t]),R.useEffect(()=>{n.current=e.current.getContext("2d")},[]),[e,n]}function uF(){const t=R.useRef(null),e=R.useRef({x:0,y:0}),n=R.useCallback(r=>{Object.assign(e.current,r),t.current&&(t.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[t,n]}const Lq=["__refCount"],e_=(t,e)=>{if(!t[e])return null;const n=t[e];return ln(n,Lq)};function kq(t){const e=Wp(),[n,r]=R.useState(e_(e.getData(),t)),i=R.useCallback(u=>e.setValueAtPath(t,u,!0),[t,e]),s=R.useCallback(u=>e.setSettingsAtPath(t,u),[t,e]),o=R.useCallback(u=>e.disableInputAtPath(t,u),[t,e]),a=R.useCallback(()=>e.emitOnEditStart(t),[t,e]),l=R.useCallback(()=>e.emitOnEditEnd(t),[t,e]);return R.useEffect(()=>{r(e_(e.getData(),t));const u=e.useStore.subscribe(c=>e_(c.data,t),r,{equalityFn:Vp});return()=>u()},[e,t]),[n,{set:i,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const Fq=ht("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),cF=ht("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),_S=ht("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),fF=ht("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),dF=ht("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function Oq({value:t,min:e,max:n,onDrag:r,step:i,initialValue:s}){const o=R.useRef(null),a=R.useRef(null),l=R.useRef(0),u=Yo("sizes","scrubberWidth"),c=jp(({event:h,first:m,xy:[g],movement:[v],memo:y})=>{if(m){const{width:x,left:w}=o.current.getBoundingClientRect();l.current=x-parseFloat(u),y=(h==null?void 0:h.target)===a.current?t:yv((g-w)/x,e,n)}const _=y+yv(v/l.current,0,n-e);return r(Yk(_,{step:i,initialValue:s})),y}),f=vv(t,e,n);return ee.createElement(fF,Gn({ref:o},c()),ee.createElement(cF,null,ee.createElement(dF,{style:{left:0,right:`${(1-f)*100}%`}})),ee.createElement(_S,{ref:a,style:{left:`calc(${f} * (100% - ${u}))`}}))}const Uq=ee.memo(({label:t,onUpdate:e,step:n,innerLabelTrim:r})=>{const[i,s]=R.useState(!1),o=jp(({active:a,delta:[l],event:u,memo:c=0})=>(s(a),c+=l/2,Math.abs(c)>=1&&(e(f=>parseFloat(f)+Math.floor(c)*n*Jk(u)),c=0),c));return ee.createElement(gq,Gn({dragging:i,title:t.length>1?t:""},o()),t.slice(0,r))});function hF({label:t,id:e,displayValue:n,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&ee.createElement(Uq,{label:t,step:s.step,onUpdate:r,innerLabelTrim:o});return ee.createElement(_q,{id:e,value:String(n),onUpdate:r,onChange:i,innerLabel:a})}function Nq(){const t=$r(),{label:e,value:n,onUpdate:r,settings:i,id:s}=t,{min:o,max:a}=i,l=a!==1/0&&o!==-1/0;return ee.createElement(ws,{input:!0},ee.createElement(Xs,null,e),ee.createElement(Fq,{hasRange:l},l&&ee.createElement(Oq,Gn({value:parseFloat(n),onDrag:r},i)),ee.createElement(hF,Gn({},t,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:zq}=Qk,Gq=ln(Qk,["sanitizeStep"]);var Hq=pt({component:Nq},Gq);const Vq=(t,e)=>Si().schema({options:Si().passesAnyOf(Si().object(),Si().array())}).test(e),Wq=(t,{values:e})=>{if(e.indexOf(t)<0)throw Error("Selected value doesn't match Select options");return t},jq=(t,{values:e})=>e.indexOf(t),$q=t=>{let{value:e,options:n}=t,r,i;return Array.isArray(n)?(i=n,r=n.map(s=>String(s))):(i=Object.values(n),r=Object.keys(n)),"value"in t?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(n).includes(e)||(n[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var Jq=Object.freeze({__proto__:null,schema:Vq,sanitize:Wq,format:jq,normalize:$q});const Xq=ht("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),wS=ht("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),Kq=ht("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${wS}:focus + &`]:{$focusStyle:""},[`${wS}:hover + &`]:{$hoverStyle:""}});function Yq({displayValue:t,value:e,onUpdate:n,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,l=R.useRef();return e===a[t]&&(l.current=o[t]),ee.createElement(Xq,null,ee.createElement(wS,{id:r,value:t,onChange:u=>n(a[Number(u.currentTarget.value)]),disabled:s},o.map((u,c)=>ee.createElement("option",{key:u,value:c},u))),ee.createElement(Kq,null,l.current),ee.createElement(KA,{toggled:!0}))}function Qq(){const{label:t,value:e,displayValue:n,onUpdate:r,id:i,disabled:s,settings:o}=$r();return ee.createElement(ws,{input:!0},ee.createElement(Xs,null,t),ee.createElement(Yq,{id:i,value:e,displayValue:n,onUpdate:r,settings:o,disabled:s}))}var qq=pt({component:Qq},Jq);const Zq=t=>Si().string().test(t),eZ=t=>{if(typeof t!="string")throw Error("Invalid string");return t},tZ=({value:t,editable:e=!0,rows:n=!1})=>({value:t,settings:{editable:e,rows:typeof n=="number"?n:n?5:0}});var nZ=Object.freeze({__proto__:null,schema:Zq,sanitize:eZ,normalize:tZ});const rZ=["displayValue","onUpdate","onChange","editable"],iZ=ht("div",{whiteSpace:"pre-wrap"});function sZ(t){let{displayValue:e,onUpdate:n,onChange:r,editable:i=!0}=t,s=ln(t,rZ);return i?ee.createElement(JA,Gn({value:e,onUpdate:n,onChange:r},s)):ee.createElement(iZ,null,e)}function oZ(){const{label:t,settings:e,displayValue:n,onUpdate:r,onChange:i}=$r();return ee.createElement(ws,{input:!0},ee.createElement(Xs,null,t),ee.createElement(sZ,Gn({displayValue:n,onUpdate:r,onChange:i},e)))}var aZ=pt({component:oZ},nZ);const lZ=t=>Si().boolean().test(t),uZ=t=>{if(typeof t!="boolean")throw Error("Invalid boolean");return t};var cZ=Object.freeze({__proto__:null,schema:lZ,sanitize:uZ});const fZ=ht("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function dZ({value:t,onUpdate:e,id:n,disabled:r}){return ee.createElement(fZ,null,ee.createElement("input",{id:n,type:"checkbox",checked:t,onChange:i=>e(i.currentTarget.checked),disabled:r}),ee.createElement("label",{htmlFor:n},ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ee.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function hZ(){const{label:t,value:e,onUpdate:n,disabled:r,id:i}=$r();return ee.createElement(ws,{input:!0},ee.createElement(Xs,null,t),ee.createElement(dZ,{value:e,onUpdate:n,id:i,disabled:r}))}var pZ=pt({component:hZ},cZ);const mZ=["locked"];function gZ({value:t,id:e,valueKey:n,settings:r,onUpdate:i,innerLabelTrim:s}){const o=R.useRef(t[n]);o.current=t[n];const a=R.useCallback(u=>i({[n]:jk({type:"NUMBER",value:o.current,settings:r},u)}),[i,r,n]),l=lF({type:"NUMBER",value:t[n],settings:r,setValue:a});return ee.createElement(hF,{id:e,label:n,value:t[n],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const vZ=ht("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function yZ(t){let{locked:e}=t,n=ln(t,mZ);return ee.createElement("svg",Gn({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),e?ee.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):ee.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function YA({value:t,onUpdate:e,settings:n,innerLabelTrim:r}){const{id:i,setSettings:s}=$r(),{lock:o,locked:a}=n;return ee.createElement(vZ,{withLock:o},o&&ee.createElement(yZ,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(t).map((l,u)=>ee.createElement(gZ,{id:u===0?i:`${i}.${l}`,key:l,valueKey:l,value:t,settings:n[l],onUpdate:e,innerLabelTrim:r})))}const pF=(t,e)=>{const n={};let r=0,i=1/0;Object.entries(t).forEach(([s,o])=>{n[s]=Kk(pt({value:o},e[s])).settings,r=Math.max(r,n[s].step),i=Math.min(i,n[s].pad)});for(let s in n){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(n[s].step=r,n[s].pad=i)}return n},xZ=["lock"],_Z=["value"];function wZ(t){const e=Si().array().length(t).every.number(),n=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===t&&i.every(s=>isFinite(s))};return r=>e.test(r)||n(r)}function SZ(t){return Array.isArray(t)?"array":"object"}function bh(t,e,n){return SZ(t)===e?t:e==="array"?Object.values(t):ZQ(t,n)}const bZ=(t,e,n)=>{const r=bh(t,"object",e.keys);for(let o in r)r[o]=Xk(r[o],e[o]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const o=bh(n,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],u=o[a],c=u!==0?l/u:1;for(let f in o)f===a?s[a]=l:s[f]=o[f]*c}else s=pt(pt({},o),r)}return bh(s,e.format,e.keys)},AZ=(t,e)=>bh(t,"object",e.keys),MZ=t=>!!t&&("step"in t||"min"in t||"max"in t);function EZ(t,e,n=[]){const{lock:r=!1}=e,i=ln(e,xZ),s=Array.isArray(t)?"array":"object",o=s==="object"?Object.keys(t):n,a=bh(t,"object",o),l=MZ(i)?o.reduce((c,f)=>Object.assign(c,{[f]:i}),{}):i,u=pF(a,l);return{value:s==="array"?t:a,settings:pt(pt({},u),{},{format:s,keys:o,lock:r,locked:!1})}}function mF(t){return{schema:wZ(t.length),normalize:e=>{let{value:n}=e,r=ln(e,_Z);return EZ(n,r,t)},format:(e,n)=>AZ(e,n),sanitize:(e,n,r)=>bZ(e,n,r)}}var CZ={grad:.9,turn:360,rad:360/(2*Math.PI)},Uo=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},pr=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},gs=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},gF=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},oR=function(t){return{r:gs(t.r,0,255),g:gs(t.g,0,255),b:gs(t.b,0,255),a:gs(t.a)}},t_=function(t){return{r:pr(t.r),g:pr(t.g),b:pr(t.b),a:pr(t.a,3)}},TZ=/^#([0-9a-f]{3,8})$/i,t0=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},vF=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},yF=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),l=r*(1-(1-e+s)*n),u=s%6;return{r:255*[r,a,o,o,l,r][u],g:255*[l,r,r,a,o,o][u],b:255*[o,o,l,r,r,a][u],a:i}},aR=function(t){return{h:gF(t.h),s:gs(t.s,0,100),l:gs(t.l,0,100),a:gs(t.a)}},lR=function(t){return{h:pr(t.h),s:pr(t.s),l:pr(t.l),a:pr(t.a,3)}},uR=function(t){return yF((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},Ah=function(t){return{h:(e=vF(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},RZ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,PZ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,BZ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,IZ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,SS={string:[[function(t){var e=TZ.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?pr(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?pr(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=BZ.exec(t)||IZ.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:oR({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=RZ.exec(t)||PZ.exec(t);if(!e)return null;var n,r,i=aR({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(CZ[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return uR(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=i===void 0?1:i;return Uo(e)&&Uo(n)&&Uo(r)?oR({r:Number(e),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,s=i===void 0?1:i;if(!Uo(e)||!Uo(n)||!Uo(r))return null;var o=aR({h:Number(e),s:Number(n),l:Number(r),a:Number(s)});return uR(o)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,s=i===void 0?1:i;if(!Uo(e)||!Uo(n)||!Uo(r))return null;var o=function(a){return{h:gF(a.h),s:gs(a.s,0,100),v:gs(a.v,0,100),a:gs(a.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(s)});return yF(o)},"hsv"]]},cR=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},xF=function(t){return typeof t=="string"?cR(t.trim(),SS.string):typeof t=="object"&&t!==null?cR(t,SS.object):[null,void 0]},DZ=function(t){return xF(t)[1]},n_=function(t,e){var n=Ah(t);return{h:n.h,s:gs(n.s+100*e,0,100),l:n.l,a:n.a}},r_=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},fR=function(t,e){var n=Ah(t);return{h:n.h,s:n.s,l:gs(n.l+100*e,0,100),a:n.a}},bS=function(){function t(e){this.parsed=xF(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return pr(r_(this.rgba),2)},t.prototype.isDark=function(){return r_(this.rgba)<.5},t.prototype.isLight=function(){return r_(this.rgba)>=.5},t.prototype.toHex=function(){return e=t_(this.rgba),n=e.r,r=e.g,i=e.b,o=(s=e.a)<1?t0(pr(255*s)):"","#"+t0(n)+t0(r)+t0(i)+o;var e,n,r,i,s,o},t.prototype.toRgb=function(){return t_(this.rgba)},t.prototype.toRgbString=function(){return e=t_(this.rgba),n=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+n+", "+r+", "+i+", "+s+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,s},t.prototype.toHsl=function(){return lR(Ah(this.rgba))},t.prototype.toHslString=function(){return e=lR(Ah(this.rgba)),n=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+s+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,s},t.prototype.toHsv=function(){return e=vF(this.rgba),{h:pr(e.h),s:pr(e.s),v:pr(e.v),a:pr(e.a,3)};var e},t.prototype.invert=function(){return ii({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),ii(n_(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),ii(n_(this.rgba,-e))},t.prototype.grayscale=function(){return ii(n_(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),ii(fR(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),ii(fR(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?ii({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):pr(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=Ah(this.rgba);return typeof e=="number"?ii({h:e,s:n.s,l:n.l,a:n.a}):pr(n.h)},t.prototype.isEqual=function(e){return this.toHex()===ii(e).toHex()},t}(),ii=function(t){return t instanceof bS?t:new bS(t)},dR=[],LZ=function(t){t.forEach(function(e){dR.indexOf(e)<0&&(e(bS,SS),dR.push(e))})};function kZ(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=r[this.toHex()];if(u)return u;if(o!=null&&o.closest){var c=this.toRgb(),f=1/0,h="black";if(!s.length)for(var m in n)s[m]=new t(n[m]).toRgb();for(var g in n){var v=(a=c,l=s[g],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));v<f&&(f=v,h=g)}return h}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":n[a];return l?new t(l).toRgb():null},"name"])}function $f(){return($f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function QA(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)e.indexOf(n=s[r])>=0||(i[n]=t[n]);return i}function AS(t){var e=R.useRef(t),n=R.useRef(function(r){e.current&&e.current(r)});return e.current=t,n.current}var Pf=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t<e?e:t},Mh=function(t){return"touches"in t},MS=function(t){return t&&t.ownerDocument.defaultView||self},hR=function(t,e,n){var r=t.getBoundingClientRect(),i=Mh(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,n):e;return{left:Pf((i.pageX-(r.left+MS(t).pageXOffset))/r.width),top:Pf((i.pageY-(r.top+MS(t).pageYOffset))/r.height)}},pR=function(t){!Mh(t)&&t.preventDefault()},qA=ee.memo(function(t){var e=t.onMove,n=t.onKey,r=QA(t,["onMove","onKey"]),i=R.useRef(null),s=AS(e),o=AS(n),a=R.useRef(null),l=R.useRef(!1),u=R.useMemo(function(){var m=function(y){pR(y),(Mh(y)?y.touches.length>0:y.buttons>0)&&i.current?s(hR(i.current,y,a.current)):v(!1)},g=function(){return v(!1)};function v(y){var _=l.current,x=MS(i.current),w=y?x.addEventListener:x.removeEventListener;w(_?"touchmove":"mousemove",m),w(_?"touchend":"mouseup",g)}return[function(y){var _=y.nativeEvent,x=i.current;if(x&&(pR(_),!function(b,E){return E&&!Mh(b)}(_,l.current)&&x)){if(Mh(_)){l.current=!0;var w=_.changedTouches||[];w.length&&(a.current=w[0].identifier)}x.focus(),s(hR(x,_,a.current)),v(!0)}},function(y){var _=y.which||y.keyCode;_<37||_>40||(y.preventDefault(),o({left:_===39?.05:_===37?-.05:0,top:_===40?.05:_===38?-.05:0}))},v]},[o,s]),c=u[0],f=u[1],h=u[2];return R.useEffect(function(){return h},[h]),ee.createElement("div",$f({},r,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))}),$p=function(t){return t.filter(Boolean).join(" ")},ZA=function(t){var e=t.color,n=t.left,r=t.top,i=r===void 0?.5:r,s=$p(["react-colorful__pointer",t.className]);return ee.createElement("div",{className:s,style:{top:100*i+"%",left:100*n+"%"}},ee.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},ai=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n},_F=function(t){var e=t.s,n=t.v,r=t.a,i=(200-e)*n/100;return{h:ai(t.h),s:ai(i>0&&i<200?e*n/100/(i<=100?i:200-i)*100:0),l:ai(i/2),a:ai(r,2)}},ES=function(t){var e=_F(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},i_=function(t){var e=_F(t);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},wF=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),l=r*(1-(1-e+s)*n),u=s%6;return{r:ai(255*[r,a,o,o,l,r][u]),g:ai(255*[l,r,r,a,o,o][u]),b:ai(255*[o,o,l,r,r,a][u]),a:ai(i,2)}},SF=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:ai(60*(a<0?a+6:a)),s:ai(s?o/s*100:0),v:ai(s/255*100),a:i}},bF=ee.memo(function(t){var e=t.hue,n=t.onChange,r=$p(["react-colorful__hue",t.className]);return ee.createElement("div",{className:r},ee.createElement(qA,{onMove:function(i){n({h:360*i.left})},onKey:function(i){n({h:Pf(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":ai(e),"aria-valuemax":"360","aria-valuemin":"0"},ee.createElement(ZA,{className:"react-colorful__hue-pointer",left:e/360,color:ES({h:e,s:100,v:100,a:1})})))}),AF=ee.memo(function(t){var e=t.hsva,n=t.onChange,r={backgroundColor:ES({h:e.h,s:100,v:100,a:1})};return ee.createElement("div",{className:"react-colorful__saturation",style:r},ee.createElement(qA,{onMove:function(i){n({s:100*i.left,v:100-100*i.top})},onKey:function(i){n({s:Pf(e.s+100*i.left,0,100),v:Pf(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ai(e.s)+"%, Brightness "+ai(e.v)+"%"},ee.createElement(ZA,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:ES(e)})))}),eM=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0};function MF(t,e,n){var r=AS(n),i=R.useState(function(){return t.toHsva(e)}),s=i[0],o=i[1],a=R.useRef({color:e,hsva:s});R.useEffect(function(){if(!t.equal(e,a.current.color)){var u=t.toHsva(e);a.current={hsva:u,color:e},o(u)}},[e,t]),R.useEffect(function(){var u;eM(s,a.current.hsva)||t.equal(u=t.fromHsva(s),a.current.color)||(a.current={hsva:s,color:u},r(u))},[s,t,r]);var l=R.useCallback(function(u){o(function(c){return Object.assign({},c,u)})},[]);return[s,l]}var FZ=typeof window<"u"?R.useLayoutEffect:R.useEffect,OZ=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},mR=new Map,EF=function(t){FZ(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!mR.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,mR.set(e,n);var r=OZ();r&&n.setAttribute("nonce",r),e.head.appendChild(n)}},[])},UZ=function(t){var e=t.className,n=t.colorModel,r=t.color,i=r===void 0?n.defaultColor:r,s=t.onChange,o=QA(t,["className","colorModel","color","onChange"]),a=R.useRef(null);EF(a);var l=MF(n,i,s),u=l[0],c=l[1],f=$p(["react-colorful",e]);return ee.createElement("div",$f({},o,{ref:a,className:f}),ee.createElement(AF,{hsva:u,onChange:c}),ee.createElement(bF,{hue:u.h,onChange:c,className:"react-colorful__last-control"}))},NZ=function(t){var e=t.className,n=t.hsva,r=t.onChange,i={backgroundImage:"linear-gradient(90deg, "+i_(Object.assign({},n,{a:0}))+", "+i_(Object.assign({},n,{a:1}))+")"},s=$p(["react-colorful__alpha",e]),o=ai(100*n.a);return ee.createElement("div",{className:s},ee.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),ee.createElement(qA,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:Pf(n.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},ee.createElement(ZA,{className:"react-colorful__alpha-pointer",left:n.a,color:i_(n)})))},zZ=function(t){var e=t.className,n=t.colorModel,r=t.color,i=r===void 0?n.defaultColor:r,s=t.onChange,o=QA(t,["className","colorModel","color","onChange"]),a=R.useRef(null);EF(a);var l=MF(n,i,s),u=l[0],c=l[1],f=$p(["react-colorful",e]);return ee.createElement("div",$f({},o,{ref:a,className:f}),ee.createElement(AF,{hsva:u,onChange:c}),ee.createElement(bF,{hue:u.h,onChange:c}),ee.createElement(NZ,{hsva:u,onChange:c,className:"react-colorful__last-control"}))},GZ={defaultColor:{r:0,g:0,b:0,a:1},toHsva:SF,fromHsva:wF,equal:eM},HZ=function(t){return ee.createElement(zZ,$f({},t,{colorModel:GZ}))},VZ={defaultColor:{r:0,g:0,b:0},toHsva:function(t){return SF({r:t.r,g:t.g,b:t.b,a:1})},fromHsva:function(t){return{r:(e=wF(t)).r,g:e.g,b:e.b};var e},equal:eM},WZ=function(t){return ee.createElement(UZ,$f({},t,{colorModel:VZ}))};function Jf(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function Xf(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function jZ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function $Z(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(jZ(arguments[e]));return t}var JZ=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Jp(t,e){var n=XZ(t);if(typeof n.path!="string"){var r=t.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}function XZ(t){var e=t.name,n=e&&e.lastIndexOf(".")!==-1;if(n&&!t.type){var r=e.split(".").pop().toLowerCase(),i=JZ.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}var KZ=[".DS_Store","Thumbs.db"];function YZ(t){return Jf(this,void 0,void 0,function(){return Xf(this,function(e){return _v(t)&&QZ(t)?[2,tee(t.dataTransfer,t.type)]:qZ(t)?[2,ZZ(t)]:Array.isArray(t)&&t.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,eee(t)]:[2,[]]})})}function QZ(t){return _v(t.dataTransfer)}function qZ(t){return _v(t)&&_v(t.target)}function _v(t){return typeof t=="object"&&t!==null}function ZZ(t){return CS(t.target.files).map(function(e){return Jp(e)})}function eee(t){return Jf(this,void 0,void 0,function(){var e;return Xf(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(r){return r.getFile()}))];case 1:return e=n.sent(),[2,e.map(function(r){return Jp(r)})]}})})}function tee(t,e){return Jf(this,void 0,void 0,function(){var n,r;return Xf(this,function(i){switch(i.label){case 0:return t===null?[2,[]]:t.items?(n=CS(t.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,n]:[4,Promise.all(n.map(nee))]):[3,2];case 1:return r=i.sent(),[2,gR(CF(r))];case 2:return[2,gR(CS(t.files).map(function(s){return Jp(s)}))]}})})}function gR(t){return t.filter(function(e){return KZ.indexOf(e.name)===-1})}function CS(t){if(t===null)return[];for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r)}return e}function nee(t){if(typeof t.webkitGetAsEntry!="function")return vR(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?TF(e):vR(t)}function CF(t){return t.reduce(function(e,n){return $Z(e,Array.isArray(n)?CF(n):[n])},[])}function vR(t){var e=t.getAsFile();if(!e)return Promise.reject(t+" is not a File");var n=Jp(e);return Promise.resolve(n)}function ree(t){return Jf(this,void 0,void 0,function(){return Xf(this,function(e){return[2,t.isDirectory?TF(t):iee(t)]})})}function TF(t){var e=t.createReader();return new Promise(function(n,r){var i=[];function s(){var o=this;e.readEntries(function(a){return Jf(o,void 0,void 0,function(){var l,u,c;return Xf(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=f.sent(),n(l),[3,4];case 3:return u=f.sent(),r(u),[3,4];case 4:return[3,6];case 5:c=Promise.all(a.map(ree)),i.push(c),s(),f.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function iee(t){return Jf(this,void 0,void 0,function(){return Xf(this,function(e){return[2,new Promise(function(n,r){t.file(function(i){var s=Jp(i,t.fullPath);n(s)},function(i){r(i)})})]})})}var see=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function yR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yR(Object(n),!0).forEach(function(r){RF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RF(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _R(t,e){return uee(t)||lee(t,e)||aee(t,e)||oee()}function oee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aee(t,e){if(t){if(typeof t=="string")return wR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wR(t,e)}}function wR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lee(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function uee(t){if(Array.isArray(t))return t}var cee="file-invalid-type",fee="file-too-large",dee="file-too-small",hee="too-many-files",pee=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:cee,message:"File type must be ".concat(n)}},SR=function(e){return{code:fee,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},bR=function(e){return{code:dee,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},mee={code:hee,message:"Too many files"};function PF(t,e){var n=t.type==="application/x-moz-file"||see(t,e);return[n,n?null:pee(e)]}function BF(t,e,n){if(Yd(t.size))if(Yd(e)&&Yd(n)){if(t.size>n)return[!1,SR(n)];if(t.size<e)return[!1,bR(e)]}else{if(Yd(e)&&t.size<e)return[!1,bR(e)];if(Yd(n)&&t.size>n)return[!1,SR(n)]}return[!0,null]}function Yd(t){return t!=null}function gee(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=PF(a,n),u=_R(l,1),c=u[0],f=BF(a,r,i),h=_R(f,1),m=h[0];return c&&m})}function wv(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function n0(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function AR(t){t.preventDefault()}function vee(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function yee(t){return t.indexOf("Edge/")!==-1}function xee(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return vee(t)||yee(t)}function so(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!wv(r)&&a&&a.apply(void 0,[r].concat(s)),wv(r)})}}function _ee(){return"showOpenFilePicker"in window}function wee(t){return t=typeof t=="string"?t.split(","):t,[{description:"everything",accept:Array.isArray(t)?t.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,n){return xR(xR({},e),{},RF({},n,[]))},{}):{}}]}function See(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function bee(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}var Aee=["children"],Mee=["open"],Eee=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Cee=["refKey","onChange","onClick"];function Tee(t){return Bee(t)||Pee(t)||IF(t)||Ree()}function Ree(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Bee(t){if(Array.isArray(t))return TS(t)}function s_(t,e){return Lee(t)||Dee(t,e)||IF(t,e)||Iee()}function Iee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IF(t,e){if(t){if(typeof t=="string")return TS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TS(t,e)}}function TS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dee(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function Lee(t){if(Array.isArray(t))return t}function MR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MR(Object(n),!0).forEach(function(r){RS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RS(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sv(t,e){if(t==null)return{};var n=kee(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kee(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var tM=R.forwardRef(function(t,e){var n=t.children,r=Sv(t,Aee),i=LF(r),s=i.open,o=Sv(i,Mee);return R.useImperativeHandle(e,function(){return{open:s}},[s]),ee.createElement(R.Fragment,null,n(Rn(Rn({},o),{},{open:s})))});tM.displayName="Dropzone";var DF={disabled:!1,getFilesFromEvent:YZ,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};tM.defaultProps=DF;tM.propTypes={children:on.func,accept:on.oneOfType([on.string,on.arrayOf(on.string)]),multiple:on.bool,preventDropOnDocument:on.bool,noClick:on.bool,noKeyboard:on.bool,noDrag:on.bool,noDragEventsBubbling:on.bool,minSize:on.number,maxSize:on.number,maxFiles:on.number,disabled:on.bool,getFilesFromEvent:on.func,onFileDialogCancel:on.func,onFileDialogOpen:on.func,useFsAccessApi:on.bool,onDragEnter:on.func,onDragLeave:on.func,onDragOver:on.func,onDrop:on.func,onDropAccepted:on.func,onDropRejected:on.func,validator:on.func};var PS={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function LF(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Rn(Rn({},DF),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,u=e.onDragEnter,c=e.onDragLeave,f=e.onDragOver,h=e.onDrop,m=e.onDropAccepted,g=e.onDropRejected,v=e.onFileDialogCancel,y=e.onFileDialogOpen,_=e.useFsAccessApi,x=e.preventDropOnDocument,w=e.noClick,b=e.noKeyboard,E=e.noDrag,C=e.noDragEventsBubbling,P=e.validator,M=R.useMemo(function(){return typeof y=="function"?y:ER},[y]),B=R.useMemo(function(){return typeof v=="function"?v:ER},[v]),D=R.useRef(null),k=R.useRef(null),O=R.useReducer(Fee,PS),U=s_(O,2),N=U[0],$=U[1],Q=N.isFocused,ie=N.isFileDialogActive,F=N.draggedFiles,z=R.useRef(typeof window<"u"&&window.isSecureContext&&_&&_ee()),j=function(){!z.current&&ie&&setTimeout(function(){if(k.current){var q=k.current.files;q.length||($({type:"closeDialog"}),B())}},300)};R.useEffect(function(){return window.addEventListener("focus",j,!1),function(){window.removeEventListener("focus",j,!1)}},[k,ie,B,z]);var H=R.useRef([]),G=function(q){D.current&&D.current.contains(q.target)||(q.preventDefault(),H.current=[])};R.useEffect(function(){return x&&(document.addEventListener("dragover",AR,!1),document.addEventListener("drop",G,!1)),function(){x&&(document.removeEventListener("dragover",AR),document.removeEventListener("drop",G))}},[D,x]);var Z=R.useCallback(function(L){L.preventDefault(),L.persist(),Re(L),H.current=[].concat(Tee(H.current),[L.target]),n0(L)&&Promise.resolve(i(L)).then(function(q){wv(L)&&!C||($({draggedFiles:q,isDragActive:!0,type:"setDraggedFiles"}),u&&u(L))})},[i,u,C]),re=R.useCallback(function(L){L.preventDefault(),L.persist(),Re(L);var q=n0(L);if(q&&L.dataTransfer)try{L.dataTransfer.dropEffect="copy"}catch{}return q&&f&&f(L),!1},[f,C]),se=R.useCallback(function(L){L.preventDefault(),L.persist(),Re(L);var q=H.current.filter(function(Be){return D.current&&D.current.contains(Be)}),fe=q.indexOf(L.target);fe!==-1&&q.splice(fe,1),H.current=q,!(q.length>0)&&($({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),n0(L)&&c&&c(L))},[D,c,C]),Y=R.useCallback(function(L,q){var fe=[],Be=[];L.forEach(function(Ie){var Ne=PF(Ie,n),Ue=s_(Ne,2),_e=Ue[0],We=Ue[1],K=BF(Ie,o,s),pe=s_(K,2),Se=pe[0],Ae=pe[1],Ge=P?P(Ie):null;if(_e&&Se&&!Ge)fe.push(Ie);else{var et=[We,Ae];Ge&&(et=et.concat(Ge)),Be.push({file:Ie,errors:et.filter(function(mt){return mt})})}}),(!a&&fe.length>1||a&&l>=1&&fe.length>l)&&(fe.forEach(function(Ie){Be.push({file:Ie,errors:[mee]})}),fe.splice(0)),$({acceptedFiles:fe,fileRejections:Be,type:"setFiles"}),h&&h(fe,Be,q),Be.length>0&&g&&g(Be,q),fe.length>0&&m&&m(fe,q)},[$,a,n,o,s,l,h,m,g,P]),ae=R.useCallback(function(L){L.preventDefault(),L.persist(),Re(L),H.current=[],n0(L)&&Promise.resolve(i(L)).then(function(q){wv(L)&&!C||Y(q,L)}),$({type:"reset"})},[i,Y,C]),he=R.useCallback(function(){if(z.current){$({type:"openDialog"}),M();var L={multiple:a,types:wee(n)};window.showOpenFilePicker(L).then(function(q){return i(q)}).then(function(q){Y(q,null),$({type:"closeDialog"})}).catch(function(q){See(q)?(B(q),$({type:"closeDialog"})):bee(q)&&(z.current=!1,k.current&&(k.current.value=null,k.current.click()))});return}k.current&&($({type:"openDialog"}),M(),k.current.value=null,k.current.click())},[$,M,B,_,Y,n,a]),Ce=R.useCallback(function(L){!D.current||!D.current.isEqualNode(L.target)||(L.key===" "||L.key==="Enter"||L.keyCode===32||L.keyCode===13)&&(L.preventDefault(),he())},[D,he]),ve=R.useCallback(function(){$({type:"focus"})},[]),xe=R.useCallback(function(){$({type:"blur"})},[]),ne=R.useCallback(function(){w||(xee()?setTimeout(he,0):he())},[w,he]),le=function(q){return r?null:q},Pe=function(q){return b?null:le(q)},ke=function(q){return E?null:le(q)},Re=function(q){C&&q.stopPropagation()},Ve=R.useMemo(function(){return function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=L.refKey,fe=q===void 0?"ref":q,Be=L.role,Ie=L.onKeyDown,Ne=L.onFocus,Ue=L.onBlur,_e=L.onClick,We=L.onDragEnter,K=L.onDragOver,pe=L.onDragLeave,Se=L.onDrop,Ae=Sv(L,Eee);return Rn(Rn(RS({onKeyDown:Pe(so(Ie,Ce)),onFocus:Pe(so(Ne,ve)),onBlur:Pe(so(Ue,xe)),onClick:le(so(_e,ne)),onDragEnter:ke(so(We,Z)),onDragOver:ke(so(K,re)),onDragLeave:ke(so(pe,se)),onDrop:ke(so(Se,ae)),role:typeof Be=="string"&&Be!==""?Be:"button"},fe,D),!r&&!b?{tabIndex:0}:{}),Ae)}},[D,Ce,ve,xe,ne,Z,re,se,ae,b,E,r]),Me=R.useCallback(function(L){L.stopPropagation()},[]),Fe=R.useMemo(function(){return function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=L.refKey,fe=q===void 0?"ref":q,Be=L.onChange,Ie=L.onClick,Ne=Sv(L,Cee),Ue=RS({accept:n,multiple:a,type:"file",style:{display:"none"},onChange:le(so(Be,ae)),onClick:le(so(Ie,Me)),tabIndex:-1},fe,k);return Rn(Rn({},Ue),Ne)}},[k,n,a,ae,r]),ze=F.length,Ee=ze>0&&gee({files:F,accept:n,minSize:o,maxSize:s,multiple:a,maxFiles:l}),W=ze>0&&!Ee;return Rn(Rn({},N),{},{isDragAccept:Ee,isDragReject:W,isFocused:Q&&!r,getRootProps:Ve,getInputProps:Fe,rootRef:D,inputRef:k,open:le(he)})}function Fee(t,e){switch(e.type){case"focus":return Rn(Rn({},t),{},{isFocused:!0});case"blur":return Rn(Rn({},t),{},{isFocused:!1});case"openDialog":return Rn(Rn({},PS),{},{isFileDialogActive:!0});case"closeDialog":return Rn(Rn({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=e.isDragActive,r=e.draggedFiles;return Rn(Rn({},t),{},{draggedFiles:r,isDragActive:n});case"setFiles":return Rn(Rn({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Rn({},PS);default:return t}}function ER(){}function Oee(t){let e;const n=new Set,r=(u,c)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const h=e;e=c?f:Object.assign({},e,f),n.forEach(m=>m(e,h))}},i=()=>e,s=(u,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=c(e);function m(){const g=c(e);if(!f(h,g)){const v=h;u(h=g,v)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:i,subscribe:(u,c,f)=>c||f?s(u,c,f):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(r,i,l),l}const Uee=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),CR=Uee?R.useEffect:R.useLayoutEffect;function Nee(t){const e=typeof t=="function"?Oee(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=R.useReducer(y=>y+1,0),o=e.getState(),a=R.useRef(o),l=R.useRef(r),u=R.useRef(i),c=R.useRef(!1),f=R.useRef();f.current===void 0&&(f.current=r(o));let h,m=!1;(a.current!==o||l.current!==r||u.current!==i||c.current)&&(h=r(o),m=!i(f.current,h)),CR(()=>{m&&(f.current=h),a.current=o,l.current=r,u.current=i,c.current=!1});const g=R.useRef(o);CR(()=>{const y=()=>{try{const x=e.getState(),w=l.current(x);u.current(f.current,w)||(a.current=x,f.current=w,s())}catch{c.current=!0,s()}},_=e.subscribe(y);return e.getState()!==g.current&&y(),_},[]);const v=m?h:f.current;return R.useDebugValue(v),v};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}const zee=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let u=o;if(a){const c=(l==null?void 0:l.equalityFn)||Object.is;let f=o(r.getState());u=h=>{const m=o(h);if(!c(f,m)){const g=f;a(f=m,g)}},l!=null&&l.fireImmediately&&a(f,f)}return i(u)},t(e,n,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Gee=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Hee=Gee;function TR(t){return Hee(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}var kF=function(e){var n,r;return!(TR(e)===!1||(n=e.constructor,typeof n!="function")||(r=n.prototype,TR(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Vee=kF,nM=function(e){return Vee(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Wee=function(e,n,r){for(var i in e)if(n.call(r,e[i],i,e)===!1)break},jee=nM,$ee=Wee;function FF(t,e){for(var n=arguments.length,r=0;++r<n;){var i=arguments[r];BS(i)&&$ee(i,Jee,t)}return t}function Jee(t,e){if(Xee(e)){var n=this[e];BS(t)&&BS(n)?FF(n,t):this[e]=t}}function BS(t){return jee(t)&&!Array.isArray(t)}function Xee(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}var Kee=FF;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Yee=function(t,e,n,r,i){if(!Qee(t)||!e)return t;if(e=r0(e),n&&(e+="."+r0(n)),r&&(e+="."+r0(r)),i&&(e+="."+r0(i)),e in t)return t[e];for(var s=e.split("."),o=s.length,a=-1;t&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];t=t[l]}return t};function Qee(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function r0(t){return t?Array.isArray(t)?t.join("."):t:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var qee=function(t,e){if(t===null||typeof t>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return t;for(var n=Object.prototype.propertyIsEnumerable,r=Object(t),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var u=a[l];n.call(o,u)&&(r[u]=o[u])}return r},Zee=nM,ete=qee,tte=Object.assign||function(t){if(t===null||typeof t>"u")throw new TypeError("Cannot convert undefined or null to object");RR(t)||(t={});for(var e=1;e<arguments.length;e++){var n=arguments[e];rte(n)&&(n=ite(n)),RR(n)&&(nte(t,n),ete(t,n))}return t};function nte(t,e){for(var n in e)ste(e,n)&&(t[n]=e[n])}function rte(t){return t&&typeof t=="string"}function ite(t){var e={};for(var n in t)e[n]=t[n];return e}function RR(t){return t&&typeof t=="object"||Zee(t)}function ste(t,e){return Object.prototype.hasOwnProperty.call(t,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ote=tte,ate=function(t,e,n){if(typeof t!="string")throw new TypeError("expected a string");typeof e=="function"&&(n=e,e=null),typeof e=="string"&&(e={sep:e});var r=ote({sep:"."},e),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var o=[],a=[],l=[""],u=r.sep,c=t.length,f=-1,h;function m(){if(s&&a.length)return s[a[a.length-1]]}for(;++f<c;){var g=t[f],v=t[f+1],y={val:g,idx:f,arr:l,str:t};if(o.push(y),g==="\\"){y.val=ute(r,t,f)===!0?g+v:v,y.escaped=!0,typeof n=="function"&&n(y),l[l.length-1]+=y.val,f++;continue}if(s&&s[g]){a.push(g);var _=m(),x=f+1;if(t.indexOf(_,x+1)!==-1)for(;a.length&&x<c;){var w=t[++x];if(w==="\\"){w++;continue}if(i.indexOf(w)!==-1){x=IS(t,w,x+1);continue}if(_=m(),a.length&&t.indexOf(_,x+1)===-1)break;if(s[w]){a.push(w);continue}_===w&&a.pop()}if(h=x,h===-1){l[l.length-1]+=g;continue}g=t.slice(f,h+1),y.val=g,y.idx=f=h}if(i.indexOf(g)!==-1){if(h=IS(t,g,f+1),h===-1){l[l.length-1]+=g;continue}lte(g,r)===!0?g=t.slice(f,h+1):g=t.slice(f+1,h),y.val=g,y.idx=f=h}if(typeof n=="function"&&(n(y,o),g=y.val,f=y.idx),y.val===u&&y.split!==!1){l.push("");continue}l[l.length-1]+=y.val}return l};function IS(t,e,n,r){var i=t.indexOf(e,n);return t.charAt(i-1)==="\\"?IS(t,e,i+1):i}function lte(t,e){return e.keepDoubleQuotes===!0&&t==='"'||e.keepSingleQuotes===!0&&t==="'"?!0:e.keepQuotes}function ute(t,e,n){return typeof t.keepEscaping=="function"?t.keepEscaping(e,n):t.keepEscaping===!0||e[n+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var cte=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},PR=cte,fte=function(e){PR(e)||(e={});for(var n=arguments.length,r=1;r<n;r++){var i=arguments[r];PR(i)&&dte(e,i)}return e};function dte(t,e){for(var n in e)hte(e,n)&&(t[n]=e[n])}function hte(t,e){return Object.prototype.hasOwnProperty.call(t,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var pte=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var mte=ate,gte=fte,BR=kF,IR=pte,vte=function(t,e,n){if(!IR(t)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return t;for(var r=mte(e,{sep:".",brackets:!0}).filter(yte),i=r.length,s=-1,o=t;++s<i;){var a=r[s];if(s!==i-1){IR(o[a])||(o[a]={}),o=o[a];continue}BR(o[a])&&BR(n)?o[a]=gte({},o[a],n):o[a]=n}return t};function yte(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}var o_=nM,DR=Kee,xte=Yee,LR=vte,_te=function(e,n,r){if(!o_(e))throw new TypeError("expected an object");if(typeof n!="string"||r==null)return DR.apply(null,arguments);if(typeof r=="string")return LR(e,n,r),e;var i=xte(e,n);return o_(r)&&o_(i)&&(r=DR({},i,r)),LR(e,n,r),e};const rM=(...t)=>t.filter(Boolean).join(".");function wte(t){const e=t.split(".");return[e.pop(),e.join(".")||void 0]}function Ste(t,e){return Object.entries(QQ(t,e)).reduce((n,[,{value:r,disabled:i,key:s}])=>(n[s]=i?void 0:r,n),{})}function bte(t,e){const n=R.useRef();return(e?lp:Vp)(t,n.current)||(n.current=t),n.current}function OF(t,e){return R.useMemo(t,bte(e,!0))}function Ate(t){const e=R.useRef(null),n=R.useRef(null),r=R.useRef(!0);return R.useLayoutEffect(()=>{t||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),R.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,o=()=>{t&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),n.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=n.current.getBoundingClientRect();return s.style.height=a+"px",t||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[t]),{wrapperRef:e,contentRef:n}}const Mte=t=>{const[e,n]=R.useState(t.getVisiblePaths());return R.useEffect(()=>{n(t.getVisiblePaths());const r=t.useStore.subscribe(t.getVisiblePaths,n,{equalityFn:Vp});return()=>r()},[t]),e};function Ete(t,e,n){return t.useStore(i=>{const s=pt(pt({},n),i.data);return Ste(s,e)},Vp)}function UF(t=3){const e=R.useRef(null),n=R.useRef(null),[r,i]=R.useState(!1),s=R.useCallback(()=>i(!0),[]),o=R.useCallback(()=>i(!1),[]);return R.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:u}=e.current.getBoundingClientRect(),{height:c}=n.current.getBoundingClientRect(),f=a+c>window.innerHeight-40?"up":"down";n.current.style.position="fixed",n.current.style.zIndex="10000",n.current.style.left=u+"px",f==="down"?n.current.style.top=a+t+"px":n.current.style.bottom=window.innerHeight-l+t+"px"}},[t,r]),{popinRef:e,wrapperRef:n,shown:r,show:s,hide:o}}LZ([kZ]);const Cte={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Si.extend({color:()=>t=>ii(t).isValid()});const Tte=t=>Si().color().test(t);function NF(t,{format:e,hasAlpha:n,isString:r}){const i=Cte[e]+(r&&e!=="hex"?"String":""),s=t[i]();return typeof s=="object"&&!n?qQ(s,["a"]):s}const zF=(t,e)=>{const n=ii(t);if(!n.isValid())throw Error("Invalid color");return NF(n,e)},Rte=(t,e)=>NF(ii(t),pt(pt({},e),{},{isString:!0,format:"hex"})),Pte=({value:t})=>{const e=DZ(t),n=e==="name"?"hex":e,r=typeof t=="object"?"a"in t:e==="hex"&&t.length===8||/^(rgba)|(hsla)|(hsva)/.test(t),i={format:n,hasAlpha:r,isString:typeof t=="string"};return{value:zF(t,i),settings:i}};var Bte=Object.freeze({__proto__:null,schema:Tte,sanitize:zF,format:Rte,normalize:Pte});const Ite=ht("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Dte=ht("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Lte=ht("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function kR(t,e){return e!=="rgb"?ii(t).toRgb():t}function kte({value:t,displayValue:e,settings:n,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=$r(),{format:o,hasAlpha:a}=n,{popinRef:l,wrapperRef:u,shown:c,show:f,hide:h}=UF(),m=R.useRef(0),[g,v]=R.useState(()=>kR(t,o)),y=a?HZ:WZ,_=()=>{v(kR(t,o)),f(),i()},x=()=>{h(),s(),window.clearTimeout(m.current)},w=()=>{m.current=window.setTimeout(x,500)};return R.useEffect(()=>()=>window.clearTimeout(m.current),[]),ee.createElement(ee.Fragment,null,ee.createElement(Ite,{ref:l,active:c,onClick:()=>_(),style:{color:e}}),c&&ee.createElement(XA,null,ee.createElement(aF,{onPointerUp:x}),ee.createElement(Lte,{ref:u,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:b=>b.buttons===0&&w()},ee.createElement(y,{color:g,onChange:r}))))}function Fte(){const{value:t,displayValue:e,label:n,onChange:r,onUpdate:i,settings:s}=$r();return ee.createElement(ws,{input:!0},ee.createElement(Xs,null,n),ee.createElement(Dte,null,ee.createElement(kte,{value:t,displayValue:e,onChange:r,onUpdate:i,settings:s}),ee.createElement(JA,{value:e,onChange:r,onUpdate:i})))}var Ote=pt({component:Fte},Bte);function Ute(){const{label:t,displayValue:e,onUpdate:n,settings:r}=$r();return ee.createElement(ws,{input:!0},ee.createElement(Xs,null,t),ee.createElement(YA,{value:e,settings:r,onUpdate:n}))}var Nte=pt({component:Ute},mF(["x","y","z"]));const zte=ht("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),Gte=ht("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Hte({value:t,settings:e,onUpdate:n}){const r=R.useRef(),i=R.useRef(0),s=R.useRef(0),o=R.useRef(1),[a,l]=R.useState(!1),[u,c]=R.useState(!1),[f,h]=uF(),m=R.useRef(null),g=R.useRef(null);R.useLayoutEffect(()=>{if(a){const{top:O,left:U,width:N,height:$}=m.current.getBoundingClientRect();g.current.style.left=U+N/2+"px",g.current.style.top=O+$/2+"px"}},[a]);const{keys:[v,y],joystick:_}=e,x=_==="invertY"?1:-1,{[v]:{step:w},[y]:{step:b}}=e,E=Yo("sizes","joystickWidth"),C=Yo("sizes","joystickHeight"),P=parseFloat(E)*.8/2,M=parseFloat(C)*.8/2,B=R.useCallback(()=>{r.current||(c(!0),i.current&&h({x:i.current*P}),s.current&&h({y:s.current*-M}),r.current=window.setInterval(()=>{n(O=>{const U=w*i.current*o.current,N=x*b*s.current*o.current;return Array.isArray(O)?{[v]:O[0]+U,[y]:O[1]+N}:{[v]:O[v]+U,[y]:O[y]+N}})},16))},[P,M,n,h,w,b,v,y,x]),D=R.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,c(!1)},[]);R.useEffect(()=>{function O(U){o.current=Jk(U)}return window.addEventListener("keydown",O),window.addEventListener("keyup",O),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",O),window.removeEventListener("keyup",O)}},[]);const k=jp(({first:O,active:U,delta:[N,$],movement:[Q,ie]})=>{O&&l(!0);const F=ol(Q,-P,P),z=ol(ie,-M,M);i.current=Math.abs(Q)>Math.abs(F)?Math.sign(Q-F):0,s.current=Math.abs(ie)>Math.abs(z)?Math.sign(z-ie):0;let j=t[v],H=t[y];U?(i.current||(j+=N*w*o.current,h({x:F})),s.current||(H-=x*$*b*o.current,h({y:z})),i.current||s.current?B():D(),n({[v]:j,[y]:H})):(l(!1),i.current=0,s.current=0,h({x:0,y:0}),D())});return ee.createElement(zte,Gn({ref:m},k()),a&&ee.createElement(XA,null,ee.createElement(Gte,{ref:g,isOutOfBounds:u},ee.createElement("div",null),ee.createElement("span",{ref:f}))))}const Vte=ht("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Wte(){const{label:t,displayValue:e,onUpdate:n,settings:r}=$r();return ee.createElement(ws,{input:!0},ee.createElement(Xs,null,t),ee.createElement(Vte,{withJoystick:!!r.joystick},r.joystick&&ee.createElement(Hte,{value:e,settings:r,onUpdate:n}),ee.createElement(YA,{value:e,settings:r,onUpdate:n})))}const jte=["joystick"],GF=mF(["x","y"]),$te=t=>{let{joystick:e=!0}=t,n=ln(t,jte);const{value:r,settings:i}=GF.normalize(n);return{value:r,settings:pt(pt({},i),{},{joystick:e})}};var Jte=pt(pt({component:Wte},GF),{},{normalize:$te});const Xte=t=>{if(t!==void 0){if(t instanceof File)try{return URL.createObjectURL(t)}catch{return}if(typeof t=="string"&&t.indexOf("blob:")===0)return t;throw Error("Invalid image format [undefined | blob |File].")}},Kte=(t,e)=>typeof e=="object"&&"image"in e,Yte=({image:t})=>({value:t});var Qte=Object.freeze({__proto__:null,sanitize:Xte,schema:Kte,normalize:Yte});const qte=ht("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Zte=ht("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),ene=ht("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),tne=ht("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),nne=ht("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),rne=ht("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function ine(){const{label:t,value:e,onUpdate:n,disabled:r}=$r(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:l}=UF(),u=R.useCallback(g=>{g.length&&n(g[0])},[n]),c=R.useCallback(g=>{g.stopPropagation(),n(void 0)},[n]),{getRootProps:f,getInputProps:h,isDragAccept:m}=LF({maxFiles:1,accept:"image/*",onDrop:u,disabled:r});return ee.createElement(ws,{input:!0},ee.createElement(Xs,null,t),ee.createElement(qte,null,ee.createElement(ene,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&ee.createElement(XA,null,ee.createElement(aF,{onPointerUp:l,style:{cursor:"pointer"}}),ee.createElement(tne,{ref:s,style:{backgroundImage:`url(${e})`}})),ee.createElement(Zte,f({isDragAccept:m}),ee.createElement("input",h()),ee.createElement(nne,null,m?"drop image":"click or drop")),ee.createElement(rne,{onClick:c,disabled:!e})))}var sne=pt({component:ine},Qte);const FR=Si().number(),one=(t,e)=>Si().array().length(2).every.number().test(t)&&Si().schema({min:FR,max:FR}).test(e),bv=t=>({min:t[0],max:t[1]}),HF=(t,{bounds:[e,n]},r)=>{const i=Array.isArray(t)?bv(t):t,s={min:r[0],max:r[1]},{min:o,max:a}=pt(pt({},s),i);return[ol(Number(o),e,Math.max(e,a)),ol(Number(a),Math.min(n,o),n)]},ane=({value:t,min:e,max:n})=>{const r={min:e,max:n},i=pF(bv(t),{min:r,max:r}),s=[e,n],o=pt(pt({},i),{},{bounds:s});return{value:HF(bv(t),o,t),settings:o}};var lne=Object.freeze({__proto__:null,schema:one,format:bv,sanitize:HF,normalize:ane});const une=["value","bounds","onDrag"],cne=["bounds"],fne=ht("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function dne(t){let{value:e,bounds:[n,r],onDrag:i}=t,s=ln(t,une);const o=R.useRef(null),a=R.useRef(null),l=R.useRef(null),u=R.useRef(0),c=Yo("sizes","scrubberWidth"),f=jp(({event:g,first:v,xy:[y],movement:[_],memo:x={}})=>{if(v){const{width:b,left:E}=o.current.getBoundingClientRect();u.current=b-parseFloat(c);const C=(g==null?void 0:g.target)===a.current||(g==null?void 0:g.target)===l.current;x.pos=yv((y-E)/b,n,r);const P=Math.abs(x.pos-e.min)-Math.abs(x.pos-e.max);x.key=P<0||P===0&&x.pos<=e.min?"min":"max",C&&(x.pos=e[x.key])}const w=x.pos+yv(_/u.current,0,r-n);return i({[x.key]:zq(w,s[x.key])}),x}),h=`calc(${vv(e.min,n,r)} * (100% - ${c} - 8px) + 4px)`,m=`calc(${1-vv(e.max,n,r)} * (100% - ${c} - 8px) + 4px)`;return ee.createElement(fF,Gn({ref:o},f()),ee.createElement(cF,null,ee.createElement(dF,{style:{left:h,right:m}})),ee.createElement(_S,{position:"left",ref:a,style:{left:h}}),ee.createElement(_S,{position:"right",ref:l,style:{right:m}}))}function hne(){const{label:t,displayValue:e,onUpdate:n,settings:r}=$r(),i=ln(r,cne);return ee.createElement(ee.Fragment,null,ee.createElement(ws,{input:!0},ee.createElement(Xs,null,t),ee.createElement(fne,null,ee.createElement(dne,Gn({value:e},r,{onDrag:n})),ee.createElement(YA,{value:e,settings:i,onUpdate:n,innerLabelTrim:0}))))}var pne=pt({component:hne},lne);const mne=()=>{const t=new Map;return{on:(e,n)=>{let r=t.get(e);r===void 0&&(r=new Set,t.set(e,r)),r.add(n)},off:(e,n)=>{const r=t.get(e);r!==void 0&&(r.delete(n),r.size===0&&t.delete(e))},emit:(e,...n)=>{const r=t.get(e);if(r!==void 0)for(const i of r)i(...n)}}},gne=["type","value"],vne=["onChange","transient","onEditStart","onEditEnd"],yne=function(){const e=Nee(zee(()=>({data:{}}))),n=mne();this.storeId=YQ(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(r).forEach(([c,f])=>{f.render&&a.some(h=>h.indexOf(c)===0)&&!f.render(this.get)&&l.push(c+".")});const u=[];return i.forEach(c=>{c in o&&o[c].__refCount>0&&l.every(f=>c.indexOf(f)===-1)&&(!o[c].render||o[c].render(this.get))&&u.push(c)}),u},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(u=>{if(u in l){const c=l[u];c.__refCount--,c.__refCount===0&&c.type in Ns&&delete l[u]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([c,f])=>{let h=u[c];if(h){const{type:m,value:g}=f,v=ln(f,gne);m!==h.type?Wo(Pn.INPUT_TYPE_OVERRIDE,m):((h.__refCount===0||a)&&Object.assign(h,v),h.__refCount++)}else u[c]=pt(pt({},f),{},{__refCount:1})}),{data:u}})},this.setValueAtPath=(o,a,l)=>{e.setState(u=>{const c=u.data;return sR(c[o],a,o,this,l),{data:c}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].settings=pt(pt({},u[o].settings),a),{data:u}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].disabled=a,{data:u}})},this.set=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([c,f])=>{try{sR(u[c],f,void 0,void 0,a)}catch{}}),{data:u}})},this.getInput=o=>{try{return this.getData()[o]}catch{Wo(Pn.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{n.emit(`onEditStart:${o}`,this.get(o),o,pt(pt({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{n.emit(`onEditEnd:${o}`,this.get(o),o,pt(pt({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return n.on(l,a),()=>n.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return n.on(l,a),()=>n.off(l,a)};const s=(o,a,l)=>{const u={};return Object.entries(o).forEach(([c,f])=>{if(c==="")return Wo(Pn.EMPTY_KEY);let h=rM(a,c);if(f.type===Ns.FOLDER){const m=s(f.schema,h,l);Object.assign(u,m),h in r||(r[h]=f.settings)}else if(c in l)Wo(Pn.DUPLICATE_KEYS,c,h,l[c].path);else{const m=iq(f,c,h,u);if(m){const{type:g,options:v,input:y}=m,{onChange:_,transient:x,onEditStart:w,onEditEnd:b}=v,E=ln(v,vne);u[h]=pt(pt(pt({type:g},E),y),{},{fromPanel:!0}),l[c]={path:h,onChange:_,transient:x,onEditStart:w,onEditEnd:b}}else Wo(Pn.UNKNOWN_INPUT,h,f)}}),u};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},VF=new yne,xne={collapsed:!1};function _ne(t,e){return{type:Ns.FOLDER,schema:t,settings:pt(pt({},xne),e)}}const OR=t=>"__levaInput"in t,wne=(t,e)=>{const n={},r=e?e.toLowerCase():null;return t.forEach(i=>{const[s,o]=wte(i);(!r||s.toLowerCase().indexOf(r)>-1)&&_te(n,o,{[s]:{__levaInput:!0,path:i}})}),n},Sne=["type","label","path","valueKey","value","settings","setValue","disabled"];function bne(t){let{type:e,label:n,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:l}=t,u=ln(t,Sne);const{displayValue:c,onChange:f,onUpdate:h}=lF({type:e,value:s,settings:o,setValue:a}),m=Bu[e].component;return m?ee.createElement(qk.Provider,{value:pt({key:i,path:r,id:""+r,label:n,displayValue:c,value:s,onChange:f,onUpdate:h,settings:o,setValue:a,disabled:l},u)},ee.createElement(Aq,{disabled:l},ee.createElement(m,null))):(Wo(Pn.NO_COMPONENT_FOR_TYPE,e,r),null)}const Ane=ht("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Mne({onClick:t,settings:e,label:n}){const r=Wp();return ee.createElement(ws,null,ee.createElement(Ane,{disabled:e.disabled,onClick:()=>t(r.get)},n))}const Ene=ht("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),Cne=ht("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),Tne=({label:t,opts:e})=>{let n=typeof t=="string"&&t.trim()===""?null:t,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(n=e.label),r=e.opts),{label:n,opts:r}};function Rne(t){const{label:e,opts:n}=Tne(t),r=Wp();return ee.createElement(ws,{input:!!e},e&&ee.createElement(Xs,null,e),ee.createElement(Ene,null,Object.entries(n).map(([i,s])=>ee.createElement(Cne,{key:i,onClick:()=>s(r.get)},i))))}const Pne=ht("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),WF=100;function Bne(t,e){t.push(e),t.length>WF&&t.shift()}const Ine=R.forwardRef(function({initialValue:t},e){const n=Yo("colors","highlight3"),r=Yo("colors","elevation2"),i=Yo("colors","highlight1"),[s,o]=R.useMemo(()=>[ii(i).alpha(.4).toRgbString(),ii(i).alpha(.1).toRgbString()],[i]),a=R.useRef([t]),l=R.useRef(t),u=R.useRef(t),c=R.useRef(),f=R.useCallback((g,v)=>{if(!g)return;const{width:y,height:_}=g,x=new Path2D,w=y/WF,b=_*.05;for(let P=0;P<a.current.length;P++){const M=vv(a.current[P],l.current,u.current),B=w*P,D=_-M*(_-b*2)-b;x.lineTo(B,D)}v.clearRect(0,0,y,_);const E=new Path2D(x);E.lineTo(w*(a.current.length+1),_),E.lineTo(0,_),E.lineTo(0,0);const C=v.createLinearGradient(0,0,0,_);C.addColorStop(0,s),C.addColorStop(1,o),v.fillStyle=C,v.fill(E),v.strokeStyle=r,v.lineJoin="round",v.lineWidth=14,v.stroke(x),v.strokeStyle=n,v.lineWidth=2,v.stroke(x)},[n,r,s,o]),[h,m]=Dq(f);return R.useImperativeHandle(e,()=>({frame:g=>{(l.current===void 0||g<l.current)&&(l.current=g),(u.current===void 0||g>u.current)&&(u.current=g),Bne(a.current,g),c.current=requestAnimationFrame(()=>f(h.current,m.current))}}),[h,m,f]),R.useEffect(()=>()=>cancelAnimationFrame(c.current),[]),ee.createElement(Pne,{ref:h})}),UR=t=>Number.isFinite(t)?t.toPrecision(2):t.toString(),Dne=R.forwardRef(function({initialValue:t},e){const[n,r]=R.useState(UR(t));return R.useImperativeHandle(e,()=>({frame:i=>r(UR(i))}),[]),ee.createElement("div",null,n)});function NR(t){return typeof t=="function"?t():t.current}function Lne({label:t,objectOrFn:e,settings:n}){const r=R.useRef(),i=R.useRef(NR(e));return R.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(NR(e))},n.interval);return()=>window.clearInterval(s)},[e,n.interval]),ee.createElement(ws,{input:!0},ee.createElement(Xs,{align:"top"},t),n.graph?ee.createElement(Ine,{ref:r,initialValue:i.current}):ee.createElement(Dne,{ref:r,initialValue:i.current}))}const kne=["type","label","key"],Fne={[Ns.BUTTON]:Mne,[Ns.BUTTON_GROUP]:Rne,[Ns.MONITOR]:Lne},One=ee.memo(({path:t})=>{const[e,{set:n,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=kq(t);if(!e)return null;const{type:l,label:u,key:c}=e,f=ln(e,kne);if(l in Ns){const h=Fne[l];return ee.createElement(h,Gn({label:u,path:t},f))}return l in Bu?ee.createElement(bne,Gn({key:s+t,type:l,label:u,storeId:s,path:t,valueKey:c,setValue:n,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a},f)):(HQ(Pn.UNSUPPORTED_INPUT,l,t),null)});function Une({toggle:t,toggled:e,name:n}){return ee.createElement(wq,{onClick:()=>t()},ee.createElement(KA,{toggled:e}),ee.createElement("div",null,n))}const Nne=({name:t,path:e,tree:n})=>{const r=Wp(),i=rM(e,t),{collapsed:s,color:o}=r.getFolderSettings(i),[a,l]=R.useState(!s),u=R.useRef(null),c=Yo("colors","folderWidgetColor"),f=Yo("colors","folderTextColor");return R.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",o||c),u.current.style.setProperty("--leva-colors-folderTextColor",o||f)},[o,c,f]),ee.createElement(xv,{ref:u},ee.createElement(Une,{name:t,toggled:a,toggle:()=>l(h=>!h)}),ee.createElement(jF,{parent:i,tree:n,toggled:a}))},jF=ee.memo(({isRoot:t=!1,fill:e=!1,flat:n=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=Ate(s),l=Wp(),u=([f,h])=>{var m;return(OR(h)?(m=l.getInput(h.path))===null||m===void 0?void 0:m.order:l.getFolderSettings(rM(r,f)).order)||0},c=Object.entries(i).sort((f,h)=>u(f)-u(h));return ee.createElement(yS,{ref:o,isRoot:t,fill:e,flat:n},ee.createElement(iF,{ref:a,isRoot:t,toggled:s},c.map(([f,h])=>OR(h)?ee.createElement(One,{key:h.path,valueKey:h.valueKey,path:h.path}):ee.createElement(Nne,{key:f,name:f,path:r,tree:h}))))}),zne=ht("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${oF}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),$F=40,Av=ht("i",{$flexCenter:"",width:$F,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),Gne=ht("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),Hne=ht("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Av}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),Vne=ht("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),Wne=ht("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:$F}}}}),jne=ee.forwardRef(({setFilter:t,toggle:e},n)=>{const[r,i]=R.useState(""),s=R.useMemo(()=>$k(t,250),[t]),o=()=>{t(""),i("")},a=l=>{const u=l.currentTarget.value;e(!0),i(u)};return R.useEffect(()=>{s(r)},[r,s]),ee.createElement(ee.Fragment,null,ee.createElement(Vne,{ref:n,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),ee.createElement(Av,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},ee.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function $ne({setFilter:t,onDrag:e,onDragStart:n,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:l,from:u}){const[c,f]=R.useState(!1),h=R.useRef(null);R.useEffect(()=>{var g,v;c?(g=h.current)===null||g===void 0||g.focus():(v=h.current)===null||v===void 0||v.blur()},[c]);const m=jp(({offset:[g,v],first:y,last:_})=>{e({x:g,y:v}),y&&n({x:g,y:v}),_&&r({x:g,y:v})},{filterTaps:!0,from:({offset:[g,v]})=>[(u==null?void 0:u.x)||g,(u==null?void 0:u.y)||v]});return R.useEffect(()=>{const g=v=>{v.key==="L"&&v.shiftKey&&v.metaKey&&f(y=>!y)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]),ee.createElement(ee.Fragment,null,ee.createElement(Gne,{mode:a?"drag":void 0},ee.createElement(Av,{active:!s,onClick:()=>i()},ee.createElement(KA,{toggled:s,width:12,height:8})),ee.createElement(Wne,Gn({},a?m():{},{drag:a,filterEnabled:l}),o===void 0&&a?ee.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},ee.createElement("circle",{cx:"2",cy:"2",r:"2"}),ee.createElement("circle",{cx:"14",cy:"2",r:"2"}),ee.createElement("circle",{cx:"26",cy:"2",r:"2"}),ee.createElement("circle",{cx:"2",cy:"12",r:"2"}),ee.createElement("circle",{cx:"14",cy:"12",r:"2"}),ee.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&ee.createElement(Av,{active:c,onClick:()=>f(g=>!g)},ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},ee.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),ee.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),ee.createElement(Hne,{toggled:c},ee.createElement(jne,{ref:h,setFilter:t,toggle:i})))}const Jne=["store","hidden","theme","collapsed"];function Xne(t){let{store:e,hidden:n=!1,theme:r,collapsed:i=!1}=t,s=ln(t,Jne);const o=OF(()=>mq(r),[r]),[a,l]=R.useState(!i),u=typeof i=="object"?!i.collapsed:a,c=R.useMemo(()=>typeof i=="object"?f=>{typeof f=="function"?i.onChange(!f(!i.collapsed)):i.onChange(!f)}:l,[i]);return!e||n?null:ee.createElement($A.Provider,{value:o},ee.createElement(Kne,Gn({store:e},s,{toggled:u,setToggle:c,rootClass:o.className})))}const Kne=ee.memo(({store:t,rootClass:e,fill:n=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:u})=>{var c,f;const h=Mte(t),[m,g]=R.useState(""),v=R.useMemo(()=>wne(h,m),[h,m]),[y,_]=uF(),x=i||h.length>0,w=typeof o=="object"&&o.title||void 0,b=typeof o=="object"&&(c=o.drag)!==null&&c!==void 0?c:!0,E=typeof o=="object"&&(f=o.filter)!==null&&f!==void 0?f:!0,C=typeof o=="object"&&o.position||void 0,P=typeof o=="object"&&o.onDrag||void 0,M=typeof o=="object"&&o.onDragStart||void 0,B=typeof o=="object"&&o.onDragEnd||void 0;return ee.useEffect(()=>{_({x:C==null?void 0:C.x,y:C==null?void 0:C.y})},[C,_]),pq(),ee.createElement(eF.Provider,{value:{hideCopyButton:a}},ee.createElement(zne,{ref:y,className:e,fill:n,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:x?"block":"none"}},o&&ee.createElement($ne,{onDrag:D=>{_(D),P==null||P(D)},onDragStart:D=>M==null?void 0:M(D),onDragEnd:D=>B==null?void 0:B(D),setFilter:g,toggle:D=>u(k=>D??!k),toggled:l,title:w,drag:b,filterEnabled:E,from:C}),x&&ee.createElement(Zk.Provider,{value:t},ee.createElement(jF,{isRoot:!0,fill:n,flat:r,tree:v,toggled:l}))))}),Yne=["isRoot"];let Mv=!1,iu=null;function Qne(t){let{isRoot:e=!1}=t,n=ln(t,Yne);return R.useEffect(()=>(Mv=!0,!e&&iu&&(iu.remove(),iu=null),()=>{e||(Mv=!1)}),[e]),ee.createElement(Xne,Gn({store:VF},n))}function qne(t){R.useEffect(()=>{t&&!Mv&&(iu||(iu=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(iu),oq(ee.createElement(Qne,{isRoot:!0}),iu))),Mv=!0)},[t])}function Zne(t,e,n,r,i){let s,o,a,l,u;return typeof t=="string"?(o=t,s=e,Array.isArray(n)?u=n:n&&("store"in n?(l=n,u=r):(a=n,Array.isArray(r)?u=r:(l=r,u=i)))):(s=t,Array.isArray(e)?u=e:(l=e,u=n)),{schema:s,folderName:o,folderSettings:a,hookSettings:l,deps:u||[]}}function ere(t,e,n,r,i){const{folderName:s,schema:o,folderSettings:a,hookSettings:l,deps:u}=Zne(t,e,n,r,i),c=typeof o=="function",f=R.useRef(!1),h=R.useRef(!0),m=OF(()=>{f.current=!0;const k=typeof o=="function"?o():o;return s?{[s]:_ne(k,a)}:k},u),g=!(l!=null&&l.store);qne(g);const[v]=R.useState(()=>(l==null?void 0:l.store)||VF),[y,_]=R.useMemo(()=>v.getDataFromSchema(m),[v,m]),[x,w,b,E,C]=R.useMemo(()=>{const k=[],O=[],U={},N={},$={};return Object.values(_).forEach(({path:Q,onChange:ie,onEditStart:F,onEditEnd:z,transient:j})=>{k.push(Q),ie?(U[Q]=ie,j||O.push(Q)):O.push(Q),F&&(N[Q]=F),z&&($[Q]=z)}),[k,O,U,N,$]},[_]),P=R.useMemo(()=>v.orderPaths(x),[x,v]),M=Ete(v,w,y),B=R.useCallback(k=>{const O=Object.entries(k).reduce((U,[N,$])=>Object.assign(U,{[_[N].path]:$}),{});v.set(O,!1)},[v,_]),D=R.useCallback(k=>v.get(_[k].path),[v,_]);return R.useEffect(()=>{const k=!h.current&&f.current;return v.addData(y,k),h.current=!1,f.current=!1,()=>v.disposePaths(P)},[v,P,y]),R.useEffect(()=>{const k=[];return Object.entries(b).forEach(([O,U])=>{U(v.get(O),O,pt({initial:!0,get:v.get},v.getInput(O)));const N=v.useStore.subscribe($=>{const Q=$.data[O];return[Q.disabled?void 0:Q.value,Q]},([$,Q])=>U($,O,pt({initial:!1,get:v.get},Q)),{equalityFn:Vp});k.push(N)}),()=>k.forEach(O=>O())},[v,b]),R.useEffect(()=>{const k=[];return Object.entries(E).forEach(([O,U])=>k.push(v.subscribeToEditStart(O,U))),Object.entries(C).forEach(([O,U])=>k.push(v.subscribeToEditEnd(O,U))),()=>k.forEach(O=>O())},[E,C,v]),c?[M,B,D]:M}la(Ws.SELECT,qq);la(Ws.IMAGE,sne);la(Ws.NUMBER,Hq);la(Ws.COLOR,Ote);la(Ws.STRING,aZ);la(Ws.BOOLEAN,pZ);la(Ws.INTERVAL,pne);la(Ws.VECTOR3D,Nte);la(Ws.VECTOR2D,Jte);Ip({UnrealBloomPass:SA});function tre(){Qe(u=>u.setDimensions);const t=R.useRef();R.useRef();const e=R.useRef();iW(),R.useState([100,10]),R.useState(.3),R.useState(iY);const n=Qe(u=>u.activeRing);Qe(u=>u.currentView),Qe(u=>u.cameraControlsMouseButtons),Qe(u=>u.setActiveTile),Qe(u=>u.setCameraControlsref),Qe(u=>u.getUniverseStores)(),R.useEffect(()=>{},[]);function i(u){console.log(t.current);let c={};c.position=e.current.position.clone(),c.target=t.current.target.clone(),console.log(c)}const{intensity:s,radius:o,cameraFov:a,boundsMargin:l}=ere({intensity:{value:.69,min:0,max:1.5,step:.01},radius:{value:1,min:0,max:1,step:.01},cameraFov:{value:35,min:0,max:200,step:.01}});return ge.jsxs(ge.Fragment,{children:[n!="none"?ge.jsx(rre,{}):ge.jsx(ge.Fragment,{}),ge.jsx(qK,{}),ge.jsxs(WV,{className:"relative",style:{height:"100vh"},children:[ge.jsx("ambientLight",{intensity:2}),ge.jsx(qj,{ref:e,aspect:window.innerWidth/window.innerHeight,fov:a,position:[-75,105,324],makeDefault:!0}),ge.jsx(Zj,{makeDefault:!0,ref:t,onEnd:u=>i()}),ge.jsx(e3,{files:"./environment/nedula.hdr",background:!0,blur:.05,rotation:5}),ge.jsx("color",{attach:"background",args:["#191920"],opacity:1}),ge.jsx("fog",{attach:"fog",args:["#000000",200,1500]}),ge.jsx("hemisphereLight",{color:"white",groundColor:"#ff0f00",position:[-7,25,13],intensity:1}),ge.jsx(e3,{files:"./environment/nedula_bright.hdr",blur:.1}),ge.jsx(r$,{damping:5,margin:6,children:ge.jsx(nre,{cameraRef:e,orbitControlsRef:t})}),ge.jsxs(Xj,{disableGamma:!0,children:[ge.jsx("unrealBloomPass",{threshold:1,strength:s,radius:o}),ge.jsx(YJ,{eskil:!1,offset:.5,darkness:1})]}),ge.jsx(d$,{radius:200,depth:100,count:5e3,saturation:100,speed:1})]})]})}function nre(t){const{cameraRef:e,orbitControlsRef:n}=t,[r,i]=dK(),s=Qe(x=>x.currentView,xi),o=Qe(x=>x.activeRing,xi),a=Qe(x=>x.activeTile,xi),l=Qe(x=>x.focusElementRef,xi);Qe(x=>x.setFocusElementRef,xi);const u=Qe(x=>x.ringNames),c=Qe(x=>x.setUpdateBounds);function f(x){const{position:w,target:b}=x,{xPos:E,yPos:C,zPos:P}=w,{xTar:M,yTar:B,zTar:D}=b;g.to({position:[E,C,P],target:[M,B,D]})}c(f),jr(x=>{const w=x.clock.getElapsedTime();a||r.current.rotation.set(Math.cos(w/8)/8,Math.sin(w/8)/16,-.2-Math.sin(w/3)/30)});const h=Qe(x=>x.getUniverseStores),{sectionPositions:m}=h(),g=i$(),[v,y]=R.useState(!1);R.useEffect(()=>{v||y(!0)},[]),R.useEffect(()=>{if(s=="page"){let[x,w,b]=[R0.focus[o].position.x,R0.focus[o].position.y,R0.focus[o].position.z],{x:E,y:C,z:P}=m[o];g.to({position:[x,w,b],target:[E,C,P]})}},[s]);function _(){console.log("forceLeft");let[x,w,b]=[e.current.position.x,e.current.position.y,e.current.position.z],[E,C,P]=[n.current.target.x,n.current.target.y,n.current.target.z];g.to({position:[x,w,b],target:[E,C,P]})}return R.useEffect(()=>{l&&(g.refresh(l.current),g.fit(),lY(10).then(()=>{_()}))},[l]),ge.jsxs("group",{ref:r,children:[ge.jsx(sY,{visible:s=="page",sectionName:u[o]}),ge.jsx("group",{ref:i,children:ge.jsx(XK,{})})]})}function rre(t){const e=Qe(o=>o.setActiveRing),n=Qe(o=>o.setCurrentView),r=Qe(o=>o.setActiveTile);Qe(o=>o.activeRing,xi),Qe(o=>o.ringNames);const i=Qe(o=>o.currentView,xi),s=Qe(o=>o.updateBounds,xi);return ge.jsx("div",{className:"wrap absolute z-40 h-screen  items-center pl-10 pr-10 grad-left flex  w-1/4 ",children:ge.jsxs("div",{className:"content text-white ",children:[ge.jsx("div",{className:"back pb-6 pointer-events-auto cursor-pointer",onClick:()=>{e("none"),n("main"),r(null);let[o,a,l]=[-75,105,324];s({position:{xPos:o,yPos:a,zPos:l},target:{xTar:0,yTar:0,zTar:0}})},children:ge.jsx("span",{className:"uppercase font-bold tracking-wider",children:"Back"})}),i=="page"?ge.jsx(ge.Fragment,{children:ge.jsx("div",{className:""})}):ge.jsx(ge.Fragment,{})]})})}a_.createRoot(document.getElementById("root")).render(ge.jsx(ee.StrictMode,{children:ge.jsx(tre,{})}));
